{
    "username": "yh157612",
    "submission": "use std::collections::*;\n\nfn dfs1(adj: &Vec<Vec<usize>>, u: usize, parent: usize, height: &mut HashMap<(usize, usize), i32>) -> i32 {\n    let mut res = 0;\n    for &v in &adj[u] {\n        if v == parent {\n            continue;\n        }\n        let h = dfs1(adj, v, u, height) + if v % 2 == 1 { 1 } else { 2 };\n        height.insert((u, v), h);\n        res = res.max(h);\n    }\n    res\n}\n\nfn dfs2(adj: &Vec<Vec<usize>>, u: usize, parent: usize, top: i32, height: &mut HashMap<(usize, usize), i32>) {\n    let mut max_h = 0;\n    let mut max_v = 0;\n    for &v in &adj[u] {\n        if v == parent {\n            continue;\n        }\n        if height[&(u, v)] > max_h {\n            max_h = height[&(u, v)];\n            max_v = v;\n        }\n    }\n    let mut second_max_h = 0;\n    for &v in &adj[u] {\n        if v == parent || v == max_v {\n            continue;\n        }\n        second_max_h = second_max_h.max(height[&(u, v)]);\n    }\n    for &v in &adj[u] {\n        if v == parent { continue; }\n        if v == max_v {\n            let new_top = top.max(second_max_h) + if u % 2 == 1 {1} else {2};\n            height.insert((v, u), new_top);\n            dfs2(adj, v, u, new_top, height);\n        } else {\n            let new_top = top.max(max_h) + if u % 2 == 1 {1} else {2};\n            height.insert((v, u), new_top);\n            dfs2(adj, v, u, new_top, height);\n        }\n    }\n}\n\nimpl Solution {\n    pub fn time_taken(edges: Vec<Vec<i32>>) -> Vec<i32> {\n        let n = edges.len() + 1;\n        let mut adj = vec![vec![]; n];\n        for e in &edges {\n            let u = e[0] as usize;\n            let v = e[1] as usize;\n            adj[u].push(v);\n            adj[v].push(u);\n        }\n\n        let mut height = HashMap::new();\n        dfs1(&adj, 0, 0, &mut height);\n        dfs2(&adj, 0, 0, 0, &mut height);\n\n        let mut result = vec![0; n];\n        for i in 0..n {\n            let mut res = 0;\n            for &next in &adj[i] {\n                res = res.max(height[&(i, next)]);\n            }\n            result[i] = res;\n        }\n        result\n    }\n}",
    "submit_ts": "1722699896",
    "subm_id": "1343225596"
}