{
    "username": "Siddharth_Joshi",
    "submission": "#define f first\n#define s second\n#define pb push_back\n#define all(x) x.begin(),x.end()\n#define sz(x) (long long)(x).size()\n#define pii pair<long long,long long>\n\ntemplate <class T> class SegmentTree {\n  private:\n    const T DEFAULT =(1<<30)-1;\n    vector<T> segtree;\n    long long len;\n\n  public:\n        T f(T a, T b) { return a&b; }\n    SegmentTree(long long len) : len(len), segtree(len * 2, DEFAULT) {}\n    void set(long long ind, T val) {\n        ind += len;\n        segtree[ind] = val;\n        for (; ind > 1; ind /= 2) {\n            segtree[ind / 2] = f(segtree[ind], segtree[ind ^ 1]);\n        }\n    }\n    T range(long long start, long long end) {\n        T sum = DEFAULT;\n        for (start += len, end += len; start < end; start /= 2, end /= 2) {\n            if (start % 2 == 1) { sum = f(sum, segtree[start++]); }\n            if (end % 2 == 1) { sum = f(sum, segtree[--end]); }\n        }\n        return sum;\n    }\n};\n\nclass Solution {\npublic:\n    long long countSubarrays(vector<int> nums, int k) {\n        long long n=sz(nums);\n        SegmentTree<long long> seg(n);\n        for(long long i=0;i<n;i++){\n            seg.set(i,nums[i]);\n        }\n        long long L,R,ans=0;\n        for(long long i=0;i<n;i++){\n            long long l=i,r=n,mid;\n            while(r-l>1){\n                mid=(l+r)/2;\n                if(seg.range(i,mid)>=k){\n                    l=mid;\n                }\n                else{\n                    r=mid;\n                }\n            }\n            R=-1;\n            for(int j=max(r-10,i);j<min(r+10,n);j++){\n                if(seg.range(i,j+1)==k){\n                    R=j;\n                }\n            }\n            l=i,r=n;\n            while(r-l>1){\n                mid=(l+r)/2;\n                if(seg.range(i,mid)>k){\n                    l=mid;\n                }\n                else{\n                    r=mid;\n                }\n            }\n            L=-1;\n            for(int j=max(l-10,i);j<min(l+10,n);j++){\n                if(seg.range(i,j+1)==k){\n                    L=j;\n                    break;\n                }\n            }\n            if(L==-1)continue;\n            ans+=max(R,L)-min(R,L)+1;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279880",
    "subm_id": "1311768771"
}