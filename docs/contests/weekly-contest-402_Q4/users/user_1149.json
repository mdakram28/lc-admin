{
    "username": "i3eautiful-gausssbv",
    "submission": "class SegmentTree:\n    def __init__(self, n,arr):\n        self.arr= [0]*(4*n)\n        self.n=n\n        self.ori=arr\n        self.build(1,1,n,arr)\n    def update(self,node,l,r,idx,v):\n        if l == r == idx:\n            self.ori[l-1]=v\n            if l == 1:\n                pass\n            elif l == self.n:\n                pass\n            else:\n                if  self.ori[l-1] > max(self.ori[l], self.ori[l-2]):\n                    self.arr[node] = 1\n                else:\n                    self.arr[node] = 0\n            return \n        mid = l+(r-l)//2\n        if mid >= idx:\n            self.update(node*2,l,mid,idx,v)\n        else:\n            self.update(node *2+1,mid+1,r,idx,v)\n        self.arr[node]= self.arr[node*2]+self.arr[node*2+1]\n    def build(self,node,l,r,arr1):\n        if r == l:\n            if 2 <= l <= self.n - 1:\n                if arr1[l-1] > max(arr1[l], arr1[l-2]):\n                    self.arr[node]=1\n            return \n        mid = l + (r-l)//2\n        self.build(node*2,l,mid,arr1)\n        self.build(node*2+1,mid+1,r,arr1)\n        self.arr[node] = self.arr[node*2]+ self.arr[node*2+1]\n    def query(self,node,l,r,jobl,jobr):\n        if jobl <= l <= r <= jobr:\n            return self.arr[node]\n        mid = l+(r-l)//2\n        ans =0\n        if mid >= jobl:\n            ans= self.query(node*2,l,mid,jobl,jobr)\n        if mid + 1<= jobr:\n            ans+=self.query(node *2+1,mid+1,r,jobl,jobr)\n        return ans\nclass Solution:\n    def countOfPeaks(self, nums: List[int], queries: List[List[int]]) -> List[int]:\n        n=len(nums)\n        q = SegmentTree(n,nums)\n        res = []\n        for typ,t,f in queries:\n            if typ == 1:\n                res.append(q.query(1,1,n,t+2,f))\n            else:\n                q.update(1,1,n,t+1,f)\n                if t <= n - 2:\n                    q.update(1,1,n,t+2,q.ori[t+1])\n                if t>=1:\n                    q.update(1,1,n,t,q.ori[t-1])\n        return res\n        ",
    "submit_ts": "1718509057",
    "subm_id": "539790853"
}