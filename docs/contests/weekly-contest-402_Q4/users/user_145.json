{
    "username": "3R1C_",
    "submission": "class SegTree {\npublic:\n    int l, r;\n    SegTree* lChild;\n    SegTree* rChild;\n    int cnt = 0;\n\n    SegTree(int l, int r) {\n        this->l = l;\n        this->r = r;\n        if (l != r) {\n            int m = (l + r) / 2;\n            lChild = new SegTree(l, m);\n            rChild = new SegTree(m + 1, r);\n        }\n    }\n\n    void updateIdx(int idx, int val) {\n        if (l == r) {\n            cnt = val;\n            return;\n        }\n        int m = (l + r) / 2;\n        if (idx <= m) lChild->updateIdx(idx, val);\n        else rChild->updateIdx(idx, val);\n        cnt = lChild->cnt + rChild->cnt;\n    }\n\n    int getCnt(int left, int right) {\n        if (left > r || right < l) return 0;\n        if (left <= l && right >= r) return cnt;\n        return lChild->getCnt(left, right) + rChild->getCnt(left, right);\n    }\n};\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        SegTree* st = new SegTree(0, n - 1);\n        for (int i = 1; i < n - 1; i++) {\n            if (nums[i] > nums[i - 1] && nums[i] > nums[i + 1]) st->updateIdx(i, 1);\n        }\n\n        vector<int> res;\n        for (auto& q : queries) {\n            if (q[0] == 1) {\n                res.push_back(st->getCnt(q[1] + 1, q[2] - 1));\n            }\n            else {\n                nums[q[1]] = q[2];\n                if (q[1] > 0 && q[1] < n - 1) {\n                    if (nums[q[1]] > nums[q[1] - 1] && nums[q[1]] > nums[q[1] + 1]) st->updateIdx(q[1], 1);\n                    else st->updateIdx(q[1], 0);\n                }\n\n                int l = q[1] - 1, r = q[1] + 1;\n                if (l > 0 && l < n - 1) {\n                    if (nums[l] > nums[l - 1] && nums[l] > nums[l + 1]) st->updateIdx(l, 1);\n                    else st->updateIdx(l, 0);\n                }\n\n                if (r > 0 && r < n - 1) {\n                    if (nums[r] > nums[r - 1] && nums[r] > nums[r + 1]) st->updateIdx(r, 1);\n                    else st->updateIdx(r, 0);\n                }\n            }\n        }\n\n        return res;\n    }\n};",
    "submit_ts": 1718505686.0
}