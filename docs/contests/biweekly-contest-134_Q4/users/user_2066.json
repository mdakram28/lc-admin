{
    "username": "ji-shi-u",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        typedef long long LL;\n        int n = nums.size();\n        LL res = 0;\n        vector<int> zeros[31];\n        int idx = 0;\n        for(auto j : nums){\n            for(int i = 0; i <= 30; ++i)\n                if(!(j >> i & 1))\n                    zeros[i].push_back(idx);\n            ++idx;\n        }\n        if(nums[0] == k) ++res;\n        for(int i = 1; i < n; ++i){\n            if((nums[i] | k) != nums[i])\n                continue;\n            int j = nums[i];\n            int pre = -1, nxt = i;\n            for(int x = 0; x <= 30; ++x){\n                vector<int>& cur = zeros[x];\n                if(cur.size() == 0){\n                    if(!(k >> x & 1)) nxt = -1;\n                    continue;\n                }\n                int l = 0, r = cur.size() - 1;\n                while(l < r){\n                    int mid = l + r + 1 >> 1;\n                    if(cur[mid] > i)\n                        r = mid - 1;\n                    else\n                        l = mid;\n                }\n                if(cur[l] <= i){\n                    if(k >> x & 1)\n                        pre = max(pre, cur[l]);\n                    else \n                        nxt = min(nxt, cur[l]);\n                }else{\n                    if(!(k >> x & 1))\n                        nxt = -1;\n                }\n            }\n            //cout << i << \" \" << max(0, nxt - pre) << endl;\n            //if(i == 4){\n                //cout << pre << \" \" << nxt << \"@\" << endl;\n            //}\n            res += max(0, nxt - pre);\n        }\n        return res;\n    }\n};",
    "submit_ts": "1720279471",
    "subm_id": "544567620"
}