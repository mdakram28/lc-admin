{
    "username": "nemaleswang",
    "submission": "class Solution {\npublic:\n    typedef long long ll;\n    ll sum[100005][32] = {0};\n    long long countSubarrays(vector<int>& a, int k) {\n        ll l = a.size();\n        ll kk[32] = {0};\n        ll jj = 0;\n        while(k){\n            kk[jj++] += k%2;\n            k /= 2;\n        }\n         for(ll i = 1;i <= l;i++){\n            ll x = a[i-1];\n            ll j = 0;\n            while(x){\n                sum[i][j] += sum[i-1][j]+x%2;\n                x /= 2;\n                j++;\n            }\n         }\n         ll se = 1;\n         unordered_map<ll,ll>mp;\n         while(se <= l){\n            ll en = se;\n            ll flag = 1;\n            while(en <= l){\n                for(ll j = 0;j < 32;j++){\n                    ll ct1 = sum[en][j]-sum[se-1][j];\n                    if(kk[j] == 1){\n                        if(ct1 != en-se+1){\n                            flag = 0;\n                            break;\n                        }\n                    }\n                }\n                if(flag == 1) {\n                    mp[se] = en;\n                }\n                en++;\n                if(flag == 0) break;\n            }\n            se = en;\n         }\n         ll ans = 0;\n         for(auto x:mp){\n            int se = x.first,en = x.second;\n            //cout<<\"se = \"<<se<<\" en = \"<<en<<endl;\n            for(int i = se;i <= en;i++){\n                ll le = i,ri = en,mid;\n                int flag = 0,cc = -1;\n                while(le <= ri){\n                    mid = (le+ri)/2;\n                    flag = 0;\n                    for(ll j = 0;j < 32;j++){\n                        ll ct1 = sum[mid][j]-sum[i-1][j];\n                        if(kk[j] == 0 && ct1 == mid-i+1){\n                            flag = 1;\n                            break;\n                        }\n                    }\n                    if(flag == 0){\n                        cc = mid;\n                        if(le == ri) break;\n                        ri = mid;\n                    }else{\n                        le = mid+1;\n                    }\n                }\n                //cout<<\"i = \"<<i <<\" cc = \"<<cc<<endl;\n                if(cc != -1) ans += en-cc+1;\n            }\n         }\n         return ans;\n    }\n};",
    "submit_ts": "1720281434",
    "subm_id": "544575769"
}