{
    "username": "yushae3405",
    "submission": "\n\nclass Solution {\npublic:\nstruct st{\n int mn;\n};\nvector<int> arr;  // original array\nvector<st> seg; \nint max(int a,int b){\n    if (a>b)return a;\n    return b;\n}\n \nvoid build(int id, int L, int R)\n{\n   if(R-L==0)\n   {\n      // Leaf node\n      seg[id].mn=arr[L];\n   \n      return;\n   }\n   int mid=(L+R)/2;\n   build(2*id, L, mid); // left child\n   build(2*id+1, mid+1, R); // right child\n\n  seg[id].mn= (seg[2*id].mn)&(seg[2*id+1].mn);\n}\n \nconst int inf=1e9+1;\nint query(int x, int y, int id, int L, int R)\n{\n   if( L>=x && R<=y  ) {\n        // When [L,R) is entirely inside [x,y)\n       return seg[id].mn;\n   }\n  if ( L>y || R<x ) {\n      // When [L,R) is entirely outside [x,y)\n        return INT_MAX;\n   }\n    int mid=(L+R)/2;\n    int a1= query(x,y,id*2,L,mid);\n    int a2= query(x,y,id*2+1,mid+1,R);\n  \n     return(a1&a2);\n}\n\n \n    long long countSubarrays(vector<int>& nums, int k) {\n         int n = nums.size();\n         long long ans = 0;\n       arr.resize(n);\n       seg.resize(4*n+1);\n    for(int i = 0;i<n;i++){\n           arr[i]=nums[i];\n    }\n    build(1,0,n-1);  \n   for(int i=0 ;i<n;i++){\n       int beg=i;\n       if (arr[i]<k){\n        continue;\n       }\n       int lo = i;\n       int hi = n-1;\n       int b = -1;\n       int e= -1;\n        while(hi>=lo){\n             int mid = lo+(hi-lo)/2;\n              int an = query(i,mid,1,0,n-1);\n               if (an==k){\n                    b = mid;\n              }\n              if(an<=k){\n                // b = mid;\n               hi = mid-1;\n              }   \n              else{\n                // b = mid;\n                lo = mid+1;\n              }\n        }\n        if (b==-1){\n           continue;\n        }\n        else{\n            lo = i;\n            hi = n-1;\n            while(hi>=lo){\n             int mid = lo+(hi-lo)/2;\n              int an = query(i,mid,1,0,n-1);\n              if (an==k){\n                    e = mid;\n              }\n              if(an<k){\n                // b = mid;\n               hi = mid-1;\n              }   \n              else{        \n                lo = mid+1;\n              }\n        }\n            ans+=e-b+1;\n        }\n   }\n   return ans;\n    }\n};",
    "submit_ts": "1720280379",
    "subm_id": "1311787141"
}