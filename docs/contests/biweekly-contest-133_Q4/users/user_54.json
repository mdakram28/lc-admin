{
    "username": "turneja",
    "submission": "class Solution {\npublic:\n    long long M = 1e9 + 7;\n    long long dp[500][500];\n    int x[500];\n    \n    int numberOfPermutations(int n, vector<vector<int>>& a) {\n        for (int i = 1; i <= n; i++) {\n            x[i] = -1;\n        }\n        int mx = 0;\n        for (int i = 0; i < a.size(); i++) {\n            int j = a[i][0] + 1, k = a[i][1];\n            if (x[j] != -1 && k != x[j]) {\n                return 0;\n            }\n            x[j] = k;\n            mx = max(mx, k);\n        }\n        if (mx > x[n]) {\n            return 0;\n        }\n        mx = x[n];\n        \n        for (int i = 0; i <= n; i++) {\n            for (int j = 0; j <= mx; j++) {\n                dp[i][j] = -1;\n            }\n        }\n        if (x[1] != -1) {\n            if (x[1] != 0) {\n                return 0;\n            }\n        }\n        dp[1][0] = 1;\n        \n        int mn = 0;\n        for (int i = 2; i <= n; i++) {\n            if (x[i] == -1 || x[i] == 0) {\n                dp[i][0] = 1;\n            }\n            for (int j = 1; j <= mx; j++) {\n                for (int p = j; p >= mn && j - p < i; p--) {\n                    if (dp[i - 1][p] != -1) {\n                        if (dp[i][j] == -1) {\n                            dp[i][j] = dp[i - 1][p];\n                        } else {\n                            dp[i][j] = (dp[i][j] + dp[i - 1][p]) % M;\n                        }\n                    }\n                    \n                }\n                if (x[i] != -1) {\n                    if (x[i] != j) {\n                        dp[i][j] = -1;\n                    }\n                }\n            }\n            mn = max(mn, x[i]);\n        }\n        long long ans = dp[n][x[n]];\n        return ans;\n    }\n};",
    "submit_ts": 1719067889.0
}