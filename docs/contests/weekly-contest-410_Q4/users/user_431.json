{
    "username": "LiuWeibo",
    "submission": "using ll = long long;\nconstexpr int mod = 1e9 + 7;\n\nstruct BIT {\n    vector<int> sum;\n    BIT(int n) : sum(n + 1) {}\n    \n    BIT(const vector<int>& v) {\n        sum = vector<int>(v.size() + 1);\n        for (int i = 0; i < v.size(); ++i)\n            update(i + 1, v[i]);\n    }\n    \n    int lowbit(int x) {return x & -x;}\n    int query(int x) {\n        int ret = 0;\n        while(x) {\n            ret = (ret + sum[x]) % mod;\n            x -= lowbit(x);\n        }\n        return ret;\n    }\n    void update(int x, int d) {\n        for (; x < sum.size(); x += lowbit(x)) {\n            sum[x] = (sum[x] + d) % mod;\n        }\n    }\n};\n\nclass Solution {\npublic:\n    int countOfPairs(vector<int>& ns) {\n        vector<int> dp(1024);\n        for (int i = 0; i <= ns[0]; ++i) dp[i] = 1;\n        for (int i = 1; i < ns.size(); ++i) {\n            int v = ns[i], p = ns[i - 1];\n            // BIT b(dp);\n            vector<int> acc(1024);\n            acc[0] = dp[0];\n            for (int i = 1; i < 1024; ++i)\n                acc[i] = (acc[i - 1] + dp[i]) % mod;\n            \n            vector<int> ndp(1024);\n                       \n            for (int j = 0; j <= v; ++j) {\n                /*\n                int acc = 0;\n                \n                for (int x = 0; x <= j; ++x) {\n                    if (p - x >= v - j) {\n                        acc = (acc + dp[x]) % mod;\n                    }\n                }\n                \n                ndp[j] = acc;\n                */\n                \n                \n                int ub = min(p - v + j, j);\n                \n                if (ub >= 0)\n                    // ndp[j] = b.query(ub);\n                    ndp[j] = acc[ub];\n            }\n            \n            dp.swap(ndp);\n        }\n        \n        \n        int ans = 0;\n        for (auto x: dp) ans = (ans + x) % mod;\n        return ans;\n    }\n};",
    "submit_ts": "1723347787",
    "subm_id": "1351605512"
}