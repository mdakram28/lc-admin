{
    "username": "na-chang-meng-zhi-shi-ge-wu-jie",
    "submission": "class Solution {\npublic:\n    int head[100005],to[200005],ne[200005],num=0;\n    int time[100005];\n    int val[100005],ans[100005];\n    void add(int u,int v){\n        num++;\n        ne[num]=head[u];\n        to[num]=v;\n        head[u]=num;\n    }\n\n    void dfs1(int x,int p){\n        time[x]=0;\n        for(int i=head[x];i>0;i=ne[i]){\n            int t=to[i];\n            if(t==p)continue;\n            dfs1(t,x);\n            if(t%2==0){\n                time[x]=max(time[x],time[t]+2);\n            }else{\n                time[x]=max(time[x],time[t]+1);\n            }\n        }\n    }\n\n    void dfs2(int x,int p){\n        int ma1=-1,ma2=-1,t1=0,t2=0;\n        for(int i=head[x];i>0;i=ne[i]){\n            int t=to[i];\n            int cur=time[t];\n            if(t%2==0)cur+=2;\n            else cur+=1;\n            if(ma1==-1){\n                ma1=t;\n                t1=cur;\n            }else if(cur>=t1){\n                ma2=ma1;\n                t2=t1;\n                ma1=t;\n                t1=cur;\n            }else if(ma2==-1){\n                ma2=t;\n                t2=cur;\n            }else if(cur>t2){\n                ma2=t;\n                t2=cur;\n            }\n        }\n        ans[x]=t1;\n        for(int i=head[x];i>0;i=ne[i]){\n            int t=to[i];\n            if(t==p)continue;\n            if(t==ma1){\n                time[x]=t2;\n            }else{\n                time[x]=t1;\n            }\n            dfs2(t,x);\n        }\n    }\n\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n=edges.size()+1;\n        for(int i=0;i<edges.size();i++){\n            add(edges[i][0],edges[i][1]);\n            add(edges[i][1],edges[i][0]);\n        }\n        dfs1(0,-1);\n        ans[0]=time[0];\n        dfs2(0,-1);\n\n        vector<int> res;\n        for(int i=0;i<n;i++){\n            res.push_back(ans[i]);\n        }\n\n        num=0;\n        for(int i=0;i<n;i++){\n            head[i]=time[i]=ans[i]=val[i]=0;\n        }\n        return res;\n    }\n};",
    "submit_ts": "1722699537",
    "subm_id": "552276068"
}