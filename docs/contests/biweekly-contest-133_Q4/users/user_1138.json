{
    "username": "vanilla_master",
    "submission": "class Solution {\npublic:\n    const static int MAXN = 305;\n    const static int MAXM = 405;\n    const static int MOD = 1e9+7;\n    int dp[2][MAXM][MAXN];\n    int pre[2][MAXM][MAXN]; // pre[1][j][k] = dp[i][j][0] + dp[i][j][1]....\n    int info[MAXN];\n    int numberOfPermutations(int n, vector<vector<int>>& r) {\n        int m = 0;\n        for(int i=1;i<=n;i++) {\n            info[i]=-1;\n        }\n        for(int i=0;i<r.size();i++) {\n            if(info[r[i][0]+1] != -1) {\n                return 0;\n            }\n            info[r[i][0]+1] = r[i][1];\n            m = max(m,r[i][1]);\n        }\n        for(int i=0;i<2;i++) {\n            for(int j=0;j<=m;j++) {\n                for(int w=0;w<=n;w++) {\n                    dp[i][j][w]=0;\n                }\n            }\n        }\n        int curr=1;\n        dp[0][0][0]=1;\n        for(int i=0;i<=n;i++) {\n            pre[0][0][i]=1;\n        }\n        for(int i=1;i<=n;i++) {\n            for(int j=0;j<=m;j++) {\n                for(int w=0;w<=min(j,i-1);w++) {\n                    int mxinv = (i*(i-1))/2;\n                    if(j>mxinv) {\n                        dp[curr][j][w]=0;\n                    } else if(info[i]==-1 || info[i]==j) {\n                        dp[curr][j][w] = pre[curr^1][j-w][n]%MOD;\n                    } else {\n                        dp[curr][j][w]=0;\n                    }\n                }\n                for(int w=0;w<=n;w++) {\n                    pre[curr][j][w]=0;\n                    if(w==0) {\n                        pre[curr][j][w]=dp[curr][j][w];\n                    } else {\n                        pre[curr][j][w] = (pre[curr][j][w-1] + dp[curr][j][w])%MOD;\n                    }\n                }\n            }\n            curr^=1;\n        }\n        int ans = 0;\n        curr^=1;\n        for(int j=0;j<=m;j++) {\n            for(int w=0;w<=n;w++) {\n                ans = (ans + dp[curr][j][w])%MOD;\n            }\n        }\n        return ans;\n        \n        \n    }\n};\n\n\n\n/*\ndp[i][j] = dp[i-1][0] + dp[i-1][1]....dp[i-1][j] \n\n\n*/",
    "submit_ts": 1719071325.0
}