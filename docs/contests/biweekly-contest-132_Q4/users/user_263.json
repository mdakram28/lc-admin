{
    "username": "RuchitJagodara",
    "submission": "class Solution {\npublic:\n    int maximumLength(vector<int>& nums, int k) {\n        vector<vector<int>> dp(nums.size(), vector<int>(k+1, 0));\n        vector<pair<int, int>> premax(k+1);\n        map<int, vector<int>> mp;\n        for(int i=0; i<nums.size(); i++){\n            mp[nums[i]].push_back(i);\n        }\n        for (int i=0; i<nums.size(); i++){\n            auto itt = lower_bound(mp[nums[i]].begin(), mp[nums[i]].end(), i);\n            dp[i][0] = 1;\n            if (itt!=mp[nums[i]].begin()){\n                itt = prev(itt);\n                for(int j=0; j<k+1; j++){\n                    dp[i][j] = max(dp[i][j], dp[*itt][j]+1);\n                }\n            }\n            for(int j=0; j<k; j++){\n                dp[i][j+1] = max(dp[i][j+1], premax[j].second+1);\n                if (premax[j].first==nums[i]) dp[i][j] = max(dp[i][j], premax[j].second+1);\n            }\n            if (premax[k].first==nums[i]) dp[i][k] = max(dp[i][k], premax[k].second+1);\n            for (int j=0; j<k+1; j++){\n                if (premax[j].second<=dp[i][j]){\n                    premax[j].second = dp[i][j];\n                    premax[j].first = nums[i];\n                }\n            }\n        }\n        int ans = 0;\n        for(int i = 0; i<nums.size(); i++){\n            for (int j=0; j<k+1; j++) {\n                ans = max(ans, dp[i][j]);\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1717861035.0
}