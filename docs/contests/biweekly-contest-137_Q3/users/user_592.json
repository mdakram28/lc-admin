{
    "username": "superj6",
    "submission": "#define pi pair<int, int>\n#define pii pair<int, pi>\n#define f first\n#define s second\n\nconst int k = 3;\n\nclass Solution {\nprivate:\n    void add(vector<pii> &pos, vector<pii> v){\n        partial_sort(v.begin(), v.begin() + k, v.end(), greater<pii>());\n        pos.insert(pos.end(), v.begin(), v.begin() + k);\n    }\n\npublic:\n    long long maximumValueSum(vector<vector<int>>& board) {\n        int n = board.size(), m = board[0].size();\n        \n        vector<pii> pos;\n        for(int i = 0; i < n; i++){\n            vector<pii> v;\n            for(int j = 0; j < m; j++) v.push_back({board[i][j], {i, j}});\n            add(pos, v);\n        } \n        for(int j = 0; j < m; j++){\n            vector<pii> v;\n            for(int i = 0; i < n; i++) v.push_back({board[i][j], {i, j}});\n            add(pos, v);\n        }\n\n        sort(pos.begin(), pos.end(), greater<pii>());\n        pos.resize(unique(pos.begin(), pos.end()) - pos.begin());\n\n        int z = min((int)pos.size(), 2 * k * k);\n\n        long long ret = 0xcfcfcfcfcfcfcfcf;\n        vector<bool> hitx(n), hity(m);\n        for(int i[k] = {0}; i[0] < z; i[0]++)\n        for(i[1] = 0; i[1] < i[0]; i[1]++)\n        for(i[2] = 0; i[2] < i[1]; i[2]++){\n            vector<pi> cur;\n            for(int j = 0; j < k; j++) cur.push_back(pos[i[j]].s);\n\n            bool good = 1;\n            long long sum = 0;\n            for(pi x : cur){\n                good &= !hitx[x.f] && !hity[x.s];\n                sum += board[x.f][x.s];\n                hitx[x.f] = hity[x.s] = 1;\n            }\n\n            if(good) ret = max(ret, sum);\n\n            for(pi x : cur) hitx[x.f] = hity[x.s] = 0;\n        }\n\n        return ret;\n    }\n};",
    "submit_ts": "1723907501",
    "subm_id": "1359110642"
}