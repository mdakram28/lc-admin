{
    "username": "_batman__",
    "submission": "class Solution {\npublic:\n    map<int,vector<int>>mp;\n    int dp[5001][51][2][2];\n    int solve(int ind , map<int,vector<int>>&mp,vector<int>&nums,int k,int flag,int f){\n        \n        if(ind==nums.size()) return 0;\n        if(dp[ind][k][flag][f]!=-1) return dp[ind][k][flag][f];\n        \n             int ans = 0;\n        \n        \n           if(flag==0)\n             ans = 0 + solve(ind+1,mp,nums,k,flag,f);\n           else ans = 0 + solve(ind+1,mp,nums,k,flag,1);\n            \n        \n       \n            int ind1 = upper_bound(mp[nums[ind]].begin(),mp[nums[ind]].end(),ind) - mp[nums[ind]].begin();\n        \n            if(ind1 < mp[nums[ind]].size()){\n                if(f==0)\n                 ans = max(ans , 1 + solve(mp[nums[ind]][ind1],mp,nums,k,1,0));\n                else {\n                    if(k > 0) ans = max(ans , 1 + solve(ind+1,mp,nums ,k - 1 , 1,0));\n                }\n            }\n            \n            if(ind+1 < nums.size()){\n                if(nums[ind]==nums[ind+1]){\n                  if(f==0)\n                 ans = max(ans , 1 + solve(mp[nums[ind]][ind1],mp,nums,k,1,0));\n                else {\n                    if(k > 0) ans = max(ans , 1 + solve(ind+1,mp,nums ,k - 1 , 1,0));\n                }\n                }\n                else if(k > 0) ans = max(ans , 1 + solve(ind+1,mp,nums ,k - 1 , 1,0));\n            }\n        \n        return dp[ind][k][flag][f] = ans;\n            \n      \n    }\n    int maximumLength(vector<int>& nums, int k) {\n        for(int i=0;i<nums.size();i++) mp[nums[i]].push_back(i);\n        \n        memset(dp,-1,sizeof(dp));\n        \n        return solve(0,mp,nums,k,0,0) + 1;\n    }\n};",
    "submit_ts": 1717861313.0
}