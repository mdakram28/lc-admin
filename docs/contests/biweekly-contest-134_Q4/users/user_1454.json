{
    "username": "broshen",
    "submission": "from typing import List\nclass Solution:\n    def countSubarrays(self, nums: List[int], k: int) -> int:\n        one=[0]*32\n        zero=[0]*32\n        left=0\n        right=0\n        n=len(nums)\n        count=0\n        prefix=[0]*(n+1)\n        ret=0\n        for i in range(n-1,-1,-1):\n            sign=1\n            for j in range(32):\n                if (k>>j)&1==1 and (nums[i]>>j)&1==0:\n                    sign=0\n                    break\n            if sign:\n                prefix[i]=prefix[i+1]+1\n        while right<n:\n            # print(left,right)\n            if left==right:\n                count=nums[right]\n                for i in range(32):\n                    if (nums[right]>>i)&1:\n                        one[i]+=1\n                    else:\n                        zero[i]+=1\n                right+=1\n            while right<n and count>k:\n                count=count&nums[right]\n                for i in range(32):\n                    if (nums[right]>>i)&1:\n                        one[i]+=1\n                    else:\n                        zero[i]+=1\n                right+=1\n            if count==k:\n                ret=ret+1+prefix[right]\n            # print(left,right,count)\n            while left<right and count<=k:\n                for i in range(32):\n                    if ((nums[left]>>i)&1)==1:\n                        one[i]-=1\n                        # if one[i]==0 and zero[i]==0:\n                        #     count-=2**i\n                    else:\n                        zero[i]-=1\n                        if zero[i]==0 and one[i]!=0 and (count>>i)&1==0:\n                            count+=2**i\n                left+=1\n                if left==right:break\n                # print(left,right,count,one,zero)\n                if count == k:\n                    ret = ret + 1 + prefix[right]\n            # right+=1\n        # print(ret)\n        return ret",
    "submit_ts": "1720280274",
    "subm_id": "544571277"
}