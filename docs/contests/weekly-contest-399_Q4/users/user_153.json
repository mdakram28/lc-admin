{
    "username": "yatin_0135",
    "submission": "const int N = 5e4+5;\nclass Solution {\npublic:\n    int t[4*N][4];\n    /*\n        (l,r) = 0\n        (l+1,r) = 1\n        (l,r-1) = 2\n        (l+1,r-1) = 3 \n    */\nvoid build(vector<int> &a, int v, int tl, int tr){\n        if(tl==tr){\n            t[v][0] = a[tl];\n            t[v][1] = t[v][2] = t[v][3] = 0;\n        }\n        else{\n            int tm = (tl+tr)/2;\n            build(a,v*2,tl,tm);\n            build(a,v*2+1,tm+1,tr);\n            int l = v*2 , r = v*2 + 1;\n            t[v][1] = max({t[l][3] + t[r][1] , t[l][1] + t[r][1] , t[l][3] + t[r][0]});\n            t[v][2] = max({t[l][2] + t[r][3] , t[l][0] + t[r][3] , t[l][2] + t[r][2]});\n            if(tl+1==tr){\n                t[v][0] = 0;\n                t[v][3] = 0;\n            }else{\n                t[v][0] = max({t[l][2] + t[r][1] , t[l][0] + t[r][1] , t[l][2] + t[r][0]});\n                t[v][3] = max({t[l][3] + t[r][3] , t[l][1] + t[r][3] , t[l][3] + t[r][2]});\n            }\n        }\n    }\n    void update(int v, int tl, int tr, int pos, int new_val) {\n        if (tl == tr) {\n            t[v][0] = new_val;\n            t[v][1] = t[v][2] = t[v][3] = 0;\n        } \n        else {\n            int tm = (tl + tr) / 2;\n            if (pos <= tm)\n                update(v*2, tl, tm, pos, new_val);\n            else\n                update(v*2+1, tm+1, tr, pos, new_val);\n            int l = v*2 , r = v*2 + 1;\n            t[v][1] = max({t[l][3] + t[r][1] , t[l][1] + t[r][1] , t[l][3] + t[r][0]});\n            t[v][2] = max({t[l][2] + t[r][3] , t[l][0] + t[r][3] , t[l][2] + t[r][2]});\n            if(tl+1==tr){\n                t[v][0] = 0;\n                t[v][3] = 0;\n            }else{\n                t[v][0] = max({t[l][2] + t[r][1] , t[l][0] + t[r][1] , t[l][2] + t[r][0]});\n                t[v][3] = max({t[l][3] + t[r][3] , t[l][1] + t[r][3] , t[l][3] + t[r][2]});\n            }\n            \n        }\n    }\n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        build(nums,1,0,n-1);\n        long long ans = 0 , mod = 1e9+7;\n        for(auto x : queries){\n            \n            update(1,0,n-1,x[0],max(0,x[1]));\n            \n            ans = (ans + max({t[1][0],t[1][1],t[1][2],t[1][3]})%mod)%mod;\n        }\n        \n        return ans;\n    }\n};",
    "submit_ts": 1716695896.0
}