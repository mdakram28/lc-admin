{
    "username": "Fasrate10",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n\n        int n=nums.size();\n        vector<vector<int>>pre(32,vector<int>(n+1,0));\n        for(int i=0;i<32;i++)\n        {\n            for(int j=0;j<n;j++)\n            {\n                int bit=(nums[j]&(1<<i))>0;\n                pre[i][j+1]=pre[i][j]+bit;\n            }\n        }\n\n\n        long long ans=0;\n        for(int i=0;i<n;i++)\n        {\n            int l=i,r=n-1;\n\n            int ind1=-1;\n            while(r>=l)\n            {\n                bool valid=1,valid1=1;\n                int m=(l+r)/2;\n                for(int j=0;j<32;j++)\n                {\n                    if((k&(1<<j))==0)\n                    {\n                        int val=pre[j][m+1]-pre[j][i];\n                         if(val==(m-i+1))\n                        {\n                            valid1=0;\n                        \n                        }\n                    }\n                    else\n                    {\n                        int val=pre[j][m+1]-pre[j][i];\n                     // cout<<\"j\"<<i<<\" \"<<m<<\" \"<<j<<\" \"<<val<<endl;\n                        if(val!=(m-i+1))\n                        {\n                            valid=0;\n                            break;\n                        }\n                    }\n                }\n                // cout<<\"yo\"<<i<<\" \"<<m<<\" \"<<valid<<\" \"<<valid1<<endl;\n                if(valid==1)\n                {\n                    if(valid1==0)\n                    {\n                        l=m+1;\n                    }\n                    else\n                    {\n                        ind1=m;\n                        r=m-1;\n                    }\n                    \n                }\n                else\n                {\n                    r=m-1;\n                }\n            }\n\n\n            l=i,r=n-1;\n\n            int ind2=-1;\n            while(r>=l)\n            {\n                bool valid=1,valid1=1;\n                int m=(l+r)/2;\n                for(int j=0;j<32;j++)\n                {\n                    if((k&(1<<j))==0)\n                    {\n                        int val=pre[j][m+1]-pre[j][i];\n                        if(val==(m-i+1))\n                        {\n                            valid1=0;\n                        \n                        }\n                    }\n                    else\n                    {\n                        int val=pre[j][m+1]-pre[j][i];\n\n                        if(val!=(m-i+1))\n                        {\n                            valid=0;\n                            break;\n                        }\n                    }\n                    \n                }\n\n                if(valid==1)\n                {\n                    if(valid1==0)\n                    {\n                        l=m+1;\n                    }\n                    else\n                    {\n                        ind2=m;\n                        l=m+1;\n                    }\n                    \n                }\n                else\n                {\n                    r=m-1;\n                }\n            }\n\n             // cout<<i<<\" \"<<ind1<<\" \"<<ind2<<endl;\n            if(ind1!=-1)\n            {\n                ans+=(ind2-ind1+1);\n            }\n            \n        }\n\n        return ans;\n    }\n};",
    "submit_ts": "1720279200",
    "subm_id": "1311741653"
}