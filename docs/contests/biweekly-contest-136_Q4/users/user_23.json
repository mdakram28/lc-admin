{
    "username": "gxylengli",
    "submission": "class Solution {\npublic:\n    std::vector<std::vector<int>> eg;\n    std::vector<int> fm,sm;\n\n    void dfs1(int u,int fa){\n        for(auto x:eg[u]){\n            if(x==fa) continue;\n            dfs1(x,u);\n            int v;\n            if(x&1) v=fm[x]+2;\n            else v=fm[x]+1;\n            if(v>fm[u]) sm[u]=fm[u],fm[u]=v;\n            else if(v>sm[u]) sm[u]=v;\n        }\n    }\n    std::vector<int> res;\n    void dfs2(int u,int fa){\n        res[u-1]=fm[u];\n        for(auto x:eg[u]){\n            if(x==fa) continue;\n            int bkf=fm[x],bks=sm[x];\n            if(fm[x]+(x&1 ? 2 : 1)==fm[u]){\n                int v=sm[u]+(u&1 ? 2 :1);\n                if(v>fm[x]) sm[x]=fm[x],fm[x]=v;\n                else if(v>sm[x]) sm[x]=v;\n                dfs2(x,u);\n            }else{\n                int v=fm[u]+(u&1 ? 2 :1);\n                if(v>fm[x]) sm[x]=fm[x],fm[x]=v;\n                else if(v>sm[x]) sm[x]=v;\n                dfs2(x,u);\n            }\n\n            fm[x]=bkf,sm[x]=bks;\n        }\n    }\n\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n=edges.size()+1;\n        eg.resize(n+2);\n        fm.resize(n+2,0),sm.resize(n+2,0);\n        res.resize(n);\n        for(auto x:edges){\n            int u=x[0],v=x[1];\n            u++,v++;\n            eg[u].push_back(v);\n            eg[v].push_back(u);\n        }\n        dfs1(1,0);\n        dfs2(1,0);\n        return res;\n    }\n};",
    "submit_ts": "1722697581",
    "subm_id": "552266821"
}