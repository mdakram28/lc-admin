{
    "username": "Hayford08",
    "submission": "struct Fenwick{\n  vector<int> tree;\n  int n;\n  int cnt;\n  Fenwick(int _n) : n(_n), tree(_n), cnt(0){\n    \n  }\n\n  Fenwick(vector<int> &arr) : n(arr.size()), tree(arr.size()), cnt(arr.size()) {\n    // 0 - based indexing\n    for (int i = 0; i < n; i++){\n      tree[i] += arr[i];\n      int r = i | (i + 1); \n      if (r < n){\n        tree[r] += arr[i];\n      }\n    }\n  }\n\n  int sum(int r) {\n    int res = 0;\n    while (r >= 0){\n      res += tree[r];\n      r = (r & (r + 1)) - 1;\n    }\n    return res;\n  }\n\n  int sum(int l, int r){\n    return sum(r) - sum(l - 1);\n  }\n\n  void add(int idx, int delta){\n    cnt += delta;\n    while (idx < n) {\n      tree[idx] += delta;\n      idx |= (idx + 1);\n    }\n  }\n\n  int count_lt(int x){\n    return sum(x - 1);\n  }\n\n  int count_gt(int x){\n    return cnt - sum(x);\n  }\n};\n\nclass Solution {\npublic:\n    int n;\n    bool is_peak(vector<int> &nums, int i) {\n        return i > 0 && i + 1 < n && nums[i - 1] < nums[i] && nums[i] > nums[i + 1];\n    }\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        n = nums.size();\n        Fenwick fen(n + 1);\n        for (int i = 1; i < n - 1; i++) {\n            if (is_peak(nums, i)) {\n                fen.add(i, 1);\n            }\n        }\n        int q = queries.size();\n        vector<int> ans;\n        for (int i = 0; i < q; i++) {\n            int t = queries[i][0];\n            if (t == 1) {\n                int l = queries[i][1], r = queries[i][2];\n                l++;\n                r--;\n                ans.push_back(max(0, fen.sum(l, r)));\n            }\n            else {\n                int pos = queries[i][1], val = queries[i][2];\n                for (int j = pos - 1; j <= pos + 1; j++){\n                    if (is_peak(nums, j)){\n                        fen.add(j, -1);\n                    }\n                }\n                nums[pos] = val;\n                for (int j = pos - 1; j <= pos + 1; j++){\n                    if (is_peak(nums, j)){\n                        fen.add(j, 1);\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507749.0
}