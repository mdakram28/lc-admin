{
    "username": "jskhirtladze",
    "submission": "class Solution {\n\n    int leafs,n;\n\n    int t[200000][2][2];\n\n    int upd(int i,int val) {\n        \n\n        i+=leafs-1;\n        \n        t[i][0][0]=max(0,val);\n        t[i][0][1]=0;\n        t[i][1][1]=0;\n        t[i][1][0]=0;\n\n        while (i>1) {\n            i/=2;\n             for (int ls=0;ls<=1;ls++)\n                for (int rs=0;rs<=1;rs++)\n                    t[i][ls][rs]=0;\n\n            for (int ls=0;ls<=1;ls++)\n                for (int rs=0;rs<=1;rs++)\n                    for (int lsr=0;lsr<=1;lsr++)\n                        for (int rsl=0;rsl<=1;rsl++)\n                            if (lsr || rsl) {\n                                int x = t[i*2][ls][lsr] + t[i*2+1][rsl][rs];\n                                t[i][ls][rs]=max(t[i][ls][rs],x);\n                            }\n        }\n        return t[1][0][0];\n    }\n\npublic:\n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        n=nums.size();\n        leafs=1;\n        while (leafs<n) leafs*=2;\n        for (int j=0;j<=2*leafs;j++)\n            t[j][0][0]=t[j][1][0]=t[j][0][1]=t[j][1][1]=0;\n\n        for (int j=0;j<nums.size();j++)\n            upd(j+1,nums[j]);\n        \n        long long ans,x;\n        ans=0;\n\n        for (int j=0;j<queries.size();j++) {\n            x=upd(queries[j][0]+1,queries[j][1]);\n            ans+=x;\n            ans%=1000LL*1000LL*1000LL+7LL;\n        }\n\n        return ans;\n    }\n};",
    "submit_ts": "1716695830",
    "subm_id": "1268143831"
}