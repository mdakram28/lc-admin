{
    "username": "ihgazi",
    "submission": "class Solution {\npublic:\n    int numberOfPermutations(int n, vector<vector<int>>& requirements) {\n        int m = n*(n-1)/2;\n        vector<vector<long long>> dp(2,vector<long long>(m+1,0));\n        long long MOD = 1e9+7;\n        \n        sort(requirements.begin(), requirements.end(), [](vector<int> &a, vector<int> &b){\n            return a[0] < b[0];\n        });\n            \n        dp[0][0] = 1;\n        int idx = 0;\n        vector<long long> pref(m+1);\n        for (int i = 0; i < n; i++) {\n            if (idx<requirements.size() && requirements[idx][0]==i) {\n                int cnt = requirements[idx][1];\n                if (cnt > i*(i+1)/2) {\n                    return 0;\n                }\n                \n                for (int j = 0; j <= min(i,cnt); j++) {\n                    dp[1][cnt] = (dp[0][cnt-j]+dp[1][cnt])%MOD;\n                }\n                idx++;\n            }\n            else {\n                int l = 0, r = 0;\n                long long sum = 0;\n                while (r <= i*(i+1)/2){\n                    sum = (sum+dp[0][r])%MOD;\n                    while (r-l>i) {\n                        sum = (sum-dp[0][l]+MOD)%MOD;\n                        l++;\n                    }\n                    dp[1][r] = sum;\n                    r++;\n                }\n                \n                /*for (int j = 0; j <= i; j++) {\n                    for (int k = 0; k <= min(m-j,i*(i-1)/2); k++) {\n                        dp[1][k+j] = (dp[0][k]+dp[1][k+j])%MOD;\n                    }\n                }*/\n            }\n            \n            for (int j = 0; j <= i*(i+1)/2; j++) {\n                //cout << dp[1][j] << \" \";\n                dp[0][j] = dp[1][j];\n                dp[1][j] = 0;\n            }\n            //cout << \"\\n\";\n        }\n        \n        int ans = 0;\n        for (int i = 0; i <= m; i++) \n            ans = (ans+dp[0][i])%MOD;\n        return ans;\n    }\n};",
    "submit_ts": "1719070138",
    "subm_id": "1296815479"
}