{
    "username": "lucky7-vb",
    "submission": "class Solution {\npublic:\n \tvector <int> a,f,tree;\n\tint n;\n\n\nvoid pushup(int p){                  //\u66f4\u65b0\u8282\u70b9\u7684\u503c \n\ttree[p]=tree[p<<1]+tree[p<<1|1]; \n}\n\nvoid build(int p,int l,int r){      //\u5efa\u6811 \u6811\u8282\u70b9\u4e3ap \uff08\u5de6\u513f\u5b50p*2 \u53f3\u513f\u5b50p*2+1\uff09 l\u4e3a\u533a\u95f4\u5de6\u7aef\u70b9 r\u4e3a\u53f3\u7aef\u70b9       \n\tif(l==r){         \n\t\ttree[p]=f[l];\n\t\treturn;\n\t}\n\tint mid=(l+r)>>1;\n\tbuild(p<<1,l,mid);\n\tbuild(p<<1|1,mid+1,r);\n\tpushup(p);  \n}\n\nvoid update(int p,int l,int r,int x,int y,int w){ //\u66f4\u65b0\u533a\u95f4 \uff08x,y\uff09 \u7684\u503c \u6539\u53d8\u91cf\u4e3aw \n\tif(l==r){               \n\t\ttree[p]=w;\t\t\t\t\n\t\treturn;\n\t} \n\tint mid=(l+r)>>1;\n\tif(x<=mid)update(p<<1,l,mid,x,y,w);\t\t\n\tif(mid<y)update(p<<1|1,mid+1,r,x,y,w);\n\tpushup(p);\n}\n\nint query(int p,int l,int r,int x,int y){\n\tint ans=0;\n\tint mid=(l+r)>>1;\n\tif(x<=l&&r<=y){\t\t\n\t\treturn tree[p];\n\t}\n\tif(x<=mid)ans+=query(p<<1,l,mid,x,y);\t\n\tif(mid<y)ans+=query(p<<1|1,mid+1,r,x,y);\n\treturn ans;\n}\n\n\tvector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n\t\tn=nums.size();\n\t\ta.resize(n+5);\n\t\tf.resize(n+5);\n\t\ttree.resize(4*n+5);\n\n\t\tfor(int i=1;i<=n;i++) a[i]=nums[i-1];\n\t\tfor(int i=2;i<n;i++){\n\t\t\tif(a[i]>a[i-1] && a[i]>a[i+1]) f[i]=1;\n\t\t}\t\n        // for(int i=1;i<=n;i++) cout<<f[i]<<\" \";cout<<endl;\n\t\tbuild(1,1,n);\n\n\t\tvector <int> ans;\n\t\tfor(auto i:queries){\n \n            \n\t\t\tif(i[0]==1){\n\t\t\t\tint t;\n                if(i[2]-i[1]>=2)\n                    t=query(1,1,n,i[1]+1+1,i[2]+1-1);\n                else t=0;\n\t\t\t\tans.push_back(t);\n\t\t\t}\n\t\t\telse{\n                i[1]++;\n\t\t\t\ta[i[1]]=i[2];\n\t\t\t\tint x=i[1]-1;\n\t\t\t\tif(x>1 && x<n){\n\t\t\t\t\tif(a[x]>a[x-1] && a[x]>a[x+1]){\n\t\t\t\t\t\tf[x]=1;\n\t\t\t\t\t\tupdate(1,1,n,x,x,1);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tf[x]=0;\n\t\t\t\t\t\tupdate(1,1,n,x,x,0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tx=i[1];\n\t\t\t\tif(x>1 && x<n){\n\t\t\t\t\tif(a[x]>a[x-1] && a[x]>a[x+1]){\n\t\t\t\t\t\tf[x]=1;\n\t\t\t\t\t\tupdate(1,1,n,x,x,1);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tf[x]=0;\n\t\t\t\t\t\tupdate(1,1,n,x,x,0);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tx=i[1]+1;\n\t\t\t\tif(x>1 && x<n){\n\t\t\t\t\tif(a[x]>a[x-1] && a[x]>a[x+1]){\n\t\t\t\t\t\tf[x]=1;\n\t\t\t\t\t\tupdate(1,1,n,x,x,1);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tf[x]=0;\n\t\t\t\t\t\tupdate(1,1,n,x,x,0);\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t}\n        return ans;\n    }\n};",
    "submit_ts": "1718505749",
    "subm_id": "539770310"
}