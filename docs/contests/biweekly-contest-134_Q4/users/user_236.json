{
    "username": "code__coder",
    "submission": "class Solution {\npublic:\n    int rangeAndQuery(vector<vector<int>>& AndArr , int l , int r){\n        int num = 0;\n        for(int i = 0 ; i < 32 ; ++i){\n            if((AndArr[r][i] - (l == 0 ? 0 : AndArr[l - 1][i])) == (r - l + 1)){\n                num |= (1 << i);\n            }\n        }\n        return num;\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n = nums.size();\n        vector<vector<int>> v(n , vector<int> (32 , 0));\n        for(int i = 0 ; i < n ; ++i){\n            for(int j = 0 ; j < 32 ; ++j){\n                if(i != 0){\n                    v[i][j] = v[i - 1][j];\n                }\n                if((nums[i] >> j) & 1){\n                        v[i][j]++;\n                }\n            }\n        }\n        long long ans = 0;\n        for(int i = 0 ; i < n ; ++i){\n            int b = i , e = n - 1;\n            int at = -1;\n            while(b <= e){\n                int mid = b + (e - b) / 2;\n                int val = rangeAndQuery(v , i , mid);\n                if(val == k){\n                    at = mid;\n                    e = mid - 1;\n                }\n                else if(val > k){\n                    b = mid + 1;\n                }\n                else{\n                    e = mid - 1;\n                }\n            }\n            if(at == -1)continue;\n            int at2 = at;\n            b = at;\n            e = n - 1;\n            while(b <= e){\n                int mid = b + (e - b) / 2;\n                int val = rangeAndQuery(v , i , mid);\n                if(val == k){\n                    at2 = mid;\n                    b = mid + 1;\n                }\n                else if(val < k){\n                    e = mid - 1;\n                }\n                else{\n                    b = mid + 1;\n                }\n            }\n            ans += (at2 - at + (long long)1);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720278795",
    "subm_id": "1311724542"
}