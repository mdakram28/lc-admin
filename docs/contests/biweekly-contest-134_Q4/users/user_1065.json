{
    "username": "the_wiz",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& a, int k) \n    {\n        int n = a.size();\n        int pre[n + 1][30];\n        memset(pre, 0, sizeof(pre));\n        for(int i = 0; i < n; i++)\n        {\n            for(int j = 0; j < 30; j++)\n            {\n                pre[i + 1][j] = pre[i][j] + ((a[i] >> j) & 1);\n            }\n        }\n        int x;\n        long long ans = 0;\n        int l, r, r1, r2, m, j, sm = 0;\n        for(int i = 1; i <= n; i++)\n        {\n            l = i, r = n, r1 = -1, r2 = -1;\n            while(l <= r)\n            {\n                m = (l + r) >> 1;\n                sm = 0;\n                for(j = 0; j < 30; j++)\n                {\n                    x = pre[m][j] - pre[i - 1][j];\n                    if (x == m - i + 1) sm += (1 << j);\n                }\n                if (sm >= k) l = m + 1;\n                else r = m - 1;\n                if (sm == k) r1 = m;           \n            }\n            l = i, r = n;\n            while(l <= r)\n            {\n                m = (l + r) >> 1;\n                sm = 0;\n                for(j = 0; j < 30; j++)\n                {\n                    x = pre[m][j] - pre[i - 1][j];\n                    if (x == m - i + 1) sm += (1 << j);\n                }\n                if (sm > k) l = m + 1;\n                else r = m - 1;\n                if (sm == k) r2 = m;           \n            }\n            // cout << r1 << ' ' << r2 << '\\n';\n            if (r1 != -1) ans += r1 - r2 + 1;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279386",
    "subm_id": "1311749143"
}