{
    "username": "wo-de-wang-ming-qi-ge-zi-2",
    "submission": "class Solution\n{\n    long long solve(vector<long long> &a, int l, int r, long long m, long long flag)\n    {\n        for (int i = l; i <= r; i++)\n        {\n            a[i] -= flag * m;\n        }\n        long long sum = m;\n        int L = -1, R;\n        m = LONG_MAX;\n        for (int i = l; i <= r; i++)\n        {\n            if (a[i] != 0)\n            {\n                if (L == -1)\n                    L = i;\n                m = min(m, flag * a[i]);\n            }\n            else if (L != -1)\n            {\n                sum += solve(a, L, i - 1, m, flag);\n                L = -1;\n            }\n        }\n        if (L != -1)\n            sum += solve(a, L, r, m, flag);\n        return sum;\n    }\n\npublic:\n    long long minimumOperations(vector<int> &nums, vector<int> &target)\n    {\n        int n = nums.size();\n        vector<long long> a(n);\n        for (int i = 0; i < n; i++)\n            a[i] = nums[i] - target[i];\n        long long ans = 0, L = -1;\n        long long flag = 0;\n        long long m = LONG_MAX;\n        for (int i = 0; i < n; i++)\n        {\n            if (a[i] > 0)\n            {\n                if (L == -1)\n                {\n                    L = i;\n                    flag = a[L] < 0 ? -1 : 1;\n                    m = flag * a[i];\n                }\n                else\n                {\n                    if (a[L] < 0)\n                    {\n                        ans += solve(a, L, i - 1, m, flag);\n                        L = i;\n                        flag = -flag;\n                        m = min(m, flag * a[i]);\n                    }\n                    else\n                        m = min(m, flag * a[i]);\n                }\n            }\n            else if (a[i] < 0)\n            {\n                if (L == -1)\n                {\n                    L = i;\n                    flag = a[L] < 0 ? -1 : 1;\n                    m = flag * a[i];\n                }\n                else\n                {\n                    if (a[L] > 0)\n                    {\n                        ans += solve(a, L, i - 1, m, flag);\n                        L = i;\n                        flag = -flag;\n                        m = min(m, flag * a[i]);\n                    }\n                    else\n                        m = min(m, flag * a[i]);\n                }\n            }\n            else\n            {\n                if (L != -1)\n                {\n                    ans += solve(a, L, i - 1, m, flag);\n                    L = -1;\n                }\n            }\n        }\n        if (L != -1)\n        {\n            ans += solve(a, L, n - 1, m, flag);\n        }\n        return ans;\n    }\n};\n",
    "submit_ts": "1721533127",
    "subm_id": "548396196"
}