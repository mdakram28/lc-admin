{
    "username": "dong-xiao-ming-n",
    "submission": "class Solution {\nprivate:\n    vector<int>c;\n    void init(int n){\n        c = vector<int>(n+1, 0);\n    }\n    void add(int x, int y){\n        while(x<c.size()){\n            c[x] += y;\n            x+=(x&-x);\n        }\n    }\n    int sum(int x){\n        int ret = 0;\n        while(x>0){\n            ret += c[x];\n            x-=(x&-x);\n        }\n        return ret;\n    }\npublic:\n    vector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& queries) {\n        int n = a.size();\n        init(n);\n        for(int i = 1;i+1<n;i++){\n            if(a[i]>a[i-1]&&a[i]>a[i+1])add(i+1, 1);\n        }\n        vector<int>ans;\n        for(auto&q: queries){\n            if(q[0]==1){\n                ans.push_back(q[2]>q[1]+1?sum(q[2])-sum(q[1]+1):0);\n            } else {\n                int idx = q[1], val = q[2];\n                if(idx&&idx+1<n){\n                    if(a[idx]>a[idx-1]&&a[idx]>a[idx+1])add(idx+1,-1);\n                }\n                if(idx-2>=0){\n                    if(a[idx-1]>a[idx-2]&&a[idx-1]>a[idx])add(idx-1+1,-1);\n                }\n                if(idx+2<n){\n                    if(a[idx+1]>a[idx]&&a[idx+1]>a[idx+2])add(idx+1+1,-1);\n                }\n                a[idx] = val;\n                if(idx&&idx+1<n){\n                    if(a[idx]>a[idx-1]&&a[idx]>a[idx+1])add(idx+1,1);\n                }\n                if(idx-2>=0){\n                    if(a[idx-1]>a[idx-2]&&a[idx-1]>a[idx])add(idx-1+1,1);\n                }\n                if(idx+2<n){\n                    if(a[idx+1]>a[idx]&&a[idx+1]>a[idx+2])add(idx+1+1,1);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507412.0
}