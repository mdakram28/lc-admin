{
    "username": "\u8fde\u7eed\u51fd\u6570",
    "submission": "const int N=1e5+10;\nclass Solution {\n    typedef long long LL;\n    int s0[N],s1[N];\n    int pos[N];\n    LL s_pos[N];\npublic:\n    vector<long long> countKConstraintSubstrings(string s, int k, vector<vector<int>>& q) {\n        vector<LL>ans;\n        int n=s.size(),m=q.size();\n        for(int i=1;i<=n;i++)\n        {\n            s0[i]=s0[i-1];\n            s1[i]=s1[i-1];\n            if(s[i-1]=='0')s0[i]++;\n            else s1[i]++;\n        }\n        \n        for(int i=1;i<=n;i++)\n        {\n            int l=0,r=i;\n            while(l<r){\n                int mid=l+r>>1;\n                if(s0[i]-s0[mid]<=k || s1[i]-s1[mid]<=k)r=mid;\n                else l=mid+1;\n            }\n            \n            pos[i]=r;\n            s_pos[i]=s_pos[i-1]+pos[i];\n        }\n        \n        // for(int i=1;i<=n;i++)\n        // {\n        //     cout<<pos[i]<<' ';\n        // }\n        // cout<<'\\n';\n        \n        for(int i=0;i<m;i++)\n        {\n            int left=q[i][0],right=q[i][1];\n            left++,right++;\n            int l=left,r=right;\n            while(l<r){\n                int mid=l+r+1>>1;\n                if(pos[mid]<left)l=mid;\n                else r=mid-1;\n            }\n            \n            //[left,r]\n            LL v=1ll*(r-left+1)*(1+r-left+1)/2;\n            \n            //[r+1,right]\n            LL total=0;\n            if(r+1<=right){\n                total=1ll*(right-r)*(r+1+right)/2-(s_pos[right]-s_pos[r]);\n            }\n            \n            \n            ans.push_back(v+total);\n        }\n        \n        return ans;\n        \n    }\n};",
    "submit_ts": "1723951324",
    "subm_id": "556404696"
}