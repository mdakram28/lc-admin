{
    "username": "anujdhillxn",
    "submission": "class STable\n{\npublic:\n    int LOG = 0;\n    int n;\n    vector<vector<int>> T;\n    STable(vector<int> &a)\n    {\n        n = (int)a.size();\n        while (1 << (LOG + 1) <= n)\n            LOG++;\n        T.resize(LOG + 1);\n        for (int i = 0; i <= LOG; i++)\n            T[i].resize(n);\n        for (int i = 0; i < n; i++)\n            T[0][i] = a[i];\n        for (int i = 1; i <= LOG; i++)\n        {\n            for (int j = 0; j < n - (1 << i) + 1; j++)\n            {\n                T[i][j] = combine(T[i - 1][j], T[i - 1][j + (1 << (i - 1))]);\n            }\n        }\n    }\n    int combine(int a, int b)\n    {\n        return a & b;\n    }\n    int query(int l, int r)\n    {\n        if(r == n-1) {\n            return -1;\n        }\n        int exp = 0;\n        while (1 << (exp + 1) <= r - l + 1)\n            exp++;\n        return combine(T[exp][l], T[exp][r - (1 << exp) + 1]);\n    }\n};\n\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& a, int k) {\n        a.push_back(0);\n        int n = a.size();\n        STable st(a);\n        long long ans = 0;\n        for(int i=0;i<n-1;i++) {\n            int beg = i, end = n-1, r = i-1, l = i-1;\n            while(beg <= end) {\n                int mid = (beg + end)/2;\n                if(st.query(i, mid) < k) {\n                    r = mid;\n                    end = mid-1;\n                }\n                else {\n                    beg = mid+1;\n                }\n            }\n            beg = i, end = n-1;\n            while(beg <= end) {\n                int mid = (beg + end)/2;\n                if(st.query(i, mid) <= k) {\n                    l = mid;\n                    end = mid-1;\n                }\n                else {\n                    beg = mid+1;\n                }\n            }\n            //cout<<l<<' '<<r<<endl;\n            if(l < r)\n            ans += max(0, r - l);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720278521",
    "subm_id": "1311712800"
}