{
    "username": "aal_baal_sub",
    "submission": "class Solution {\n    long long f(int i, int a, int b, int done, vector<vector<vector<int>>> &pp, int m, int n, vector<vector<vector<vector<long long>>>> &dp)\n    {\n        if(done == 1) return 0;\n        if(i == m) return -1e18;\n        if(dp[i][a][b][done] != -1) return dp[i][a][b][done];\n        \n        long long maxi = LLONG_MIN;\n        long long t = f(i+1, a, b, 0, pp, m, n, dp);\n        maxi = max(maxi, t);\n        \n        for(int j=0; j<3; j++)\n        {\n            if(a==pp[i][j][1] || b==pp[i][j][1]) continue;\n            \n            long long temp;\n            if(a == n)\n            {\n                temp = f(i+1, pp[i][j][1], n, 0, pp, m, n, dp) + pp[i][j][0];    \n            }\n            else if(b == n)\n            {\n                temp = f(i+1, a, pp[i][j][1], 0, pp, m, n, dp) + pp[i][j][0];    \n            }\n            else\n            {\n                temp = f(i+1, a, b, 1, pp, m, n, dp) + pp[i][j][0];   \n            }\n            maxi = max(maxi, temp);\n        }\n        return dp[i][a][b][done] = maxi;\n    }\npublic:\n    long long maximumValueSum(vector<vector<int>>& board) {\n        int m = board.size();\n        int n = board[0].size();\n        vector<vector<vector<int>>> arr(m, vector<vector<int>> (n));\n        for(int i=0; i<m; i++)\n        {\n            for(int j=0; j<n; j++)\n            {\n                arr[i][j] = {board[i][j], j};\n            }\n        }\n        for(int i=0; i<m; i++)\n        {\n            sort(arr[i].begin(), arr[i].end(), greater<vector<int>> ());\n        }\n        vector<vector<vector<int>>> pp(m, vector<vector<int>> (3, vector<int> (2)));\n        for(int i=0; i<m; i++)\n        {\n            for(int j=0; j<3; j++)\n            {\n                pp[i][j] = arr[i][j];\n            }\n        }\n        vector<vector<vector<vector<long long>>>> dp(m, vector<vector<vector<long long>>> (n+1, vector<vector<long long>> (n+1, vector<long long> (2, -1))));\n        return f(0, n, n, 0, pp, m, n, dp);\n    }\n};",
    "submit_ts": "1723910035",
    "subm_id": "1359214890"
}