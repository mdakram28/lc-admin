{
    "username": "Ujimatsu_Chiya",
    "submission": "# include <bits/stdc++.h>\n# define mem(a,b) memset(a,b,sizeof(a))\n# define lb(x) ((x) & -(x))\n# define pi pair<int,int>\n# define X first\n# define Y second\n# ifdef LOCAL\n# include \"leetcode.h\"\n# endif // LOCAL\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\nint dx[4]={-1,1,0,0},dy[4]={0,0,-1,1};\n\ntemplate<typename T>\nostream & operator << (ostream &out,const set<T>&obj){out<<\"set(\";for(auto it=obj.begin();it!=obj.end();it++) out<<(it==obj.begin()?\"\":\", \")<<*it;out<<\")\";return out;}\ntemplate<typename T>\nostream & operator << (ostream &out,const unordered_set<T>&obj){out<<\"unordered_set(\";for(auto it=obj.begin();it!=obj.end();it++) out<<(it==obj.begin()?\"\":\", \")<<*it;out<<\")\";return out;}\ntemplate<typename T1,typename T2>\nostream & operator << (ostream &out,const map<T1,T2>&obj){out<<\"map(\";for(auto it=obj.begin();it!=obj.end();it++) out<<(it==obj.begin()?\"\":\", \")<<it->first<<\": \"<<it->second;out<<\")\";return out;}\ntemplate<typename T1,typename T2>\nostream & operator << (ostream &out,const unordered_map<T1,T2>&obj){out<<\"unordered_map(\";for(auto it=obj.begin();it!=obj.end();it++) out<<(it==obj.begin()?\"\":\", \")<<it->first<<\": \"<<it->second;out<<\")\";return out;}\ntemplate<typename T1,typename T2>\nostream & operator << (ostream &out,const pair<T1,T2>&obj){out<<\"<\"<<obj.first<<\", \"<<obj.second<<\">\";return out;}\ntemplate<typename T>\nostream & operator << (ostream &out,const vector<T>&obj){out<<\"vector(\";for(auto it=obj.begin();it!=obj.end();it++) out<<(it==obj.begin()?\"\":\", \")<<*it;out<<\")\";return out;}\n\ntemplate <typename T>\nstruct HashTable {\n  vector<T> val;\n  void add(T x) { val.push_back(x); }\n  void init() {\n    sort(ALL(val));\n    val.erase(unique(ALL(val)), val.end());\n  }\n  int query(T x) { return lower_bound(ALL(val), x) - val.begin() + 1; }\n  T operator[](const int t) const { return val[t - 1]; }\n  int size() { return val.size(); }\n  void clear(){val.clear();}\n};\nint mod=1e9+7;\nvoid add(int &x, int y) {\n    (x += y) >= mod && (x -= mod);\n}\nvoid sub(int &x, int y) {\n    (x -= y) < 0 && (x += mod);\n}\n\nclass Solution {\npublic:\n    int s[100004],n;\n    void add(int p,int x){\n        for(int i=p;i<=n;i+=lb(i)){\n            s[i]+=x;\n        }\n    }\n    int que(int p){\n        int ans=0;\n        for(int i=p;i;i-=lb(i))\n            ans+=s[i];\n        return ans;\n    }\n    vector<int>a;\n    int ok(int p){\n        return 1<=p&&p+1<n&&a[p]>a[p-1]&&a[p]>a[p+1];\n    }\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        a=nums;\n        n=a.size();\n        for(int i=1;i<n;i++){\n            add(i,ok(i));\n        }\n        vector<int>ans;\n        for(auto &u:queries){\n            if(u[0]==2){\n                int p=u[1],v=u[2];\n                for(int k=max(p-1,1);k<=min(p+1,n-2);k++){\n                    add(k,-ok(k));\n                }\n                a[p]=v;\n                for(int k=max(p-1,1);k<=min(p+1,n-2);k++){\n                    add(k,ok(k));\n                }\n            }\n            else{\n                int l=u[1],r=u[2];\n                if(r-l+1<=2) ans.push_back(0);\n                else ans.push_back(que(r-1)-que(l));\n            }\n        }\n        return ans;\n    }\n};\n",
    "submit_ts": "1718505972",
    "subm_id": "539771883"
}