{
    "username": "sserxhs",
    "submission": "#include \"bits/stdc++.h\"\nusing namespace std;\ntemplate <class T, size_t size=tuple_size<T>::value>\nstring to_debug(T, string s=\"\")\n\trequires(not ranges::range<T>);\nstring to_debug(auto x)\n\trequires requires(ostream &os) { os<<x; }\n{\n\treturn static_cast<ostringstream>(ostringstream()<<x).str();\n}\nstring to_debug(ranges::range auto x, string s=\"\")\n\trequires(not is_same_v<decltype(x), string>)\n{\n\tfor (auto xi:x) s+=\", \"+to_debug(xi);\n\n\treturn \"[\"+s.substr(s.empty()?0:2)+\"]\";\n}\ntemplate <class T, size_t size>\nstring to_debug(T x, string s)\n\trequires(not ranges::range<T>)\n{\n\t[&] <size_t... I>(index_sequence<I...>) { ((s+=\", \"+to_debug(get<I>(x))), ...); }(make_index_sequence<size>());\n\treturn \"(\"+s.substr(s.empty()?0:2)+\")\";\n}\n#define dbg(...) cout << __LINE__ << \": (\" #__VA_ARGS__ \") = \" << to_debug(tuple(__VA_ARGS__)) << endl\ntemplate<typename T1, typename T2> istream &operator>>(istream &cin, pair<T1, T2> &a) { return cin>>a.first>>a.second; }\ntemplate<typename T1> istream &operator>>(istream &cin, vector<T1> &a) { for (auto &x:a) cin>>x; return cin; }\ntemplate<typename T1> istream &operator>>(istream &cin, valarray<T1> &a) { for (auto &x:a) cin>>x; return cin; }\ntemplate<typename T1, typename T2> ostream &operator<<(ostream &cout, const pair<T1, T2> &a) { return cout<<a.first<<' '<<a.second; }\ntemplate<typename T1, typename T2> ostream &operator<<(ostream &cout, const vector<pair<T1, T2>> &a) { for (auto &x:a) cout<<x<<'\\n'; return cout; }\ntemplate<typename T1> ostream &operator<<(ostream &cout, const vector<T1> &a) { int n=a.size(); if (!n) return cout; cout<<a[0]; for (int i=1; i<n; i++) cout<<' '<<a[i]; return cout; }\ntemplate<typename T1, typename T2> bool cmin(T1 &x, const T2 &y) { if (y<x) { x=y; return 1; } return 0; }\ntemplate<typename T1, typename T2> bool cmax(T1 &x, const T2 &y) { if (x<y) { x=y; return 1; } return 0; }\ntemplate<typename T1> vector<T1> range(T1 l, T1 r, T1 step=1) { assert(step>0); int n=(r-l+step-1)/step, i; vector<T1> res(n); for (i=0; i<n; i++) res[i]=l+step*i; return res; }\ntemplate<typename T1> basic_string<T1> operator*(const basic_string<T1> &s, int m) { auto r=s; m*=s.size(); r.resize(m); for (int i=s.size(); i<m; i++) r[i]=r[i-s.size()]; return r; }\ntypedef unsigned ui;\ntypedef long long ll;\n#define all(x) (x).begin(), (x).end()\nclass Solution\n{\npublic:\n\tlong long maximumScore(vector<vector<int>> &a)\n\t{\n\t\tint n=a.size(), i, j, k, l;\n\t\tvector f(n+1, vector(n+1, vector<ll>(n+1, -1e18)));\n\t\tvector s(n+1, vector<ll>(n));\n\t\tfor (i=0; i<n; i++) for (j=0; j<n; j++) s[i+1][j]=s[i][j]+a[i][j];\n\t\tf[0][0][0]=0;\n\t\tfor (i=0; i<n; i++) for (k=0; k<=n; k++)\n\t\t{\n\t\t\tvector<ll> mx(n+2, -1e18), pre(n+2);\n\t\t\tfor (j=n; j>=0; j--) mx[j]=max(mx[j+1], f[i][j][k]+(i==0?0:s[j][i-1]-s[k][i-1]));\n\t\t\tpre[0]=f[i][0][k];\n\t\t\tfor (j=1; j<=n; j++) pre[j]=max(pre[j-1], f[i][j][k]);\n\t\t\tfor (l=0; l<=n; l++)\n\t\t\t{\n\t\t\t\tj=0;\n\t\t\t\tcmax(f[i+1][k][l], pre[max(k, l)]+(i==0?0:s[max(k, l)][i-1]-s[k][i-1]));\n\t\t\t\tcmax(f[i+1][k][l], mx[max(k, l)]);\n\t\t\t\t// for (j=0; j<=max(k, l); j++)\n\t\t\t\t// {\n\t\t\t\t// \tcmax(f[i+1][k][l], f[i][j][k]+(i==0?0:s[max({k, j, l})][i-1]-s[k][i-1]));\n\t\t\t\t// }\n\t\t\t}\n\t\t}\n\t\tll ans=0;\n\t\tfor (j=0; j<=n; j++) for (k=0; k<=n; k++) cmax(ans, f[n][j][k]+s[max(k, j)][n-1]-s[k][n-1]);\n\t\t// for (auto &v:f) for (auto &vv:v) cmax(ans, *max_element(all(vv)));\n\t\treturn ans;\n\t}\n};\n",
    "submit_ts": "1721487510",
    "subm_id": "548310295"
}