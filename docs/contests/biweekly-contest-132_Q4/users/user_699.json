{
    "username": "Norhan_Ihab",
    "submission": "class Solution {\npublic:\n    vector<int>v;\n    vector<vector<int>>dp,dp_max;\n    vector<int>equ,not_equ;\n    int n;\n    int maximumLength(vector<int>& nums, int k) {\n        n=(int)nums.size();\n        v=nums;\n        map<int,vector<int>>mp;\n        for(int i=0;i<n;i++){\n            mp[v[i]].push_back(i);\n        }\n        dp.assign(n+10,vector<int>(k+10,1));\n        dp_max.assign(n+10,vector<int>(k+10,1));\n\n        equ.assign(n+10,-1);\n        not_equ.assign(n+10,-1);\n        for(int i=n-2;i>=0;i--){\n            if(v[i]==v[i+1])\n                not_equ[i]=not_equ[i+1];\n            else\n                not_equ[i]=i+1;\n            auto it=upper_bound(mp[v[i]].begin(),mp[v[i]].end(),i);\n            if(it!=mp[v[i]].end()){\n                equ[i]=*it;\n            }\n            \n        }\n        int ans=0;\n        \n        for(int i=n-2;i>=0;i--){\n            for(int j=0;j<=k;j++){\n                if(j>0)\n                    dp[i][j]=1+dp_max[i+1][j-1];\n                if(equ[i]!=-1)\n                    dp[i][j]=max(dp[i][j],1+dp[equ[i]][j]);\n                dp_max[i][j]=max(dp_max[i+1][j],dp[i][j]);\n            }\n        }\n        \n        for(int i=n-1;i>=0;i--){\n            ans=max(ans,dp[i][k]);\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1717861373.0
}