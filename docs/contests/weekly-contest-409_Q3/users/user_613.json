{
    "username": "nikhil__thogaru",
    "submission": "const int N=1e5;\nint seg[4*N+5];\n\nvoid update(int low,int high,int ind,int val,int pos)\n{\n    if (low==high){\n        seg[pos]=val;\n        return ;\n    }\n    int mid=(low+high)/2;\n    if (ind<=mid) update(low,mid,ind,val,2*pos+1);\n    else update(mid+1,high,ind,val,2*pos+2);\n    seg[pos]=max(seg[2*pos+1],seg[2*pos+2]);\n}\n\nint get(int low,int high,int l,int r,int pos)\n{\n    if (r<low || high<l) return 0;\n    if (l<=low && high<=r) return seg[pos];\n    int mid=(low+high)/2;\n    return max(get(low,mid,l,r,2*pos+1),get(mid+1,high,l,r,2*pos+2));\n}\n\nint bit[N];\nint sum(int x) {\n    int ans=0;\n    while (x>=0){\n        ans+=bit[x];\n        x=(x&(x+1));\n        x--;\n    }\n    return ans;\n}\n\nvoid add(int x, int val,int n) {\n    while (x<n){\n        bit[x]+=val;\n        x=x|(x+1);\n    }\n}\nclass Solution {\npublic:\n    vector<int> shortestDistanceAfterQueries(int n, vector<vector<int>>& q) {\n        vector <int> ans;\n        for (int i=0;i<4*n+5;i++) seg[i]=0;\n        for (int i=0;i<n;i++) bit[i]=0;\n        vector <int> a(n);\n        for (int i=0;i<n;i++){\n            update(0,n-1,i,i+1,0),a[i]=i+1,add(i+1,1,n);\n        }\n        // for (int i=0;i<n;i++) cout<<sum(i)<<\" \";\n        // cout<<\"\\n\";\n        int res=n-1;\n        for (int i=0;i<q.size();i++){\n            int u=q[i][0],v=q[i][1];\n            int mx=get(0,n-1,0,u,0);\n           // cout<<u<<\" \"<<mx<<\"\\n\";\n            if (mx>=v){\n                ans.push_back(res);\n            }\n            else{\n              //  cout<<u<<\" \"<<v<<\" \"<<sum(u)<<\" \"<<sum(v)<<\"\\n\";\n                int d=sum(v)-sum(u);\n               // cout<<i<<\" \"<<d<<\"\\n\";\n                res-=(d-1);\n                int diff=d-1;\n                add(v,-diff,n);\n                a[u]=v;\n                update(0,n-1,u,a[u],0);\n                ans.push_back(res);\n            }\n            // all suff[j] where j<u will change by a factor suff[u]-suff[v] \n        }\n        return ans;\n    }\n};",
    "submit_ts": "1722742456",
    "subm_id": "1343769402"
}