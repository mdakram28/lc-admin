{
    "username": "balakrishnan_v",
    "submission": "#define ll long long\n#define MAX_INV 300*152\n#define MODD 1000000007\nclass Solution {\npublic:\n    \n    int dp[2][MAX_INV+1];\n    int cdp[2][MAX_INV+1];\n\n    ll Solve(const vector<int>& requirement) {\n        int n=requirement.size();\n        for(int pos=n;pos>=0;pos--) {\n            for(int curr_num_inv=0;curr_num_inv<=MAX_INV;curr_num_inv++) {\n                int& ans = dp[pos&1][curr_num_inv];\n                if (pos == n) {\n                    ans=1;\n                } else {\n                    ans=0;\n                    if (requirement[pos]!=-1) {\n                        if (requirement[pos]>=curr_num_inv && requirement[pos]<=curr_num_inv+pos)\n                        ans += dp[(pos+1)&1][requirement[pos]];\n                    } else {\n\n                        int low = max(0, curr_num_inv + pos - MAX_INV);\n                        // from curr_num_inv to curr_num_inv+pos-low\n                        if (pos-low>=0) {\n                            ans += cdp[(pos+1)&1][curr_num_inv+pos-low]-(curr_num_inv?cdp[(pos+1)&1][curr_num_inv-1]:0);\n                            if (ans < 0) ans+=MODD;\n                        }\n                    }\n                    ans %= MODD;\n                    ans = (ans+MODD)%MODD;\n                }\n                cdp[pos&1][curr_num_inv]=dp[pos&1][curr_num_inv];\n                if (curr_num_inv) cdp[pos&1][curr_num_inv]+=cdp[pos&1][curr_num_inv-1];\n                if (cdp[pos&1][curr_num_inv] >= MODD) cdp[pos&1][curr_num_inv] -= MODD;\n            }\n        }\n        return dp[0][0];\n    }\n    \n\n    int numberOfPermutations(int n, vector<vector<int>>& requirements) {\n        vector<int> requirement(n,-1);\n        for(auto tmp : requirements) {\n            int i=tmp[0];\n            requirement[tmp[0]]=tmp[1];\n        }\n        return Solve(requirement);\n    }\n\n    \n    \n};",
    "submit_ts": "1719069544",
    "subm_id": "1296799637"
}