{
    "username": "Sloth_junkie",
    "submission": "class Solution {\npublic:\n    int maximumLength(vector<int>& nums, int k) {\n        int n = nums.size();\n        vector<map<int,int>> map1(k+1);\n        // map<int,map<int,int>> map1;\n        // map<int,set<pair<int,int>>> map2;\n        vector<set<pair<int,int>>> map2(k+1);\n        \n        map1[0][nums[n-1]] = 1;\n        map2[0].insert({1,nums[n-1]});\n        \n        int ans = 1;\n        \n        vector<int> v1(k+1,-1);\n        for(int i = n-2; i>=0; i--)\n        {\n            if(map1[0].count(nums[i]))\n            {\n                v1[0] = map1[0][nums[i]]+1;\n            }\n            else\n            {\n                v1[0] = 1;\n            }\n            for(int j = 1; j<=k; j++)\n            {\n                int ct1 = -1e9;\n                if(!map2[j-1].empty())\n                {\n                    auto it1 = map2[j-1].end();\n                    it1--;\n                    pair<int,int> p1 = (*(it1));\n                    if(p1.second == nums[i])\n                    {\n                        if(it1 != map2[j-1].begin())\n                        {\n                            it1--;\n                            p1 = (*(it1));\n                            ct1 = p1.first+1;\n                        }\n                    }\n                    else\n                    {\n                        ct1 = p1.first+1;\n                    }\n                }\n                \n                int ct2 = -1e9;\n                if(map1[j].count(nums[i]))\n                {\n                    ct2 = map1[j][nums[i]]+1;\n                }\n                \n                \n                if(ct1 != -1e9 || ct2 != -1e9)\n                {\n                    v1[j] = max(ct1,ct2);\n                }\n                else\n                {\n                    v1[j] = -1;\n                }\n            }\n            \n            for(int j = 0; j<=k; j++)\n            {\n                if(v1[j] != -1)\n                {\n                    ans = max(ans,v1[j]);\n                    if(map1[j].count(nums[i]))\n                    {\n                        int val = map1[j][nums[i]];\n                        auto it1 = map2[j].find({val,nums[i]});\n                        map2[j].erase(it1);\n                    }\n                    map1[j][nums[i]] = v1[j];\n                    map2[j].insert({v1[j],nums[i]});\n                }\n            }\n            \n        }\n        return ans;\n    }\n};",
    "submit_ts": 1717861666.0
}