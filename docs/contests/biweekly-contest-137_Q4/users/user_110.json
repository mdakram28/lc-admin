{
    "username": "Fkaiser7",
    "submission": "#define lli long long\nclass Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>& v) {\n        lli n=v.size();\n        lli m=v[0].size();\n        vector<vector<pair<lli,lli>>>v1(n,vector<pair<lli,lli>>(3));\n        vector<vector<pair<lli,lli>>>dp1(n,vector<pair<lli,lli>>(3));\n        vector<vector<pair<lli,lli>>>dp2(n,vector<pair<lli,lli>>(3));\n        for(lli i=0;i<n;i++){\n            //cout<<i<<endl;\n            vector<pair<lli,lli>>vp;\n            for(lli j=0;j<m;j++){\n                vp.push_back({v[i][j],j});\n            }\n            sort(vp.begin(),vp.end());\n            //cout<<vp.size()<<endl;\n            for(lli j=vp.size()-1;j>=vp.size()-3;j--){\n                //cout<<j<<endl;\n                if(j<0){\n                    break;\n                }\n                v1[i][vp.size()-1-j]={vp[j].first,vp[j].second};\n            }\n        }\n        vector<lli>v2(m,-1e15);\n        for(lli i=0;i<n;i++){\n            for(lli j=0;j<m;j++){\n                v2[j]=max(v2[j],(lli)(v[i][j]));\n            }\n            vector<pair<lli,lli>>vp;\n            for(lli j=0;j<m;j++){\n                vp.push_back({v2[j],j});\n            }\n            sort(vp.begin(),vp.end());\n            //cout<<vp.size()<<endl;\n            for(lli j=vp.size()-1;j>=vp.size()-3;j--){\n                //cout<<j<<endl;\n                if(j<0){\n                    break;\n                }\n                dp1[i][vp.size()-1-j]={vp[j].first,vp[j].second};\n            }\n        }\n        for(lli i=0;i<m;i++){\n            v2[i]=-1e15;\n        }\n        for(lli i=n-1;i>=0;i--){\n            for(lli j=0;j<m;j++){\n                v2[j]=max(v2[j],(lli)(v[i][j]));\n            }\n            vector<pair<lli,lli>>vp;\n            for(lli j=0;j<m;j++){\n                vp.push_back({v2[j],j});\n            }\n            sort(vp.begin(),vp.end());\n            //cout<<vp.size()<<endl;\n            for(lli j=vp.size()-1;j>=vp.size()-3;j--){\n                //cout<<j<<endl;\n                if(j<0){\n                    break;\n                }\n                dp2[i][vp.size()-1-j]={vp[j].first,vp[j].second};\n            }\n        }\n        /*for(int i=0;i<n;i++){\n            for(auto it:dp1[i]){\n                cout<<i<<\" \"<<it.first<<\" \"<<it.second<<endl;\n            }\n            for(auto it:dp2[i]){\n                cout<<i<<\" \"<<it.first<<\" \"<<it.second<<endl;\n            }\n        }*/\n        lli ans=-1e15;\n        for(lli i=1;i<n-1;i++){\n            for(auto it:v1[i]){\n                for(auto it1:dp1[i-1]){\n                    for(auto it2:dp2[i+1]){\n                        if(it1.second!=it.second&&it.second!=it2.second&&it1.second!=it2.second){\n                            //cout<<i<<\" \"<<it.second<<\" \"<<it1.second<<\" \"<<it2.second<<\" \"<<it.first+it1.first+it2.first<<endl;\n                            ans=max(ans,it.first+it1.first+it2.first);\n                        }\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1723908454",
    "subm_id": "1359153354"
}