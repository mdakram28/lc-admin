{
    "username": "qian-shu-f",
    "submission": "class Solution {\npublic:\n#define lc  o * 2\n#define rc  o * 2 + 1\nvector<int>S;\nvoid updata(int o, int l, int r, int idx, int val) {\n    if (l == r) {\n        S[o] = val;\n        return;\n    }\n    int m = (l + r) / 2;\n    if (idx <= m) updata(lc, l, m, idx, val);\n    else updata(rc, m + 1, r, idx, val);\n    S[o] = S[lc] + S[rc];\n}\n\nint query_sum(int o, int l, int r, int L, int R) { \n    if(L > R)return 0;\n    if (L <= l && r <= R) return S[o];\n    int h = 0;\n    int m = (l + r) / 2;\n    if (L <= m) h += query_sum(lc, l, m, L, R);\n    if (R > m)  h += query_sum(rc, m + 1, r, L, R);\n    return h;\n}\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& qs) {\n        int n = nums.size();\n        S.resize(4 * n);\n        for(int i = 0;i < n;i++){\n            if((i != 0 && nums[i] > nums[i-1]) && (i != n-1 && nums[i] > nums[i+1])){\n                updata(1,1,n,i + 1,1);\n                //cout << 5 <<endl;\n            }\n            \n        }\n        auto check = [&](int i){\n             return (i != 0 && nums[i] > nums[i-1]) && (i != n-1 && nums[i] > nums[i+1]);\n        };\n        vector<int>ans;\n        for(auto q : qs){\n            if(q[0] == 1){\n              \n              if(q[1] == q[2]){\n                 ans.push_back(0);\n              }else{\n                int t = 0;\n                // if(nums[q[1]] > nums[q[1] + 1]){\n                //     t++;\n                // }\n                // if(nums[q[2]] > nums[q[2] - 1]){\n                //     t++;\n                // }\n                t += query_sum(1,1,n,q[1] + 2,q[2]);\n                ans.push_back(t);\n              }\n            }else{\n                nums[q[1]] = q[2];\n                updata(1,1,n,q[1] + 1,check(q[1]));\n                if(q[1] != 0)\n                updata(1,1,n,q[1] - 1 + 1,check(q[1] - 1));\n                if(q[1] != n-1)\n                updata(1,1,n,q[1] + 1 + 1,check(q[1] + 1));\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507299.0
}