{
    "username": "sad-villaniktr",
    "submission": "class Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        const int n = nums.size();\n        vector<int> c(n + 1);\n        auto lowbit = [](int x) {\n            return x & -x;\n        };\n        auto modify = [&](int x, int v) {\n            while(x <= n) c[x] += v, x += lowbit(x);\n        };\n        auto query = [&](int x) {\n            int ans = 0;\n            while(x > 0) ans += c[x], x -= lowbit(x);\n            return ans;\n        };\n        for (int i = 1; i < n - 1; ++i) {\n            if (nums[i - 1] < nums[i] && nums[i] > nums[i + 1]) modify(i + 1, 1);\n        }\n        vector<int> ans;\n        for (auto& q: queries) {\n            if (q[0] == 1) ans.push_back(max(0, query(q[2]) - query(q[1] + 1)));\n            if (q[0] == 2) {\n                int idx = q[1], val = q[2];\n                if (idx > 1) {\n                    if (nums[idx - 2] < nums[idx - 1] && nums[idx - 1] > nums[idx]) modify(idx, -1);\n                    if (nums[idx - 2] < nums[idx - 1] && nums[idx - 1] > val) modify(idx, 1);\n                }\n                if (idx > 0 && idx < n - 1) {\n                    if (nums[idx - 1] < nums[idx] && nums[idx] > nums[idx + 1]) modify(idx + 1, -1);\n                    if (nums[idx - 1] < val && val > nums[idx + 1]) modify(idx + 1, 1);\n                }\n                if (idx < n - 2) {\n                    if (nums[idx] < nums[idx + 1] && nums[idx + 1] > nums[idx + 2]) modify(idx + 2, -1);\n                    if (val < nums[idx + 1] && nums[idx + 1] > nums[idx + 2]) modify(idx + 2, 1);                    \n                }\n                nums[idx] = val;\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507995.0
}