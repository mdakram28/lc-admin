{
    "username": "abhi_bittu2525",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>&v, int k) {\n        int n=v.size();\n  vector<vector<int>> pre(n+1,vector<int>(32,0));\nfor(int i=0;i<n;i++){\n    for(int j=0;j<32;j++){\n        if((v[i]>>j)&1){\n            pre[i+1][j] = 1;\n        }\n    }\n}\nfor(int i=1;i<=n;i++){\n    for(int j=0;j<32;j++){\n        pre[i][j] += pre[i-1][j];\n    }\n}\n\n\n  vector<int>prefix(n+1,0);\n  vector<int>last(n+1,0);\nfor(int i=1;i<=n;i++){\n    int lo = i;\n    int hi = n;\n    int at = -1;\n    int index=-1;\n    while(lo<=hi){\n        \n        int mid = (lo+hi)/2;\n        int len = mid-i+1;\n        int ans=0;\n        bool isok = true;\n\n        for(int j=0;j<32;j++){\n            int x = pre[mid][j] - pre[i-1][j];\n              if(len==x){\n                ans+=(1<<j);\n              }\n        }\n        \n        if(ans<=k){\n           /// ans = mid;\n           at=ans;\n           index=mid;\n            hi = mid-1;\n        }else{\n            lo = mid+1;\n        }\n    }\n    if(at==k){\n         prefix[i]=index;\n    }else{\n        prefix[i]=-1;\n    }\n      \n}\n\nfor(int i=1;i<=n;i++){\n    int lo = i;\n    int hi = n;\n    int at = -1;\n    int index=-1;\n    while(lo<=hi){\n        \n        int mid = (lo+hi)/2;\n        int len = mid-i+1;\n        int ans=0;\n       // bool isok = true;\n\n        for(int j=0;j<32;j++){\n            int x = pre[mid][j] - pre[i-1][j];\n              if(len==x){\n                ans+=(1<<j);\n              }\n        }\n        \n        if(ans>=k){\n           /// ans = mid;\n           at=ans;\n           index=mid;\n           lo =mid+1;\n        }else{\n           hi=mid-1;\n        }\n    }\n    if(at==k){\n         last[i]=index;\n    }else{\n        last[i]=-1;\n    }\n      \n}\nlong long pt=0;\n     for(int i=1; i<=n; i++){\n           if((prefix[i]!=-1)&&(last[i]!=-1)){\n                pt+=(last[i]-prefix[i]+1)*1ll;\n           }\n     }\n     return pt;\n    }\n};",
    "submit_ts": "1720280449",
    "subm_id": "1311789848"
}