{
    "username": "sagnik_1729",
    "submission": "class Solution {\npublic:\n    typedef long long ll;\n    ll MOD=1e9+7;\n    class SegTree{\n\tvector<ll> segtree;\npublic:\n\tSegTree(ll n)\n\t{\n\t\tsegtree.resize(4*n);\n\t}\n\tvoid build(ll ind,ll low,ll high,vector<ll>&a)\n\t{\n\t\tif(low==high)\n\t\t{\n\t\t\tsegtree[ind]=a[low];\n\t\t\treturn;\n\t\t}\n\t\tll mid=(low+high)/2;\n\t\tbuild(2*ind+1,low,mid,a);\n\t\tbuild(2*ind+2,mid+1,high,a);\n\t\tsegtree[ind]=(segtree[2*ind+1]+segtree[2*ind+2]);\n\t}\n\tll query(ll ind,ll l,ll r,ll low,ll high)\n\t{\n        if(l>r)\n            return 0;\n\t\t//no overlap,ie,[low high l r] or [l r low high]\n\t\tif(high<l or r<low)\n\t\t\treturn 0;\n\t\t//complete overlap,ie,[l low high r]\n\t\tif(l<=low and high<=r)\n\t\t\treturn segtree[ind];\n\t\t//partial overlap\n\t\tll mid=(low+high)/2;\n\t\tll left=query(2*ind+1,l,r,low,mid);\n\t\tll right=query(2*ind+2,l,r,mid+1,high);\n\t\treturn (left+right);\n\t}\n\tvoid update(ll ind,ll low,ll high,ll i,ll val)\n\t{\n\t\tif(low==high)\n\t\t{\n\t\t\tsegtree[ind]=val;\n\t\t\treturn;\n\t\t}\n\t\tll mid=(high+low)/2;\n\t\tif(i<=mid)\n\t\t\tupdate(2*ind+1,low,mid,i,val);\n\t\telse\n\t\t\tupdate(2*ind+2,mid+1,high,i,val);\n\t\tsegtree[ind]=(segtree[2*ind+1]+segtree[2*ind+2]);\n\t}\n};\n  \n    int numberOfPermutations(int n, vector<vector<int>>& requirements) {\n        ll mx=min(400,(n*(n-1))/2);\n        vector<vector<ll>> dp(n+2,vector<ll>(mx+1));\n        dp[0][0]=1;\n        SegTree seg(mx+1);\n        seg.build(0,0,mx,dp[0]);\n        map<ll,ll> mp;\n        for(auto &x:requirements)\n        {\n            mp[x[0]]=x[1];\n        }\n        for(int i=1;i<=n;i++)\n        {\n            for(int j=0;j<=mx;j++)\n            {\n                // if(j==0)\n                //     continue;\n                if(mp.find(i-1)!=mp.end() and mp[i-1]!=j)\n                    continue;\n                dp[i][j]+=seg.query(0,max(0,j-i+1),j,0,mx);             \n                dp[i][j]%=MOD;\n            }\n            // cout<<dp[i][1]<<endl;\n            seg.build(0,0,mx,dp[i]);\n        }\n        return dp[n][mp[n-1]];\n        \n    }\n};",
    "submit_ts": "1719070071",
    "subm_id": "1296813734"
}