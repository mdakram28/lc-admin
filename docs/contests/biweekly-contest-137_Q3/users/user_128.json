{
    "username": "satc",
    "submission": "class Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>& board) {\n        int m = board.size(), n = board[0].size();\n        int N = m + n + 10, M = (m * n + m + n) * 2 + 100, idx = 1, S1, S, T, INF = 1e9;\n        int h[N], pre[N], mn_f[N], q[N];\n        int e[M], nxt[M], f[M], w[M];\n        bool vis[N];\n        long long dis[N];\n        auto add = [&](int u, int v, int c, int cost){\n            e[++idx] = v, f[idx] = c, w[idx] = cost, nxt[idx] = h[u], h[u] = idx;\n            e[++idx] = u, f[idx] = 0, w[idx] = -cost, nxt[idx] = h[v], h[v] = idx;\n        };\n        memset(h, 0, sizeof(h));\n        auto spfa = [&](){\n            memset(dis, -0x3f, sizeof(dis)), memset(vis, 0, sizeof vis);\n            queue<int> q;\n            q.push(S), vis[S] = 1, dis[S] = 0, mn_f[S] = INF;\n            while (!q.empty())\n            {\n                int u = q.front(); q.pop();\n                vis[u] = 0;\n                for (int i = h[u]; i; i = nxt[i])\n                {\n                    int v = e[i];\n                    if (f[i] && dis[v] < dis[u] + w[i])\n                    {\n                        dis[v] = dis[u] + w[i], pre[v] = i;\n                        mn_f[v] = min(f[i], mn_f[u]);\n                        if (!vis[v]) q.push(v), vis[v] = 1; \n                    }\n                }\n            }\n            return dis[T] > 0;\n        };\n        for (int i = 0; i < m; i++)\n        {\n            for (int j = 0; j < n; j++)\n            {\n                add(i, m + j, 1, 1e9 + board[i][j]);\n            }\n        }\n        S1 = N - 1, S = N - 2, T = N - 3;\n        for (int i = 0; i < m; i++) add(S1, i, 1, 0);\n        for (int i = 0; i < n; i++) add(m + i, T, 1, 0);\n        add(S, S1, 3, 0);\n        long long cost = 0, delt = 1e9;\n        while (spfa())\n        {\n            cost += mn_f[T] * dis[T];\n            for (int i = T; i != S; i = e[pre[i] ^ 1])\n            {\n                f[pre[i]] -= mn_f[T], f[pre[i] ^ 1] += mn_f[T];\n            }\n        }\n        return cost - 3 * delt;\n    }\n};",
    "submit_ts": "1723908035",
    "subm_id": "556328857"
}