{
    "username": "Asagi",
    "submission": "class Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>& board) {\n        long long ans = -1e10;\n        int m = board.size(), n = board[0].size();\n        auto cmp = [&](const pair<int, int> a, const pair<int, int> b) {\n            return board[a.first][a.second] < board[b.first][b.second];\n        };\n        vector<pair<int, int>> cells;\n        for (int i = 0; i < m; ++i) {\n            for (int j = 0; j < n; ++j) {\n                cells.push_back({i, j});\n            }\n        }\n        vector<int> cnt(m+n, 0);\n        sort(cells.begin(), cells.end(), cmp);\n        int pos = cells.size() - 1;\n        for (int i = cells.size() - 1; i >= 0; --i) {\n            auto p = cells[i];\n            if (cnt[p.first] < 3 || cnt[m+p.second] < 3) {\n                cnt[p.first]++;\n                cnt[m+p.second]++;\n                cells[pos--] = p;\n            }\n        }\n        vector<bool> vis(m+n, false);\n        for (int i = pos + 1; i < cells.size(); ++i) {\n            vis[cells[i].first] = true;\n            vis[cells[i].second+m] = true;\n            for (int j = i + 1; j < cells.size(); ++j)\n                if (!vis[cells[j].first] && !vis[cells[j].second+m]) {\n                    vis[cells[j].first] = true;\n                    vis[cells[j].second+m] = true;\n                    int k = cells.size() - 1;\n                    while (vis[cells[k].first] || vis[cells[k].second+m]) --k;\n                    ans = max(ans, 0LL + board[cells[i].first][cells[i].second] + board[cells[j].first][cells[j].second] + board[cells[k].first][cells[k].second]);\n                    vis[cells[j].first] = false;\n                    vis[cells[j].second+m] = false;\n                }\n            vis[cells[i].first] = false;\n            vis[cells[i].second+m] = false;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1723908417",
    "subm_id": "1359151751"
}