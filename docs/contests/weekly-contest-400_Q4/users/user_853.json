{
    "username": "angel30818",
    "submission": "import sys\nclass Solution:\n    def minimumDifference(self, nums, k):\n        n = len(nums)\n        \n        min_diff = sys.maxsize\n        max_bit = 32\n        pos = [0] * max_bit\n        \n        def conv(val):\n            return bin(val)[2:].zfill(max_bit)\n        \n        def update(val):\n            val_num = conv(val)\n            for i in range(max_bit):\n                if val_num[i] == \"1\":\n                    pos[i] += 1\n                    \n        def remove(val):\n            val_num = conv(val)\n            for i in range(max_bit):\n                if val_num[i] == \"1\":\n                    pos[i] -= 1\n        \n        def calc(pos, p, q):\n            if p >= q:\n                return sys.maxsize\n            \n            if p + 1 == q:\n                return nums[p]\n            \n            gap = q - p\n            \n            mul = 1\n            res = 0\n            for i in range(max_bit):\n                if pos[~i] == gap:\n                    res += mul\n                mul *= 2\n                \n            return res\n            \n        \n        q = 0\n        \n        for p in range(n):\n\n            # figure out the other number\n            # print(calc(pos, p, q))\n            min_diff = min(min_diff, abs(calc(pos, p, q) - k))\n            \n            while q < n and calc(pos, p, q) > k:\n                min_diff = min(min_diff, abs(calc(pos, p, q) - k))\n                update(nums[q])\n                q += 1\n            \n            # now calculate the value and one to the left\n            min_diff = min(min_diff, abs(calc(pos, p, q) - k))\n            # print(pos)\n            # print(\"after:\", \"at\", p, q, \"value:\", calc(pos, p, q), \"diff\", calc(pos, p, q) - k)\n                               \n\n            \n            # remove the current position\n            remove(nums[p])\n            \n        # print(\"FINAL RESULT IS:\", min_diff)\n        return min_diff\n            ",
    "submit_ts": 1717299558.0
}