{
    "username": "hrishavkmr",
    "submission": "class Seg {\n  public:\n    vector<int> tree;\n    int n;\n    Seg(vector<int> v){\n        int n = v.size();\n        this->n = n;\n        tree = vector<int> (2*n, 0);\n        for(int i = 0;i<n;i++){\n            tree[i+n] = v[i];\n        }\n        buildTree();\n    }\n    void buildTree(){\n        for(int i=n-1;i>=1;i--){\n            tree[i] = tree[2*i] + tree[2*i+1];\n        }\n    }\n    void update(int pos, int val){\n        pos += n;\n        tree[pos] = val;\n        pos /= 2;\n        while(pos >= 1){\n            tree[pos] = tree[2*pos] + tree[2*pos+1];\n            pos /= 2;\n        }\n    }\n    int getMax(int l, int r){\n        l += n;\n        r += n;\n        int ans = 0;\n        while(l < r){\n            if(l&1) ans += tree[l++];\n            if(r&1) ans += tree[--r];\n            \n            l >>= 1;\n            r >>= 1;\n        }\n        return ans;\n    }\n};\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        vector<int> peakArray(n, 0);\n        for(int i = 1;i<n-1;i++){\n            if(nums[i] > nums[i-1] && nums[i] > nums[i+1]){\n                peakArray[i] = 1;\n            }\n        }\n        Seg *tree = new Seg(peakArray);\n        int m = queries.size();\n        vector<int> ans;\n        for(int i = 0;i<m;i++){\n            vector<int> query = queries[i];\n            if(query[0] == 1){\n                int l = query[1];\n                int r = query[2];\n                int currAns = tree->getMax(l+1, r);\n                ans.push_back(currAns);\n            } else {\n                int idx = query[1];\n                int val = query[2];\n                nums[idx] = val;\n                for(int i = max(idx-1, 1);i<=min(n-2,idx+1);i++){\n                    if(nums[i] > nums[i-1] && nums[i] > nums[i+1]){\n                        tree->update(i, 1);\n                    } else {\n                        tree->update(i, 0);\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507823.0
}