{
    "username": "inversionpeter",
    "submission": "class Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        int counts = 0, previousLeft, nowLeft, zeros, ones = 0, leftMost0;\n        for (int i = 0; i != s.size(); ++i) {\n            if (s[i] == '0') {\n                ones = 0;\n            }\n            else if (s[i] == '1') {\n                ++ones;\n            }\n            counts += ones;\n        }\n        //cout << counts << '\\n';\n        for (int i = 1; i <= (int)sqrt(s.size()); ++i) {\n            previousLeft = -1;\n            nowLeft = zeros = ones = 0;\n            for (int j = 0; j != s.size(); ++j) {\n                if (s[j] == '0') {\n                    ++zeros;\n                    if (zeros > i) {\n                        while (zeros > i) {\n                            if (s[nowLeft] == '0') {\n                                --zeros;\n                            }\n                            else {\n                                --ones;\n                            }\n                            ++nowLeft;\n                        }\n                    }\n                    previousLeft = nowLeft;\n                }\n                else {\n                    ++ones;\n                }\n                if (zeros == i) {\n                    //cout << j << \" : \" << previousLeft << ' ' << nowLeft << '\\n';\n                    while (nowLeft <= j && s[nowLeft] == '1' && zeros * zeros <= ones - 1) {\n                        ++nowLeft;\n                        --ones;\n                    }\n                    //cout << j << \" : \" << previousLeft << ' ' << nowLeft << '\\n';\n                    counts += nowLeft - previousLeft;\n                    if (zeros * zeros <= ones) {\n                        ++counts;\n                    }\n                }\n            }\n            //cout << counts << '\\n';\n        }\n        //cout << '\\n';\n        return counts;\n    }\n};",
    "submit_ts": "1722137526",
    "subm_id": "1335766303"
}