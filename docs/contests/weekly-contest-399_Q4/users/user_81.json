{
    "username": "Kishan_143",
    "submission": "class ST {\n    public int MA = 500005;\n    public int n;\n    public long t[][];\n    public long a[];\n    public ST(int[] nums) {\n        this.n = nums.length;\n        this.t = new long[n*4+10][4]; \n        this.a = new long[n];\n        for(int i=0;i<n;i++) a[i] = nums[i];\n        build(nums, 1, 0, n-1);\n    }\n    \n    public void build(int a[], int v, int tl, int tr) {\n        if (tl == tr) {\n            t[v][0] = Math.max((long)a[tl],0L);\n            t[v][1] = 0L;\n            t[v][2] = 0L;\n            t[v][3] = 0L;\n        } else {\n            int tm = (tl + tr) / 2;\n            build(a, v*2, tl, tm);\n            build(a, v*2+1, tm+1, tr);\n            opr(t[v], t[v*2], t[v*2+1]);\n        }\n    }\n    \n    public void opr(long[] z, long[] x, long[] y) {\n        z[0] = maxVal(x[0]+y[2], x[1]+y[0], x[1]+y[2]);\n        z[1] = maxVal(x[0]+y[3], x[1]+y[1], x[1]+y[3]);\n        z[2] = maxVal(x[2]+y[2], x[3]+y[0], x[3]+y[2]);\n        z[3] = maxVal(x[2]+y[3], x[3]+y[1], x[3]+y[3]);\n    }\n    \n    public long maxVal(long x, long y, long z) {\n        return Math.max(x, Math.max(y,z));\n    }\n    \n    public void update(int v, int tl, int tr, int pos, int new_val) {\n        if (tl == tr) {\n            t[v][0] = Math.max((long)new_val,0L);\n            t[v][1] = 0L;\n            t[v][2] = 0L;\n            t[v][3] = 0L;\n        } else {\n            int tm = (tl + tr) / 2;\n            if (pos <= tm)\n                update(v*2, tl, tm, pos, new_val);\n            else\n                update(v*2+1, tm+1, tr, pos, new_val);\n            opr(t[v], t[v*2], t[v*2+1]);\n        }\n    }\n    \n    public long query(int v, int tl, int tr, int l, int r) {\n        if (l > r) \n            return 0;\n        if (l == tl && r == tr) {\n            return t[v][0];\n        }\n        int tm = (tl + tr) / 2;\n        return query(v*2, tl, tm, l, Math.min(r, tm))\n               + query(v*2+1, tm+1, tr, Math.max(l, tm+1), r);\n    }\n}\nclass Solution {\n    public int maximumSumSubsequence(int[] nums, int[][] q) {\n        ST st = new ST(nums);\n        int n = nums.length;\n        long ans = 0L;\n        long MO = 1000000007L;\n        for(int i=0;i<q.length;i++) {\n            st.update(1, 0, n-1, q[i][0], q[i][1]);\n            long q1 = st.query(1, 0, n-1, 0, n-1);\n            //System.out.println(q1);        \n            ans =  (ans + q1)% MO;\n        }\n        return (int)ans;\n    }\n}",
    "submit_ts": 1716694292.0
}