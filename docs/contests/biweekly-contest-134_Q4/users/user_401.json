{
    "username": "smalukav",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        array<int, 32> c1{};\n        array<int, 32> c2{};\n        size_t l1 = 0;\n        size_t l2 = 0;\n        long long ans = 0;\n        for (size_t r = 0; r < nums.size(); ++r) {\n            int num = nums[r];\n            for (unsigned i = 0; i < 32; ++i) {\n                if ((num & (1U << i)) == 0) {\n                    ++c1[i];\n                    ++c2[i];\n                }\n            }\n            while (l1 <= r) {\n                bool bad = false;\n                for (unsigned i = 0; i < 32; ++i) {\n                    if ((k & (1U << i)) != 0 && c1[i] != 0) {\n                        bad = true;\n                        break;\n                    }\n                }\n                if (bad) {\n                    int num = nums[l1++];\n                    for (unsigned i = 0; i < 32; ++i) {\n                        if ((num & (1U << i)) == 0)\n                            --c1[i];\n                    }\n                } else\n                    break;\n            }\n            bool skip = false;\n            for (unsigned i = 0; i < 32; ++i) {\n                if ((k & (1U << i)) == 0 && c2[i] == 0) {\n                    skip = true;\n                    break;\n                }\n            }\n            if (!skip) {\n                while (l2 < r) {\n                    int num = nums[l2];\n                    bool bad = false;\n                    for (unsigned i = 0; i < 32; ++i) {\n                        if ((k & (1U << i)) == 0 && c2[i] == 1 && (num & (1U << i)) == 0) {\n                            bad = true;\n                            break;\n                        }\n                    }\n                    if (!bad) {\n                        ++l2;\n                        for (unsigned i = 0; i < 32; ++i) {\n                            if ((num & (1U << i)) == 0)\n                                --c2[i];\n                        }\n                    } else\n                        break;\n                }\n                if (l1 <= l2)\n                    ans += l2 - l1 + 1;\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279419",
    "subm_id": "1311750416"
}