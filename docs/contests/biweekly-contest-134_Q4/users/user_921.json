{
    "username": "garyjhu",
    "submission": "import java.util.Arrays;\n\nclass Solution {\n    public long countSubarrays(int[] nums, int k) {\n        int n = nums.length;\n        int[][] firstOne = new int[n][31];\n        int[][] lastOne = new int[n][31];\n        int[][] firstZero = new int[n][31];\n        int[][] lastZero = new int[n][31];\n        long res = 0;\n        for (int i = 0; i < n; i++) {\n            for (int j = 0; j < 31; j++) {\n                if ((nums[i] & (1 << j)) == 0) {\n                    firstOne[i][j] = i == 0 ? -1 : firstOne[i - 1][j];\n                    lastOne[i][j] = i == 0 ? -1 : lastOne[i - 1][j];\n                    firstZero[i][j] = i == 0 || lastZero[i - 1][j] != i - 1 ? i : firstZero[i - 1][j];\n                    lastZero[i][j] = i;\n                }\n                else {\n                    firstOne[i][j] = i == 0 || lastOne[i - 1][j] != i - 1 ? i : firstOne[i - 1][j];\n                    lastOne[i][j] = i;\n                    firstZero[i][j] = i == 0 ? -1 : firstZero[i - 1][j];\n                    lastZero[i][j] = i == 0 ? -1 : lastZero[i - 1][j];\n                }\n            }\n        }\n        outer:\n        for (int i = 0; i < n; i++) {\n            int lo = 0, hi = i;\n            for (int j = 0; j < 31; j++) {\n                if ((k & (1 << j)) == 0) hi = Math.min(hi, lastZero[i][j]);\n                else if (lastOne[i][j] == i) lo = Math.max(lo, firstOne[i][j]);\n                else continue outer;\n            }\n            if (lo > hi) continue;\n            res += hi - lo + 1;\n        }\n        return res;\n    }\n}\n",
    "submit_ts": "1720279867",
    "subm_id": "1311768262"
}