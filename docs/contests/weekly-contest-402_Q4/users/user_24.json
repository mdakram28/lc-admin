{
    "username": "hazzler",
    "submission": "class Solution {\n    struct bit{\n        int n;\n        vector <int> t;\n        bit(int z): n(z + 5), t(z + 5) {}\n        \n        void upd(int p, int x){\n            for (p += 3; p < n; p += p & -p){\n                t[p] += x;\n            }\n        }\n        \n        int get(int r){\n            int res = 0;\n            for (r += 3; r > 0; r -= r & -r){\n                res += t[r];\n            }\n            return res;\n        }\n    };\n    \npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        bit t(n);\n        auto check = [&](int i, int f){\n            if (i > 0 && i + 1 < n && nums[i] > nums[i - 1] && nums[i] > nums[i + 1]){\n                t.upd(i, f);\n            }\n        };\n        for (int i = 1; i + 1 < n; ++i){\n            check(i, +1);\n        }\n        vector <int> ans;\n        for (auto &q: queries){\n            if (q[0] == 1){\n                int l = q[1], r = q[2];\n                ++l, --r;\n                int res = 0;\n                if (l <= r){\n                    res = t.get(r) - t.get(l - 1);\n                }\n                ans.push_back(res);\n            }\n            else{\n                int p = q[1], x = q[2];\n                for (int i = -1; i <= 1; ++i){\n                    check(p + i, -1);\n                }\n                nums[p] = x;\n                for (int i = -1; i <= 1; ++i){\n                    check(p + i, +1);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1718506028",
    "subm_id": "1289604298"
}