{
    "username": "cool-6alileovex",
    "submission": "class Solution {\n    int len;\n    int s[1000],a[100005];\n    int id(int x){\n        return x/len;\n    }\n    int qry(int x){\n        int j=x;\n        int res=0;\n        if(id(0)==id(x)){\n            for(int i=0;i<=x;i++){\n                res+=a[i];\n            }\n        }\n        else{\n            while(id(j)==id(x))res+=a[j--];\n            for(int k=id(j);k>=0;k--)res+=s[k];\n        }\n        return res;\n    }\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        vector<int>ans;\n        len=sqrt(nums.size()+1)+5;\n        memset(s,0,sizeof s);\n        memset(a,0,sizeof a);\n        for(int i=1;i<nums.size()-1;i++){\n            if(nums[i]>nums[i-1]&&nums[i]>nums[i+1]){\n                s[id(i)]++;\n                a[i]=1;\n            }\n        }\n        for(auto t:queries){\n            int op=t[0],l=t[1],r=t[2];\n            if(op==1){\n                l++,r--;  \n                if(r<l)ans.push_back(0);\n                else{\n                    ans.push_back(qry(r)-qry(l-1));\n                }\n            }\n            else{\n                for(int i=max(1,l-1);i<min((int)nums.size()-1,l+2);i++){\n                    if(nums[i]>nums[i-1]&&nums[i]>nums[i+1]){\n                        s[id(i)]--;\n                    }\n                    a[i]=0;\n                }\n                nums[l]=r;\n                for(int i=max(1,l-1);i<min((int)nums.size()-1,l+2);i++){\n                    if(nums[i]>nums[i-1]&&nums[i]>nums[i+1]){\n                        s[id(i)]++;\n                        a[i]=1;\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718508076.0
}