{
    "username": "shekhar125",
    "submission": "class Sgtree\n{\n    public:\n    vector<int> seg;\n    Sgtree(int n)\n    {\n        seg.resize(4*n+1);\n    }\n    void build(int ind,int low,int high,vector<int> &arr)\n    {\n        if(low==high)\n        {\n            seg[ind]=arr[low];\n            return ;\n\n        }\n        int mid=(low+high)/2;\n        build(2*ind+1,low,mid,arr);\n        build(2*ind+2,mid+1,high,arr);\n\n        seg[ind]=(seg[2*ind+1] & seg[2*ind+2]);\n\n    }\n    int query(int ind,int low,int high,int l,int r)\n    {\n        if(l>high || low>r) return ((1<<30)-1);\n        if(low>=l && high<=r) return seg[ind];\n\n        int mid=(low+high)/2;\n        int left=query(2*ind+1,low,mid,l,r);\n        int right=query(2*ind+2,mid+1,high,l,r);\n        return (left & right);\n    }\n\n\n};\n\n#define ll long long\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        ll ans=0;\n        int n=nums.size();\n        Sgtree sg(n);\n        sg.build(0,0,n-1,nums);\n        for(int i=0;i<n;++i)\n        {\n            if(nums[i]<k) continue;\n            int l=i;\n            int r=n-1;\n            int ansl=-1;\n            while(l<=r)\n            {\n                int mid=(l+r)/2;\n                int val=sg.query(0,0,n-1,i,mid);\n                \n                if(k>val)\n                {\n                    \n                    r=mid-1;\n                }\n                else if(val>k)\n                {\n                   \n                    l=mid+1;\n                }\n                else\n                {\n                    ansl=mid;\n                    r=mid-1;\n                }\n            }\n            if(ansl==-1) continue;\n            \n            int ansr=n;\n            l=ansl;\n            r=n-1;\n            while(l<=r)\n            {\n                int mid=(l+r)/2;\n                //cout<<mid<<endl;\n                int val=sg.query(0,0,n-1,i,mid);\n                //cout<<val<<endl;\n                if(val==k)\n                {\n                    ansr=mid;\n                    l=mid+1;\n                }\n                else if(val<k)\n                {\n                   r=mid-1;\n                    \n                }\n                \n            }\n            ans+=(ansr-ansl+1);\n            \n        }\n        \n        return ans;\n        \n    }\n};",
    "submit_ts": "1720279919",
    "subm_id": "1311770227"
}