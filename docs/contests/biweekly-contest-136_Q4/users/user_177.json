{
    "username": "Chasey",
    "submission": "#define ll int\n#define REP(i,n)        FOR(i,0,n)\n#define SORT(v)         sort((v).begin(),(v).end())\n#define FOR(i,a,b)      for(ll i=(a);i<(b);i++)\n\nclass Solution {\npublic:\n    vector<vector<pair<ll,ll>>> dp; // value, index\n    map<ll, ll> parent;\n\n    ll dpVal(ll curr) { return dp[curr].size() == 0 ? 0 : dp[curr].back().first; }\n\n    ll dfs(ll from, ll curr, vector<vector<ll>>& g) {\n        parent[curr] = from;\n        for (auto a : g[curr]) {\n            if (a == from) continue;\n            dp[curr].push_back({dfs(curr, a, g) + (a%2 == 0 ? 2 : 1), a}); SORT(dp[curr]);\n            if (dp[curr].size() > 2) dp[curr].erase(dp[curr].begin());\n        }   \n        \n        return dpVal(curr);\n    }\n\n    // 0 = random val, 1 = max val\n    vector<vector<ll>> dp1;\n\n    ll dfs1(ll from, ll curr, vector<vector<ll>>& g) {\n        if (parent[curr] == from) return dpVal(curr);\n        ll j = 0;\n        if (dp[curr].size() > 0 && dp[curr].back().second == from) {\n            if (dp[curr].size() == 2) {\n                if (dp[curr][0].first != dp[curr][1].first) j = 1;\n            } else if (dp[curr].size() == 1) {\n                j = 1;\n            } else if (dp[curr].size() == 0) {\n            }\n        }\n        if (dp1[curr][j] != -1) return dp1[curr][j];\n        ll res = 0;\n        for (auto a : g[curr]) {\n            if (a == from) continue;\n            res = max(res, dfs1(curr, a, g) + (a%2 == 0 ? 2 : 1));\n        }   \n        return dp1[curr][j] = res;\n    }\n\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        ll n = edges.size()+1;\n        vector<vector<ll>> g(n); for (auto& e : edges) { g[e[0]].push_back(e[1]); g[e[1]].push_back(e[0]); }\n        dp = vector<vector<pair<ll, ll>>>(n);\n        vector<ll> res(n); res[0] = dfs(-1, 0, g);\n\n        dp1 = vector<vector<ll>>(n, vector<ll>(2, -1));\n        FOR(i, 1, n) res[i] = dfs1(-1, i, g);\n        return res;\n    }\n};",
    "submit_ts": "1722699255",
    "subm_id": "1343206137"
}