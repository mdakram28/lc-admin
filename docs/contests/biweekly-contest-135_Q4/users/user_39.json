{
    "username": "knarf",
    "submission": "class Solution {\n    public long maximumScore(int[][] grid) {\n        int n = grid.length;\n        long[][] pre = new long[n+1][n];\n        for(int i=0;i<n;i++) {\n            for(int j=0;j<n;j++) {\n                pre[i+1][j] = pre[i][j] + grid[i][j];\n            }\n        }\n        if(n==1) return 0;\n        long[][][] dp = new long[n][n+1][n+1];\n        long[][] dp1 = new long[n][n+1];\n        long[][] dp2 = new long[n][n+1];\n        for(int i=0;i<=n;i++) {\n            for(int j=0;j<=n;j++) {\n                if(i==j) {\n                    dp[1][i][j] = 0;\n                } else if(i<j) {\n                    dp[1][i][j] = pre[j][1]-pre[i][1];\n                } else {\n                    dp[1][i][j] = pre[i][0]-pre[j][0];\n                }\n                dp1[1][i] = Math.max(dp1[1][i],dp[1][i][j]);\n                if(i>=j) dp2[1][i] = Math.max(dp2[1][i],dp[1][i][j]);\n            }\n        }\n        for(int i=2;i<n;i++) {\n            for(int j=0;j<=n;j++) {\n                for(int k=0;k<=n;k++) {\n                    if(j<=k) {\n                        dp[i][j][k] = dp1[i-1][k]+pre[k][i]-pre[j][i];\n                    } else {\n                        dp[i][j][k] = dp2[i-1][k]+pre[j][i-1]-pre[k][i-1]\n;                        for(int l=k+1;l<=n;l++) {\n                            if(l>=j) {\n                                dp[i][j][k] = Math.max(dp[i][j][k],dp[i-1][k][l]);\n                            } else {\n                                dp[i][j][k] = Math.max(dp[i][j][k],dp[i-1][k][l]+pre[j][i-1]-pre[l][i-1]);\n                            }\n                        }\n                    }\n                    dp1[i][j] = Math.max(dp1[i][j],dp[i][j][k]);\n                    if(j>=k) dp2[i][j] = Math.max(dp2[i][j],dp[i][j][k]);\n                }\n            }\n        }\n        long max = 0;\n        for(int i=0;i<=n;i++) {\n            max = Math.max(max,dp1[n-1][i]);\n        }\n        return max;\n    }\n}",
    "submit_ts": "1721489684",
    "subm_id": "548319809"
}