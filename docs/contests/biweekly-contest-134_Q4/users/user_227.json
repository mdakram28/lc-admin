{
    "username": "sghosh982",
    "submission": "struct SparseTable {\n    vector<int> logt2;\n    vector<vector<int>> st;\n    int Func(int a,int b){ return (a & b); } \n    SparseTable(vector<int> &a){\n        int n = a.size(); \n        logt2.assign(n + 10, 0);\n        for(int i=2;i<n + 10;i++)logt2[i] = 1 + logt2[i/2];\n        int k = logt2[n] + 2;\n        vector<int> ev(k, 0);\n        for (int i = 0; i < n; i++) st.push_back(ev);\n        for(int i=0;i<n;i++)st[i][0] = a[i];\n        for(int j=1;j<k;j++){\n            for(int i=0;i+(1ll<<j)<=n;i++){\n                st[i][j] = Func(st[i][j-1], st[i+(1ll<<(j-1))][j-1]);\n            }\n        }\n        \n    }\n    int Query(int l,int r){\n        int j = logt2[r-l+1];\n        return Func(st[l][j],st[r-(1ll<<j)+1][j]);\n    }\n};\n\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& a, int k) {\n        cin.tie(0)->sync_with_stdio(0);\n        SparseTable st(a);\n        int n = a.size();\n        long long ans = 0;\n        for (int i = 0; i < n; i++) {\n            if (a[i] < k) continue;\n            int l1 = i, r1 = n - 1, m1 = i - 1;\n            while (l1 <= r1) {\n                int m = l1 + (r1 - l1) / 2;\n                // cout << l1 << \" : \" << r1 << \" | \" << m << \" | \" << st.Query(i, m) << '\\n';\n                if (st.Query(i, m) > k) {\n                    m1 = m;\n                    l1 = m + 1;\n                    // cout << \"IN1\\n\";\n                } else {\n                    // cout << \"IN2\\n\";\n                    r1 = m - 1;\n                }\n            }\n            int l2 = i, r2 = n - 1, m2 = n;\n            while (l2 <= r2) {\n                int m = l2 + (r2 - l2) / 2;\n                if (st.Query(i, m) < k) {\n                    m2 = m;\n                    r2 = m - 1;\n                } else l2 = m + 1;\n            }\n            // cout << i << \" \" << m1 << \" | \" << m2 << '\\n';\n            ans += ((m2 - m1 - 1) * 1ll);\n        }\n        return ans;\n    }\n};\n\n\n\n\n\n",
    "submit_ts": "1720278743",
    "subm_id": "1311722329"
}