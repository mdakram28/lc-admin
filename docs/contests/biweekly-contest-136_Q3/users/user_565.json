{
    "username": "kowys",
    "submission": "class Solution:\n    def minFlips(self, grid: List[List[int]]) -> int:\n        '''\n        Each 'square' must be all 1s or all 0s to be palindromic. So can ignore the divisible by 4 condition.\n        \n        Exceptions are middle rows and columns.\n        '''\n        visited = set()\n        n, m = len(grid), len(grid[0])\n        flips = 0\n        for i in range(n):\n            for j in range(m):\n                if (i,j) not in visited:\n                    if n % 2 == 1 and i == ((n-1) // 2):\n                        continue\n                    elif m % 2 == 1 and j == ((m-1) // 2):\n                        continue\n                    else:\n                        total = sum([grid[i][j], grid[n-i-1][j], grid[i][m-j-1], grid[n-i-1][m-j-1]])\n                        flips += min(total, 4-total)\n                        visited.add((i,j))\n                        visited.add((n-i-1,j))\n                        visited.add((i,m-j-1))\n                        visited.add((n-i-1,m-j-1))\n\n        swaps = 0\n        ones = 0\n        if n % 2 == 1:\n            midR = (n-1) // 2\n            i, j = 0, m-1\n            while i < j:\n                if grid[midR][i] != grid[midR][j]:\n                    swaps += 1\n                    flips += 1\n                elif grid[midR][i] == grid[midR][j] == 1:\n                    ones += 2\n                i += 1\n                j -= 1\n                \n        if m % 2 == 1:\n            midC = (m-1) // 2\n            i, j = 0, n-1\n            while i < j:\n                if grid[i][midC] != grid[j][midC]:\n                    swaps += 1\n                    flips += 1\n                elif grid[i][midC] == grid[j][midC] == 1:\n                    ones += 2\n                i += 1\n                j -= 1\n                    \n        if ones % 4 == 2 and swaps == 0:\n            flips += 2\n        \n        if n % 2 == 1 and m % 2 == 1 and grid[midR][midC] == 1:\n            flips += 1\n        \n        return flips\n            \n                ",
    "submit_ts": "1722697799",
    "subm_id": "1343159324"
}