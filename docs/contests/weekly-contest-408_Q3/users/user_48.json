{
    "username": "harttle",
    "submission": "/**\n * @param {string} s\n * @return {number}\n */\nvar numberOfSubstrings = function(s) {\n    const N = s.length\n    // 0 0, 1 1, 2 4, 3 9, 4 16, 5 25, ...\n    const indices0 = Array(4e4 + 1).fill(Infinity)\n    const indices1 = Array(4e4 + 1).fill(Infinity)\n    const counts0 = Array(4e4 + 1).fill(0)\n    for (let i = 0, ones = 0, zeros = 0; i < N; i++) {\n        if (s[i] === '0') zeros++\n        else ones++\n        if (indices0[zeros] === Infinity) indices0[zeros] = i\n        if (indices1[ones] === Infinity) indices1[ones] = i\n        counts0[i + 1] = zeros\n    }\n    if (indices1[0] === Infinity) indices1[0] = -1\n    if (indices0[0] === Infinity) indices0[0] = -1\n    let dominant = 0\n    for (let i = 0, offset0 = 0, offset1 = 0; i < N; i++) {\n        // console.log(`i=${i}, offset0=${offset0}, offset1=${offset1}`)\n        for (let zeros = 0; zeros <= N; zeros++) {\n            if(offset0 + zeros >= N || zeros * zeros + offset1 >= N) break\n            const i0 = Math.max(i, indices0[offset0 + zeros])\n            const i1 = Math.max(i0, indices1[zeros * zeros + offset1])\n            // console.log(`zeros=${zeros} i0=${i0} i1=${i1}`)\n            if (i0 === Infinity || i1 === Infinity) break\n            // console.log(`zeros=${zeros}, i0=${i0}, i1=${i1}, ${counts0[i1 + 1]} - ${counts0[i]} <= ${zeros}`)\n            \n            if (counts0[i1 + 1] - counts0[i] <= zeros) {\n                const nxt0 = indices0[counts0[i1 + 1] + 1]\n                const count = Math.min(nxt0, N) - i1\n                // console.log(`nxt0=${nxt0}, count = ${Math.min(nxt0, N)} - ${i1} = ${count}`)\n                dominant += count\n            }\n        }\n        if (s[i] === '0') offset0++\n        else offset1++\n    }\n    return dominant\n};",
    "submit_ts": "1722136451",
    "subm_id": "1335734893"
}