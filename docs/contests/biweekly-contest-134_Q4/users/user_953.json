{
    "username": "karan984",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        long long ans=0, an=-1, i, j, n=nums.size(), p, t, t1;\n        \n        int pre[n][32], suffix[n];\n        \n        if((nums[n-1]&k)==k){\n            suffix[n-1]=n;\n        }else{\n            suffix[n-1]=n-1;\n        }\n        \n        for(i=n-2; i>=0; i--)\n        {\n            if((nums[i]&k)==k){\n                suffix[i]=suffix[i+1];\n            }else{\n                suffix[i]=i;\n            }\n        }\n        for(i=0; i<n; i++)\n        {\n            for(j=0; j<32; j++)\n            {\n                pre[i][j]=0;\n            }\n        }\n        for(j=0, p=1; j<32; j++, p=p*2)\n            {\n                if((nums[0]&p)==p){\n                    pre[0][j]=1;\n                }else{\n                    pre[0][j]=0;\n                }\n            }\n        for(i=1; i<n; i++)\n        {\n            for(j=0, p=1; j<32; j++, p=p*2)\n            {\n                if((nums[i]&p)==p){\n                    pre[i][j]=pre[i-1][j]+1;\n                }else{\n                    pre[i][j]=pre[i-1][j];\n                }\n            }\n        }\n        \n        i=0;\n        p=-1;\n        for(j=0; j<n; j++)\n        {\n            if(p==-1){\n                p=nums[j];\n            }else{\n                p=p&nums[j];\n            }\n            //cout<<i<<\" \"<<j<<\" \"<<p<<\"\\n\";\n            if((p&k)==k){\n                if(p==k){\n                    ans=ans+suffix[j]-j;\n                    i++;\n                    if(i>j){\n                        p=-1;\n                    }else{\n                        p=0;\n                        for(t=0, t1=1; t<32; t++, t1=t1*2){\n                            if((pre[j][t]-pre[i-1][t])==(j-i+1)){\n                                p=p+t1;\n                            }\n                        }\n                        j--;\n                    }\n                }\n            }else{\n                p=-1;\n                i=j+1;\n            }\n            cout<<ans<<\" \";\n            //cout<<i<<\" \"<<j<<\" \"<<p<<\"\\n\";\n        }\n        \n        return ans;\n        \n    }\n};",
    "submit_ts": "1720279314",
    "subm_id": "1311746245"
}