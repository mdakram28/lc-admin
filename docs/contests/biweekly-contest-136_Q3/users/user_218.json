{
    "username": "rtmkz",
    "submission": "#include <bits/stdc++.h>\n \n#define f first\n#define s second\n \n#define pb push_back\n#define pp pop_back\n#define mp make_pair\n \n#define sz(x) (int)x.size()\n#define sqr(x) ((x) * 1ll * (x))\n#define all(x) x.begin(), x.end()\n \n#define rep(i, l, r) for (int i = (l); i <= (r); i++)\n#define per(i, l, r) for (int i = (l); i >= (r); i--)\n \n#define Kazakhstan ios_base :: sync_with_stdio(0), cin.tie(0), cout.tie(0);\n \n#define nl '\\n'\n#define ioi exit(0);\n \ntypedef long long ll;\ntypedef long double ld;\ntypedef unsigned long long ull;\n \nconst int N = (int)5e5 + 7;\nconst int inf = (int)1e9 + 7;\nconst int mod = (int)1e9 + 7;\nconst ll linf = (ll)1e18 + 7;\n \nconst int dx[] = {-1, 0, 1, 0, 1, -1, -1, 1};\nconst int dy[] = {0, 1, 0, -1, 1, -1, 1, -1};\n \nusing namespace std;\n\nclass Solution {\npublic:\n    bool mid;\n    vector<pair<int,int>> b;\n    int dp[N][4];\n    int calc(int pos, int cnt = 0) {\n        if (pos == sz(b)) {\n            if (cnt == 0) return 0;\n            return inf;\n        }\n        if (~dp[pos][cnt]) return dp[pos][cnt];\n        int res = inf;\n        if (b[pos].f == b[pos].s) {\n            res = min(res, calc(pos + 1, (cnt + b[pos].f * 2) % 4));\n            res = min(res, calc(pos + 1, cnt) + 2);\n        }\n        else {\n            res = min(res, calc(pos + 1, (cnt + 2) % 4) + 1);\n            res = min(res, calc(pos + 1, cnt) + 1);\n        }\n        return dp[pos][cnt] = res;\n    }\n    int minFlips(vector<vector<int>>& a) {\n        int n = a.size(), m = a[0].size();\n        if (n == 1 || m == 1) {\n            // return base(a);\n        }\n\n        int ans = 0;\n        for (int r1 = 0, r2 = n - 1; r1 < r2; r1++, r2--) {\n            for (int c1 = 0, c2 = m - 1; c1 < c2; c1++, c2--) {\n                int cnt = a[r1][c1] + a[r1][c2] + a[r2][c1] + a[r2][c2];\n                ans += min(cnt, 4 - cnt);\n            }\n        }\n        \n        if (n % 2) {\n            int l = 0, r = m - 1;\n            while (l < r) {\n                b.pb({a[n/2][l], a[n/2][r]});\n                l++, r--;\n            }\n        }\n        if (m % 2) {\n            int l = 0, r = n - 1;\n            while (l < r) {\n                b.pb({a[l][m/2], a[r][m/2]});\n                l++, r--;\n            }\n        }\n        if (n % 2 && m % 2) mid = a[n/2][m/2];\n        memset(dp, -1, sizeof(dp));\n        return ans + min(calc(0, mid), calc(0, 0) + 1);\n    }\n};",
    "submit_ts": "1722699292",
    "subm_id": "1343207247"
}