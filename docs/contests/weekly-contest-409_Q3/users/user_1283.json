{
    "username": "eshaansodhi",
    "submission": "class Solution {\npublic:\n    vector<int> shortestDistanceAfterQueries(int n, vector<vector<int>>& queries) {\n        set<int>beg, en;\n        vector<int>ans;\n        int cur = n-1;\n        for(auto i : queries){\n            int u = i[0];\n            int v = i[1];\n            auto xb = beg.upper_bound(-v);\n            if(xb==beg.end()){\n                // cout << 1 << ' ' << u << ' ' << v << '\\n';\n            \n                beg.insert(-u);\n                en.insert(v);\n                cur -= (v-u-1);\n                ans.push_back(cur);\n                continue;\n            }\n            int xbn = -(*xb);\n            auto xe = en.upper_bound(xbn);\n            int xen = *xe;\n            if(xen<=v && xbn>=u){\n                auto it = en.upper_bound(u);\n                set<int>ern,erb;\n                vector<int>a,b;\n                while(it!=en.end() && *it<=v){\n                    ern.insert(*it);\n                    b.push_back(*it);\n                    it++;\n                }\n                it = beg.upper_bound(-v);\n                while(it!=beg.end() && -(*it)>=u){\n                    erb.insert(*it);\n                    a.push_back(-(*it));\n                    it++;\n                }\n                for(auto it:ern){\n                    en.erase(it);\n                }\n                for(auto it:erb){\n                    beg.erase(it);\n                }\n                sort(a.begin(),a.end());\n                sort(b.begin(),b.end());\n                int x = a.size();\n                for(int i = 0 ; i < x ; i++){\n                    // cout << 3 << ' ' << a[i] << ' ' << b[i] << '\\n';\n                    cur += (b[i]-a[i]-1);\n                }\n                cur -= (v-u-1);\n                beg.insert(-u);\n                en.insert(v);\n            }else if(xen==u){\n                    beg.insert(-u);\n                    en.insert(v);\n                    cur -= (v-u-1);\n            }else if(xen<u){\n                // cout << 2 << ' ' <<  u << ' ' << v << '\\n';\n                // cout << xbn << ' ' << xen << '\\n';\n                beg.insert(-u);\n                en.insert(v);\n                cur -= (v-u-1);\n                // cur = cur;\n            }\n            ans.push_back(cur);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1722743082",
    "subm_id": "1343783911"
}