{
    "username": "DIGVIJAY2003",
    "submission": "#define ABS(x) ((x) < 0 ? -(x) : (x))\n#define UPDATE_ANS_AND_M(ans, m, val) do { (ans) += ABS(val); (m) = ABS(val); } while (0)\n#define CHECK_AND_UPDATE_POS(val, pos) do { (pos) = ((val) >= 0) ? 1 : 0; } while (0)\n#define UPDATE_M_IF_GREATER(m, val) do { if ((m) < ABS(val)) (m) = ABS(val); } while (0)\n\nclass Solution {\npublic:\n    long long minimumOperations(vector<int>& nums, vector<int>& tar) {\n        int n = nums.size();\n        vector<int> diffs = calcDiffs(nums, tar);\n        return findMinOps(diffs, n);\n    }\n\nprivate:\n    vector<int> calcDiffs(const vector<int>& nums, const vector<int>& tar) {\n        int n = nums.size();\n        vector<int> diffs(n);\n        for (int i = 0; i < n; i++) {\n            diffs[i] = tar[i] - nums[i];\n        }\n        return diffs;\n    }\n\n    long long findMinOps(const vector<int>& diffs, int n) {\n        int pos = 0;\n        long long maxDiff = 0, totalOps = 0;\n        initFirstElem(diffs, pos, maxDiff, totalOps);\n        \n        for (int i = 1; i < n; i++) {\n            process(diffs[i], pos, maxDiff, totalOps);\n        }\n        return totalOps;\n    }\n\n    void initFirstElem(const vector<int>& diffs, int& pos, long long& maxDiff, long long& totalOps) {\n        totalOps = ABS(diffs[0]);\n        maxDiff = totalOps;\n        CHECK_AND_UPDATE_POS(diffs[0], pos);\n    }\n\n    void process(int val, int& pos, long long& maxDiff, long long& totalOps) {\n        if (shouldSwitch(val, pos)) {\n            UPDATE_ANS_AND_M(totalOps, maxDiff, val);\n            flipPos(pos);\n        } else {\n            if (maxDiff >= ABS(val)) {\n                maxDiff = ABS(val);\n            } else {\n                totalOps += ABS(val) - maxDiff;\n                maxDiff = ABS(val);\n            }\n        }\n    }\n\n    bool shouldSwitch(int val, int pos) {\n        return (val < 0 && pos == 1) || (val >= 0 && pos == 0);\n    }\n\n    void flipPos(int& pos) {\n        pos = !pos;\n    }\n};\n",
    "submit_ts": "1721533527",
    "subm_id": "1328010974"
}