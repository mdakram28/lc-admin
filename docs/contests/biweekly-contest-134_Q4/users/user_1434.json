{
    "username": "bugdone",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& a, int k) {\n        int n = a.size();\n        long long ans = 0;\n        \n        for (int i = 0; i < n; ++i) {\n            if ((a[i] & k) != k)\n                continue;\n            \n            int start = i;\n            while (i + 1 < n && (a[i + 1] & k) == k)\n                i++;\n            \n            int l = start, r = start;\n            vector<int> bits(32);\n            for (; r <= i; r++) {\n                for (int bit = 0; bit < 30; ++bit) {\n                    if (((1 << bit) & k) || ((1 << bit) & a[r]) == 0)\n                        continue;\n                    bits[bit]++;                    \n                }\n                                \n                while (l <= r) {\n                    bool ok = true;\n                    for (auto x : bits)\n                        if (x == r - l + 1)\n                            ok = false;\n\n                    if (ok) {\n                        ans += i - r + 1;\n                        for (int bit = 0; bit < 30; ++bit) {\n                            if (((1 << bit) & k) || ((1 << bit) & a[l]) == 0)\n                                continue;\n                            bits[bit]--;\n                        }\n                        l++;\n                    } else {\n                        break;\n                    }                    \n                }\n            }\n        }\n        \n        \n        return ans;\n    }\n};",
    "submit_ts": "1720280949",
    "subm_id": "1311807767"
}