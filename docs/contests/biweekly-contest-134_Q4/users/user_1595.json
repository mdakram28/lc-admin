{
    "username": "zzczzc004",
    "submission": "class Solution:\n    def countSubarrays(self, nums: List[int], k: int) -> int:\n        ans = 0\n        n = len(nums)\n        \n        def check(s):\n            if not s:\n                return 0\n            m = len(s)\n            # print(s)\n            t = -1\n            d = [0] * 32\n            l = 0\n            anst = 0\n            for r, v in enumerate(s):\n                for j, vv in enumerate(bin(v)[2:][::-1]):\n                    d[j] += int(vv)\n                t &= v\n                while t == k:\n                    anst += m - r\n                    # print(l, r, t, k, m, s, anst)\n                    lv = s[l]\n                    l += 1\n                    if l > r:\n                        t = -1\n                        d = [0] * 32\n                        break\n                    for j, vv in enumerate(bin(lv)[2:][::-1]):\n                        d[j] -= int(vv)\n                    t = 0\n                    for j in range(len(d)):\n                        if d[j] == (r-l+1):\n                            t |= (1<<j)\n                    # print(\"after\", l, r, t, anst, d)\n            return anst\n        q = []\n        ans = 0\n        t = -1\n        for i, v in enumerate(nums):\n            t &= v\n            if t & k != k:\n                ans += check(q)\n                q = []\n                t = -1\n            else:\n                q.append(v)\n        if q:\n            ans += check(q)\n        return ans\n\n        \n            \n",
    "submit_ts": "1720279569",
    "subm_id": "544568046"
}