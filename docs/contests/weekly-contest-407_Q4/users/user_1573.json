{
    "username": "_saraswat",
    "submission": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define loop(i, a, n) for (lli i = (a); i < (n); ++i)\n#define loopD(i, a, n) for (lli i = (a); i >= (n); --i)\n#define all(c) (c).begin(), (c).end()\n#define rall(c) (c).rbegin(), (c).rend()\n#define sz(a) ((int)a.size())\n#define YES cout << \"YES\" << endl;\n#define NO cout << \"NO\" << endl;\n#define endl '\\n'\n#define fastio std::ios::sync_with_stdio(false), cin.tie(NULL), cout.tie(NULL);\n#define pb push_back\n#define pp pop_back()\n#define fi first\n#define si second\n#define v(a) vector<int>(a)\n#define vv(a) vector<vector<int>>(a)\n#define present(c, x) ((c).find(x) != (c).end())\n#define set_bits __builtin_popcountll\n#define MOD 1000000007\n// #define int long long\n\ntypedef long long lli;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef pair<lli, lli> pll;\ntypedef pair<int, int> pii;\ntypedef unordered_map<int, int> umpi;\ntypedef map<int, int> mpi;\ntypedef vector<pii> vp;\ntypedef vector<lli> vll;\ntypedef vector<vll> vvll;\n\nclass Solution\n{\npublic:\n    long long minimumOperations(vector<int> &a, vector<int> &b)\n    {\n        int n = sz(a);\n        vi diff(n, 0);\n        vi diff2(n, 0);\n        loop(i, 0, n)\n        {\n            int t = b[i] - a[i];\n            if (t > 0)\n                diff[i] = t;\n            diff2[i] = t;\n        }\n        // loop(i, 0, n) cout << diff[i] << \" \";\n        lli ans = 0;\n\n        vector<int> stack;\n\n        stack.push_back(diff[0]);\n        for (int i = 1; i < diff.size(); i++)\n        {\n            if (diff[i] > stack.back())\n            {\n                stack.push_back(diff[i]);\n                continue;\n            }\n            if (diff[i] == stack.back())\n                continue;\n\n            int top = stack.back();\n\n            while (!stack.empty() && diff[i] < stack.back())\n                stack.pop_back();\n\n            ans += top - diff[i];\n            stack.push_back(diff[i]);\n        }\n\n        if (!stack.empty())\n            ans += stack.back();\n        vector<int> st;\n\n        st.push_back(diff2[0]);\n        for (int i = 1; i < diff2.size(); i++)\n        {\n            if (diff2[i] > st.back())\n            {\n                st.push_back(diff2[i]);\n                continue;\n            }\n            if (diff2[i] == st.back())\n                continue;\n\n            int top = st.back();\n\n            while (!st.empty() && diff2[i] < st.back())\n                st.pop_back();\n\n            ans += top - diff2[i];\n            st.push_back(diff2[i]);\n        }\n\n        if (!st.empty())\n            ans += st.back();\n        ans = 0;\n        solve(diff2, n, ans);\n        return ans;\n    }\n\n    void solve(vi &diff2, int n, lli &ans)\n    {\n        int pos = 0;\n        long long m = 0;\n        m = ans = abs(diff2[0]);\n        if (diff2[0] >= 0)\n            pos = 1;\n        for (int i = 1; i < n; i++)\n        {\n            if (diff2[i] < 0)\n            {\n                if (pos == 1)\n                {\n                    ans += abs(diff2[i]);\n                    m = abs(diff2[i]);\n                    pos = 0;\n                    continue;\n                }\n            }\n            if (diff2[i] >= 0 && pos == 0)\n            {\n                if (pos == 0)\n                {\n                    ans += abs(diff2[i]);\n                    m = abs(diff2[i]);\n                    pos = 1;\n                    continue;\n                }\n            }\n            if (m >= abs(diff2[i]))\n                m = abs(diff2[i]);\n            else\n            {\n                ans += abs(diff2[i]) - m;\n                m = abs(diff2[i]);\n            }\n        }\n    }\n};\n",
    "submit_ts": "1721532742",
    "subm_id": "1327992965"
}