{
    "username": "NinjaSatish",
    "submission": "class Solution {\npublic:\n    #define ll long long\n    long long countSubarrays(vector<int>& a, int k) {\n        cin.tie(0);\n        ios_base::sync_with_stdio(false);\n        \n        ll ans = 0 , n = a.size();\n        vector<vector<ll>> f(n + 1, vector<ll>(32, 0));\n        \n        function<void(ll, ll)> add = [&](ll m, ll id){\n            for(ll i = 0; i < 31; i ++){\n                if((m >> i) & 1){\n                    f[id][i] += 1 ;\n                }\n            } \n        } ;\n        \n        for(ll i = 1 ; i <= n; i++){\n            f[i] = f[i - 1] ;\n            add(a[i - 1], i);\n        }\n        \n        for(int i = 1 ; i <= n; i ++){\n            int low = 0 , high = i - 1 ;\n            ll ansr = -1 ;\n            while(low <= high){\n                ll mid = (low + high) / 2 ;\n                \n                ll val = 0 ;\n                for(ll b = 0 ; b < 31; b ++){\n                    if(f[i][b] - f[mid][b] == i - mid){\n                        val += (1ll << b) ;\n                    }\n                }\n                // cout << i << ' ' << mid << \" val = \" << val << endl;\n                \n                if(val < k){\n                    low = mid + 1 ;\n                }else{\n                    if(val == k) ansr = mid ;\n                    high = mid - 1 ;\n                }\n            }\n            \n            \n            low = 0 , high = i - 1 ;\n            ll ansl = -1 ;\n            while(low <= high){\n                ll mid = (low + high) / 2 ;\n                \n                ll val = 0 ;\n                for(ll b = 0 ; b < 31; b ++){\n                    if(f[i][b] - f[mid][b] == i - mid){\n                        val += (1ll << b) ;\n                    }\n                }\n                \n                if(val <= k){\n                    low = mid + 1 ;\n                    if(val == k) ansl = mid ;\n                }else{\n                    high = mid - 1 ;\n                }\n            }\n            \n            if(ansl > -1){\n                ans += abs(ansr - ansl) + 1 ;\n            }\n            // cout << ansl << ' '<< ansr << endl;\n        }\n        \n        return ans;\n    }\n};",
    "submit_ts": "1720278152",
    "subm_id": "1311696657"
}