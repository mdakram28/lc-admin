{
    "username": "12121-b",
    "submission": "typedef long long LL;\nconst int N = 100010;\nint f[N][20];\n\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n = nums.size();\n        for(int j = 0; j < 20; j++) {\n            for(int i = 1; i + (1 << j) - 1 <= n; i++) {\n                if(!j) {\n                    f[i][j] = nums[i - 1];\n                }else {\n                    f[i][j] = f[i][j - 1] & f[i + (1<<(j - 1))][j - 1];\n                }\n            }\n        }\n        LL ans = 0;\n        for(int i = 1; i <= n; i++) {\n            int l = 1, r = i, left = 0, right = 0;\n            while(l <= r) {\n                int mid = l + r >> 1, res = query(mid, i);\n                if(res > k) {\n                    r = mid - 1;\n                }else if(res < k) {\n                    l = mid + 1;\n                }else {\n                    right = mid;\n                    l = mid + 1;\n                }\n            }\n            l = 1, r = i;\n            while(l <= r) {\n                int mid = l + r >> 1, res = query(mid, i);\n                if(res > k) {\n                    r = mid - 1;\n                }else if(res < k) {\n                    l = mid + 1;\n                }else {\n                    left = mid;\n                    r = mid - 1;\n                }\n            }\n            if(right > 0) ans += right - left + 1;\n        }\n        return ans;\n    }\n\n    int query(int l, int r) {\n        int k = log2(r - l + 1);\n        return f[l][k] & f[r - (1<<k) + 1][k];\n    }\n};",
    "submit_ts": "1720279029",
    "subm_id": "544565591"
}