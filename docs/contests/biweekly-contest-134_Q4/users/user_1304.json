{
    "username": "ruiaikete",
    "submission": "function countSubarrays(nums: number[], k: number): number {\n  const n = nums.length\n  let res = 0\n\n  const pre: number[] = new Array(32).fill(-1)\n  for (let i = 0; i < 32; i++) {\n    if ((k >> i) & 1) {\n      pre[i] = -1\n    } else {\n      pre[i] = Infinity\n    }\n  }\n  next: for (let i = 0; i < n; i++) {\n    for (let j = 0; j < 32; j++) {\n      if ((k >> j) & 1) {\n        if ((nums[i] >> j) & 1) {\n          if (pre[j] === -1) pre[j] = i\n        } else {\n          pre[j] = -1\n        }\n      } else {\n        if (!((nums[i] >> j) & 1)) {\n          pre[j] = i\n        }\n      }\n    }\n    let one = -1,\n      zero = Infinity\n    for (let j = 0; j < 32; j++) {\n      if ((k >> j) & 1) {\n        if (pre[j] === -1) continue next\n        one = Math.max(one, pre[j])\n      } else {\n        if (pre[j] === Infinity) continue next\n        zero = Math.min(zero, pre[j])\n      }\n    }\n    if (!k) {\n      res += zero + 1\n    } else if (one !== -1 && zero !== Infinity) {\n      res += Math.max(0, zero - one + 1)\n    }\n  }\n  return res\n}",
    "submit_ts": "1720279420",
    "subm_id": "544567402"
}