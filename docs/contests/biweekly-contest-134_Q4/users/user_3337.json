{
    "username": "kexp",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        long long i,j,ij,t,n=nums.size(),ans =0;\n        long long a[n+1];\n        if ((nums[n-1] & k) == k) a[n] = n;\n        else a[n] = -1;\n        //printf(\"(%d,%d,%d)\\n\",nums[n-1] & k, n,a[n]);\n        for(i=n-2;i>=0;--i){\n            if ((nums[i] & k) == k){\n                if (a[i+2] !=-1) a[i+1] = a[i+2];\n                else a[i+1] = i+1;\n            }else a[i+1] = -1;\n            //printf(\"(%d,%d,%d)\\n\",nums[i] & k, i+1,a[i+1]);\n        }\n        int b[n+1][33];\n        int c[33];\n        memset(c,0,sizeof(c));\n        t=k;\n        for(j=0;j<33;++j) {\n            c[j] = t%2;t=t/2;\n        }\n        memset(b,0,sizeof(b));\n       \n        for(i=0;i<n;++i){\n            t= nums[i];\n            for(j=0;j<33;++j) {\n                b[i+1][j] = b[i][j] +t%2;t=t/2;\n            }\n        }\n        i=1;j=1;\n        //cout<<i<<\" \"<<j<<endl;\n        while(i<=n){\n            j=max(i,j);\n            \n            while(j<=n){\n                t=0;\n                for(ij=0;ij<33;++ij){\n                    if (b[j][ij]-b[i-1][ij] == j-i+1){\n                        t=t | (1<<ij);\n                    }\n                }\n                //printf(\"%d,%d,%d,%d\\n\",i,j,a[j],t);\n                if (t==k){\n                    ans = ans+a[j]-j+1;break;\n                }\n                if ((t&k) ==k){\n                    ++j;\n                }else{\n                    break;\n                }\n            }\n            ++i;\n        }\n\n        return ans;\n    }\n};",
    "submit_ts": "1720281572",
    "subm_id": "544576325"
}