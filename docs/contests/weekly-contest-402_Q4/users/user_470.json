{
    "username": "mananghetia",
    "submission": "class Solution {\npublic:\n    vector<int> seg;\n    int query(int ql,int qr,int r,int l=0,int id=0)\n    {\n        // cout<<ql<<\" \"<<qr<<\" \"<<l<<\" \"<<r<<\" \"<<id<<endl;\n        if(ql>=qr||l>=qr||ql>=r)\n            return 0;\n        if(ql<=l&&r<=qr)\n            return seg[id];\n        int mid=(l+r)/2;\n        return query(ql,qr,mid,l,2*id+1)+query(ql,qr,r,mid,2*id+2);\n    }\n    void update(int x,int val,int r,int l=0,int id=0)\n    {\n        int mid=(l+r)/2;\n        if(l+1==r)\n        {\n            assert(l==x);\n            seg[id]=val;\n            return;\n        }\n        if(x<mid)\n            update(x,val,mid,l,2*id+1);\n        else \n            update(x,val,r,mid,2*id+2);\n        seg[id]=seg[2*id+1]+seg[2*id+2];\n    }\n    void build(int n)\n    {\n        // cout<<n<<endl;\n        seg.assign(4*n,0);\n        \n    }\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n=nums.size();\n        vector<int> ans;\n        build(n);\n        for(int i=1;i+1<n;i++)\n        {\n            if(nums[i]>nums[i-1]&&nums[i]>nums[i+1])\n                update(i,1,n);\n        }\n        for(auto it:queries)\n        {\n            if(it[0]==1)\n            {\n                int l=it[1]+1,r=it[2];\n                 // cout<<l<<\" \"<<r<<endl;\n                ans.push_back(query(l,r,n));\n            }\n            else \n            {\n                int i=it[1],v=it[2];\n                nums[i]=v;\n                if(i-2>=0)\n                {\n                    if(nums[i-1]>nums[i-2]&&nums[i-1]>nums[i])\n                        update(i-1,1,n);\n                    else \n                        update(i-1,0,n);\n                }\n                if(i+2<n)\n                {\n                    if(nums[i+1]>nums[i]&&nums[i+1]>nums[i+2])\n                        update(i+1,1,n);\n                    else \n                        update(i+1,0,n);\n                }\n                if(i-1>=0&&i+1<n)\n                {\n                    if(nums[i]>nums[i-1]&&nums[i]>nums[i+1])\n                        update(i,1,n);\n                    else \n                        update(i,0,n);\n                }\n            }\n            \n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507633.0
}