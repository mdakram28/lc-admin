{
    "username": "Ma_Lin",
    "submission": "class Solution {\npublic:\n    int L = 223;\n    long long mo = 1000000007, f[250][2][2], df[100005], h[250][2];\n    vector<int> a;\n    vector<pair<int, int> > g;\n    int n;\n    \n    void dp(int i){\n        int j, k, l, st = g[i].first, ed = g[i].second;\n        // 0\n        df[st] = 0;\n        df[st + 1] = max(0, a[st + 1]);\n        for (j = st + 2; j <= ed; ++j)\n            df[j] = max(max(df[j - 1], a[j] + 0LL), a[j] + df[j - 2]);\n\n        f[i][0][0] = df[ed - 1];\n        f[i][0][1] = max(a[ed] + 0LL, a[ed] + df[ed - 2]);\n\n        // 1\n        df[st] = a[st];\n        df[st + 1] = a[st];\n        for (j = st + 2; j <= ed; ++j)\n            df[j] = max(max(df[j - 1], a[j] + 0LL), a[j] + df[j - 2]);\n\n        f[i][1][0] = df[ed - 1];\n        f[i][1][1] = max(a[ed] + 0LL, a[ed] + df[ed - 2]);\n    }\n    \n    long long all_dp(){\n        h[0][0] = max(f[0][0][0], f[0][1][0]);\n        h[0][1] = max(f[0][0][1], f[0][1][1]);\n        for (int i = 1; i < g.size(); ++i){\n            h[i][0] = max(f[i][0][0] + max(h[i - 1][0], h[i - 1][1]), f[i][1][0] + h[i - 1][0]);\n            h[i][1] = max(f[i][0][1] + max(h[i - 1][0], h[i - 1][1]), f[i][1][1] + h[i - 1][0]);\n        }\n            \n        return max(h[g.size() - 1][0], h[g.size() - 1][1]);\n    }\n    \n    int maximumSumSubsequence(vector<int>& aa, vector<vector<int>>& Q) {\n        int i, j, res = 0;\n        a = aa;\n        n = a.size();\n        if (n == 1){\n            for (auto w : Q) res = (res + max(0, w[1])) % mo;\n            return res;\n        }\n        \n        if (n == 2){\n            for (auto w : Q){\n                a[w[0]] = w[1];\n                res = (res + max(0, max(a[0], a[1]))) % mo;\n            }\n            \n            return res;\n        }\n        \n        for (i = 0; i < n; i += L){\n            pair<int, int> t;\n            t.first = i;\n            t.second = min(i + L - 1, n - 1);\n\n            if (i + L == n - 1 || i + L + 1 == n - 1){\n                t.second = n - 1;\n                g.push_back(t);\n                break;\n            }\n            \n            g.push_back(t);\n        }\n        \n        for (i = 0; i < g.size(); ++i) dp(i);\n        for (auto w : Q){\n            i = min((int)w[0] / L, (int)g.size() - 1);\n            a[w[0]] = w[1];\n            dp(i);\n            res = (res + all_dp()) % mo;\n        }\n        \n        return res % mo;\n    }\n};",
    "submit_ts": 1716693069.0
}