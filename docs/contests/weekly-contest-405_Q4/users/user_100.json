{
    "username": "brenner1",
    "submission": "#include \"bits/stdc++.h\"\nusing namespace std;\n\n#define endl '\\n'\n#define rep(i, a, b) for (int i = a; i < (b); i++)\n#define all(x) (x).begin(), (x).end()\n#define sz(x) (int)(x).size()\n#define sq(x) (x)*(x)\ntemplate<class T, class U> inline void chmin(T& a, U b) { if (a > b) a = b; }\ntemplate<class T, class U> inline void chmax(T& a, U b) { if (a < b) a = b; }\ntypedef long long ll;\ntypedef long double ld;\ntypedef __int128 i128;\n\nmt19937 rng((int) chrono::steady_clock::now().time_since_epoch().count());\nconst int NN = 1e6 + 1, K = 2, P = uniform_int_distribution<int>(256, 1e9)(rng); // l > |sigma|, r < min(mod)\nconst ll MOD[] = {1000893493, 1013782387};\nll ph[NN][K], hh[NN][K], IT; // LEMBRAR DE CHAMAR pre()!!!!!!!!!!\nbool cdd = 0;\nvoid pre() { rep(i, 0, NN) rep(j, 0, K) ph[i][j] = i ? ph[i - 1][j] * P % MOD[j] : 1; }\n\nstruct hsh {\n    int L;\n    hsh() {}\n    hsh(const string &s) {\n        L = IT, IT += sz(s);\n        rep(i, 0, sz(s)) rep(j, 0, K) {\n            hh[L + i][j] = ((i > 0 ? hh[L + i - 1][j] * P : 0) + s[i]) % MOD[j];\n        }\n    }\n    ll operator()(int l, int r) {\n        array<ll, K> ans;\n        rep(j, 0, K) {\n            ans[j] = hh[L + r][j] - (l > 0 ? hh[L + l - 1][j] * ph[r - l + 1][j] % MOD[j] : 0);\n            if (ans[j] < 0) ans[j] += MOD[j];\n        }\n        return ans[0] | (ans[1] << 31); // for K = 2\n    }\n};\n\nclass Solution {\npublic:\n    int minimumCost(string target, vector<string>& words, vector<int>& costs) {\n        if (!cdd) {\n            pre();\n            cdd = 1;\n        }\n        IT = 0;\n        vector<int> lens;\n        for (string &s: words) lens.push_back(sz(s));\n        sort(all(lens));\n        lens.resize(unique(all(lens)) - lens.begin());\n\n        int n = sz(words);\n\n        vector<ll> h(n);\n        unordered_map<ll, int> mp;\n        rep(i, 0, n) {\n            h[i] = hsh(words[i])(0, sz(words[i]) - 1);\n            if (!mp.count(h[i])) mp[h[i]] = costs[i];\n            else chmin(mp[h[i]], costs[i]);\n        }\n        \n\n        int m = sz(target);\n        vector<int> dp(m + 1);\n        hsh H(target);\n        int inf = 2e9;\n        for (int i = m - 1; i >= 0; i--) {\n            dp[i] = inf;\n            for (int len : lens) if (i + len - 1 < m) {\n                auto cur = H(i, i + len - 1);\n                if (mp.count(cur)) {\n                    chmin(dp[i], dp[i + len] + mp[cur]);\n                }\n            }\n        }\n        return (dp[0] == inf ? -1 : dp[0]);\n    }\n};\n\n",
    "submit_ts": "1720321048",
    "subm_id": "1312312016"
}