{
    "username": "jungharerishi",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& v, int k1) {\n        ios_base::sync_with_stdio(false);\n        cin.tie(NULL);\n        long long n=v.size(),ans=0;\n        long long b[32][n];\n        for(int i=0;i<n;i++){\n            for(int j=0;j<32;j++){\n                if(v[i]&(1LL<<j))b[j][i]=1;\n                else b[j][i]=0;\n            }\n        }\n        for(int j=0;j<32;j++){\n            for(int i=1;i<n;i++){\n                b[j][i]+=b[j][i-1];\n            }\n        }\n        for(int i=0;i<n;i++){\n            int left=i,right=n-1,l=i,r=n-1,f1=0,f2=0;\n            while(l<=r){\n                int m=l+(r-l)/2,x=0;\n                for(int j=0;j<32;j++){\n                    int k=b[j][m];\n                    if(i)k-=b[j][i-1];\n                    if(k==m-i+1)x|=(1LL<<j);\n                }\n                if(x>k1){\n                    l=m+1;\n                }else if(x<k1){\n                    r=m-1;\n                }else{\n                    left=m;\n                    r=m-1;\n                    f1=1;\n                }\n            }\n            l=i;r=n-1;\n            // cout<<ans<<\" \"<<right<<\" \"<<left<<endl;\n            while(l<=r){\n                int m=l+(r-l)/2,x=0;\n                for(int j=0;j<32;j++){\n                    int k=b[j][m];\n                    if(i)k-=b[j][i-1];\n                    if(k==m-i+1)x|=(1LL<<j);\n                }\n                if(x>k1){\n                    l=m+1;\n                }else if(x<k1){\n                    r=m-1;\n                }else{\n                    right=m;\n                    l=m+1;\n                    f2=1;\n                }\n            }\n            if(f1 && f2)ans+=right-left+1;\n            // cout<<ans<<\" \"<<right<<\" \"<<left<<endl;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279360",
    "subm_id": "1311748086"
}