{
    "username": "destiny-god",
    "submission": "class BIT{\npublic:\n#define lowbit(x) ((x) & (-x))\n    int MAXN=0;\n    vector<int>tree;\n    BIT(int n){\n        tree.resize(n);\n        MAXN=n;\n    }\n    void update(int i, int x){\n        for (int pos = i; pos < MAXN; pos += lowbit(pos)) tree[pos] += x;\n    }\n    int query(int n){\n        int ans = 0;\n        for (int pos = n; pos>0; pos -= lowbit(pos)) ans += tree[pos];\n        return ans;\n    }\n    int query(int a, int b){ \n        if(a>b) return 0;\n        return query(b) - query(a - 1); \n    }\n};\n\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n=nums.size();\n        vector<int>d(n);\n        BIT bt(n+5);\n        for(int i=1;i<n-1;i++) {\n            if(nums[i]>nums[i-1]&&nums[i]>nums[i+1]){\n                d[i]=1;\n                bt.update(i+1,1);\n            }\n        }\n        vector<int>res;\n        for(auto i:queries){\n            if(i[0]==1){\n                res.push_back(bt.query(i[1]+2,i[2]));\n            }else{\n                nums[i[1]]=i[2];\n                if(i[1]-1>0){\n                    if(nums[i[1]-1]>nums[i[1]-2]&&nums[i[1]-1]>nums[i[1]]){\n                        if(!d[i[1]-1]){\n                            bt.update(i[1],1);\n                            d[i[1]-1]=1;\n                        }\n                    }else{\n                        if(d[i[1]-1]){\n                            bt.update(i[1],-1);\n                            d[i[1]-1]=0;\n                        }\n                    }\n                }\n                if(i[1]>0&&i[1]<n-1){\n                    if(nums[i[1]]>nums[i[1]-1]&&nums[i[1]]>nums[i[1]+1]){\n                        if(!d[i[1]]){\n                            bt.update(i[1]+1,1);\n                            d[i[1]]=1;\n                        }\n                    }else{\n                        if(d[i[1]]){\n                            bt.update(i[1]+1,-1);\n                            d[i[1]]=0;\n                        }\n                    }\n                }\n                if(i[1]+1<n-1){\n                    if(nums[i[1]+1]>nums[i[1]]&&nums[i[1]+1]>nums[i[1]+2]){\n                        if(!d[i[1]+1]){\n                            bt.update(i[1]+2,1);\n                            d[i[1]+1]=1;\n                        }\n                    }else{\n                        if(d[i[1]+1]){\n                            bt.update(i[1]+2,-1);\n                            d[i[1]+1]=0;\n                        }\n                    }\n                }\n            }\n        }\n        return res;\n    }\n};",
    "submit_ts": "1718507203",
    "subm_id": "539779903"
}