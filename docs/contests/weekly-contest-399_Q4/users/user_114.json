{
    "username": "Jy_Tan",
    "submission": "class Solution:\n    def maximumSumSubsequence(self, nums: List[int], queries: List[List[int]]) -> int:\n        M = 10 ** 9 + 7\n        dp = [None] * (len(nums) * 4 + 4)\n        def build(idx, i, j):\n            if i == j:\n                m = max(nums[i], 0)\n                num = nums[i]\n                dp[idx] = [num, 0, 0, 0]\n                return dp[idx]\n            mid = (i + j) // 2\n            l = build(idx * 2, i, mid)\n            r = build(idx * 2 + 1, mid + 1, j)\n            arr = dp[idx] = [0] * 4\n            arr[0] = max(l[0] + r[2],\n                         l[1] + max(r[0], r[2])\n                        )\n            arr[1] = max(l[0] + r[3],\n                         l[1] + max(r[1], r[3]))\n            arr[2] = max(l[2] + r[2],\n                         l[3] + max(r[0], r[2]))\n            arr[3] = max(l[2] + r[3],\n                         l[3] + max(r[1], r[3]))           \n            return arr\n        build(1, 0, len(nums) - 1)\n        \n        def update(idx, i, j, target, value):\n            if target < i or target > j:\n                return dp[idx]\n            if i == j:\n                dp[idx] = [value, 0, 0, 0]\n                return dp[idx]\n            mid = (i + j) // 2\n            l = update(idx * 2, i, mid, target, value)\n            r = update(idx * 2 + 1, mid + 1, j, target, value)\n            arr = dp[idx]\n            arr[0] = max(l[0] + r[2],\n                         l[1] + max(r[0], r[2])\n                        )\n            arr[1] = max(l[0] + r[3],\n                         l[1] + max(r[1], r[3]))\n            arr[2] = max(l[2] + r[2],\n                         l[3] + max(r[0], r[2]))\n            arr[3] = max(l[2] + r[3],\n                         l[3] + max(r[1], r[3]))           \n            return arr            \n            \n            \n        # print(dp)\n        res = 0\n        for pos, x in queries:\n            update(1, 0, len(nums) - 1, pos, x)\n            # res.append(max(dp[1]))\n            res = (res + max(dp[1])) % M\n        return res % M\n        \n        \n            \n            ",
    "submit_ts": 1716694678.0
}