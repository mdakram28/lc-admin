{
    "username": "yangxm",
    "submission": "constexpr int MAX = 100010;\nconstexpr int LL(int x) { return x * 2; } \nconstexpr int RR(int x) { return x * 2 + 1; }\n\nstruct SegmentTree {\n  struct Node {\n    int v, l, r;\n  } c[MAX << 2];\n  \n  void PushUp(int x, int w) {\n    int lw = w / 2, rw = w - lw;\n    c[x].v = max({c[LL(x)].v, c[RR(x)].v, c[LL(x)].r + c[RR(x)].l});\n    c[x].l = c[LL(x)].l == lw ? c[LL(x)].l + c[RR(x)].l : c[LL(x)].l;\n    c[x].r = c[RR(x)].r == rw ? c[RR(x)].r + c[LL(x)].r : c[RR(x)].r;\n  }\n  \n  void Build(int x, int p, int q) {\n    int w = q - p;\n    if (w == 1) {\n      c[x] = {1, 1, 1};\n      return;\n    }\n    int mid = p + w / 2;\n    Build(LL(x), p, mid);\n    Build(RR(x), mid, q);\n    PushUp(x, w);\n  }\n  \n  void Update(int x, int p, int q, int k, int v) {\n    int w = q - p;\n    if (w == 1) {\n      c[x] = v ? Node{0, 0, 0} : Node{1, 1, 1};\n      return;\n    }\n    int mid = p + w / 2;\n    if (k < mid) {\n      Update(LL(x), p, mid, k, v);\n    } else {\n      Update(RR(x), mid, q, k, v);\n    }\n    PushUp(x, w);\n  }\n  \n  int Query(int x, int p, int q, int k) {\n    if (c[x].v < k) {\n      return -1;\n    }\n    if (c[x].l >= k) {\n      return p;\n    }\n    int mid = p + (q - p) / 2;\n    if (c[LL(x)].v >= k) {\n      return Query(LL(x), p, mid, k);\n    }\n    if (c[LL(x)].r + c[RR(x)].l >= k) {\n      return mid - c[LL(x)].r;\n    }\n    return Query(RR(x), mid, q, k);\n  }\n} st;\n\nclass Solution {\npublic:\n    vector<bool> getResults(vector<vector<int>>& queries) {\n      int n = 0, m = queries.size();\n      for (const auto& q : queries) {\n        int x = q[1];\n        n = max(n, 2 * x);\n      }\n      st.Build(1, 0, n);\n      vector<bool> ret;\n      for (int i = 0; i < m; ++i) {\n        int q = queries[i][0], x = queries[i][1];\n        if (q == 1) {\n          st.Update(1, 0, n, 2 * x - 1, 1);\n        } else {\n          int k = queries[i][2];\n          int p = st.Query(1, 0, n, 2 * k - 1);\n          ret.push_back(p != -1 && p / 2 <= x - k);\n        }\n      }\n      return ret;\n    }\n};",
    "submit_ts": 1716650656.0
}