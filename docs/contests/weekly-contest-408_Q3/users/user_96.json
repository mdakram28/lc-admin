{
    "username": "tonyli00000",
    "submission": "class Solution {\npublic:\n\tint numberOfSubstrings(string s) {\n\t\tint n = s.size();\n\t\tvector<vector<int>>ct(n + 1, vector<int>(2, 0));\n\t\tvector<int>pos;\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tct[i + 1] = ct[i];\n\t\t\tif (s[i] == '0')ct[i + 1][0]++, pos.push_back(i);\n\t\t\telse ct[i + 1][1]++;\n\t\t}\n\t\t\n\t\tint ret = 0;\n\t\tint curr = 0;\n\t\tint m = pos.size();\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\twhile (curr < m && pos[curr] < i)curr++;\n\t\t\tif (curr == m) {\n\t\t\t\tret += n - i;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tint last = i;\n\t\t\tif (pos[curr] != i)ret += pos[curr] - i;\n\t\t\t// between 2 zeros\n\t\t\tfor (int j = 0; j <= sqrt(n) + 5 && curr+j < m; j++) {\n\t\t\t\tint p = pos[curr + j];\n\t\t\t\tint zero = ct[p + 1][0] - ct[i][0], one = ct[p + 1][1] - ct[i][1];\n\t\t\t\tint r;\n\t\t\t\tif (curr + j + 1 < m)r = pos[curr + j + 1] - 1;\n\t\t\t\telse r = n - 1;\n\t\t\t\tif (zero * zero <= one)ret += r - p + 1;\n\t\t\t\telse {\n\t\t\t\t\tint need = zero * zero - one;\n\t\t\t\t\tret += max(0, r - p - need + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t}\n};",
    "submit_ts": "1722135158",
    "subm_id": "1335691838"
}