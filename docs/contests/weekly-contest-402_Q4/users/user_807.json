{
    "username": "SSYernar",
    "submission": "class Solution {\npublic:\n    int f[100005], n;\n    \n    int get(int i) {\n        int res = 0;\n        for (; i >= 0; i &= i + 1, i--) {\n            res += f[i];\n        }\n        return res;\n    }\n    \n    int get(int l, int r) {\n        if (r < l) {\n            return 0;\n        }\n        return get(r) - get(l - 1);\n    }\n    \n    void inc(int i, int x) {\n        for (; i <= n; i |= i + 1) {\n            f[i] += x;\n        }\n    }\n    \n    bool ok(int i, vector<int>& a) {\n        return i - 1 >= 0 && i + 1 < n && a[i] > a[i - 1] && a[i] > a[i + 1];\n    }\n    \n    vector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& queries) {\n        n = a.size();\n        vector<int> mark(n, 0);\n        for (int i = 1; i < n - 1; i++) {\n            if (a[i] > a[i - 1] && a[i] > a[i + 1]) {\n                inc(i, 1);\n                mark[i] = 1;\n            }\n        }\n        vector<int> ans;\n        for (auto q: queries) {\n            if (q[0] == 1) {\n                ans.push_back(get(q[1] + 1, q[2] - 1));\n            }\n            else {\n                int x = q[1];\n                a[x] = q[2];\n                if (ok(x, a) != mark[x]) {\n                    if (mark[x]) {\n                        inc(x, -1);\n                    }\n                    else {\n                        inc(x, 1);\n                    }\n                    mark[x] = 1 - mark[x];\n                }\n                x++;\n                if (x < n && ok(x, a) != mark[x]) {\n                    if (mark[x]) {\n                        inc(x, -1);\n                    }\n                    else {\n                        inc(x, 1);\n                    }\n                    mark[x] = 1 - mark[x];\n                }\n                x -= 2;\n                if (x >= 0 && ok(x, a) != mark[x]) {\n                    if (mark[x]) {\n                        inc(x, -1);\n                    }\n                    else {\n                        inc(x, 1);\n                    }\n                    mark[x] = 1 - mark[x];\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507925.0
}