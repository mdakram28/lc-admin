{
    "username": "samarthgattu",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n=nums.size();\n        vector<vector<int>> pre(n+1, vector<int> (30,0));\n        for(int bit=0;bit<30;bit++)\n        for(int i=0;i<n;i++){\n            pre[i+1][bit]=pre[i][bit];\n            if(nums[i]&(1<<bit)) pre[i+1][bit]++;\n        }\n\n\n        long long ans=0;\n        for(int i=1;i<=n;i++){\n            if((nums[i-1]&k)!=k) continue;\n\n            int low=i,high=n;\n            int ll=-1,hh=-1;\n            while(low<=high){\n                int mid=(low+high)/2;\n                // vector<int> temp(30);\n                int cur=0;\n                for(int j=0;j<30;j++) {\n                    int tt=pre[mid][j]-pre[i-1][j];\n                    if(tt==mid-i+1) cur^=(1<<j);\n                }\n                if((cur&k)!=k){\n                    high=mid-1;\n                }else{\n                    if(cur>k){\n                        low=mid+1;\n                    }else if(cur==k){\n                        ll=mid;\n                        high=mid-1;\n                    }\n                }\n            }\n            if(ll==-1) continue;\n            hh=ll;\n            low=ll,high=n;\n            while(low<=high){\n                int mid=(low+high)/2;\n                // vector<int> temp(30);\n                int cur=0;\n                for(int j=0;j<30;j++) {\n                    int tt=pre[mid][j]-pre[i-1][j];\n                    if(tt==mid-i+1) cur^=(1<<j);\n                }\n                if((cur&k)!=k){\n                    high=mid-1;\n                }else{\n                    if(cur==k){\n                        hh=mid;\n                        low=mid+1;\n                    }\n                }\n            }\n            ans+=(hh-ll+1);\n\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279001",
    "subm_id": "1311733109"
}