{
    "username": "malakjiozair",
    "submission": "class Solution {\npublic:\n    int func(vector<int>& a,vector<int> &b,int l){\n        int temp=0;\n        for(int i=0;i<30;i++){\n            if(b[i]-a[i]==l) temp|=(1<<i);\n        }\n        return temp;\n    }\n    long long countSubarrays(vector<int>& a, int k) {\n        int n=a.size();\n        vector<vector<int>> p(n+1,vector<int>(30,0));\n        for(int i=1;i<=n;i++){\n            for(int j=0;j<30;j++){\n                if((a[i-1]&(1<<j))) p[i][j]=p[i-1][j]+1;\n                else p[i][j]=p[i-1][j];\n            }\n        }\n        long long ans=0;\n        for(int i=1;i<=n;i++){\n            int lo=i,hi=n;\n            int l=i,r=n;\n            while(lo<=hi){\n                int mid=(lo+hi)/2;\n                \n                int num=func(p[i-1],p[mid],mid-i+1);\n                if(num>k){\n                    l=mid;\n                    lo=mid+1;\n                }\n                else{\n                    hi=mid-1;\n                }\n            }\n            lo=i; hi=n;\n            while(lo<=hi){\n                int mid=(lo+hi)/2;\n                \n                int num=func(p[i-1],p[mid],mid-i+1);\n                if(num<k){\n                    r=mid;\n                    hi=mid-1;\n                }\n                else{\n                    lo=mid+1;\n                }\n            }\n            if(func(p[i-1],p[l],l-i+1)>k) l++;\n            // cout<<func(p[i-1],p[r],r-i+1)<<endl;\n            if(func(p[i-1],p[r],r-i+1)<k) r--;\n            \n            // cout<<\"l: \"<<l<<\"  r: \"<<r<<endl;\n            if(l>=i && l<=r) ans+=(r-l+1);\n            \n        }\n        return ans;\n    }   \n};",
    "submit_ts": "1720279802",
    "subm_id": "1311765689"
}