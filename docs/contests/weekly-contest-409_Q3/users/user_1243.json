{
    "username": "u1904123",
    "submission": "class Solution {\npublic:\n    int v[100005] = {0};\n    vector<int> shortestDistanceAfterQueries(int n, vector<vector<int>>& queries) {\n        for(int i = 0; i < n; i++) v[i] = i ;\n        int ans = n - 1;\n        set<pair<int, int>>s;\n        vector<int>fa;\n        for(auto i : queries){\n            int c = i[0], d = i[1];\n            bool ok = true;\n            set<pair<int, int>>s1;\n            if(!s.size()){\n                s.insert({c, d});\n                ans -= (d - c - 1);\n                fa.push_back(ans);\n                continue;\n            }\n            auto ind = s.lower_bound({c, c});\n            if(ind == s.end()) ind--;\n            while(ind != s.end()){\n                int c1 = ind -> first, c2 = ind -> second;\n                //cout <<c << \" \" << d << \" \" << c1 << \" pa1 \" << c2 << \" \" << ans << endl;\n                if(c1 >= c && c2 <= d){\n                    ans += (c2 - c1 - 1);\n                    s1.insert({c1, c2});\n                }\n                else if(c >= c1 && d <= c2){\n                    ok = false; break;\n                }\n                else if(c2 <= c){\n                    break;\n                }\n                else if(c1 >= d){\n                    break;\n                }\n                ind++;\n                \n            }\n            for(auto i : s1) s.erase(i);\n            s1.clear();\n            if(!s.size()){\n                if(!ok){\n                    fa.push_back(ans);\n                }\n                else{\n                    ans -= (d - c - 1);\n                    fa.push_back(ans);\n                    s.insert({c, d});\n                }\n                continue;\n            }\n            ind = s.lower_bound({c, c});\n            if(ind == s.end()) ind--;\n            if(ind != s.begin()){\n                ind--;\n                while(s.size()){\n                    \n                    int c1 = ind -> first, c2 = ind -> second;\n                    //cout <<c << \" \" << d << \" \" << c1 << \" pa \" << c2 << \" \" << ans << endl;\n                    if(c1 >= c && c2 <= d){\n                        ans += (c2 - c1 - 1);\n                        s1.insert({c1, c2});\n                    }\n                    else if(c >= c1 && d <= c2){\n                        ok = false; break;\n                    }\n                    else if(c2 <= c){\n                        break;\n                    }\n                    else if(c1 >= d){\n                        break;\n                    }\n                    if(ind == s.begin()) break;\n                    ind--;\n                    \n                }\n            }\n            \n            for(auto i : s1) s.erase(i);\n            //cout << \"OK \" << ok << \" \" << ans << endl;\n            if(ok){\n                s.insert({c, d});\n                ans -= (d - c - 1);\n            }\n            fa.push_back(ans);\n        }\n\n        return fa;\n    }\n};",
    "submit_ts": "1722743555",
    "subm_id": "1343794588"
}