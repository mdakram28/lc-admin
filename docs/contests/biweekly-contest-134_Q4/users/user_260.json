{
    "username": "brenner1",
    "submission": "#include \"bits/stdc++.h\"\nusing namespace std;\n\n#define endl '\\n'\n#define rep(i, a, b) for (int i = a; i < (b); i++)\n#define all(x) (x).begin(), (x).end()\n#define sz(x) (int)(x).size()\n#define sq(x) (x)*(x)\ntemplate<class T, class U> inline void chmin(T& a, U b) { if (a > b) a = b; }\ntemplate<class T, class U> inline void chmax(T& a, U b) { if (a < b) a = b; }\ntypedef long long ll;\ntypedef long double ld;\ntypedef __int128 i128;\n\ntemplate<typename T> struct rmq {\n    vector<vector<T>> t;\n\n    rmq() {}\n    rmq(const vector<T> &a) {\n        int n = a.size(), lg = 31 - __builtin_clz(n);\n        t = vector<vector<T>>(lg + 1, vector<T>(n));\n        rep(i, 0, n) t[0][i] = a[i];\n        for (int i = 1; (1 << i) <= n; i++) for (int j = 0; j + (1 << i) <= n; j++)\n            t[i][j] = t[i - 1][j] & t[i - 1][j + (1 << (i - 1))];\n    }\n\n    T query(int l, int r) {\n        if (l > r) swap(l, r);\n        int lg = 31 - __builtin_clz(r - l + 1);\n        return t[lg][l] & t[lg][r - (1 << lg) + 1];\n    }\n};\n\n\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& a, int k) {\n        int n = sz(a);\n        ll ans = 0;\n        rmq sp(a);\n        rep(i, 0, n) {\n            if ((a[i] & k) != k) continue;\n\n            int l = i, r = n - 1, L = -1, R = n;\n            while (l <= r) {\n                int mid = (l + r) / 2;\n                int x = sp.query(i, mid);\n                if ((k & x) != k) {\n                    r = mid - 1;\n                } else if (k == x) {\n                    L = mid;\n                    r = mid - 1;\n                } else {\n                    l = mid + 1;\n                }\n            }\n            if (L == -1) continue;\n            l = i, r = n - 1;\n            while (l <= r) {\n                int mid = (l + r) / 2;\n                int x = sp.query(i, mid);\n                if ((k & x) != k) {\n                    R = mid;\n                    r = mid - 1;\n                } else {\n                    l = mid + 1;\n                }\n            }\n            ans += R - L;\n        }\n        return ans;\n    }\n};\n\n",
    "submit_ts": "1720278303",
    "subm_id": "1311703291"
}