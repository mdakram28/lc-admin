{
    "username": "gracious-chaplyginncd",
    "submission": "class Solution {\nusing i64 = long long;\npublic:\n    long long countSubarrays(vector<int>& nums, int o) {\n        i64 ans = 0;\n        int n = nums.size();\n        int cur = 0;\n        vector<vector<int>> cnt(n + 1, vector<int> (31));\n        for(int i = 0; i < n; i++) {\n            for(int j = 0; j < 30; j++) {\n                cnt[i + 1][j] = cnt[i][j];\n            }\n            for(int j = 0; j < 30; j++) {\n                cnt[i + 1][j] += (nums[i] >> j & 1); \n            }\n        }\n        auto findL = [&](int x) {\n            int lo = x, hi = n - 1;\n            while(lo < hi) {\n                int m = lo + hi >> 1;\n                int num = 0;\n                for(int i = 0; i < 30; i++) {\n                    if(cnt[m + 1][i] - cnt[x][i] == m - x + 1) num += (1 << i);\n                }\n                if(num > o) lo = m + 1;\n                else hi = m;\n            }\n            return lo;\n        };\n        auto findR = [&](int x) {\n            int lo = x, hi = n - 1;\n            while(lo < hi) {\n                int m = lo + hi + 1 >> 1;\n                int num = 0;\n                for(int i = 0; i < 30; i++) {\n                    if(cnt[m + 1][i] - cnt[x][i] == m - x + 1) num += (1 << i);\n                }\n                // if(x == 0) {\n                //     cout << \"bug \" << m << ' ' << num << ' ' << o << '\\n';\n                // }\n                if(num < o) hi = m - 1;\n                else lo = m;\n            }\n            return lo;\n        };\n        for(int i = 0; i < n; i++) {\n            int L = findL(i), R = findR(i);\n            \n            int num = 0;\n            for(int j = 0; j < 30; j++) {\n                if(cnt[L + 1][j] - cnt[i][j] == L - i + 1) num += (1 << j);\n            }\n            if(L <= R && num == o) ans += R - L + 1;\n            //cout << i << ' ' << L << ' ' << R << '\\n';\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720278896",
    "subm_id": "544564937"
}