{
    "username": "zio-z",
    "submission": "class BIT:\n    def __init__(self, n):\n        self.n = n\n        self.bit = [0] * (n + 1)\n \n    def add(self, i, x):\n        while i <= self.n:\n            self.bit[i] += x\n            i += i & (-i)\n \n    def sum(self, i):\n        s = 0\n        while i > 0:\n            s += self.bit[i]\n            i -= i & (-i)\n        return s\n\nclass Solution:\n    def countOfPeaks(self, nums: List[int], queries: List[List[int]]) -> List[int]:\n        n = len(nums)\n        \n        bit = BIT(n + 1)\n        st = set()\n        for i in range(1, n - 1):\n            if nums[i] > nums[i - 1] and nums[i] > nums[i + 1]:\n                st.add(i)\n                bit.add(i + 1, 1)\n        ans = []\n        for q, x, y in queries:\n            if q == 1:\n                if y - x >= 2:\n                    ans.append(bit.sum(y) - bit.sum(x + 1))\n                else:\n                    ans.append(0)\n            else:\n                nums[x] = y\n                #print(nums)\n                if x > 0 and x < n - 1 and nums[x] > nums[x - 1] and nums[x] > nums[x + 1]:\n                    if x not in st:\n                        st.add(x)\n                        bit.add(x + 1, 1)\n                        #print(x + 1, bit.sum(3))\n                else:\n                    if x in st:\n                        st.remove(x)\n                        bit.add(x + 1, -1)\n                if x > 1 and nums[x - 1] > nums[x - 2] and nums[x - 1] > nums[x]:\n                    if x - 1 not in st:\n                        st.add(x - 1)\n                        bit.add(x, 1)\n                elif x >= 1:\n                    if x - 1 in st:\n                        st.remove(x - 1)\n                        bit.add(x, -1)\n                if x < n - 2 and nums[x + 1] > nums[x] and nums[x + 1] > nums[x + 2]:\n                    if x + 1 not in st:\n                        st.add(x + 1)\n                        bit.add(x + 2, 1)\n                elif x + 1 < n:\n                    if x + 1 in st:\n                        st.remove(x + 1)\n                        bit.add(x + 2, -1)\n            # for i in range(n + 1):\n            #     print(bit.sum(i))\n            # print(st)\n        return ans\n                    ",
    "submit_ts": "1718507126",
    "subm_id": "539779424"
}