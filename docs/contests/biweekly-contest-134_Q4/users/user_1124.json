{
    "username": "Teja19049",
    "submission": "using ll=long long;\nclass Solution {\npublic: \n    int get(vector<int> e) {\n        int val = 0;\n        for(int i=0;i<31;i++) {\n            val+=(e[i]<<i);\n        }\n        return val;\n    }\n    bool check(vector<vector<int>> &v, int l, int r, int k) {\n        vector<int> e(31);\n        for(int i=0;i<31;i++) {\n            e[i]=v[r][i]-(l-1>=0  ? v[l-1][i] : 0);\n            e[i]=(e[i]==(r-l+1) ? 1 : 0);\n        }\n        int val = get(e);\n        return val>k;\n    }\n    bool check2(vector<vector<int>> &v, int l, int r, int k) {\n        vector<int> e(31);\n        for(int i=0;i<31;i++) {\n            e[i]=v[r][i]-(l-1>=0 ? v[l-1][i] : 0);\n            e[i]=(e[i]==(r-l+1) ? 1 : 0);\n        }\n        int val = get(e);\n        return val>=k;\n    }\n    long long lessequal(vector<vector<int>> &v, int k, int i) {\n        int l=i-1, r=v.size();\n        while(r-l>1) {\n            int mid=l+(r-l)/2;\n            if(check(v, i, mid, k)) r=mid;\n            else l=mid;\n        }\n        return r;\n    }\n    long long less(vector<vector<int>> &v, int k, int i) {\n        int l=i-1, r=v.size();\n        while(r-l>1) {\n            int mid=l+(r-l)/2;\n            if(check2(v, i, mid, k)) r=mid;\n            else l=mid;\n        }\n        return r;\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n=nums.size();\n        vector<vector<int>> v(n, vector<int> (31, 0));\n        for(int i=0;i<n;i++) {\n            for(int j=0;j<31;j++) {\n                v[i][j] = ((nums[i]&(1<<j)) ? 1 : 0);\n                if(i) v[i][j]+=v[i-1][j];\n            }\n        }\n        \n        long long ans=0;\n\n        // for(int i=0;i<n;i++) {\n        //     long long lb=lessequal(v, k, i);\n        //     long long ub=less(v, k, i);\n        //     ans+=ub-lb;\n        // }\n\n        long long tail=0, lb=-1, ub=-1;\n        while(tail<n) {\n            while(lb+1<n && check(v, tail, lb+1, k)) {\n                lb++;\n            }\n            while(ub+1<n && check2(v, tail, ub+1, k)) {\n                ub++;\n            }\n            // cout<<tail<<\" \"<<lb<<\" \"<<ub<<endl;\n            ans+=ub-lb;\n            tail++;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279790",
    "subm_id": "1311765207"
}