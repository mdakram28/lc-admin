{
    "username": "serialcomder",
    "submission": "\nclass Solution {\npublic:\n    vector<int> a; \n    vector<vector<int>> t; \n    void build(int n) {\n        for(int i = 1; i <= n; ++i) t[i][0] = a[i];\n        for(int k = 1; k < 18; ++k) {\n            for(int i = 1; i + (1 << k) - 1 <= n; ++i) {\n            t[i][k] = (t[i][k - 1] & t[i + (1 << (k - 1))][k - 1]);\n            }\n        }\n    }\n\n    int query(int l, int r) {\n        int k = 31 - __builtin_clz(r - l + 1);\n        return (t[l][k] & t[r - (1 << k) + 1][k]);\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n = nums.size();\n        t.assign(n + 1, vector<int>(18));\n        a.assign(n + 1, 0);\n        long long ans = 0;\n        for(int j = 1; j <= n; j++) {\n            a[j] = nums[j - 1];\n        }\n        build(n);\n        for(int i = 1; i <= n; i++) {\n            if(query(i, n) > k) continue;\n            int l = i, r = n;\n            while(r - l > 1) {\n                int m = (l + r) / 2;\n                if(query(i, m) > k) l = m;\n                else r = m;\n            }\n            int lt = r;\n            if(a[i] == k) lt = i;\n            if(query(i, lt) != k) continue;\n            l = i, r = n;\n            while(r - l > 1) {\n                int m = (l + r) / 2;\n                if(query(i, m) < k) r = m;\n                else l = m;\n            }\n            if(query(i, n) == k) r = n + 1;\n            ans += (r - lt);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720278841",
    "subm_id": "1311726556"
}