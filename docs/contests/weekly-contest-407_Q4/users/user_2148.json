{
    "username": "votrubac",
    "submission": "class Solution {\npublic:\nint st[400000];\nint query(vector<int> &d, int l, int r, int p = 1, int tl = 0, int tr = 100000) {\n    if (l > r) \n        return -1;\n    if (l == tl && r == tr)\n        return st[p];\n    int tm = (tl + tr) / 2;\n    int left = query(d, l, min(r, tm), p * 2, tl, tm);\n    int right = query(d, max(l, tm + 1), r, p * 2 + 1, tm + 1, tr);\n    return left == -1 ? right : right == -1 ? left : d[left] < d[right] ? left : right;\n}\nint update(vector<int> &d, int pos, int new_val, int p = 1, int tl = 0, int tr = 100000) {\n    if (tl == tr)\n        return st[p] = new_val;\n    int tm = (tl + tr) / 2;\n    int l = pos <= tm ? update(d, pos, new_val, p * 2, tl, tm) : st[p * 2];\n    int r = pos <= tm ? st[p * 2 + 1] : update(d, pos, new_val, p * 2 + 1, tm + 1, tr);\n    st[p] = l == -1 ? r : r == -1 ? l : d[l] < d[r] ? l : r;\n    return st[p];\n}\nlong long solve(vector<int> &d, int cnt, int l, int r) {\n    if (l > r)\n        return 0;\n    int i = query(d, l, r, 1, 0, d.size());\n    // cout << d.size() << \" l:\" << l << \" r:\" << r << \" i:\" << i << endl;\n    return  solve(d, d[i], l, i - 1) + solve(d, d[i], i + 1, r) + d[i] - cnt;    \n}\nlong long minimumOperations(vector<int>& nums, vector<int>& target) {\n    long long res = 0;\n    for (int i = 0; i < nums.size(); ++i) {\n        vector<int> d;\n        if (nums[i] < target[i]) {\n            while (i < nums.size() && nums[i] < target[i]) {\n                d.push_back(target[i] - nums[i]);\n                ++i;\n            }\n        }\n        else {\n            while (i < nums.size() && nums[i] > target[i]) {\n                d.push_back(nums[i] - target[i]);\n                ++i;\n            }            \n        }\n        if (!d.empty()) {\n            fill_n(begin(st), d.size() * 4, -1);\n            for (int i = 0; i < d.size(); ++i)\n                update(d, i, i, 1, 0, d.size());\n            res += solve(d, 0, 0, d.size() - 1);\n            --i;\n        }\n    }\n    return res;\n}\n};",
    "submit_ts": "1721534048",
    "subm_id": "1328022369"
}