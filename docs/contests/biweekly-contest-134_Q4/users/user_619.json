{
    "username": "a0920732333",
    "submission": "class Solution \n{\npublic:\n    long long countSubarrays(vector<int>& nums, int k) \n    {\n        int n = nums.size(), nex = n - 1;\n        vector<int> next(n), nexBit(32, -1);\n        vector<vector<int>> nextBit(n ,vector<int>(32, -1));\n        long long ans = 0;\n        for(int i = n - 1; i >= 0; i--)\n        {\n            if((nums[i] & k) == k)\n            {\n                next[i] = nex;\n                for(int j = 0; j < 32; j++)\n                {\n                    if((k & (1 << j)) == 0)\n                    {\n                        if((nums[i] & (1 << j)) == 0)\n                        {\n                            nexBit[j] = -1;\n                        }\n                        else\n                        {\n                            if(nexBit[j] == -1)\n                            {\n                                nexBit[j] = i;\n                            }\n                            else\n                            {\n                                nextBit[i][j] = nexBit[j];\n                            }\n                        }\n                    }\n                }\n            }\n            else\n            {\n                next[i] = i - 1;\n                nex = i - 1;\n                for(int j = 0; j < 32; j++)\n                {\n                    nexBit[j] = -1;\n                }\n            }\n        }\n        for(int i = 0; i < n; i++)\n        {\n            if((nums[i] & k) == k)\n            {\n                int maxNext = i;\n                for(int j = 0; j < 32; j++)\n                {\n                    maxNext = max(maxNext, nextBit[i][j]);\n                }\n                ans += (nums[i] == k);\n                ans += next[i] - maxNext;\n                // cout << i << ' ' << next[i] << ' ' << maxNext << ' ' << ans << '\\n';\n            }\n        }\n        // cout << \"----------------------------------------------\\n\";\n        return ans;\n    }\n};\n\n//2 22 6 10",
    "submit_ts": "1720279902",
    "subm_id": "1311769594"
}