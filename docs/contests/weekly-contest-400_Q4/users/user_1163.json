{
    "username": "_Akatsuki_",
    "submission": "class Solution\n{\npublic:\n    int minimumDifference(vector<int> &nums, int k)\n    {\n        int n = nums.size(), ans = INT_MAX;\n        vector<vector<int>> pre(n, vector<int>(32, 0));\n        for (int i = 0; i < n; ++i)\n        {\n            for (int bit = 0; bit < 32; ++bit)\n            {\n                if (nums[i] & (1 << bit))\n                {\n                    pre[i][bit] = 1;\n                }\n                if (i > 0)\n                {\n                    pre[i][bit] += pre[i - 1][bit];\n                }\n            }\n        }\n\n        auto f = [&](int l, int r, auto &pre)\n        {\n            int res = 0;\n            for (int bit = 0; bit < 32; ++bit)\n            {\n                int bitCount = pre[r][bit] - (l > 0 ? pre[l - 1][bit] : 0);\n                if (bitCount == (r - l + 1))\n                {\n                    res |= (1 << bit);\n                }\n            }\n            return res;\n        };\n        \n        auto lb = [&](int l, auto &pre, int k)\n        {\n            int s = l, e = pre.size() - 1, ans = l;\n            while (s <= e)\n            {\n                int mid = (e + s) >> 1;\n                int tmp = f(l, mid, pre);\n                if (tmp >= k)\n                {\n                    ans = mid;\n                    s = mid + 1;\n                }\n                else\n                {\n                    e = mid - 1;\n                }\n            }\n            return ans;\n        };\n        \n        for (int i = 0; i < n; ++i)\n        {\n            if (nums[i] >= k)\n            {\n                int idx = lb(i, pre, k);\n                for (int j = idx; j >= max({idx - 1, 0, i}); --j)\n                {\n                    ans = min(ans, abs(k - f(i, j, pre)));\n                }\n                for (int j = idx; j <= min(n - 1, idx + 1); ++j)\n                {\n                    ans = min(ans, abs(k - f(i, j, pre)));\n                }\n            }\n            ans = min(ans, abs(k - nums[i]));\n        }\n\n        return ans;\n    }\n};",
    "submit_ts": "1717300727",
    "subm_id": "1274853082"
}