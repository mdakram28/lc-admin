{
    "username": "prabhatsingh2700",
    "submission": "class Solution {\npublic:\n    \n    vector<int>seg;\nvoid built(int ind ,int low,int hi,vector<int>&num){\n    if(low==hi){\n        seg[ind]=num[low];\n        return;\n    }\n    int mid=(low+hi)>>1;\n    built(2*ind+1,low,mid,num);\n    built(2*ind+2,mid+1,hi,num);\n    seg[ind]=(seg[2*ind+1]+seg[2*ind+2]);\n}\n \nint query(int ind,int low,int hi,int l,int r){\n    //no overlap - [low,hi][l,r] or [l,r][low,hi]\n    if(hi<l or low>r){\n        return 0;\n    }\n    \n    //complete overlap\n    //[l,low,hi,r]\n    if(low>=l and r>=hi){\n        return seg[ind];\n    }\n \n    //partial overlap\n    int mid=(low+hi)/2;\n    int left=query(2*ind+1,low,mid,l,r);\n    int right=query(2*ind+2,mid+1,hi,l,r);\n    return (left+right);\n}\n \nvoid update(int ind,int low,int hi,int i,int val){\n    if(low==hi){\n        seg[ind]=val;\n        return ;\n    }\n    int mid=(low+hi)/2;\n    if(i<=mid){\n        update(2*ind+1,low,mid,i,val);\n    }\n    else\n    {\n        update(2*ind+2,mid+1,hi,i,val); \n    }\n \n    seg[ind]=(seg[2*ind+1]+seg[2*ind+2]); \n}\n\n    \n    vector<int> countOfPeaks(vector<int>& v, vector<vector<int>>& q) {\n        int n=v.size();\n        vector<int>num(n);\n        for(int i=1;i<n-1;i++){\n            if(v[i]>v[i-1] && v[i]>v[i+1]){\n                num[i]=1;\n            }\n        }\n              \n            seg.resize(4*n);\n            built(0,0,n-1,num);\n        vector<int>ans;\n        for(int i=0;i<q.size();i++){\n            if(q[i][0]==1){\n                //give count\n                int l=q[i][1];\n                int r=q[i][2];\n                \n                int val=query(0,0,n-1,l,r);\n                if(num[l]==1)val--;\n                if(num[r]==1 && r!=l)val--;\n                ans.push_back(val);\n\n            }\n            else{\n                int ind=q[i][1];\n                int val=q[i][2];\n                v[ind]=val;\n                for(int j=max(ind-1,1);j<=min(n-2,ind+1);j++){\n                    if(v[j]>v[j-1] && v[j]>v[j+1]){\n                        num[j]=1;\n                    }\n                    else{\n                        num[j]=0;\n                    }\n                }\n                \n                // for(int j=0;j<n;j++){\n                //     cout<<v[j]<<\" \";\n                // }\n                // cout<<endl;\n                \n                if(ind-1>=0){\n                    update(0,0,n-1,ind-1,num[ind-1]);\n\n                }\n                  update(0,0,n-1,ind,num[ind]);\n                if(ind+1<n){\n                    update(0,0,n-1,ind+1,num[ind+1]);\n\n                }\n\n                \n                \n            }\n        }\n        \n        return ans;\n\n    \n\n    }\n};",
    "submit_ts": "1718508223",
    "subm_id": "1289675139"
}