{
    "username": "weng-zhe-yu",
    "submission": "vector<int>a;\nint n;\nstruct SGT{\n    static const int maxn=1e5+5;\n    int d[maxn*4];\n    int check(int p,int l,int r,int m){\n        int res=0;\n        if(m-1>=l&&m+1<=r&&a[m]>a[m-1]&&a[m]>a[m+1])res++;\n        if(m>=l&&m+2<=r&&a[m+1]>a[m]&&a[m+1]>a[m+2])res++;\n        return res;\n    }\n    void pushup(int p,int l,int r){\n        d[p]=d[p*2]+d[p*2+1];\n        int m=(l+r)/2;\n        d[p]+=check(p,l,r,m);\n    }\n    void build(int p,int l,int r){\n        if(l==r){\n            d[p]=0;\n            return;\n        }\n        int m=(l+r)/2;\n        build(p*2,l,m);\n        build(p*2+1,m+1,r);\n        pushup(p,l,r);\n    }\n    void update(int p,int l,int r,int c,int x){\n        if(l>c||r<c)return;\n        if(l==r&&l==c){\n            d[p]=0;\n            a[c]=x;\n            return;\n        }\n        int m=(l+r)/2;\n        update(p*2,l,m,c,x);\n        update(p*2+1,m+1,r,c,x);\n        pushup(p,l,r);\n    }\n    int ask(int p,int l,int r,int begin,int end){\n        if(l>end||r<begin)return 0;\n        if(begin<=l&&r<=end)return d[p];\n        int m=(l+r)/2;\n        int ans1=ask(p*2,l,m,begin,end);\n        int ans2=ask(p*2+1,m+1,r,begin,end);\n        return ans1+ans2+check(p,max(l,begin),min(r,end),m);\n    }\n}tr;\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        a=nums;\n        n=a.size();\n        tr.build(1,0,n-1);\n        vector<int>ans;\n        for(auto v:queries){\n            if(v[0]==1)ans.push_back(tr.ask(1,0,n-1,v[1],v[2]));\n            else tr.update(1,0,n-1,v[1],v[2]);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1718507269",
    "subm_id": "539780294"
}