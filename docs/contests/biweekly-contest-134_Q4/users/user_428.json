{
    "username": "medmdg",
    "submission": "#define pb(a) push_back(a)\n#define mk(a,b) make_pair(a,b)\n#define F first\n#define S second\n#define V vector\n#define sz() size()\ntypedef long long ll;\ntypedef long double ld;\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& a, int k) {\n        if(a.size()==0)return 0;\n        vector<vector<int>> t;\n        t.pb({});\n        for(auto i:a){\n            if((k&i)==k)t.back().pb(i);\n            else if(t.back().size()==0)continue;else t.pb({});\n        }\n        if(t.back().size()==0)t.pop_back();\n        if(t.size()==1){a=t[0];t.clear();}\n        else{\n            ll ans=0;\n            for(auto &v:t){\n                ans+=countSubarrays(v,k);\n            }\n            return ans;\n        }\n        int tem=(1<<30)-1;\n        k^=tem;\n        for(auto &i:a)    i^=tem;\n        ll la=-1,n=a.size();\n        ll ans=0;\n        vector<ll> sb;\n        for(ll i=0;i<31;i++)\n            if(k&(1LL<<i))sb.pb((1LL<<i));\n        vector<ll> co(sb.size());\n        ll ava=0;\n        ll l=0,r=-1;\n        for(auto i:a){\n            r++;\n            for(int j=0;j<sb.size();j++){\n                if(i&sb[j]){\n                    co[j]++;\n                    if(co[j]==1)ava++;\n                }\n            }\n            while(ava==sb.size()){\n                ans+=(n-r)*(l-la);\n                la=l;\n                for(int j=0;j<sb.size();j++){\n                    if(a[l]&sb[j]){\n                        co[j]--;\n                        if(co[j]==0)ava--;\n                    }\n                }\n                l++;\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720278716",
    "subm_id": "1311721204"
}