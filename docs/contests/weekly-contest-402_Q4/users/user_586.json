{
    "username": "Sagar_Vala",
    "submission": "class Solution {\npublic:\n    const int n=(int)1e5+1;\n    vector<int> t;\n    void build(vector<int> &a, int v, int tl, int tr) {\n        if (tl == tr) {\n            t[v] = a[tl];\n        } else {\n            int tm = (tl + tr) / 2;\n            build(a, v*2, tl, tm);\n            build(a, v*2+1, tm+1, tr);\n            t[v] = t[v*2] + t[v*2+1];\n        }\n    }\n    \n    int sum(int v, int tl, int tr, int l, int r) {\n        if (l > r || r<0) \n            return 0;\n        if (l == tl && r == tr) {\n            return t[v];\n        }\n        int tm = (tl + tr) / 2;\n        return sum(v*2, tl, tm, l, min(r, tm))\n               + sum(v*2+1, tm+1, tr, max(l, tm+1), r);\n    }\n    \n    void update(int v, int tl, int tr, int pos, int new_val) {\n        if (tl == tr) {\n            t[v] = new_val;\n        } else {\n            int tm = (tl + tr) / 2;\n            if (pos <= tm)\n                update(v*2, tl, tm, pos, new_val);\n            else\n                update(v*2+1, tm+1, tr, pos, new_val);\n            t[v] = t[v*2] + t[v*2+1];\n        }\n    }\n    \n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        t.resize(4*n,0);\n        \n        vector<int> v;\n        for(int j=0;j<nums.size();j++){\n            if(j==0 || j==nums.size()-1){\n                v.push_back(0);\n            }else{\n                if(nums[j]>nums[j-1] && nums[j]>nums[j+1]){\n                    v.push_back(1);\n                }else{\n                    v.push_back(0);\n                }\n            }\n        }\n        build(v,1,0,nums.size()-1);\n        \n        vector<int> ans;\n        for(auto it:queries){\n            if(it[0]==1){\n                \n                ans.push_back(sum(1,0,nums.size()-1,it[1]+1,it[2]-1));\n            }else{\n                nums[it[1]]=it[2];\n                \n                if(v[it[1]]==0 && it[1]-1>=0 && it[1]+1<nums.size() && nums[it[1]]>nums[it[1]-1] && nums[it[1]]>nums[it[1]+1]){\n                    \n                        v[it[1]]=1;\n                        update(1,0,nums.size()-1,it[1],1);\n                    \n                }else if(v[it[1]]==1 && (nums[it[1]]<=nums[it[1]-1] || nums[it[1]]<=nums[it[1]+1])){\n                    v[it[1]]=0;\n                    update(1,0,nums.size()-1,it[1],0);\n                }\n                \n                if(it[1]-1>=0 && v[it[1]-1] && nums[it[1]]>=nums[it[1]-1]){\n                    v[it[1]-1]=0;\n                     update(1,0,nums.size()-1,it[1]-1,0);\n                }else if(it[1]-1>=0 && v[it[1]-1]==0 && nums[it[1]]<nums[it[1]-1] && it[1]-2>=0 && nums[it[1]-2]<nums[it[1]-1]){\n                    v[it[1]-1]=1;\n                     update(1,0,nums.size()-1,it[1]-1,1);\n                }\n                \n                if(it[1]+1<nums.size() && v[it[1]+1] && nums[it[1]]>=nums[it[1]+1]){\n                        v[it[1]+1]=0;\n                     update(1,0,nums.size()-1,it[1]+1,0);\n                }else if(it[1]+1<nums.size() && v[it[1]+1]==0 && nums[it[1]]<nums[it[1]+1] && it[1]+2<nums.size() && \n                        nums[it[1]+2]<nums[it[1]+1]){\n                        v[it[1]+1]=1;\n                     update(1,0,nums.size()-1,it[1]+1,1);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1718507087",
    "subm_id": "1289640760"
}