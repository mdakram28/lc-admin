{
    "username": "ytffff",
    "submission": "class Solution:\n    def countSubarrays(self, nums: List[int], k: int) -> int:\n        n = len(nums)\n        log_n = int(math.log2(n)) + 1\n        st = [[0] * log_n for _ in range(n)]\n\n        for i in range(n):\n            st[i][0] = nums[i]\n\n        j = 1\n        while (1 << j) <= n:\n            i = 0\n            while (i + (1 << j) - 1) < n:\n                st[i][j] = st[i][j-1] & st[i + (1 << (j-1))][j-1]\n                i += 1\n            j += 1\n\n        def query(L, R):\n            j = int(math.log2(R - L + 1))\n            return st[L][j] & st[R - (1 << j) + 1][j]\n        \n        res = 0\n\n\n        ans = 0\n        for i in range(n):\n            l, r = i, n-1\n            while l < r:\n                mid = l + r + 1 >> 1\n                if query(i, mid) >= k:\n                    l = mid\n                else:\n                    r = mid - 1\n            \n            lo, hi = i, n-1\n\n            while lo < hi:\n                mid = lo + hi >> 1\n                if query(i, mid) <= k:\n                    hi = mid\n                else:\n                    lo = mid + 1\n\n            if query(i, l) == k and query(i, hi) == k:\n                ans += l - hi + 1\n        return ans\n",
    "submit_ts": "1720279074",
    "subm_id": "544565827"
}