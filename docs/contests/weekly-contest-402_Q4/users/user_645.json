{
    "username": "bluesky999",
    "submission": "import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\nclass Solution {\n    public List<Integer> countOfPeaks(int[] nums, int[][] queries) {\n        BIT = new long[nums.length + 10];\n        for (int i = 0; i < nums.length; i++) {\n            update(i + 1, isPeak(nums, i));\n        }\n        List<Integer> ans = new ArrayList<Integer>();\n        for (int i = 0; i < queries.length; i++) {\n            tr(nums, queries[i]);\n            if (queries[i][0] == 2) {\n                for (int j = queries[i][1] - 1; j <= queries[i][1] + 1; j++) {\n                    if (j <= 0 || j >= nums.length - 1)\n                        continue;\n                    int peak = isPeak(nums, j);\n                    update(j + 1, -peak);\n                }\n                nums[queries[i][1]] = queries[i][2];\n                for (int j = queries[i][1] - 1; j <= queries[i][1] + 1; j++) {\n                    if (j <= 0 || j >= nums.length - 1)\n                        continue;\n                    int peak = isPeak(nums, j);\n                    update(j + 1, peak);\n                }\n            } else {\n                long v = query(queries[i][2] + 1) - query(queries[i][1]);\n                tr(\">\", v);\n                v -= isPeak(nums, queries[i][1]);\n                if (queries[i][1] != queries[i][2])\n                    v -= isPeak(nums, queries[i][2]);\n                tr(\">>\", v);\n                ans.add((int) v);\n            }\n        }\n        return ans;\n\n    }\n\n    private int isPeak(int[] nums, int i) {\n        return (i > 0 && i < nums.length - 1 && nums[i] > nums[i - 1] && nums[i] > nums[i + 1] ? 1 : 0);\n    }\n\n    long BIT[];\n\n    void update(int ind, int vl) {\n        for (int i = ind; i < BIT.length; i += (i & -i))\n            BIT[i] += vl;\n    }\n\n    long query(int ind) {\n        long ans = 0;\n        for (int i = ind; i >= 1; i -= (i & -i)) {\n            ans += BIT[i];\n        }\n        return ans;\n    }\n\n    static void tr(Object... o) {\n        // System.out.println(Arrays.deepToString(o));\n    }\n\n}",
    "submit_ts": "1718508124",
    "subm_id": "1289672347"
}