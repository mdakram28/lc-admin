{
    "username": "pandaforever",
    "submission": "#define _int64 long long\n\n#define mo 1000000007\n\n\nstruct rec\n{\n    _int64 a[2][2];\n};\n\nvector<int> a;\n\nrec d[51000*4];\n\nrec merge1(rec& r1,rec& r2)\n{\n    rec r;\n    int i,j,i1,j1,i2,j2;\n    for (i=0;i<2;i++)\n        for (j=0;j<2;j++)\n            r.a[i][j]=-(1LL<<60);\n    for (i1=0;i1<2;i1++)\n        for (j1=0;j1<2;j1++)\n            for (i2=0;i2<2;i2++)\n            {\n                if ((j1==1)&&(i2==1)) continue;\n                for (j2=0;j2<2;j2++)\n                {\n                    r.a[i1][j2]=max(r.a[i1][j2],r1.a[i1][j1]+r2.a[i2][j2]);\n                }\n            }\n    return r;\n}\n\nvoid init1(int x,int l,int r)\n{\n    int mid,i,j;\n    if (l==r)\n    {\n        d[x].a[0][0]=0;\n        d[x].a[1][1]=a[l];\n        d[x].a[0][1]=-(1LL<<60);\n        d[x].a[1][0]=-(1LL<<60);\n        return;\n    }\n    mid=(l+r)/2;\n    init1(x+x+1,l,mid);\n    init1(x+x+2,mid+1,r);\n    d[x]=merge1(d[x+x+1],d[x+x+2]);\n}\n\nvoid set1(int x,int l,int r,int ind,int v)\n{\n    int mid;\n    if (l==r)\n    {\n        a[l]=v;\n        d[x].a[0][0]=0;\n        d[x].a[1][1]=a[l];\n        d[x].a[0][1]=-(1LL<<60);\n        d[x].a[1][0]=-(1LL<<60);\n        return;\n    }\n    mid=(l+r)/2;\n    if (ind<=mid) set1(x+x+1,l,mid,ind,v);\n    else set1(x+x+2,mid+1,r,ind,v);\n    d[x]=merge1(d[x+x+1],d[x+x+2]);\n}\n\nclass Solution {\npublic:\n    int maximumSumSubsequence(vector<int>& aa, vector<vector<int>>& queries) {\n        int i,j,n,x,y,o;\n        _int64 ans,tmp;\n        a=aa;\n        n=a.size();\n        init1(0,0,n-1);\n        ans=0;\n        for (o=0;o<queries.size();o++)\n        {\n            x=queries[o][0];\n            y=queries[o][1];\n            set1(0,0,n-1,x,y);\n            rec r=d[0];\n            tmp=0;\n            for (i=0;i<2;i++)\n                for (j=0;j<2;j++)\n                    tmp=max(tmp,r.a[i][j]);\n            //cout<<\"tmp:\"<<tmp<<endl;\n            ans+=tmp;\n            ans%=mo;\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1716691951.0
}