{
    "username": "RedHeadphone",
    "submission": "#include <vector>\n#include <cmath>\n#include <algorithm>\n#include <climits>\n\nusing namespace std;\n\nclass Solution {\npublic:\n    int minimumDifference(vector<int>& nums, int k) {\n        int n = nums.size();\n        vector<vector<int>> bit_sum(n + 1, vector<int>(30, 0));\n\n        auto get = [&](int r, int l) {\n            int temp = 0;\n            for (int j = 0; j < 30; ++j) {\n                if ((bit_sum[r][j] - bit_sum[l][j]) >= (r - l)) {\n                    temp += (1 << j);\n                }\n            }\n            return temp;\n        };\n\n        for (int i = 0; i < n; ++i) {\n            for (int j = 0; j < 30; ++j) {\n                bit_sum[i + 1][j] = bit_sum[i][j];\n                if ((nums[i] >> j) & 1) {\n                    bit_sum[i + 1][j] += 1;\n                }\n            }\n        }\n\n        int ans = INT_MAX;\n\n        for (int i = 0; i < n; ++i) {\n            auto check = [&](int mid) {\n                return get(i + 1, mid) >= k;\n            };\n\n            int ind = binary_search(0, i, check, false);\n            ans = min(ans, abs(k - get(i + 1, ind)));\n            if (ind != 0) {\n                ans = min(ans, abs(k - get(i + 1, ind - 1)));\n            }\n        }\n\n        return ans;\n    }\n\nprivate:\n    int binary_search(int left, int right, function<bool(int)> check, bool start_from_left) {\n        int ans = start_from_left ? left : right;\n        while (left <= right) {\n            int mid = (left + right) / 2;\n            if (start_from_left) {\n                if (check(mid)) {\n                    ans = mid;\n                    left = mid + 1;\n                } else {\n                    right = mid - 1;\n                }\n            } else {\n                if (check(mid)) {\n                    ans = mid;\n                    right = mid - 1;\n                } else {\n                    left = mid + 1;\n                }\n            }\n        }\n        return ans;\n    }\n};\n",
    "submit_ts": 1717297755.0
}