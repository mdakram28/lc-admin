{
    "username": "SaveVMK",
    "submission": "class Solution {\n    public List<Integer> countOfPeaks(int[] nums, int[][] queries) {\n        int n = nums.length;\n        int[] ctp = new int[n];\n        int[] ctp100 = new int[n/100+1];\n        int[] ctp10k = new int[n/10000+1];\n        for (int i = 1; i < n-1; ++i) {\n            if (nums[i-1]<nums[i]&&nums[i]>nums[i+1]) {\n                ctp[i]++;\n                ctp100[i/100]++;\n                ctp10k[i/10000]++;\n                //System.out.println(i+\" \"+ctp[i]+\" ah\");\n            }\n        }\n        List<Integer> ans = new ArrayList<>();\n        for (int[] q : queries) {\n            if (q[0]==1) {\n                int l = q[1]+1;\n                int r = q[2]-1;\n                int ta = 0;\n                while (l<=r&&l%100!=0)\n                    ta+=ctp[l++];\n                while (l<=r&&r%100!=99)\n                    ta+=ctp[r--];\n                //System.out.println(l+\" \"+r+\" \"+ta);\n                if (l<=r) {\n                    l/=100;\n                    r/=100;\n                }\n                while (l<=r&&l%100!=0)\n                    ta+=ctp100[l++];\n                while (l<=r&&r%100!=99)\n                    ta+=ctp100[r--];\n                //System.out.println(l+\" \"+r+\" \"+ta);\n                if (l<=r) {\n                    l/=100;\n                    r/=100;\n                }\n                while (l<=r)\n                    ta+=ctp10k[l++];\n                ans.add(ta);\n            } else {\n                int ind = q[1];\n                int val = q[2];\n                for (int a = -1; a <= 1; ++a) {\n                    int i = ind+a;\n                    if (i<=0||i>=n-1)\n                        continue;\n                    //System.out.println(i+\" \"+n);\n                    if (nums[i-1]<nums[i]&&nums[i]>nums[i+1]) {\n                        ctp[i]--;\n                        ctp100[i/100]--;\n                        ctp10k[i/10000]--;\n                    }\n                }\n                nums[ind] = val;\n                for (int a = -1; a <= 1; ++a) {\n                    int i = ind+a;\n                    if (i<=0||i>=n-1)\n                        continue;\n                    if (nums[i-1]<nums[i]&&nums[i]>nums[i+1]) {\n                        ctp[i]++;\n                        ctp100[i/100]++;\n                        ctp10k[i/10000]++;\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n}",
    "submit_ts": 1718506650.0
}