{
    "username": "yogman",
    "submission": "#include <bits/stdc++.h>\nusing namespace std;\n\nusing ll = long long;\nusing lld = long double;\nusing ii = pair<ll,ll>;\n\nconst ll mod = 1e9+7;\n// const ll mod = 998244353;\n\n#define endl \"\\n\"\n#define pb push_back\n#define F first\n#define S second\n#define MP make_pair\n#define len(x) ((ll)((x).size()))\n#define rep(i,x) for(ll i=0;i<(x);i++)\n#define all(x) (x).begin(),(x).end()\n\n\n/*mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\nuniform_int_distribution<int> dist(1, (int) 2e9);\ninline int rnd(int l=0,int r=2e9){return uniform_int_distribution<int>(l,r)(rng);}\ncout<<dist(rng)<<\" \"<<rnd(5,100)<<endl;\n*/\n\ninline ll mul(ll x,ll y){\n    x%=mod;y%=mod;\n    x+=mod;y+=mod;\n    return x*y %mod;\n}\n\ninline ll add(ll x,ll y){\n    x%=mod;y%=mod;\n    x+=mod;y+=mod;\n    return (x+y) %mod;\n}\n\ninline ll power(ll x,ll y){\n    x%=mod;\n    ll res=1;\n    while(y){\n        if(y&1)\n            res=res*x %mod;\n        x=x*x %mod;\n        y/=2;\n    }\n    return res;\n}\n\nclass Solution {\npublic:\n    vector<vector<int>> arr;\n    ll n,m;\n    ll I,J;\n    ll dp[101][2][2][2];\n    set<ii> maxi[101];\n    ll rec(ll idx,bool ii,bool jj,bool kk){\n        // cout<<\"ok\";\n        // cout<<idx<<endl;\n        if(idx==m){\n            // cout<<ii<<\" \"<<jj<<\" \"<<kk<<endl;\n            if(ii && jj && kk){return 0;}\n            return -1e17;\n        }\n        if(~dp[idx][ii][jj][kk]){\n            return dp[idx][ii][jj][kk];\n        }\n        ll ans=rec(idx+1,ii,jj,kk);\n        if(!ii){\n            ans=max(ans,rec(idx+1,1,jj,kk)+arr[I][idx]);\n        }\n        if(!jj){\n            ans=max(ans,rec(idx+1,ii,1,kk)+arr[J][idx]);\n        }\n        if(!kk){\n            // cout<<\"now\";\n            auto it=maxi[idx].end();\n            ll val=-1e18;\n            while(it!=maxi[idx].begin()){\n                --it;\n                if(it->S==I || it->S==J)continue;\n                val=it->F;\n                break;\n            }\n\n            // if(val==-1e18){\n            //     cout<<\"wow\";\n            // }else{\n            //     cout<<val<<endl;\n            // }\n            ans=max(ans,rec(idx+1,ii,jj,1)+val);\n        }\n        // if(ans==-1e18)cout<<\"how\"<<endl;\n        return dp[idx][ii][jj][kk]=ans;\n    }\n    long long maximumValueSum(vector<vector<int>>& a) {\n        n=len(a);\n        m=len(a[0]);\n        arr=a;\n        ll ans=-1e18;\n        rep(i,n){\n            rep(j,m){\n                maxi[j].insert({a[i][j],i});\n                if(len(maxi[j])>3)maxi[j].erase(maxi[j].begin());\n            }\n        }\n        rep(i,n){\n            for(ll j=i+1;j<n;j++){\n                memset(dp,-1,sizeof(dp));\n                I=i;\n                J=j;\n                // cout<<rec(0,0,0,0)<<endl;\n                ans=max(ans,rec(0,0,0,0));\n            }\n        }\n        // if(ans==-1e18)return -100;\n        return ans;\n    }\n};",
    "submit_ts": "1723907666",
    "subm_id": "1359118710"
}