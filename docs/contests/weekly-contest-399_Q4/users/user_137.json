{
    "username": "amank13",
    "submission": "class Solution {\n    static const int N = 51234; \n    static const int MOD = 1000000007; \n    struct TreeNode {\n        int left,right;\n        long long sum[2][2];\n    }st[N*4];\n    \n    void initialise(int l, int r, int idx, vector<int>& nums) {\n        st[idx].left = l;\n        st[idx].right = r;\n        if(l==r) {\n            st[idx].sum[0][0] = max(nums[l],0);\n            st[idx].sum[0][1] = 0;\n            st[idx].sum[1][0] = 0;\n            st[idx].sum[1][1] = 0;\n            return;\n        }\n        int mid = (l+r)/2;\n        initialise(l,mid, 2*idx, nums);\n        initialise(mid+1,r, 2*idx+1, nums);\n        for(int i=0;i<2;i++) {\n            for(int j=0;j<2;j++) {\n                st[idx].sum[i][j] = \n                    max(st[2*idx].sum[i][0] + st[2*idx +1].sum[1][j], st[2*idx].sum[i][1] + st[2*idx+1].sum[0][j]);\n            }\n        }\n    }\n    void update(int pos, int val, int idx) {\n        int l = st[idx].left, r = st[idx].right;\n        if(pos<l || pos>r) {\n            return;\n        }\n        if(l==r) {\n            st[idx].sum[0][0] = max(val,0);\n            st[idx].sum[0][1] = 0;\n            st[idx].sum[1][0] = 0;\n            st[idx].sum[1][1] = 0;\n            return;\n        }\n        int mid = (l+r)/2;\n        update(pos,val, 2*idx);\n        update(pos,val, 2*idx+1);\n        for(int i=0;i<2;i++) {\n            for(int j=0;j<2;j++) {\n                st[idx].sum[i][j] = \n                    max(st[2*idx].sum[i][0] + st[2*idx + 1].sum[1][j], st[2*idx].sum[i][1] + st[2*idx+1].sum[0][j]);\n            }\n        }\n    }\npublic:\n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        initialise(0,n-1,1, nums);\n        long long ans = 0;\n        for(int i=0;i<queries.size();i++) {\n            update(queries[i][0], queries[i][1], 1);\n            ans += st[1].sum[0][0];\n            //cout<<i<<\" \"<<st[1].sum[0][0]<<\" \"<<st[1].sum[0][1]<<\" \"<<st[1].sum[1][1]<<endl;\n        }\n        return ans%1000000007;\n    }\n};",
    "submit_ts": 1716694246.0
}