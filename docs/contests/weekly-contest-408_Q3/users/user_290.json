{
    "username": "ashu_2202",
    "submission": "class Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        int n=s.size();\n        vector<int> z(n,0), o(n,0);\n        for(int i=0;i<n;i++){\n            if(s[i] == '0') z[i]++;\n            else o[i]++;\n            if(i){\n                z[i] += z[i-1];\n                o[i] += o[i-1];\n            }\n        }\n        // for(int i=0;i<n;i++) cout<<z[i]<<\" \";\n        // cout<<endl;\n        // for(int i=0;i<n;i++) cout<<o[i]<<\" \";\n        // cout<<endl<<endl;\n\n        unordered_map<int,int> m1, m2;\n        m1[z[0]] = 0, m2[o[0]] = 0;\n        for(int i=1;i<n;i++){\n            if(z[i] != z[i-1])\n                m1[z[i]] = i;\n\n            if(o[i] != o[i-1])\n                m2[o[i]] = i;\n        }\n        m1[z[n-1]+1] = n;\n        // m2[o[n-1]+1] = n;\n\n        long ans=0;\n        int zz=0, oo=0;\n        for(int k=0;k<n;k++){\n            // cout<<\"# k:\"<<k<<endl;\n            int idx = k;\n            // long ans=0;\n            while(idx < n){\n                // int ridx1 = upper_bound(z.begin()+k, z.end(), z[idx]) - z.begin()-1;\n                int ridx = max(k, m1[z[idx]+1]-1);\n                // cout<<\"ridx : \"<<ridx<<\" ridx1 : \"<<ridx1<<\" \"<<(ridx1 != ridx)<<endl;\n                long val = (z[idx]-zz)*(z[idx]-zz)+oo;\n\n                // int li1 = lower_bound(o.begin()+k, o.end(), val) - o.begin();\n                int li = n;\n                if(val < o[0]) li = 0;\n                else if(val > o[n-1]) li = n;\n                else\n                    li = max(k, m2[val]);\n                // cout<<\"li : \"<<li<<\" li1 : \"<<li1<<\" \"<<(li1 != li)<<endl;\n\n                // cout<<idx<<\" \"<<z[idx]<<\" \"<<ridx<<\" \"<<li<<\" \"<<(li <= ridx)<<endl;\n                // cout<<idx<<\" \"<<z[idx]<<endl;\n\n                if(li == n) break;\n\n                if(li <= ridx){\n                    int l = max(li, idx);\n                    ans += ridx-l+1;\n                }\n\n                idx = ridx+1;\n            }\n            if(s[k] == '0') zz++;\n            else oo++;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1722138814",
    "subm_id": "1335800375"
}