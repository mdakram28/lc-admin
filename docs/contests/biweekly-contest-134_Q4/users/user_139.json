{
    "username": "981377660LMT",
    "submission": "package main\n\nfunc countSubarrays(nums []int, k int) int64 {\n\tres := LogTrick(nums, func(a, b int) int { return a & b }, nil)\n\treturn int64(res[k])\n}\n\ntype Interval = struct{ leftStart, leftEnd, value int }\n\nfunc LogTrick(nums []int, op func(int, int) int, f func(left []Interval, right int)) map[int]int {\n\tres := make(map[int]int)\n\n\tdp := []Interval{}\n\tfor pos, cur := range nums {\n\t\tfor i, pre := range dp {\n\t\t\tdp[i].value = op(pre.value, cur)\n\t\t}\n\t\tdp = append(dp, Interval{leftStart: pos, leftEnd: pos + 1, value: cur})\n\n\t\t// \u53bb\u91cd\n\t\tptr := 0\n\t\tfor _, v := range dp[1:] {\n\t\t\tif v.value != dp[ptr].value {\n\t\t\t\tptr++\n\t\t\t\tdp[ptr] = v\n\t\t\t} else {\n\t\t\t\tdp[ptr].leftEnd = v.leftEnd\n\t\t\t}\n\t\t}\n\t\tdp = dp[:ptr+1]\n\n\t\t// \u5c06\u533a\u95f4[0,pos]\u5206\u6210\u4e86dp.length\u4e2a\u5de6\u95ed\u53f3\u5f00\u533a\u95f4.\n\t\t// \u6bcf\u4e00\u6bb5\u533a\u95f4\u7684\u5de6\u7aef\u70b9left\u8303\u56f4 \u5728 [dp[i].leftStart,dp[i].leftEnd) \u4e2d\u3002\n\t\t// \u5bf9\u5e94\u5b50\u6570\u7ec4 arr[left:pos+1] \u7684 op \u503c\u4e3a dp[i].value.\n\t\tfor _, v := range dp {\n\t\t\tres[v.value] += v.leftEnd - v.leftStart\n\t\t}\n\t\tif f != nil {\n\t\t\tf(dp, pos)\n\t\t}\n\t}\n\n\treturn res\n}\n",
    "submit_ts": "1720277729",
    "subm_id": "544558415"
}