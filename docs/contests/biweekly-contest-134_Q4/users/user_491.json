{
    "username": "CAEL0",
    "submission": "#include <bits/stdc++.h>\n#define sz size()\n#define bk back()\n#define fi first\n#define se second\n\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int, int> pii;\n\nclass Solution {\n  public:\n    ll countSubarrays(vector<int> &v, int k) {\n        vector<int> w;\n        for (int i = 0; i < 30; i++) {\n            w.push_back(k & 1);\n            k >>= 1;\n        }\n\n        ll ret = 0;\n        ll left = 0;\n        vector<int> cnt(30);\n        vector<deque<int>> zeros(30);\n\n        for (int i = 0; i < v.sz; i++) {\n            int x = v[i];\n            for (int j = 0; j < 30; j++) {\n                if (x & 1)\n                    cnt[j]++;\n                else\n                    zeros[j].push_back(i);\n\n                x >>= 1;\n            }\n\n            while (left <= i) {\n                int len = i - left + 1;\n                bool flag = true;\n\n                for (int j = 0; j < 30; j++) {\n                    if (w[j] && cnt[j] != len) {\n                        flag = false;\n                        break;\n                    }\n                }\n\n                if (flag)\n                    break;\n\n                int x = v[left++];\n                for (int j = 0; j < 30; j++) {\n                    if (x & 1)\n                        cnt[j]--;\n                    else\n                        zeros[j].pop_front();\n\n                    x >>= 1;\n                }\n            }\n\n            int mx = INT_MAX;\n            bool flag = true;\n\n            for (int j = 0; j < 30; j++) {\n                if (w[j])\n                    continue;\n                \n                if (zeros[j].empty()) {\n                    flag = false;\n                    break;\n                }\n                \n                mx = min(mx, zeros[j].bk);\n            }\n\n            if (flag)\n                ret += mx - left + 1;\n        }\n\n        return ret;\n    }\n};",
    "submit_ts": "1720279321",
    "subm_id": "1311746495"
}