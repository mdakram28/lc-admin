{
    "username": "cse200001071",
    "submission": "class Solution {\npublic:\nint mod=1e9+7;\nvector<long long> query(long long *ALL, long long *NF, long long *NL, long long *NFL,int index,int s,int e,int qs,int qe)\n{\n\n\tif(qs>e || s>qe)\n\t\treturn {0, 0, 0, 0};\n\tif(s>=qs && e<=qe)\n\t\treturn {ALL[index], NF[index], NL[index], NFL[index]};\n\tint m = (s+e)/2;\n\tvector<long long> a1 = query(ALL, NF, NL, NFL,2*index,s,m,qs,qe);\n\tvector<long long> a2 = query(ALL, NF, NL, NFL,2*index+1,m+1,e,qs,qe);\n\tvector<long long> ans = {max(a1[0]+a2[1],a1[2]+a2[0]) ,max(a1[1]+a2[1],a1[3]+a2[0]),max(a1[0]+a2[3],a1[2]+a2[2]),max(a1[1]+a2[3],a1[3]+a2[2])};\n    \n    return ans;\n}\n\n\nvoid updateNode(long long *ALL, long long *NF, long long *NL, long long *NFL,int index,int s,int e,int pos,int val)\n{\n\tif(pos<s || pos>e)\n\t\treturn ;\n\tif(s==e)\n\t{\n\t\tALL[index]=max(0, val);\n        NL[index]=0;\n        NF[index]=0;\n        NFL[index]=0;\n\t\treturn ;\n\t}\n\tint m = (s+e)/2;\n\tupdateNode(ALL, NF, NL, NFL,2*index,s,m,pos,val);\n\tupdateNode(ALL, NF, NL, NFL,2*index+1,m+1,e,pos,val);\n    NF[index]=max(NF[2*index]+NF[2*index+1], NFL[2*index]+ALL[2*index+1]);\n    ALL[index]= max(ALL[2*index]+NF[2*index+1], NL[2*index]+ALL[2*index+1]);\n    NL[index]=max(ALL[2*index]+NFL[2*index+1], NL[2*index]+NL[2*index+1]);\n    NFL[index]=max(NF[2*index]+NFL[2*index+1], NFL[2*index]+NL[2*index+1]);\n    NF[index]%=mod;\n    ALL[index]%=mod;\n    NL[index]%=mod;\n    NFL[index]%=mod;\n    \n\treturn;\n}\n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        long long n=nums.size();\n        long long *ALL= new long long[4*n+10]; \n        long long *NF= new long long[4*n+10]; \n        long long *NL= new long long[4*n+10]; \n        long long *NFL= new long long[4*n+10]; \n        for(int i=0;i<nums.size();i++){\n            updateNode(ALL, NF, NL, NFL, 1, 0, n-1, i, nums[i]);\n        }\n        long long ans =0;\n        \n        \n        vector<long long>temp;\n        for(auto &j:queries){\n            updateNode(ALL, NF, NL, NFL, 1, 0, n-1, j[0], j[1]);\n            temp=query(ALL,  NF, NL, NFL, 1, 0 , n-1, 0, n-1);\n            ans=(ans+temp[0])%mod;\n\n        }\n        return (int)ans;\n\n        \n    }\n};",
    "submit_ts": "1716694096",
    "subm_id": "1268105877"
}