{
    "username": "ddoudle",
    "submission": "class NumArray:\n\n    def __init__(self, nums: List[int]):\n        self.n = len(nums)\n        self.nums = [0] * self.n\n        self.bit = [0] * (self.n+1)\n        for i, v in enumerate(nums):\n            self.update(i, v)\n\n    def update(self, index: int, val: int) -> None:\n        diff = val - self.nums[index]\n        j = index + 1\n        while j <= self.n:\n            self.bit[j] += diff\n            j += (j & -j)\n        self.nums[index] = val\n\n    def sumRange(self, left: int, right: int) -> int:\n        return self.querySum(right+1) - self.querySum(left)\n\n    def querySum(self, j):\n        sm = 0\n        while j > 0:\n            sm += self.bit[j]\n            j -= (j & -j)\n        return sm\n\nclass Solution:\n    def countOfPeaks(self, nums: List[int], queries: List[List[int]]) -> List[int]:\n        \n        def isPeak(nums, idx):\n            if idx == 0 or idx == len(nums)-1:\n                return 0\n            if nums[idx] > nums[idx-1] and nums[idx] > nums[idx+1]:\n                return 1\n            return 0\n        \n        n = len(nums)\n        arr = [0] * n\n        for i in range(n):\n            arr[i] = isPeak(nums, i)\n        na = NumArray(arr)\n        res = []\n        for x, y, z in queries:\n            if x == 1:\n                if z - y <= 1:\n                    res.append(0)\n                else:\n                    sm = na.sumRange(y, z)\n                    sm -= arr[y]\n                    sm -= arr[z]\n                    res.append(sm)\n            else:\n                nums[y] = z\n                prev = y-1\n                if prev >= 0:\n                    arr[prev] = isPeak(nums, prev)\n                    na.update(prev, arr[prev])\n                nxt = y+1\n                if nxt < n:\n                    arr[nxt] = isPeak(nums, nxt)\n                    na.update(nxt, arr[nxt])\n                arr[y] = isPeak(nums, y)\n                na.update(y, arr[y])\n        return res\n        ",
    "submit_ts": 1718507352.0
}