{
    "username": "LLIEPJIOK",
    "submission": "class Solution {\npublic:\n    int maximumLength(vector<int>& nums, int k) {\n        int n = nums.size();\n        vector<vector<int>> dp(n, vector<int>(k + 1, 1));\n        vector<int> need(n, -1);\n        unordered_map<int, int> mp;\n        for (int i = 0; i < n; ++i) {\n            if (mp.count(nums[i])) {\n                need[i] = mp[nums[i]];\n            }\n            mp[nums[i]] = i;\n        }\n        int mx = 1;\n        vector<pair<int, int>> maxs(k + 1, {0, 0});\n        for (int i = 1; i < n; ++i) {\n            if (need[i] != -1) {\n                for (int kk = 0; kk <= k; ++kk) {\n                    dp[i][kk] = max(dp[i][kk], dp[need[i]][kk] + 1);\n                    mx = max(mx, dp[i][kk]);\n                    if (maxs[kk].second == -1 || dp[maxs[kk].second][kk] < dp[i][kk]) {\n                        maxs[kk].second = i;\n                        if (maxs[kk].first == -1 || dp[maxs[kk].first][kk] < dp[maxs[kk].second][kk]) {\n                            swap(maxs[kk].first, maxs[kk].second);\n                        }\n                    }\n                }\n            }\n            for (int kk = 0; kk < k; ++kk) {\n                int a = maxs[kk].first, b = maxs[kk].second;\n                if (a != -1 && nums[a] != nums[i]) {\n                    dp[i][kk + 1] = max(dp[i][kk + 1], dp[a][kk] + 1);\n                }\n                if (b != -1 && nums[b] != nums[i]) {\n                    dp[i][kk + 1] = max(dp[i][kk + 1], dp[b][kk] + 1);\n                }\n                mx = max(mx, dp[i][kk + 1]);\n                if (maxs[kk + 1].second == -1 || dp[maxs[kk + 1].second][kk + 1] < dp[i][kk + 1]) {\n                    maxs[kk + 1].second = i;\n                    if (maxs[kk + 1].first == -1 || dp[maxs[kk + 1].first][kk + 1] < dp[maxs[kk + 1].second][kk + 1]) {\n                        swap(maxs[kk + 1].first, maxs[kk + 1].second);\n                    }\n                }\n            }\n        }\n        return mx;\n    }\n};",
    "submit_ts": 1717862280.0
}