{
    "username": "SUVU01",
    "submission": "class Solution {\npublic:\n    #define ll long long\n    int val(int l, int r, vector<vector<int>> &prefix)\n    {\n        int ans = 0;\n        for(int i = 0; i < 30; i++)\n        {\n            int curr = prefix[i][r];\n            if(l > 0)\n                curr -= prefix[i][l - 1];\n            if(r - l + 1 == curr)\n                ans += (1 << i);\n        }\n        return ans;\n    }\n    int lb(int l, vector<vector<int>> &prefix, int &k)\n    {\n        int ans = -1;\n        int low = l, high = prefix[0].size() - 1;\n        while(low <= high)\n        {\n            int mid = (low + high) >> 1;\n            int c = val(l, mid, prefix);\n            if(c == k)\n                ans = mid, high = mid - 1;\n            else if(c < k)\n                high = mid - 1;\n            else\n                low = mid + 1;\n        }\n        return ans;\n    }\n    int ub(int l, vector<vector<int>> &prefix, int &k)\n    {\n        int ans = -1;\n        int low = l, high = prefix[0].size() - 1;\n        while(low <= high)\n        {\n            int mid = (low + high) >> 1;\n            int c = val(l, mid, prefix);\n            if(c == k)\n                ans = mid, low = mid + 1;\n            else if(c < k)\n                high = mid - 1;\n            else\n                low = mid + 1;\n        }\n        return ans;\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n = nums.size();\n        vector<vector<int>> prefix(32, vector<int> (n, 0));\n        for(int i = 0; i < 30; i++)\n        {\n            if(nums[0] & (1 << i))\n                prefix[i][0] = 1;\n            for(int j = 1; j < n; j++)\n            {\n                int curr = nums[j] & (1 << i);\n                if(curr)\n                    prefix[i][j] = 1;\n                prefix[i][j] += prefix[i][j - 1];\n            }\n        }\n        ll ans = 0;\n        for(int i = 0; i < n; i++)\n        {\n            int l = lb(i, prefix, k), r = ub(i, prefix, k);\n            if(l == -1)\n                continue;\n            ans += (r - l + 1);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279494",
    "subm_id": "1311753480"
}