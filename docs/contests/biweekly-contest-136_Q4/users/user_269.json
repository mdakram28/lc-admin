{
    "username": "liu-jia-jie-e",
    "submission": "class Solution {\npublic:\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n=edges.size()+1;\n        vector<int> ans(n),mx(n);\n        vector<vector<pair<int,int>>> e(n);\n        auto add=[&](int x,int y){\n            if(y&1) e[x].push_back({y,1});\n            else e[x].push_back({y,2});\n        };\n        for(auto ed:edges){\n            int x=ed[0],y=ed[1];\n            add(x,y),add(y,x);\n        }\n        int c=0;\n        function<void(int,int)> dfs1=[&](int x,int fa){\n            for(auto [y,w]:e[x]){\n                if(y==fa) continue;\n                dfs1(y,x);\n                mx[x]=max(mx[x],mx[y]+w);\n            }  \n        };\n        dfs1(0,-1);\n        function<void(int,int,int,int)> dfs2=[&](int x,int fa,int res,int lst){\n            ans[x]=res;\n            int fi=-1,se=-1;\n            for(auto [y,w]:e[x]){\n                if(y==fa) continue;\n                if(fi==-1||mx[y]+(y&1?1:2)>mx[fi]+(fi&1?1:2)){\n                    se=fi,fi=y;\n                }else if(se==-1||mx[y]+(y&1?1:2)>mx[se]+(se&1?1:2)){\n                    se=y;\n                }\n            }\n            for(auto [y,w]:e[x]){\n                if(y==fa) continue;\n                int k=x&1?1:2;\n                if(y==fi){\n                    if(se==-1){\n                        dfs2(y,x,max({mx[y],lst+k}),lst+k);\n                    }\n                    else{\n                        dfs2(y,x,max({mx[y],lst+k,mx[se]+k+(se&1?1:2)}),max(mx[se]+(se&1?1:2),lst)+k);\n                    }\n                }else{\n                    dfs2(y,x,max({mx[y],lst+k,mx[fi]+k+(fi&1?1:2)}),max(mx[fi]+(fi&1?1:2),lst)+k);\n                }\n            }\n        };\n        dfs2(0,-1,mx[0],0);\n        return ans;\n    }\n};",
    "submit_ts": "1722697503",
    "subm_id": "552266429"
}