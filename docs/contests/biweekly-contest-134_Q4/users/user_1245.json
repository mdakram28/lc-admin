{
    "username": "pradyumnna",
    "submission": "class Solution {\n    public int getValue(int[][] psum, int p, int q)\n    {\n        int val = 0;\n        for(int i=0;i<32;i++)\n        {\n            if(psum[q+1][i]-psum[p][i]==q-p+1) val = val + (1<<i);\n        }\n        \n        return val;\n    }\n    \n    public int firstOccur(int[][] psum, int p, int q, int k)\n    {\n        int i=p;\n        int j = q;\n        while(j>i){\n            int mid = (j+i)/2;\n            if(getValue(psum, p, mid)<=k)\n            {\n                j = mid;\n            }\n            else\n            {\n                i = mid+1;\n            }\n        }\n        \n        if(getValue(psum, p, i)==k) return i;\n        \n        return -1;\n    }\n    \n    public int lastOccur(int[][] psum, int p, int q, int k)\n    {\n        int i=p;\n        int j = q;\n        while(j>i){\n            int mid = (j+i+1)/2;\n            if(getValue(psum, p, mid)>=k)\n            {\n                i = mid;\n            }\n            else\n            {\n                j = mid-1;\n            }\n        }\n        \n        if(getValue(psum, p, i)==k) return i;\n        \n        return -1;\n    }\n    \n    public long countSubarrays(int[] nums, int k) \n    {\n        int n = nums.length;\n        var psum = new int[n+1][32];\n        for(int i=0;i<n;i++){\n            for(int j=0;j<32;j++)\n            {\n                psum[i+1][j] = psum[i][j] + (((nums[i] & (1<<j)) >0)? 1:0);\n            }\n        }\n        \n        long count = 0;\n        //System.out.println(getValue(psum, 0, 1));\n        for(int i=0;i<n;i++)\n        {\n            if(firstOccur(psum, i, n-1, k)!=-1){\n                // System.out.println(i+\" \"+\"kkk\");\n                // System.out.println(lastOccur(psum, i, n-1, k));\n                // System.out.println(firstOccur(psum, i, n-1, k));\n                count = count + lastOccur(psum, i, n-1, k) - firstOccur(psum, i, n-1, k) +1;\n            }\n        }\n        \n        return count;\n    }\n}",
    "submit_ts": "1720279960",
    "subm_id": "1311771834"
}