{
    "username": "wangdh15",
    "submission": "class Solution {\npublic:\n    \n    struct Node {\n       \n        int l, r; int val;\n    };\n    vector<int> nn;\n    \n    static constexpr int N = 100005;\n    Node tr[N << 2];\n    \n    void build(int u, int l, int r) {\n        tr[u] = {l, r, 0};\n        if (l == r) {\n            tr[u].val = nn[l];\n            return;\n        }\n        int mid = l + r >> 1;\n        build(u << 1, l, mid);\n        build(u << 1 | 1, mid + 1, r);\n        tr[u].val = tr[u<<1].val & tr[u << 1 | 1].val;\n    }\n    \n    int query(int u, int l, int r) {\n        if (tr[u].l >= l && tr[u].r <= r) return tr[u].val;\n        int mid = tr[u].l + tr[u].r >> 1;\n        int ans = ((1ULL << 31) - 1);\n        if (l <= mid) ans = ans & query(u << 1, l, r);\n        if (r > mid) ans = ans & query(u << 1 | 1, l, r);\n        // cout << \"aa\" << ans << endl;\n        return ans;\n    }\n    \n    long long countSubarrays(vector<int>& nums, int k) {\n        nn = std::move(nums);\n        const int n = nn.size();\n        build(1, 0, n - 1);\n        \n        for (int i = 0; i < 5; ++i) {\n            // cout << i << ' ' << tr[i].l << ' ' << tr[i].r << ' ' << tr[i].val << endl;\n        }\n        \n        long long ans = 0;\n        \n        // cout << query(1, 0, 1) << endl;\n        \n        \n        for (int i = 0; i < n; ++i) {\n            \n            int l = i, r = n - 1;\n            while (l < r) {\n                int mid = l + r >> 1;\n                if (query(1, i, mid) <= k) r = mid;\n                else l = mid + 1;\n            }\n            \n            // cout << query(1, 0, 2) << endl;\n            // cout << i << ' ' << l << endl;\n            \n            if (query(1, i, l) != k) continue;\n            \n            int tmp = l;\n            \n            l = i, r = n - 1;\n            while (l < r) {\n                int mid = l + r + 1 >> 1;\n                if (query(1, i, mid) >= k) l = mid;\n                else r = mid - 1;\n            }\n            \n            // cout << i << ' ' << tmp << ' ' << l << endl;\n        \n            ans += l - tmp + 1;\n            \n        }\n        return ans;\n        \n    }\n};",
    "submit_ts": "1720277883",
    "subm_id": "1311684451"
}