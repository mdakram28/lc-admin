{
    "username": "\u5c0f\u5f3a\u4e0e\u54b8\u9c7c\u7684\u7231\u60c5\u6545\u4e8b",
    "submission": "#include<bits/stdc++.h>\nusing namespace std;\nclass Solution {\npublic:\n\nstruct edg{int id,s,e;long long vol,cost;};\nstruct MCMF_spfa_EK{\n    const long long inf=4e13,inf2=3e9;\n    vector<edg>einfo;vector<vector<int>>es;int tim=0,etot=-1;long long maxf=0,ans=0;//vis:update dis\n    vector<int>vis,inq,lst_e;vector<long long>mxf,dis;\n    void add(int u,int v,long long vol,long long cost){\n        es[u].push_back(++etot);einfo.push_back({etot,u,v,vol,cost});\n        es[v].push_back(++etot);einfo.push_back({etot,v,u,0,-cost});}\n    bool spfa(int S,int T){\n        queue<int>Q;Q.push(S);dis[S]=0;inq[S]=1,vis[S]=++tim;mxf[S]=inf;\n        for(;!Q.empty();Q.pop()){int x=Q.front();inq[x]=0;vis[x]=tim;\n            for(auto eid:es[x]){edg &k=einfo[eid];int des=k.e;if(vis[des]!=tim)dis[des]=inf;\n                if(!k.vol||k.cost+dis[x]>=dis[des])continue;vis[des]=tim;dis[des]=dis[x]+k.cost;\n                mxf[des]=min(mxf[x],k.vol);lst_e[des]=eid;if(!inq[des])inq[des]=1,Q.push(des);}}\n        if(vis[T]!=tim)dis[T]=inf;return dis[T]!=inf;}\n    void Solve(int S,int T){while(spfa(S,T)){for(int x=T,k;x!=S;x=einfo[k].s)//\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41//\u6700\u5927:\u8fb9\u6743\u5168\u53cd\n  //void Solve(int S,int T){while(spfa(S,T)&&dis[T]<0){for(int x=T,k;x!=S;x=einfo[k].s)//\u6700\u5c0f\u8d39\u7528\u53ef\u884c\u6d41\n        k=lst_e[x],einfo[k].vol-=mxf[T],einfo[k^1].vol+=mxf[T];maxf+=mxf[T];ans+=(long long)(dis[T])*mxf[T];}} \n    void ini(int n){n++;vis.resize(n,0);inq=lst_e=vis;dis.resize(n);mxf=dis;es.resize(n);}\n};\n    long long maximumValueSum(vector<vector<int>>& board) {\n        MCMF_spfa_EK A;int n=board.size(),m=board[0].size();\n        int Bas=(n+1)*(m+1),S=0,B=Bas+1,T=B+1;A.ini(Bas+5);\n        A.add(S,B,3,0);\n        for(int i=1;i<=n;i++)A.add(B,i,1,0);\n        for(int i=1;i<=m;i++)A.add(i+n,T,1,0);\n        for(int i=1;i<=n;i++)for(int j=1;j<=m;j++)\n        {\n            int p=(i-1)*m+j+n+m;\n            A.add(i,p,1,-board[i-1][j-1]);\n            A.add(p,j+n,1,0);\n        }\n        A.Solve(S,T);return -A.ans;\n    }\n};",
    "submit_ts": "1723906145",
    "subm_id": "556316480"
}