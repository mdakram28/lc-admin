{
    "username": "fried-chicken",
    "submission": "#define rep(i,a,n) for(int i=a;i<=n;i++)\n#define per(i,a,n) for(int i=n;i>=a;i--)\n#define pb push_back\n#define SZ(v) ((int)v.size())\n#define fs first\n#define sc second\n#define all(x) (x.begin()),(x.end())\ntypedef long long ll;\ntypedef double db;\ntypedef pair<int,int> pii;\n\nvector<array<int,3>> g[100010];\nint d1[100010],d2[100010];\n\nvoid dfs0(int now,int fa){\n\tfor(auto [to,le,_]:g[now]){\n\t\tif(to==fa)\tcontinue;\n\t\tdfs0(to,now);\n\t\td1[now]=max(d1[now],d1[to]+le);\n\t}\n}\n\nvoid dfs1(int now,int fa,int mx=0){\n\tvector<int> dis;\n\td2[now]=mx;\n\tfor(auto [to,le,_]:g[now]){\n\t\tif(to==fa)\tcontinue;\n\t\tdis.pb(d1[to]+le);\n\t}\n\tsort(all(dis));\n\treverse(all(dis));\n\tfor(auto [to,ole,le]:g[now]){\n\t\tif(to==fa)\tcontinue;\n\t\tif(d1[to]+ole!=dis[0]){\n\t\t\tdfs1(to,now,le+max(mx,dis[0]));\n\t\t}\n\t\telse{\n\t\t\tif(SZ(dis)>=2)\tdfs1(to,now,le+max(mx,dis[1]));\n\t\t\telse\tdfs1(to,now,le+mx);\n\t\t}\n\t}\n}\n\nclass Solution {\npublic:\n    vector<int> timeTaken(vector<vector<int>>& edg) {\n        int n=SZ(edg);\n        rep(i,0,n+5){\n        \tg[i].clear();\n\t\t}\n\t\tmemset(d1,0,sizeof(d1));\n\t\tmemset(d2,0,sizeof(d2));\n\t\tfor(auto vv:edg){\n\t\t\tint u=vv[0],v=vv[1];\n        \tg[u].pb({v,1+(v%2==0),1+(u%2==0)});\n        \tg[v].pb({u,1+(u%2==0),1+(v%2==0)});\n\t\t}\n\t\tdfs0(0,-1);\n\t\tdfs1(0,-1);\n\t\tvector<int> ans;\n\t\trep(i,0,n){\n\t\t\tans.pb(max(d1[i],d2[i]));\n\t\t}\n\t\treturn ans;\n    }\n};",
    "submit_ts": "1722697755",
    "subm_id": "552267644"
}