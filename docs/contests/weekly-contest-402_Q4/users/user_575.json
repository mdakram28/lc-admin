{
    "username": "SamyakSinghania",
    "submission": "class Solution {\npublic:\n    // int N=1e5+5;\n    // int st[4*N];\nvector<int> st;\nvoid upd(int p,int l,int r,int k,int x){\n    if(l==r){\n        st[p]=x;\n        return;\n    }\n    int mid=(l+r)/2;\n    if(k<=mid)  upd(2*p,l,mid,k,x);\n    else    upd(2*p+1,mid+1,r,k,x);\n    st[p]=st[2*p]+st[2*p+1];\n}\nint get(int p,int l,int r,int i,int j){\n    if(j<i) return 0;\n    if(l>j || r<i)  return 0;\n    if(i<=l && r<=j){\n        return st[p];\n    }\n    int mid=(l+r)/2;\n    return get(2*p,l,mid,i,j)+get(2*p+1,mid+1,r,i,j);\n}\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n=nums.size();\n        st.assign(4*n,0);\n        for(int i=0;i<n;i++){\n            if(i-1>=0 && i+1<n && nums[i]>nums[i-1] && nums[i]>nums[i+1]){\n                upd(1,0,n-1,i,1);\n            }\n        }\n        vector<int> ans;\n        vector<int> vv=nums;\n        for(auto ele:queries){\n            int type,l,r;\n            type=ele[0],l=ele[1],r=ele[2];\n            if(type==1){\n                ans.push_back(get(1,0,n-1,l+1,r-1));\n            }\n            else{\n                if(l-1>=0){\n                    if(r>=vv[l-1]){\n                        upd(1,0,n-1,l-1,0);\n                    }\n                    else{\n                        if(l-2>=0 && vv[l-1]>vv[l-2]){\n                            upd(1,0,n-1,l-1,1);\n                        }\n                    }\n                }\n                if(l+1<n){\n                    if(r>=vv[l+1]){\n                        upd(1,0,n-1,l+1,0);\n                    }\n                    else{\n                        if(l+2<n && vv[l+1]>vv[l+2]){\n                            upd(1,0,n-1,l+1,1);\n                        }\n                    }\n                }\n                if(get(1,0,n-1,l,l)){\n                    if(r<= vv[l-1] || r<=vv[l+1]){\n                        upd(1,0,n-1,l,0);\n                    }\n                }\n                else{\n                    if(l-1>=0 && l+1<n && r>vv[l-1] && r>vv[l+1]){\n                        upd(1,0,n-1,l,1);\n                    }\n                }\n                vv[l]=r;\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1718507637",
    "subm_id": "1289657823"
}