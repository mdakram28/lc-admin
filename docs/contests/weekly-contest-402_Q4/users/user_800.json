{
    "username": "DenisGubar",
    "submission": "class Solution {\npublic:\n\ttemplate<typename T>\n\tstruct FenwickTree\n\t{\n\t\tFenwickTree(size_t N) : N(N)\n\t\t{\n\t\t\ttree.assign(N, {});\n\t\t}\n\t\tFenwickTree(vector<T> const& A) : FenwickTree(A.size())\n\t\t{\n\t\t\tfor (size_t position = 0; position < N; ++position)\n\t\t\t\tadd(position, A[position]);\n\t\t}\n\t\tvoid add(size_t position, T value)\n\t\t{\n\t\t\tfor (size_t x = position; x < N; x |= x + 1)\n\t\t\t\ttree[x] += value;\n\t\t}\n\t\t// [0; position]\n\t\tT sum(size_t position)\n\t\t{\n\t\t\tT result{};\n\t\t\tfor (size_t x = position; x > 0; x &= x - 1)\n\t\t\t\tresult += tree[x - 1];\n\t\t\treturn result;\n\t\t}\n\t\t// [left; right)\n\t\tT sum(size_t left, size_t right)\n\t\t{\n\t\t\treturn sum(right) - sum(left);\n\t\t}\n\t\tsize_t N;\n\t\tvector<T> tree;\n\t};\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int Q = queries.size(), N = nums.size();\n        vector<int> result;\n\t\tresult.reserve(Q);\n\t\tFenwickTree<int> FT(N + 1);\n\t\tfor (int i = 1; i < N - 1; ++i)\n\t\t\tif (nums[i - 1] < nums[i] && nums[i] > nums[i + 1])\n\t\t\t\tFT.add(i, 1);\n        for (int q = 0; q < Q; ++q)\n        {\n            int const& type = queries[q][0];\n            if (type == 1)\n            {\n                int const& L = queries[q][1];\n                int const& R = queries[q][2];\n\t\t\t\tif (R - L < 2)\n\t\t\t\t\tresult.push_back(0);\n\t\t\t\telse\n\t\t\t\t\tresult.push_back(FT.sum(L + 1, R));\n\t\t\t\tcontinue;\n            }\n            int const& index = queries[q][1];\n            int const& val = queries[q][2];\n\t\t\tfor (int i = index - 1; i <= index + 1; ++i)\n\t\t\t{\n\t\t\t\tif (i >= 0 && FT.sum(i, i + 1) == 1)\n\t\t\t\t\tFT.add(i, -1);\n\t\t\t}\n\t\t\tnums[index] = val;\n\t\t\tfor (int i = index - 1; i <= index + 1; ++i)\n\t\t\t\tif (i > 0 && i < N - 1 && nums[i - 1] < nums[i] && nums[i] > nums[i + 1])\n\t\t\t\t\tFT.add(i, 1);\n        }\n        return result;\n    }\n};\n",
    "submit_ts": 1718507313.0
}