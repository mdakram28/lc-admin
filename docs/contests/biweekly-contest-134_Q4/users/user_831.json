{
    "username": "meetsarvan",
    "submission": "class Solution {\npublic:\n    #define ll long long\n\n    vector<ll> decToBinary(int n) {\n        vector<ll> binaryNum(32, 0);\n        int i = 31;\n        while (n > 0) {\n            binaryNum[i--] = n % 2;\n            n = n / 2;\n        }\n        return binaryNum;\n    }\n\n    long long countSubarrays(vector<int>& nums, int k) {\n        ll ans = 0;\n        ll n = nums.size();\n        ll prefix[n + 1][32];\n        memset(prefix, 0, sizeof(prefix));\n        \n        for (int i = 0; i < n; i++) {\n            std::vector<ll> v = decToBinary(nums[i]);\n            for (int j = 0; j < 32; j++) {\n                prefix[i + 1][j] = prefix[i][j] + v[j];\n            }\n        }\n        \n        for (int i = 1; i <= n; i++) {\n            int l = i, r = n, ind = -1, ind1 = n+1;\n\n            // Binary search to find the index where the subarray sum equals k\n            while (l <= r) {\n                ll mid = (l + r) / 2;\n                ll temp = 0;\n                for (int j = 0; j < 32; j++) {\n                    if (prefix[mid][j] - prefix[i - 1][j] == mid - i + 1) temp += (1LL << (31 - j));\n                }\n                if (temp == k) {\n                    ind = mid;\n                    r = mid - 1;\n                } else if (temp > k) {\n                    l = mid+1;\n                } else {\n                    r = mid - 1;\n                }\n            }\n\n            l = i, r = n;\n\n            // Binary search to find the maximum index where the subarray sum is less than k-1\n            while (l <= r) {\n                ll mid = (l + r) / 2;\n                ll temp = 0;\n                for (int j = 0; j < 32; j++) {\n                    if (prefix[mid][j] - prefix[i - 1][j] == mid - i + 1) temp += (1LL << (31 - j));\n                }\n               if(temp <= k-1){\n                  ind1 = mid;\n                  r = mid-1;\n               }\n               else l = mid+1;\n            }\n          //  cout<<ind<<\" \"<<ind1<<endl;\n             if(ind != -1 && ind1 >= ind) ans += ind1-ind;\n        }\n\n        return ans;\n    }\n};",
    "submit_ts": "1720280038",
    "subm_id": "1311774634"
}