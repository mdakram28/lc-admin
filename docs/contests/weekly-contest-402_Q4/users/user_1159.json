{
    "username": "AmenPark",
    "submission": "class Solution:\n    def countOfPeaks(self, nums: List[int], queries: List[List[int]]) -> List[int]:\n        N=len(nums)\n        peeks = [0]*N\n        for i in range(1,N-1):\n            if nums[i]>nums[i-1] and nums[i]>nums[i+1]:\n                w=i\n                while w<N:\n                    peeks[w] += 1\n                    w += w&(-w)\n        ans=[]\n        def getw(i):\n            if i<=0:\n                return 0\n            w=i\n            rt=0\n            while w:\n                rt+=peeks[w]\n                w-=w&(-w)\n            return rt\n        def addnum(i,k):\n            if i<=0:\n                return\n            w=i\n            while w<N:\n                peeks[w]+=k\n                w+=w&(-w)\n        \n        for qa,qb,qc in queries:\n            if qa==1:\n                if qc<=qb+1:\n                    ans.append(0)\n                    continue\n                v=getw(qc-1)-getw(qb)\n                ans.append(v)\n            else:\n                if qb-1 > 0 :\n                    if nums[qb-1]>nums[qb-2]:\n                        if nums[qb-1]>nums[qb] and nums[qb-1]<=qc:\n                            addnum(qb-1,-1)\n                        elif nums[qb-1]<=nums[qb] and nums[qb-1]>qc:\n                            addnum(qb-1,1)\n                if qb>0 and qb<N-1:\n                    if nums[qb] > nums[qb-1] and nums[qb]>nums[qb+1]:\n                        if qc<=nums[qb-1] or qc<=nums[qb+1]:\n                            addnum(qb,-1)\n                    else:\n                        if qc>nums[qb-1] and qc>nums[qb+1]:\n                            addnum(qb,1)\n                if qb+1<N-1:\n                    if nums[qb+1]>nums[qb+2]:\n                        if nums[qb+1]>nums[qb] and nums[qb+1]<=qc:\n                            addnum(qb+1,-1)\n                        elif nums[qb+1]<=nums[qb] and nums[qb+1]>qc:\n                            addnum(qb+1,1)\n                nums[qb]=qc\n        return ans\n        \n        ",
    "submit_ts": 1718508195.0
}