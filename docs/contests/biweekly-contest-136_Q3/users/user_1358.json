{
    "username": "barist",
    "submission": "public class Solution {\n    public int MinFlips(int[][] grid) {\n        int needed = 0;\n\n        int m = grid.Length;    // rows\n        int n = grid[0].Length; // cols\n        for (int i = 0; i < m / 2; i++)\n        {\n            for (int j = 0; j < n / 2; j++)\n            {\n                int _numOnes = 0;\n                _numOnes = grid[i][j] + grid[m - i - 1][j] + grid[i][n - j - 1] + grid[m - i - 1][n - j - 1];\n\n                needed += Math.Min(_numOnes, 4 - _numOnes);\n            }\n        }\n\n        bool middleRow = m % 2 == 1;\n        bool middleCol = n % 2 == 1;\n        \n        int diffInRow = 0;\n        int middleRowIndex = (m / 2);\n        int numOnes = 0;\n        if (middleRow)\n        {\n            for (int i = 0; i < n / 2; i++)\n            {\n                numOnes += grid[middleRowIndex][i] + grid[middleRowIndex][n - i - 1];\n                if (grid[middleRowIndex][i] != grid[middleRowIndex][n - i - 1])\n                {\n                    diffInRow++;\n                }\n            }\n        }\n\n        int diffInCol = 0;\n        int middleColIndex = (n / 2);\n        if (middleCol)\n        {\n            for (int i = 0; i < m / 2; i++)\n            {\n                numOnes += grid[i][middleColIndex] + grid[m - i - 1][middleColIndex];\n                if (grid[i][middleColIndex] != grid[m - i - 1][middleColIndex])\n                {\n                    diffInCol++;\n                }\n            }\n        }\n\n        int totalChanges = diffInRow + diffInCol;\n\n        needed += diffInRow + diffInCol;\n\n        if (middleRow && middleCol)\n        {\n            int middle = grid[middleRowIndex][middleColIndex];\n            if ((numOnes + totalChanges + middle) % 2 == 1)\n            {\n                needed++;   // Flip middle\n                middle = (middle + 1) % 2;\n            }\n            numOnes += middle;\n        }\n\n        int remainder = numOnes % 4;\n\n        // remainder + leeway is even\n        if (remainder != 2)\n        {\n            return needed;\n        }\n\n        if (remainder == 2)\n        {\n            if (totalChanges > 0)\n            {\n                return needed;\n            }\n            else\n            {\n                return needed + 2;\n            }\n        }\n    \n        \n        \n\n        return needed;\n    }\n}",
    "submit_ts": "1722698922",
    "subm_id": "1343196039"
}