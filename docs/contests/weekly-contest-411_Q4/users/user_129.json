{
    "username": "czjnbb",
    "submission": "class Solution:\n    def countKConstraintSubstrings(self, s: str, k: int, queries: List[List[int]]) -> List[int]:\n        \n        lens = len(s)\n        res = []\n        cnt = []\n        \n        l = 0\n        lp = []\n        cnt0 = cnt1 = 0\n        t0 = t1 =0\n        count = [(0, 0)]\n        \n        for i in range(lens):\n            cur = s[i]\n            if cur == '1':\n                cnt1 += 1\n                t1 += 1\n            else:\n                cnt0 += 1\n                t0 += 1\n                \n            count.append((t0, t1))\n            \n            while cnt0 > k and cnt1 > k:\n                pre = s[l]\n                if pre == '1':\n                    cnt1 -= 1\n                else:\n                    cnt0 -= 1\n                l += 1\n            \n            cnt.append(i - l + 1)\n            lp.append(l)\n                        \n        \n        print(lp)\n        \n        pres = [0]\n        \n        \n        for c in cnt:\n            pres.append(pres[-1] + c)\n        \n        for l,r in queries:\n            \n            ll = r - l + 1\n            \n            if count[r+1][0] - count[l][0] <= k or count[r+1][1] - count[l][1] <= k:\n                res.append( (ll + 1) * ll // 2)\n                continue\n            \n            tot = pres[r + 1] - pres[l]\n                        \n            if l == 0:\n                res.append(tot)\n            else:\n                for i in range(l, r + 1):\n                    if lp[i] < l:\n                        tot -= l - lp[i]\n                    else:\n                        break\n                res.append(tot)\n            \n                \n        return res",
    "submit_ts": "1723952559",
    "subm_id": "1359799081"
}