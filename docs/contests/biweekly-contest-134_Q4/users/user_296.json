{
    "username": "kml123",
    "submission": "class Solution {\npublic:\n    long long check1(vector<vector<int>>&v,int l,int k){\n        int n=v.size();\n        int lo=l,hi=n-1;\n        int ans=hi;\n        while(lo<=hi){\n            int mid=lo+(hi-lo)/2;\n            long long curr=0;\n            for(int j=0;j<=30;j++){\n                  if(v[mid][j]-v[l-1][j]==mid-(l-1)){\n                    curr+=(1<<j);\n                  }\n            }\n            if(curr>k){\n              \n               lo=mid+1;\n            }\n            else{\n                ans=min(ans,mid);\n                hi=mid-1;\n            }\n        }\n        return ans;\n\n    }\n    long long check2(vector<vector<int>>&v,int l,int k){\n        int n=v.size();\n        int lo=l,hi=n-1;\n        int ans=l;\n        while(lo<=hi){\n            int mid=lo+(hi-lo)/2;\n            long long curr=0;\n            for(int j=0;j<=30;j++){\n                  if(v[mid][j]-v[l-1][j]==mid-(l-1)){\n                    curr+=(1<<j);\n                  }\n            }\n            if(curr>=k){\n               ans=max(ans,mid);\n               lo=mid+1;\n            }\n            else{\n               hi=mid-1;\n            }\n        }\n        return ans;\n\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n=nums.size();\n        \n        vector<vector<int>>v(n+1,vector<int>(31,0));\n        for(int i=1;i<=n;i++){\n            int x=nums[i-1];\n            for(int j=0;j<31;j++){\n                 if(((1<<j)&x)){\n                    v[i][j]++;\n                    v[i][j]+=v[i-1][j];\n                 }\n            }\n        }\n        long long ans=0;\n        for(int i=1;i<=n;i++){\n            int l=check1(v,i,k);\n            int r=check2(v,i,k);\n            long long curr=0;\n           // cout<<l<<\" \"<<r<<endl;\n            if(nums[i-1]<k) continue;\n            for(int j=0;j<=30;j++){\n                  if(v[l][j]-v[i-1][j]==l-(i-1)){\n                    curr+=(1<<j);\n                  }\n            }\n            if(curr==k){\n                ans+=(r-l+1);\n            }\n\n        }\n        return ans;\n\n    }\n};",
    "submit_ts": "1720278767",
    "subm_id": "1311723360"
}