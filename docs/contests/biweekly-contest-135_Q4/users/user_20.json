{
    "username": "paigulong",
    "submission": "typedef long long ll;\nconst int N = 102;\nll dp[N][N][N], s[N][N], a[N][N], pre[N], suf[N];\nclass Solution {\npublic:\n    long long maximumScore(vector<vector<int>>& g) {\n        int n = g.size();\n        for (int i = 0; i < n; i ++) for (int j = 0; j < n; j ++) a[i+1][j+1] = g[i][j];\n        for (int i = 1; i <= n; i ++) {\n            for (int j = 1; j <= n; j ++) s[j][i] = s[j][i-1] + a[i][j];\n        }\n        const ll inf = 1e18;\n        for (int i = 0; i <= n + 1; i ++) for (int j = 0; j <= n; j ++) for (int k = 0; k <= n; k ++) dp[i][j][k] = - inf;\n        auto upd = [](ll& x, ll y) {\n            x = max(x, y);\n        };\n        for (int i = 0; i <= n; i ++) dp[1][0][i] = 0;\n        for (int i = 2; i <= n + 1; i ++) {\n            for (int k = 0; k <= n; k ++) {\n                ll mx1 = 0;\n                for (int j = 0; j <= n; j ++) {\n                    mx1 = max(mx1, dp[i-1][j][k]);\n                    if (j >= k) {\n                        mx1 = max(mx1, dp[i-1][j][k] + s[i-1][j] - s[i-1][k]);\n                    }\n                }\n                for (int j = 0; j <= n; j ++) pre[j] = suf[j] = -inf;\n                for (int j = 0; j <= n; j ++) {\n                    pre[j] = dp[i-1][j][k] - s[i-1][k];\n                    if (j >= 1) pre[j] = max(pre[j-1], pre[j]);\n                }\n                for (int j = n; j >= 0; j --) {\n                    suf[j] = dp[i-1][j][k] + s[i-1][j];\n                    if (j < n) suf[j] = max(suf[j], suf[j+1]);\n                }\n                \n                for (int x = 0; x <= n; x ++) {\n                    if (k >= x) {\n                        dp[i][k][x] = mx1;\n                    } else {\n                        upd(dp[i][k][x], pre[x] + s[i-1][x]);\n                        upd(dp[i][k][x], suf[x] - s[i-1][k]);\n                    }\n                }\n            }\n        }\n        ll ans = 0;\n        for (int i = 0; i <= n; i ++) upd(ans, dp[n+1][i][0]);\n        return ans;\n    }\n};",
    "submit_ts": "1721488494",
    "subm_id": "548314712"
}