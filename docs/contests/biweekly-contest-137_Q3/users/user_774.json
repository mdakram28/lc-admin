{
    "username": "CLOWNTK",
    "submission": "class Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>v) {\n        int n= v.size(), m= v[0].size();\n        if(n<m){\n            swap(n,m);\n            vector<vector<int>> a(n, vector<int> (m));\n            for(int i=0;i<n;i++){\n                for(int j=0;j<m;j++){\n                    a[i][j]= v[j][i];\n                }\n            }\n            v=a;\n        }\n        vector<vector<long long>> rowCol(n, vector<long long> (m,-5e9-1));\n        vector<int> mx(m, -1e9-1);\n        vector<int> maxes(3,-1e9-1);\n        for(int j=0, i=n-1;j<m;j++){\n            mx[j]= max(mx[j],v[i][j]);\n            if(maxes[0]<mx[j]){\n                maxes[2]= maxes[1];\n                maxes[1]= maxes[0];\n                maxes[0]= mx[j];\n            }\n            else if(maxes[1]< mx[j]){\n                maxes[2]= maxes[1];\n                maxes[1]= mx[j];\n            }\n            else if(maxes[2]< mx[j]){\n                maxes[2]= mx[j];\n            }\n        }\n        for(int i=n-2;i>=0;i--){\n            for(int j=0;j<m;j++){\n                int ID=2;\n                for(;ID>=0;ID--){\n                    if(maxes[ID]== mx[j]){\n                        maxes[ID]=-1e9-1;\n                        break;\n                    }\n                }\n                for(int k=0;k<m;k++){\n                    if(k==j)    continue;\n                    int id=2;\n                    for(;id>=0;id--){\n                        if(maxes[id]== mx[k]){\n                            maxes[id]=-1e9-1;\n                            break;\n                        }\n                    }\n                    rowCol[i][j]= max(rowCol[i][j],(long long)v[i][k]+ max({maxes[0], maxes[1], maxes[2]}));\n                    if(id>=0){\n                        maxes[id]= mx[k];\n                    }\n                }\n                if(ID>=0){\n                    maxes[ID]= mx[j];\n                }\n            }\n            maxes[0]=maxes[1]= maxes[2]= -1e9-1;\n            for(int j=0;j<m;j++){\n                mx[j]= max(mx[j],v[i][j]);\n                if(maxes[0]<mx[j]){\n                    maxes[2]= maxes[1];\n                    maxes[1]= maxes[0];\n                    maxes[0]= mx[j];\n                }\n                else if(maxes[1]< mx[j]){\n                    maxes[2]= maxes[1];\n                    maxes[1]= mx[j];\n                }\n                else if(maxes[2]< mx[j]){\n                    maxes[2]= mx[j];\n                }\n            }\n        }\n        long long ans=-3e9-1;\n        for(int i=0;i<n;i++){\n            for(int j=0;j<m;j++){\n                for(int r=i+1;r<n-1;r++){\n                    ans= max(ans, v[i][j]+ rowCol[r][j]);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1723909521",
    "subm_id": "1359195715"
}