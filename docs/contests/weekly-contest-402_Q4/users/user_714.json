{
    "username": "justDummy",
    "submission": "#define ll long long\nclass segsum{\n    public:\n    ll seg[400005]={0};\n    void updateup(ll ss,ll se,ll v,ll ind,ll val){\n        if(ss>se or ind<ss or ind>se)\n            return;\n        if(ss==se) {\n            seg[v]=val;\n            return;\n        }\n        ll mid=ss+(se-ss)/2;\n        if(ind>mid)\n            updateup(mid+1,se,2*v+1,ind,val);\n        else\n            updateup(ss,mid,2*v,ind,val);\n        seg[v]=seg[2*v+1]+seg[2*v];\n\n    }\n    void update(ll ind,ll val)\n    {\n        updateup(1,1e5,1,ind,val);\n    }\n    int query(int qs,int qe)\n    {\n        if(qs>qe or qs<=0) return 0;\n        return\tqueryup(1,1e5,qs,qe,1);\n    }\n    int queryup(int ss,int se,int qs,int qe,int v)\n    {\n        if(qs>se or qe<ss)\n            return 0;\n        if(qs<=ss and se<=qe)\n            return seg[v];\n        ll mid=ss+(se-ss)/2;\n        return queryup(ss,mid,qs,qe,2*v)+queryup(mid+1,se,qs,qe,2*v+1);\n    }\n};\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n=nums.size();\n        vector<int> ans;\n        segsum ss;\n        for(int i=1;i<n-1;i++) if(nums[i]>nums[i+1] and nums[i]>nums[i-1]) ss.update(i+1,1);\n        for(vector<int> query: queries){\n            if(query[0]==2){\n                int i=query[1],val=query[2];\n                nums[i]=val;\n                int isPeakAfter;\n                if(i>0 and i<n-1){\n                    isPeakAfter=val>nums[i+1] and val>nums[i-1];\n                    ss.update(i+1,isPeakAfter);\n                }\n                if(i-1>0){\n                    isPeakAfter=nums[i-1]>nums[i] and nums[i-1]>nums[i-2];\n                    ss.update(i,isPeakAfter);\n                }\n                if(i+1<n-1){\n                    isPeakAfter=nums[i+1]>nums[i] and nums[i+1]>nums[i+2];\n                    ss.update(i+2,isPeakAfter);\n                }\n            }\n            else{\n                ans.push_back(ss.query(query[1]+2,query[2]));\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507700.0
}