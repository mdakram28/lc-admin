{
    "username": "itish123",
    "submission": "const int twoMinus = 2147483647;\nconst int nax = 1e5+7;\nstruct segtreee {\n\tvector<int> t;\n\tsegtreee(int n = nax) {\n\t\tt.resize(4*n);\n\t}\n\tvoid update(int index, int l, int r, int pos, int val) {\n\t\tif(l == r) {\n\t\t\tt[index] = val;\n\t\t\treturn;\n\t\t}\n\t\tint mid = (l+r)/2;\n\t\tif(pos<=mid) {\n\t\t\tupdate(2*index, l, mid, pos, val);\n\t\t} else {\n\t\t\tupdate(2*index+1, mid+1, r, pos, val);\n\t\t}\n\t\tt[index] = t[2*index] & t[2*index+1];\n\t\treturn;\n\t}\n\tint query(int index, int l, int r, int lq, int rq) {\n\t\tif(lq>r || rq<l) {\n\t\t\treturn twoMinus;\n\t\t}\n\t\tif(lq<=l && r<=rq) {\n\t\t\treturn t[index];\n\t\t}\n\t\tint mid = (l+r)/2;\n\t\treturn query(2*index, l, mid, lq, rq) & query(2*index+1, mid+1, r, lq, rq);\n\t}\n};\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& a, int k) {\n        const int n = a.size();\n\n        segtreee t(n);\n        for (int i = 0; i < n; ++i) {\n            t.update(1,0,n-1,i,a[i]);\n        }\n        \n        long long ans = 0;\n        for (int i = 0; i < n; ++i) {\n            \n            //find first index s.t and <= k\n            int lo = i, hi = n - 1, L = -1;\n            while (lo <= hi) {\n                int m = (lo + hi)/2;\n                if (t.query(1,0,n-1,i,m) <= k) {\n                    L = m;\n                    hi = m - 1;\n                }\n                else {\n                    lo = m + 1;\n                }\n            }\n                        \n            //find last index s.t and >= k\n            if (L > -1) {\n                lo = i;\n                hi = n - 1;\n                int R = -1;\n                while (lo <= hi) {\n                    int m = (lo + hi)/2;\n                    if (t.query(1,0,n-1,i,m) >= k) {\n                        R = m;\n                        lo = m + 1;\n                    }\n                    else {\n                        hi = m - 1; \n                    }\n                }\n\n                if (L > - 1 && R > -1) {\n                    ans += R - L + 1;\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279467",
    "subm_id": "1311752353"
}