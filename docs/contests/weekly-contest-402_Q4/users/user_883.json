{
    "username": "Kennem",
    "submission": "class Solution:\n    def countOfPeaks(self, nums: List[int], q: List[List[int]]) -> List[int]:\n        def pushup(u):\n            tr[u] = tr[u<<1] + tr[u<<1|1]\n\n        def build(u, l, r):\n            if l==r:\n                if l>0 and l<n-1:\n                    if nums[l] > nums[l-1] and nums[l] > nums[l+1]:\n                        tr[u] = 1\n                    else:\n                        tr[u] = 0\n            else:\n                mid = l+r>>1\n                build(u<<1, l, mid)\n                build(u<<1|1, mid+1, r)\n                pushup(u)\n                # print(l, r, tr[u])\n\n        def modify(u, l, r, x, v):\n            if l==r:\n                nums[l] = v\n                if l>0 and l<n-1:\n                    if nums[l] > nums[l-1] and nums[l] > nums[l+1]:\n                        tr[u] = 1\n                    else:\n                        tr[u] = 0\n            else:\n                mid = l+r>>1\n                if x<=mid:\n                    modify(u<<1, l, mid, x, v)\n                else:\n                    modify(u<<1|1, mid+1, r, x, v)\n                pushup(u)\n                # print(l, r, tr[u])\n\n\n        def query(u, l, r, ql, qr):\n            if l>=ql and r<=qr:\n                # print(l, r, tr[u])\n                return tr[u]\n\n            mid = l+r>>1\n            res = 0\n            if ql<=mid:\n                res += query(u<<1, l, mid, ql, qr)\n            if qr>mid:\n                res += query(u<<1|1, mid+1, r, ql, qr)\n            return res\n        \n        n = len(nums)\n        tr = [0] * (2<<n.bit_length())\n        res = []\n        \n        build(1, 0, n-1)\n        \n        for qi in q:\n            op = qi[0]\n            if op == 1:\n                _, l, r = qi\n                if r-l+1<3:\n                    res.append(0)\n                else:\n                    ans = query(1, 0, n-1, l+1, r-1)\n                    res.append(ans)\n            else:\n                _, x, v = qi\n                modify(1, 0, n-1, x, v)\n                if x-1>=0:\n                    modify(1, 0, n-1, x-1, nums[x-1])\n                if x+1<n:\n                    modify(1, 0, n-1, x+1, nums[x+1])\n                \n        return res\n                ",
    "submit_ts": "1718508714",
    "subm_id": "539788927"
}