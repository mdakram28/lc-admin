{
    "username": "manikiran949",
    "submission": "#include<vector>\nusing namespace std;\n\nclass Solution{\npublic:\n    bool isPeak(vector<int>&a,int idx){\n        int n=a.size();\n        if(idx<=0 || idx>=n-1) return 0;\n        if(a[idx]<=a[idx-1] || a[idx]<=a[idx+1]) return 0;\n        return 1;\n    }\n    void build(vector<int>&a,vector<int>&mk,int st,int en,int cur){\n        if(st==en){\n            if(isPeak(a,st)) mk[cur]=1;\n            else mk[cur]=0;\n        }\n        else{\n            int mid=(st+en)/2;\n            build(a,mk,st,mid,2*cur+1);\n            build(a,mk,mid+1,en,2*cur+2);\n            mk[cur]=mk[2*cur+1]+mk[2*cur+2];\n        }\n    }\n    int itsg(vector<int>&mk,int st,int en,int l,int r,int cur){\n        if(r<st||en<l)return 0;\n        if(l<=st&&en<=r)return mk[cur];\n        int mid=(st+en)/2;\n        return itsg(mk,st,mid,l,r,2*cur+1)+itsg(mk,mid+1,en,l,r,2*cur+2);\n    }\n    void update(vector<int>&a,vector<int>&mk,int st,int en,int idx,int ele,int cur){\n        if(st==en){\n            a[idx]=ele;\n            if(isPeak(a,idx)) mk[cur]=1;\n            else mk[cur]=0;\n        }\n        else{\n            int mid=(st+en)/2;\n            if(st<=idx&&idx<=mid) update(a,mk,st,mid,idx,ele,2*cur+1);\n            else update(a,mk,mid+1,en,idx,ele,2*cur+2);\n            mk[cur]=mk[2*cur+1]+mk[2*cur+2];\n        }\n    }\n    vector<int>countOfPeaks(vector<int>&a,vector<vector<int>>&q){\n        int n=a.size();\n        vector<int>mk(4*n,0);\n        build(a,mk,0,n-1,0);\n        vector<int>ans;\n        for(auto&it:q){\n            if(it[0]==1){\n                if(it[2]-it[1]==0 || it[2]-it[1]==1) ans.push_back(0);\n                else ans.push_back(itsg(mk,0,n-1,it[1]+1,it[2]-1,0));\n            }\n            else if(it[0]==2){\n                update(a,mk,0,n-1,it[1],it[2],0);\n                if(it[1]>0)update(a,mk,0,n-1,it[1]-1,a[it[1]-1],0);\n                if(it[1]<n-1)update(a,mk,0,n-1,it[1]+1,a[it[1]+1],0);\n            }\n        }\n        return ans;\n    }\n};\n",
    "submit_ts": 1718507123.0
}