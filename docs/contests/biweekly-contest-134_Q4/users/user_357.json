{
    "username": "vinay_7516",
    "submission": "class segmenttree{\n    public:\n        vector<int> arr;\n        segmenttree(vector<int>&v,int n){\n            arr = vector<int>(4*n+1,INT_MAX);\n            build_tree(0,0,n-1,v);\n        }\n\n        int getand(int ind,int i,int j,int st,int end){\n            if(st>j || end<i) return INT_MAX;\n            if(st>=i && end<=j){\n                return arr[ind];\n            }\n            int mid = (st+end)/2;\n\n            return (getand(2*ind+1,i,j,st,mid)&getand(2*ind+2,i,j,mid+1,end));\n        }\n\n        void build_tree(int ind,int st,int end,vector<int>&v){\n            if(st==end){\n                arr[ind] = v[st];\n                return ;\n            }\n            int mid = (st+end)/2;\n            build_tree(2*ind+1,st,mid,v);\n            build_tree(2*ind+2,mid+1,end,v);\n            arr[ind] = (arr[2*ind+1]&arr[2*ind+2]);\n        }\n};\n\nclass Solution {\npublic:\n    int binsearch(segmenttree &t,vector<int>&nums,int ind,int k,bool flag){\n        int l = ind,h = nums.size() - 1;\n        int ans = -1;\n        while(l<=h){\n            int mid = (l+h)/2;\n            int and_val = t.getand(0,ind,mid,0,nums.size()-1);\n            if(and_val>k){\n                l = mid + 1;\n            }\n            else if(and_val==k){\n                if(flag){\n                    h = mid - 1;\n                    ans = mid;\n                }\n                else{\n                    l = mid + 1;\n                    ans = mid;\n                }\n            }\n            else{\n                h = mid - 1;\n            }\n        }\n        return ans;\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        // cout<<\"--\"<<endl;\n        int n = nums.size();\n        segmenttree t(nums,n);\n        \n        long long ans = 0;\n        for(int i=0;i<n;i++){\n            int l = binsearch(t,nums,i,k,true),h = binsearch(t,nums,i,k,false);\n            if(l!=-1) ans += (h-l+1);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279571",
    "subm_id": "1311756584"
}