{
    "username": "\u4e0d\u4f1adp\u4e0d\u6539\u540d",
    "submission": "class Solution {\npublic:\n    #define rep(i,a,b) for(int i=(a);i<=(b);++i)\n    #define per(i,a,b) for(int i=(a);i>=(b);--i)\n    typedef long long ll;\n    typedef unsigned long long ull;\n    typedef double db;\n    typedef pair<int,int> P;\n    #define fi first\n    #define se second\n    #define pb push_back\n    struct node{\n        vector<int>pos;\n        ll v;\n        friend bool operator<(const node &a,const node &b){\n            return a.v<b.v;\n        };\n        friend bool operator>(const node &a,const node &b){\n            return a.v>b.v;\n        };\n    };\n    long long maximumValueSum(vector<vector<int>>& a) {\n        int n=a.size(),m=a[0].size();\n        vector<node>dp[4];\n        int pw[4];pw[0]=3;\n        rep(i,1,3)pw[i]=pw[i-1]*3;\n        node x;x.v=0;\n        dp[0].pb(x);\n        rep(i,0,n-1){\n            vector<P>b;\n            rep(j,0,m-1){\n                b.pb(P(a[i][j],j));\n            }\n            sort(b.begin(),b.end(),greater<P>());\n            int up=min(m,4);\n            per(x,3,1){\n                for(auto &w:dp[x-1]){\n                    rep(l,0,up-1){\n                        bool ok=1;\n                        for(auto &y:w.pos){\n                            if(y==b[l].se){\n                                ok=0;break;\n                            }\n                        }\n                        if(!ok)continue;\n                        node z=w;z.pos.pb(b[l].se);\n                        z.v+=b[l].fi;\n                        dp[x].pb(z);\n                        if(int(dp[x].size())>pw[x]){\n                            sort(dp[x].begin(),dp[x].end(),greater<node>());\n                            while(int(dp[x].size())>pw[x])dp[x].pop_back();\n                        }\n                    }\n                }\n            }\n        }\n        long long ans=-1e10;\n        for(auto &x:dp[3]){\n            ans=max(ans,x.v);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1723908678",
    "subm_id": "556332208"
}