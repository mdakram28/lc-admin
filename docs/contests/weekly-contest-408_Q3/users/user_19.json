{
    "username": "hty50",
    "submission": "class Solution:\n    def numberOfSubstrings(self, s):\n        def pre_s(prefix, l, r):\n            if l:\n                return prefix[r] - prefix[l-1]\n            return prefix[r]\n        ans = 0\n        n = len(s)\n        cnt = 0\n        mp = {0: 1}\n        pre = [0] * (n+5)\n        \n        for i in range(n):\n            pre[i] = int(s[i])\n        \n        for i in range(1, n):\n            pre[i] += pre[i-1]\n        \n        pos_0 = []\n\n        for i in range(n):\n            if s[i] == '0':\n                pos_0.append(i)\n            \n            m = len(pos_0)\n            if s[i] == '1':\n                pl = 0\n                if m:\n                    pl = pos_0[m-1] + 1\n                ans += i - pl + 1\n\n            for j in range(m-1, -1, -1):\n                if (m-1-j+1) * (m-1-j+1) > n:\n                    break\n                ps = pos_0[j]\n                l = 0\n                if j > 0:\n                    l = pos_0[j-1] + 1\n                cnt1 = pre_s(pre, ps, i)\n                cnt0 = i - ps + 1 - cnt1\n                rem = ps - l\n                if rem + cnt1 >= cnt0 * cnt0:\n                    min1 = cnt0 * cnt0\n                    ans += rem + cnt1 + cnt0 - max(cnt0 + cnt1, (cnt0 * cnt0 + cnt0)) + 1\n\n        return ans",
    "submit_ts": "1722136318",
    "subm_id": "1335730634"
}