{
    "username": "abd4u",
    "submission": "class Solution {\npublic:\n    int numberOfPermutations(int n, vector<vector<int>>& requirements) {\n        int mod=1e9+7;\n        int inv=n*(n-1)/2;\n        vector<int> dp(inv+1,0), prev(inv+1,0);\n        prev[0] = 1;\n        for (int len = 1; len <= n; ++len) {\n            fill(dp.begin(), dp.end(), 0);\n            vector<int> cum(inv + 1, 0);\n            cum[0]=prev[0];\n            for (int i = 1; i <= inv; ++i) {\n                cum[i] =(cum[i-1]+prev[i])%mod;\n            }\n            for (int i=0;i<= inv;i++) {\n                if (i >= len) {\n                    dp[i] =(cum[i]-cum[i-len]+mod)%mod;\n                } else {\n                    dp[i] = cum[i];\n                }\n            }\n            swap(dp,prev);\n        }\n        vector<int> invCnt(n+1,-1);\n        for (auto req : requirements) {\n            int end=req[0];\n            int cnt=req[1];\n            invCnt[end + 1] = cnt;\n        }\n\n        fill(dp.begin(), dp.end(), 0);\n        prev[0] = 1;\n        for (int i = 1; i <= inv; ++i) {\n            prev[i] = 0;\n        }\n\n        for (int len = 1; len <= n; ++len) {\n            fill(dp.begin(), dp.end(), 0);\n\n            vector<int> cum(inv + 1, 0);\n            cum[0]=prev[0];\n            for (int i=1;i<=inv;++i) {\n                cum[i] = (cum[i-1] +prev[i])%mod;\n            }\n\n            for (int i=0;i<=inv;++i) {\n                if (i >= len) {\n                    dp[i] = (cum[i]-cum[i-len]+mod)%mod;\n                } else {\n                    dp[i] = cum[i];\n                }\n            }\n\n            swap(dp, prev);\n\n            if (invCnt[len] != -1) {\n                for (int i= 0;i<=inv;i++) {\n                    if (i!=invCnt[len]){\n                        prev[i]= 0;\n                    }\n                }\n            }\n        }\n\n        int result = 0;\n        for (int i=0;i<=inv;i++) {\n            result=(result+prev[i])%mod;\n        }\n        return result;\n\n    }\n};",
    "submit_ts": 1719069814.0
}