{
    "username": "user4607v",
    "submission": "class Solution {\n    public int numberOfSubstrings(String s) {\n        HashMap<Integer,ArrayList<Integer>> cntMap = new HashMap<>();\n        int n = s.length();\n        int[] zeroCounts = new int[n];\n        int[] oneCounts = new int[n];\n        int ans = 0, oneCount = 0, zeroCount =0;\n\n        for(int i =0; i < n; i++){\n            char ch = s.charAt(i);\n            if(ch == '1'){\n                oneCount++;\n            }else{\n                zeroCount++;\n            }\n            if(oneCount >= zeroCount * zeroCount){\n                ans++;\n            }\n            int lower = (int)Math.ceil(Math.sqrt(oneCount));\n            for(int j = zeroCount - lower; j <= zeroCount; j++){\n                ArrayList<Integer> list = cntMap.getOrDefault(j, new ArrayList<Integer>());\n                if(list.isEmpty()){\n                    continue;\n                }\n                int l = 0;\n                int ind = list.get(l);\n                if( (oneCount - oneCounts[ind]) < (zeroCount-j) * (zeroCount-j)){\n                    continue;\n                }\n                int r = list.size()-1;\n                while(l < r){\n                    int m = l + (r-l+1)/2;\n                    ind = list.get(m);\n                    if( (oneCount - oneCounts[ind]) >= (zeroCount-j) * (zeroCount-j)){\n                   l = m;\n                }else{\n                    r= m-1;\n                }\n                }\n                ans += l-0+1;\n                \n            }\n            cntMap.putIfAbsent(zeroCount, new ArrayList<>());\n                cntMap.get(zeroCount).add(i);\n                zeroCounts[i] =zeroCount;\n                oneCounts[i] = oneCount;\n\n        }\n        return ans;\n    }\n}",
    "submit_ts": "1722137790",
    "subm_id": "1335773796"
}