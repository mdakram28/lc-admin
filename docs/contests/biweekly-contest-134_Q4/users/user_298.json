{
    "username": "CoderVinit28",
    "submission": "class Solution {\npublic:\n    using ll = long long;\n    ll countSubarrays(vector<int>& nums, int k) {\n        ll ans = 0;\n        int n = nums.size();\n        int pbits[n][32];\n        memset(pbits, 0, sizeof(pbits));\n        \n        for(int i=0; i<n; i++){\n            for(int j=0; j<32; j++){\n                int bit = (nums[i]>>j)&1;\n                pbits[i][j] = bit + (i==0? 0 : pbits[i-1][j]);\n            }\n        }\n        \n        for(int i=0; i<n; i++){\n            int first = getFirst(pbits, n, i, k);\n            if( first != -1 ){\n                int last = getLast(pbits, n, i, k);\n                ans += max(ll(0), ll(last-first+1));\n            }\n        }\n        return ans;\n    }\n    \n    int getFirst(int pbits[][32], int &n, int &idx, int &k){\n        int l = idx, u = n-1;\n        int first = -1;\n        while( l<=u ){\n            int mid = (l+u)/2;\n            int val = getAnd(pbits, idx, mid);\n            if( val == k ){\n                first = mid;\n                u = mid-1;\n            } else if( val > k ){\n                l = mid+1;\n            } else{\n                u = mid-1;\n            }\n        }\n        return first;\n    }\n    \n    int getLast(int pbits[][32], int &n, int &idx, int &k){\n        int l = idx, u = n-1;\n        int last = -1;\n        while( l<=u ){\n            int mid = (l+u)/2;\n            int val = getAnd(pbits, idx, mid);\n            if( val == k ){\n                last = mid;\n                l = mid+1;\n            } else if( val > k ){\n                l = mid+1;\n            } else{\n                u = mid-1;\n            }\n        }\n        return last;\n    }\n    \n    int getAnd(int pbits[][32], int start, int end){\n        int val = 0;\n        int req = end - start+1;\n        for(int i=0; i<32; i++){\n            int bits = start==0? pbits[end][i] : pbits[end][i]-pbits[start-1][i];\n            if( bits == req ){\n                val += (1<<i);\n            }\n        }\n        return val;\n    }\n};",
    "submit_ts": "1720279055",
    "subm_id": "1311735407"
}