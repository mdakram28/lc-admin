{
    "username": "sky1429",
    "submission": "class Solution:\n    def countSubarrays(self, nums: List[int], k: int) -> int:\n        arr = [x & k for x in nums]\n        arr = [1 if x == k else 0 for x in arr]\n        \n        valids = [[]]\n        for i in range(len(arr)):\n            if arr[i] == 1:\n                valids[-1].append(nums[i])\n            else:\n                valids.append([])\n        ans = 0\n        \n        def solve(arr):\n            arr = [x^k for x in arr]\n            numExtra = defaultdict(int)\n            ans = 0\n            l, r = 0, 0\n            while l < len(arr):\n                while r < len(arr):\n                    if all(numExtra[i] < r - l for i in range(32)):\n                        break\n                    bi = bin(arr[r])[2:]\n                    bi = '0' * (32 - len(bi)) + bi\n                    for i in range(32):\n                        if bi[i] == '1':\n                            numExtra[i] += 1\n                    r += 1\n                if all(numExtra[i] < r - l for i in range(32)):\n                    ans += len(arr) - r + 1\n                bi = bin(arr[l])[2:]\n                bi = '0' * (32 - len(bi)) + bi\n                for i in range(32):\n                    if bi[i] == '1':\n                        numExtra[i] -= 1\n                l += 1\n            return ans\n                \n                    \n                    \n        \n        for i in range(len(valids)):\n            ans += solve(valids[i])\n        return ans",
    "submit_ts": "1720279423",
    "subm_id": "1311750615"
}