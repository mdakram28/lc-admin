{
    "username": "tenshi0x0",
    "submission": "class Solution {\npublic:\n    #define N 100010\n\n    int nxt[N];\n    vector<int> pos[N];\n    int tr[N][26];\n    int co[N];\n    int tot;\n    int f[N];\n\n    void insert(string s, int cc){\n        reverse(begin(s), end(s));\n        int u=0;\n        for(auto c: s){\n            int val=c-'a';\n            int &go=tr[u][val];\n            if(!go) go=++tot;\n            u=go;\n        }\n        co[u]=min(co[u], cc);\n    }\n\n    static const int lim=250;\n\n    int minimumCost(string s, vector<string>& ws, vector<int>& cs) {\n        memset(co, 0x3f, sizeof co);\n        memset(f, 0x3f, sizeof f);\n        f[0]=0;\n        // int res=1e9+10;\n        int idx=-1;\n        for(auto &p: ws){\n            ++idx;\n            insert(p, cs[idx]);\n        }\n\n        int n=s.size();\n        s=\" \"+s;\n        for(int i=2; i<=n; i++){\n            int j=nxt[i-1];\n            while(j && s[j+1]!=s[i]) j=nxt[j];\n            if(s[j+1]==s[i]) j++;\n            nxt[i]=j;\n        }\n\n        idx=-1;\n        for(auto p: ws){\n            int m=p.size();\n            ++idx;\n            if(m<=lim) continue;\n            p=\" \"+p;\n            for(int i=1, j=0; i<=n; i++){\n                while(j && p[j+1]!=s[i]) j=nxt[j];\n                if(p[j+1]==s[i]) j++;\n\n                // if match\n                if(j==m){\n                    j=nxt[j];\n                    pos[i].push_back(idx);\n                }\n            }\n        }\n\n        for(int i=1; i<=n; i++){\n            // string tmp;\n            int u=0;\n            for(int j=i, len=1; j; j--, len++){\n                if(len>lim) break;\n                // tmp+=s[j];\n\n                int val=s[j]-'a';\n                int go=tr[u][val];\n                if(!go) break;\n                u=go;\n                f[i]=min(f[i], f[j-1]+co[u]);\n            }\n\n            for(auto x: pos[i]){\n                int m=ws[x].size();\n                f[i]=min(f[i], f[i-m]+cs[x]);\n            }\n        }\n\n        if(f[n]>1e9) return -1;\n        return f[n];\n    }\n};",
    "submit_ts": "1720323039",
    "subm_id": "1312365774"
}