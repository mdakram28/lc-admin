{
    "username": "lihaicoder",
    "submission": "class Solution:\n    def numberOfSubstrings(self, s: str) -> int:\n        n = len(s)\n        onecount = [c == \"1\" for c in s]\n        for i in range(1, n):\n            onecount[i] += onecount[i-1]\n        rightmostone = [None]*n\n        for i in range(n-1, -1, -1):\n            if s[i] == \"1\":\n                if i == n-1 or s[i+1] != \"1\":\n                    rightmostone[i] = i\n                else:\n                    rightmostone[i] = rightmostone[i+1]\n        def getcount(l, r):\n            ones = onecount[r]\n            if l > 0:\n                ones -= onecount[l - 1]\n            zeros = r - l + 1 - ones\n            return zeros, ones\n        ans = 0\n        for l in range(n):\n            r = l\n            while r < n:\n                zeros, ones = getcount(l, r)\n                if zeros**2 <= ones:\n                    ans += 1\n                    if s[r] == \"1\":\n                        ans += rightmostone[r] - r\n                        r = rightmostone[r] + 1\n                    else:\n                        r += 1\n                else:\n                    needextra = zeros**2 - ones\n                    r += needextra\n        return ans\n",
    "submit_ts": "1722136979",
    "subm_id": "1335750620"
}