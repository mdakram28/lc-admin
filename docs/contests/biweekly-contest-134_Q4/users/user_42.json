{
    "username": "hhhyh",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n = nums.size();\n        vector<vector<int>>pre(n + 1, vector<int>(30));\n        for (int i = 0; i < n; i++) {\n            pre[i + 1] = pre[i];\n            for (int j = 0; j < 30; j++) {\n                if (nums[i] >> j & 1)pre[i + 1][j]++;\n            }\n        }\n        auto calc = [&](int l, int r) {\n            int v = 0;\n            for (int i = 0; i < 30; i++) {\n                if (pre[r + 1][i] - pre[l][i] == r - l + 1)v |= 1 << i;\n            }\n            return v;\n            };\n        auto getr = [&](int s) {\n            int l = s, r = n - 1;\n            while (l <= r) {\n                int mid = l + r >> 1;\n                int v = calc(s, mid);\n                if (v >= k)l = mid + 1;\n                else r = mid - 1;\n            }\n            return r;\n            };\n        auto getl = [&](int s) {\n            int l = s, r = n - 1;\n            while (l <= r) {\n                int mid = l + r >> 1;\n                int v = calc(s, mid);\n                if (v > k)l = mid + 1;\n                else r = mid - 1;\n            }\n            return l;\n            };\n        long long ans = 0;\n        for (int i = 0; i < n; i++) {\n            int l = getl(i), r = getr(i);\n            if (l > r || calc(i, l) != k || calc(i, r) != k)continue;\n            ans += r - l + 1;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720277247",
    "subm_id": "544555424"
}