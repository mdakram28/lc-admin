{
    "username": "balakrishnan_v",
    "submission": "#define ll long long\n#define MAXN 50000\n#define MODD 1000000007\n#define INF (1ll<<59)\nclass Solution {\npublic:\n\n\n    ll t[3*MAXN+2][2][2];\n\n\n    void Merge(int v) {\n        for(int f : {0,1}) {\n            for(int l : {0,1}) {\n                // 0,0\n                // 1,0\n                // 0,1\n                t[v][f][l]=-INF;\n                for(int x : {0,1}) {\n                    for(int y : {0,1}) {\n                        if (x==1 && y==1) continue;\n                        t[v][f][l]=max(t[v][f][l],t[v*2][f][x]+t[v*2+1][y][l]);\n                    }\n                }\n            }\n        }\n    }\n\n    void UpdateLeaf(const vector<int>& a, int v, int tl) {\n        for(int f : {0,1}) {\n            for(int l : {0,1}) {\n                t[v][f][l]=-INF;\n                if (f != l) {\n                    t[v][f][l]=-INF;\n                } else {\n                    t[v][f][l]=(f?a[tl]:0);\n                }\n            }\n        }\n    }\n\n    void build(const vector<int>& a, int v, int tl, int tr) {\n        if (tl == tr) {\n            UpdateLeaf(a, v, tl);\n            return;\n        } \n\n        int tm=(tl+tr)/2;\n        build(a,v*2,tl,tm);\n        build(a,v*2+1,tm+1,tr);\n        Merge(v);\n\n    }\n\n    void update(vector<int>& a, int v,int tl,int tr, int pos,int new_val) {\n        if (tl==tr) {\n            a[tl]=new_val;\n            UpdateLeaf(a, v,tl);\n            return;\n        }\n        int tm = (tl+tr)/2;\n        if (pos <= tm) {\n            update(a, v*2,tl,tm,pos,new_val);\n        } else {\n            update(a, v*2+1,tm+1,tr,pos,new_val);\n        }\n        Merge(v);\n    }\n\n\n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        int n=nums.size();\n        build(nums, 1, 0, n-1);\n        ll ret = 0;\n\n        for(auto tmp : queries) {\n            int pos=tmp[0];\n            int x = tmp[1];\n            update(nums, 1, 0, n-1, pos, x);\n            ll ans=-INF;\n            for(int f : {0,1}) {\n                for(int l : {0,1}) {\n                    ans = max(ans, t[1][f][l]);\n                }\n            }\n            ret += ans%MODD;\n            ret %= MODD;\n        }\n        return ret;\n        \n    }\n};",
    "submit_ts": "1716692136",
    "subm_id": "1268044246"
}