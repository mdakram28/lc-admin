{
    "username": "TZGkPxfrU1",
    "submission": "// Author: Anuj Jadhav\n// https://www.youtube.com/watch?v=dQw4w9WgXcQ\n\n#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace std;\n\n#define fastio() ios_base::sync_with_stdio(false); cin.tie(NULL); cout.tie(NULL);\n#define MOD1 998244353\n#define PI 3.141592653589793238462\n#define INF 1e18\n\n#define nline \"\\n\"\n#define pb push_back\n#define ppb pop_back\n#define mp make_pair\n#define ff first\n#define ss second\n\n#define set_bits __builtin_popcountll\n#define sz(x) ((int)(x).size())\n#define all(x) (x).begin(), (x).end()\n#define rall(x) x.rbegin(), x.rend()\n#define ub upper_bound\n#define lb lower_bound\n#define bsrch binary_search\n#define mine *min_element\n#define maxe *max_element\n#define gcd(a, b) __gcd(a, b)\n#define lcm(a, b) ((a * b) / gcd(a, b))\n#define rep(i, n) for(long long i = 0; i < n; i++)\n\ntypedef vector<int> vi;\ntypedef vector<bool> vb;\ntypedef vector<vi> vvi;\ntypedef vector<vb> vvb;\ntypedef pair<int, int> pii;\ntypedef vector<pii> vpii;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef long double lld;\n\n#ifndef ONLINE_JUDGE\n#define deb(x) cout << #x <<\" = \"; _print(x); cout << endl;\n#define deb2(x, y) cout << #x << \" = \"; _print(x); cout << \", \" << #y << \" = \"; _print(y); cout << endl;\n#define deb3(x, y, z) _print(x); cout << \" \"; _print(y); cout << \" \"; _print(z); cout << endl;\n#define deb4(a, b, c, d) _print(a); cout << \" \"; _print(b); cout << \" \"; _print(c); cout << \" \"; _print(d); cout << endl;\n#define deb5(a, b, c, d, e) _print(a); cout << \" \"; _print(b); cout << \" \"; _print(c); cout << \" \"; _print(d); cout << \" \"; _print(e); cout << endl;\n#else\n#define deb(x)\n#define deb2(x, y)\n#define deb3(x, y, z)\n#define deb4(a, b, c, d)\n#define deb5(a, b, c, d, e)\n#endif\n\nvoid _print(int x) { cout << x; }\nvoid _print(char x) { cout << x; }\nvoid _print(string x) { cout << x; }\nvoid _print(double x) { cout << x; }\nvoid _print(ull x) { cout << x; }\nvoid _print(lld x) { cout << x; }\n\ntemplate <class T, class V> void _print(pair <T, V> p);\ntemplate <class T> void _print(vector <T> v);\ntemplate <class T> void _print(set <T> v);\ntemplate <class T, class V> void _print(map <T, V> v);\ntemplate <class T> void _print(multiset <T> v);\n\ntemplate <class T, class V> void _print(pair <T, V> p) { cout << \"{\"; _print(p.ff); cout << \",\"; _print(p.ss); cout << \"}\"; }\ntemplate <class T> void _print(vector <T> v) { cout << \"[ \"; for (T i : v) { _print(i); cout << \" \"; } cout << \"]\"; }\ntemplate <class T> void _print(set <T> v) { cout << \"[ \"; for (T i : v) { _print(i); cout << \" \"; } cout << \"]\"; }\ntemplate <class T> void _print(multiset <T> v) { cout << \"[ \"; for (T i : v) { _print(i); cout << \" \"; } cout << \"]\"; }\ntemplate <class T, class V> void _print(map <T, V> v) { cout << \"[ \"; for (auto i : v) { _print(i); cout << \" \"; } cout << \"]\"; }\ntemplate <class T, class V> void _print(unordered_map <T, V> v) { cout << \"[ \"; for (auto i : v) { _print(i); cout << \" \"; } cout << \"]\"; }\n\nusing namespace __gnu_pbds;\ntypedef tree<int, null_type, less_equal<int>, rb_tree_tag, tree_order_statistics_node_update> ordered_multiset;\ntypedef tree<int, null_type, less<int>, rb_tree_tag, tree_order_statistics_node_update> ordered_set;\n//order_of_key(k) : number of elements strictly lesser than k\n//find_by_order(k-1): It returns to an iterator to the kth element.Use for deleting in multiset\n\n\n\nclass Solution {\npublic:\n    const int MOD = 1e9 + 7;\n    \n    int countOfPairs(vector<int>& nums) {\n        int n = nums.size();\n        int sz = *max_element(nums.begin(), nums.end()) + 1;\n        \n        vector<vector<int>> dp(n + 1, vector<int>(sz, 0));\n        vector<vector<int>> prefix = dp;\n        \n        for (int prevMin = 0; prevMin < sz; prevMin++) {\n            dp[n][prevMin] = 1;\n            prefix[n][prevMin] = dp[n][prevMin];\n            if(prevMin > 0) prefix[n][prevMin] += prefix[n][prevMin - 1];\n            prefix[n][prevMin] %= MOD;\n        }\n        \n        for (int i = n - 1; i >= 0; i--) {\n            for (int prevMin = 0; prevMin < sz; prevMin++) {\n                int curr = nums[i];\n                int prevMax = sz;\n                if (i > 0) prevMax = nums[i - 1] - prevMin;\n\n                int res = 0;\n                \n                int st = max(prevMin, curr - prevMax);\n                int end = curr;\n                \n                if(st <= end) {                    \n                    res = prefix[i+1][end];\n                    if(st-1 >= 0) res -= prefix[i+1][st-1];\n                }\n                \n                res %= MOD;\n                res += MOD;\n                res %= MOD;\n                \n                dp[i][prevMin] = res;\n                prefix[i][prevMin] = res;\n                if(prevMin > 0) prefix[i][prevMin] += prefix[i][prevMin - 1];\n                prefix[i][prevMin] %= MOD;   \n            }\n        }\n\n        return dp[0][0];\n    }\n};\n",
    "submit_ts": "1723347338",
    "subm_id": "1351596802"
}