{
    "username": "tang-yuan-yuan-bu-yuan",
    "submission": "class Solution {\n    vector<int> g[100010];\n    int dp[100010], f[100010];\n    int up[100010];\n    void dfs(int u, int fa){\n        if(u & 1) dp[u] = 1;\n        else dp[u] = 2;\n        int mx = 0;\n        for(auto x : g[u]){\n            if(x == fa) continue;\n            dfs(x, u);\n            mx = max(mx, dp[x]);\n        }\n        dp[u] = dp[u] + mx;\n    }\n    void dfs1(int u, int fa){\n        vector<int> v1, v2;\n        for(auto x : g[u]){\n            if(x == fa){\n                v1.push_back(0);\n                v2.push_back(0);\n            }\n            else{\n                v1.push_back(dp[x]);\n                v2.push_back(dp[x]);\n            }\n        }\n        for(int i = 1; i < v1.size(); i ++ ) v1[i] = max(v1[i - 1], v1[i]);\n        for(int i = v2.size() - 2; i >= 0; i -- ) v2[i] = max(v2[i], v2[i + 1]);\n\n        for(int i = 0; i < g[u].size(); i ++ ){\n            int x = g[u][i];\n            if(x == fa) continue;\n            int t = 0;\n            if(i - 1 >= 0) t = max(t, v1[i - 1]);\n            if(i + 1 < v2.size()) t = max(t, v2[i + 1]);\n            t += (u & 1 ? 1 : 2);\n            if(u != 0) t = max(t, up[u] + (u & 1 ? 1 : 2));\n            \n            up[x] = t;\n            t = max(t, up[x]);\n            f[x] = max(dp[x] - (x & 1 ? 1 : 2), t);\n            dfs1(x, u);\n        }\n    }\npublic:\n    vector<int> timeTaken(vector<vector<int>>& e) {\n        int n = e.size() + 1;\n        for(int i = 0; i < e.size(); i ++ ){\n            g[e[i][0]].push_back(e[i][1]);\n            g[e[i][1]].push_back(e[i][0]);\n        }\n\n        dfs(0, 0);\n        f[0] = dp[0];\n        dfs1(0, 0);\n        vector<int> res;\n        f[0] -= 2;\n        for(int i = 0; i < n; i ++ ) res.push_back(f[i]);\n        return res;\n    }\n};",
    "submit_ts": "1722700184",
    "subm_id": "552278747"
}