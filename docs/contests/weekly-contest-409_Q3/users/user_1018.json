{
    "username": "kircle",
    "submission": "constexpr int MAXV = (2 << 17) - 1;\nclass ST {\npublic:\n    vector<int> d;\n    vector<int> lazy;\n    ST() : d(2 * MAXV + 1, 0), lazy(2 * MAXV + 1, 0) {}\n    void update(int v, int ul, int ur, int cl, int cr, int i) {\n        if (ul > cr || ur < cl) {\n            return;\n        }\n        if (cl == cr) {\n            d[i] += v;\n            return;\n        }\n        if (ul <= cl && ur >= cr) {\n            lazy[i] += v;\n            return;\n        }\n        int mid = cl + (cr - cl) / 2;\n        update(v, ul, ur, cl, mid, i * 2);\n        update(v, ul, ur, mid + 1, cr, i * 2 + 1);\n    }\n    int query(int q, int cl, int cr, int i) {\n        if (q < cl || q > cr) {\n            return 0;\n        }\n        if (cl == cr) {\n            d[i] += lazy[i];\n            lazy[i] = 0;\n            return d[i];\n        }\n        lazy[2 * i] += lazy[i];\n        lazy[2 * i + 1] += lazy[i];\n        lazy[i] = 0;\n        int mid = cl + (cr - cl) / 2;\n        return query(q, cl, mid, i * 2) + query(q, mid + 1, cr, i * 2 + 1);\n    }\n};\nclass Solution {\npublic:\n    vector<int> shortestDistanceAfterQueries(int n,\n                                             vector<vector<int>>& queries) {\n        vector<int> ans(queries.size());\n        ST rg;\n        ST dis;\n        int c = 0;\n        for (int i = 0; i < n; i++) {\n            dis.d[262144 + i] = i;\n        }\n        for (const auto& q : queries) {\n            int u = q[0], v = q[1];\n            if (rg.query(u, 0, MAXV, 1) || rg.query(v, 0, MAXV, 1)) {\n            } else {\n                rg.update(1, u + 1, v - 1, 0, MAXV, 1);\n                int disv0 = dis.query(v, 0, MAXV, 1);\n                int disu0 = dis.query(u, 0, MAXV, 1);\n                int diff = 1 - (disv0 - disu0);\n                // printf(\"%d %d %d %d %d\\n\", u, v, disu0, disv0, diff);\n                dis.update(diff, v, n - 1, 0, MAXV, 1);\n            }\n            ans[c] = dis.query(n - 1, 0, MAXV, 1);\n            c++;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1722742617",
    "subm_id": "552345785"
}