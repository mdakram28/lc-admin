{
    "username": "maybk",
    "submission": "class Solution {\n    template<class T>\nclass BIT {\n    public:\n    vector<T> bit;  // binary indexed tree\n    int n;\n \n    BIT(int n) {\n        n += 5;\n        this->n = n;\n        bit.assign(n, T());\n    }\n \n    BIT(vector<int> const &a) : BIT(a.size()) {\n        for (size_t i = 0; i < a.size(); i++)\n            add(i, a[i]);\n    }\n \n    T sum(int r) {\n        T ret = 0;\n        for (; r >= 0; r = (r & (r + 1)) - 1)\n            ret += bit[r];\n        return ret;\n    }\n \n    T sum(int l, int r) {\n        return sum(r) - sum(l - 1);\n    }\n \n    void add(int idx, T delta) {\n        for (; idx < n; idx = (idx | (idx + 1)))\n            bit[idx] += delta;\n    }\n\n    void add(int l,int r,T delta){\n        add(l, delta);\n        add(r + 1, -delta);\n    }\n};\npublic:\n    vector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& q) {\n        int n=a.size(),m=q.size();\n        BIT<int>bit(n);\n        for(int i=1;i<n-1;i++){\n            if(a[i]>a[i-1] and a[i]>a[i+1])bit.add(i,1);\n        }\n        vector<int>ans;\n        for(auto &x:q){\n            if(x[0]==1){\n                if(x[2]-x[1]+1<=2)ans.push_back(0);\n                else{\n                    ans.push_back(bit.sum(x[1]+1,x[2]-1));\n                }\n            }else{\n                int i=x[1];\n                if(x[1]>0 and x[1]<n-1){\n                    if(a[i]>a[i-1] and a[i]>a[i+1])bit.add(i,-1);\n                }\n                if(x[1]>1){\n                    if(a[i-1]>a[i-2] and a[i-1]>a[i])bit.add(i-1,-1);\n                }\n                if(x[1]+2<n){\n                    if(a[i+1]>a[i+2] and a[i+1]>a[i])bit.add(i+1,-1);\n                }\n                a[i]=x[2];\n                if(x[1]>0 and x[1]<n-1){\n                    if(a[i]>a[i-1] and a[i]>a[i+1])bit.add(i,1);\n                }\n                if(x[1]>1){\n                    if(a[i-1]>a[i-2] and a[i-1]>a[i])bit.add(i-1,1);\n                }\n                if(x[1]+2<n){\n                    if(a[i+1]>a[i+2] and a[i+1]>a[i])bit.add(i+1,1);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718506891.0
}