{
    "username": "vonrong",
    "submission": "#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace __gnu_pbds;\n\ntypedef tree<int, null_type, less<int>, rb_tree_tag,\n\t\t\ttree_order_statistics_node_update>\n\tordered_set;\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        ordered_set st;\n        vector<int> ans;\n        for(int i = 1; i < nums.size()-1; i++){\n            if (nums[i] > nums[i-1] && nums[i] > nums[i+1]) st.insert(i);\n        }\n        for(auto q: queries){\n            if (q[0] == 1){\n                int l = q[1], r = q[2];\n                if (l == r) ans.push_back(0);\n                else ans.push_back(st.order_of_key(r)-st.order_of_key(l+1));\n            } else {\n                int i = q[1], v = q[2];\n                nums[i] = v;\n                if (i >= 1 && i < nums.size()-1){\n                    if (nums[i] > nums[i-1] && nums[i] > nums[i+1]) st.insert(i);\n                    else st.erase(i);\n                }\n                i -= 1;\n                if (i >= 1 && i < nums.size()-1){\n                    if (nums[i] > nums[i-1] && nums[i] > nums[i+1]) st.insert(i);\n                    else st.erase(i);\n                }\n                i += 2;\n                if (i >= 1 && i < nums.size()-1){\n                    if (nums[i] > nums[i-1] && nums[i] > nums[i+1]) st.insert(i);\n                    else st.erase(i);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718505718.0
}