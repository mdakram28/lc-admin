{
    "username": "Ammar shaikh",
    "submission": "\n\nclass Solution {\npublic:\n    static const int N=500;\n    static const long long INF=2e15;\n    int top[N+1][N+1],bot[N+1][N+1];\n    long long maximumValueSum(vector<vector<int>>& a) {\n        int n=a.size(),m=a[0].size();\n        for(int i=0;i<=n;i++){\n            for(int j=0;j<=m;j++)top[i][j]=bot[i][j]=-INF;\n        }\n\n        for(int i=0;i<n;i++){\n            for(int j=0;j<m;j++){\n                top[i+1][j]=max(top[i][j],a[i][j]);\n            }\n        }\n        for(int i=n-1;i;i--){\n            for(int j=0;j<m;j++){\n                bot[i-1][j]=max(bot[i][j],a[i][j]);\n            }\n        }\n        long long ans=-INF;\n        for(int i=0;i<n;i++){\n            long long mxf=-INF,mxs=-INF;\n            long long mx=-INF;\n            for(int j=0;j<m;j++){\n                ans=max(ans,mx+a[i][j]);\n                mx=max({top[i][j]+mxs,bot[i][j]+mxf,mx});\n                mxf=max(mxf,1ll*top[i][j]);\n                mxs=max(mxs,1ll*bot[i][j]);\n            }\n            mxf=-INF,mxs=-INF;\n            mx=-INF;\n            for(int j=m-1;j>=0;j--){\n                ans=max(ans,mx+a[i][j]);\n                mx=max({top[i][j]+mxs,bot[i][j]+mxf,mx});\n                mxf=max(mxf,1ll*top[i][j]);\n                mxs=max(mxs,1ll*bot[i][j]);\n            }\n            multiset<int> s,t;\n            s.insert(top[i][0]);\n            for(int j=2;j<m;j++)t.insert(bot[i][j]);\n            for(int j=1;j<m-1;j++){\n                ans=max(ans,(1ll*a[i][j]+*s.rbegin()+*t.rbegin()));\n                s.insert(top[i][j]);\n                t.erase(t.find(bot[i][j+1]));\n            }\n            s.clear();t.clear();\n\n            s.insert(bot[i][0]);\n            for(int j=2;j<m;j++)t.insert(top[i][j]);\n            for(int j=1;j<m-1;j++){\n                ans=max(ans,(1ll*a[i][j]+*s.rbegin()+*t.rbegin()));\n                s.insert(bot[i][j]);\n                t.erase(t.find(top[i][j+1]));\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1723910083",
    "subm_id": "1359216715"
}