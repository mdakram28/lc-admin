{
    "username": "elioyyds",
    "submission": "class Solution {\npublic:\n    vector<int >G[100005];\n    int n;\n    int f[100005];\n    int g[100005];\n    int h[100005];\n    void dfs1(int u,int fa)\n    {\n        f[u]=0;\n        for(auto v:G[u])\n        {\n            if(v==fa)   continue;\n            dfs1(v,u);\n            if(v&1) f[u]=max(f[u],f[v]+1);\n            else    f[u]=max(f[u],f[v]+2);\n        }\n    }\n    int pre[100005],suf[100005];\n    int t[100005],top;\n    void dfs2(int u,int fa)\n    {\n        //cout<<\"-- \"<<u<<\" \"<<f[u]<<\" \"<<g[u]<<\" \"<<h[u]<<endl;\n        top=0;\n        for(auto v:G[u])\n        {\n            if(v==fa)   continue;\n            t[++top]=v;\n        }\n        int tmp=h[u];\n        if(u%2==1)  tmp+=1;\n        if(u%2==0)  tmp+=2;\n        for(int i=1;i<=top;++i)\n        {\n            int w=t[i];\n            pre[w]=tmp;\n            int now=f[w];\n            if(u&1) now+=1;\n            else    now+=2;\n            if(w&1) now+=1;\n            else    now+=2;\n            tmp=max(tmp,now);\n        }\n        tmp=0;\n        for(int i=top;i>=1;--i)\n        {\n            int w=t[i];\n            suf[w]=tmp;\n            int now=f[w];\n            if(u&1) now+=1;\n            else    now+=2;\n            if(w&1) now+=1;\n            else    now+=2;\n            tmp=max(tmp,now);\n        }\n        for(auto v:G[u])\n        {\n            if(v==fa)   continue;\n            h[v]=max(pre[v],suf[v]);\n            g[v]=max(f[v],h[v]);\n            dfs2(v,u);\n        }\n    }\n    vector<int> timeTaken(vector<vector<int>>& e) {\n        n=e.size()+1;\n        for(int i=0;i<n;++i)    G[i].clear();\n        for(auto ed:e)\n        {\n            G[ed[0]].push_back(ed[1]);\n            G[ed[1]].push_back(ed[0]);\n        }\n        dfs1(0,-1);\n        g[0]=f[0];  h[0]=0;\n        dfs2(0,-1);\n        vector<int >ans;\n        ans.clear();\n        for(int i=0;i<n;++i)    ans.push_back(g[i]);\n        return ans;\n    }\n};",
    "submit_ts": "1722697378",
    "subm_id": "552265816"
}