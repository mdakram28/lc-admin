{
    "username": "Fasdr",
    "submission": "class Solution {\n    public long countSubarrays(int[] nums, int k) {\n        int n = nums.length;\n        long res = 0;\n        AndStore left = new AndStore(), right = new AndStore();\n        int l = 0, r = 0;\n        for (int j = 0; j < n; j++) {\n            left.add(nums[j]);\n            while (l <= j && left.val() < k)\n                left.remove(nums[l++]);\n            right.add(nums[j]);\n            if (left.val() == k) {\n                while (r <= j && right.val() <= k)\n                    right.remove(nums[r++]);\n                res += (r - l); \n            }\n        }\n        \n        return res;\n    }\n}\n\nclass AndStore {\n    private int[] cnt;\n    private int n;\n    private int size;\n    \n    public AndStore() {\n        n = 32;\n        size = 0;\n        cnt = new int[n];\n    }\n    \n    public int val() {\n        int num = 0;\n        int pow = 1;\n        for (int i = 0; i < n; i++) {\n            if (cnt[i] == size)\n                num += pow;\n            pow = pow << 1;\n        }\n        return num;\n    }\n    \n    public void add(int num) {\n        size++;\n        int i = 0;\n        while (num > 0) {\n            cnt[i++] += (num & 1);\n            num = num >>> 1;\n        }\n    }\n    \n    public void remove(int num) {\n        size--;\n        int i = 0;\n        while (num > 0) {\n            cnt[i++] -= (num & 1);\n            num = num >>> 1;\n        }\n    }\n}",
    "submit_ts": "1720279254",
    "subm_id": "1311743885"
}