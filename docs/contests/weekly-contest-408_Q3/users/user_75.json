{
    "username": "nifeshe",
    "submission": "#define f first\n#define s second\n#define all(x) (x).begin(), (x).end()\n#define rall(x) (x).rbegin(), (x).rend()\n#define sz(x) ((int) (x).size())\n#define pb push_back\n#define mp make_pair\n\nusing namespace std;\n\ntemplate <typename T> inline bool umin(T &a, const T &b) { if(a > b) { a = b; return 1; } return 0; }\ntemplate <typename T> inline bool umax(T &a, const T &b) { if(a < b) { a = b; return 1; } return 0; }\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef long double ld;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\n\nconst ll mod = 1e9 + 7;\nconst ll base = 1e6 + 9;\nconst ll inf = 1e9;\nconst int MAX = 2e5 + 42;\nconst int LG = 20;\n\n\nclass Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        int n = sz(s);\n        for(auto &i : s) i &= 1;\n        vector<int> next(n, n);\n        for(int i = 0; i + 1 < n; i++) next[i] = (s[i + 1]? n : i + 1);\n        for(int i = n - 2; ~i; i--) umin(next[i], next[i + 1]);\n        int ans = 0;\n        auto pref = s; for(int i = 1; i < n; i++) pref[i] += pref[i - 1];\n        for(int i = 0; i < n; i++) {\n            if(!s[i]) continue;\n            ans += next[i] - i;\n        }\n        for(int zero = 1; zero * zero <= n; zero++) {\n            int one = zero * zero;\n            int j = -1;\n            int r = -1;\n            int sum = 0;\n            int sum_z = 0;\n            for(int i = 0; i < n; i++) {\n                while(j + 1 < n && sum < one) sum += s[++j];\n                while(r + 1 < n && sum_z < zero) sum_z += !s[++r];\n                if(sum < one) break;\n                if(sum_z < zero) break;\n                if(j < next[r]) ans += next[max(j, r)] - max(j, r);\n                sum -= s[i];\n                sum_z -= !s[i];\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1722136229",
    "subm_id": "1335727749"
}