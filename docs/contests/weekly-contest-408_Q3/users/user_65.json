{
    "username": "Rad0miR",
    "submission": "public class Solution {\n    public int NumberOfSubstrings(string s) \n    {\n        int n = s.Length;\n        \n        int[] cnt = new int[n + 1];\n        for (int i = 1; i <= n; ++i) cnt[i] = cnt[i - 1] + (s[i - 1] - '0');\n        \n        int[] next = new int[n + 1]; \n        int temp = n;\n        next[n] = temp;\n        for (int i = n - 1; i >= 0; --i) \n        {\n            if (s[i] == '0') temp = i;\n            \n            next[i] = temp;\n        }\n        \n        //Console.WriteLine(String.Join(' ', cnt));\n        //Console.WriteLine(String.Join(' ', next));\n        \n        int ans = 0;\n        \n        for (int i = 0; i < n; ++i) \n        {\n            int r = i;\n            \n            while (r < n) \n            {\n                int nextZ = next[r + 1];\n                \n                if (OK(i, r)) \n                {\n                    ans += nextZ - r;\n                    r = nextZ;\n                    continue;\n                }\n                \n                int cntZ = r - i + 1 - Cnt(i, r);\n                \n                r = Math.Max(r + 1, i + cntZ * cntZ + cntZ - 1);\n            }\n            \n            bool OK(int l, int r) \n            {\n                int ones = Cnt(l, r), z = r - l + 1 - ones;\n                return ones >= z * z;\n            }\n            \n            int Cnt(int l, int r) => cnt[r + 1] - cnt[l];\n        }\n        \n        return ans;\n    }\n}",
    "submit_ts": "1722137709",
    "subm_id": "1335771475"
}