{
    "username": "akashSudan",
    "submission": "bool fun(vector<vector<int>> &dp,int l,int r,int k)\n{\n    for(int i=0;i<32;i++)\n    {\n        if(k&(1<<i))\n        {\n            int val=0;\n            val=dp[r][i];\n            if(l-1>=0)\n                val-=dp[l-1][i];\n            if(val!=r-l+1)\n                return false;\n        }\n    }\n    return true;\n}\n\nint fun1(vector<vector<int>> &dp,int l,int r,int k)\n{\n    int l1=l;\n    int ans=-1;\n    while(l<=r)\n    {\n        int mid=(l+r)/2;\n        if(fun(dp,l1,mid,k))\n        {\n            ans=mid;\n            l=mid+1;\n            \n        }\n        else\n            r=mid-1;\n    }\n    return ans;\n}\nint fun2(vector<vector<int>> &dp,int l,int r)\n{\n    int ans=0;\n    for(int i=0;i<32;i++)\n    {\n        \n            int val=0;\n            val=dp[r][i];\n            if(l-1>=0)\n                val-=dp[l-1][i];\n          if(val==r-l+1)\n              ans+=(1<<i);\n    }\n    // cout<<l<<' '<<r<<\" \"<<ans<<endl;\n    return ans;\n}\n\nint fun3(vector<vector<int>> &dp,int l,int r,int k)\n{\n    int l1=l;\n    int ans=-1;\n    while(l<=r)\n    {\n        int mid=(l+r)/2;\n        if(fun2(dp,l1,mid)==k)\n        {\n            ans=mid;\n            r=mid-1;\n        }\n        else\n           l= mid+1;\n    }\n    return ans;\n}\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n=nums.size();\n        long long ans=0;\n        vector<vector<int>> dp(n,vector<int> (32,0));\n        for(int i=0;i<n;i++)\n        {\n            for(int j=0;j<32;j++)\n            {\n                if(i-1>=0)\n                    dp[i][j]=dp[i-1][j];\n            }\n            for(int j=0;j<32;j++)\n            {\n                if(nums[i]&(1<<j))\n                    dp[i][j]++;\n            }\n        }\n        \n        for(int i=0;i<n;i++)\n        {\n            int idx1=fun1(dp,i,n-1,k);\n            int idx2=fun3(dp,i,idx1,k);\n            if(idx2!=-1&&idx1!=-1)\n            {\n                ans+=idx1-idx2+1;\n            }\n        }\n        return ans;\n        \n    }\n};",
    "submit_ts": "1720279645",
    "subm_id": "1311759506"
}