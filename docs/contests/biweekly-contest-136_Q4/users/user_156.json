{
    "username": "rain-sure",
    "submission": "class Solution {\npublic:\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n = edges.size() + 1;\n        using PII = pair<int, int>;\n        vector<vector<PII>> adj(n);\n        for(const auto& p : edges) {\n            int a = p[0], b = p[1];\n            if(a & 1) {\n                adj[b].push_back({a, 1});\n            } else {\n                adj[b].push_back({a, 2});\n            }\n            if(b & 1) {\n                adj[a].push_back({b, 1});\n            } else {\n                adj[a].push_back({b, 2});\n            }\n        }\n        vector<int> f1(n), f2(n);\n        function<void(int, int)> dfs1([&](int u, int fa) {\n            for(auto &[x, w] : adj[u]) {\n                if(x == fa) continue;\n                dfs1(x, u);\n                int d = f1[x] + w;\n                if(d >= f1[u]) {\n                    f2[u] = f1[u];\n                    f1[u] = d;\n                } else if(d > f2[u]) {\n                    f2[u] = d;\n                }\n            } \n        });\n        dfs1(0, -1);\n        vector<int> g1(n), g2(n);\n        function<void(int, int)> dfs2([&](int u, int fa) {\n            g1[u] = f1[u], g2[u] = f2[u];\n            if(fa != -1) {\n                int tmp = (u % 2 == 0 ? 2 : 1) + f1[u];\n                int k = g1[fa] + (fa % 2 == 0 ? 2 : 1);\n                if(tmp == g1[fa]) { // \u5982\u679c\u7b49\u4e8e\u6700\u5927\u503c\uff0c\u7528\u6b21\u5927\u503c\u53bb\u7b97\n                    k = g2[fa] + (fa % 2 == 0 ? 2 : 1);\n                }\n                if(k >= g1[u]) {\n                    g2[u] = g1[u];\n                    g1[u] = k;\n                } else if(k > g2[u]) {\n                    g2[u] = k;\n                }\n            }\n            for(auto &[x, w] : adj[u]) {\n                if(x == fa) continue;\n                dfs2(x, u);\n            } \n        });\n        dfs2(0, -1);\n        return g1;\n    }\n};",
    "submit_ts": "1722698995",
    "subm_id": "552273550"
}