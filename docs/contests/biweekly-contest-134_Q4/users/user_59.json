{
    "username": "aman_2005",
    "submission": "#define ll long long\n\n\nstruct segt{\n    ll sm,mx;\n};  \n\nclass Segtree{\n    vector<segt> seg;\n    vector<int> a;\n    public:\n    \n    void init(ll n,vector<int> b){\n        seg.resize(4*n+1);\n        a=b;\n    }\n\n    void build(ll i,ll l,ll r){\n        if(l==r){\n            seg[i].sm=a[l];\n        }\n        else{\n            ll mid=(l+r)/2;\n            build(2*i,l,mid);\n            build(2*i+1,mid+1,r);\n            seg[i].sm=seg[2*i].sm & seg[2*i+1].sm;\n        }\n    }\n    \n    ll help(ll i,ll l,ll r,ll st,ll end){\n        if (r<st || l>end){\n            return (1<<30)-1;\n        }\n        if(l>=st && r<=end){\n            return seg[i].sm;\n        }\n    \n        ll mid=(l+r)/2;\n    \n        return help(2*i,l,mid,st,end) & help(2*i+1,mid+1,r,st,end);\n    }\n};\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        ll n=nums.size();\n        Segtree ob;\n        ob.init(n,nums);\n        ob.build(1,0,n-1);\n        ll ans=0;\n        for(ll i=0;i<n;i++){\n            ll l=i,r=n-1,first=-1;\n            while(l<=r){\n                ll mid=(l+r)/2;\n                ll val=ob.help(1,0,n-1,i,mid);\n                if(val>k){\n                    l=mid+1;\n                }\n                else if(val<k){\n                    r=mid-1;\n                }\n                else{\n                    first=mid;\n                    r=mid-1;\n                }\n            }\n            ll last=-1;\n            l=i,r=n-1;\n            while(l<=r){\n                ll mid=(l+r)/2;\n                ll val=ob.help(1,0,n-1,i,mid);\n                if(val>k){\n                    l=mid+1;\n                }\n                else if(val<k){\n                    r=mid-1;\n                }\n                else{\n                    last=mid;\n                    l=mid+1;\n                }\n            }\n            if(first!=-1){\n                ans+=last-first+1;\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720278110",
    "subm_id": "1311694760"
}