{
    "username": "SJC",
    "submission": "class Solution {\n    using LL = long long;\n    int m, n;\n    LL res = LLONG_MIN;\n    vector<vector<int>> board;\n    LL memo[101][101][101][4];\n    vector<vector<pair<LL, int>>> arr;\n    vector<bool> visited;\npublic:\n    long long maximumValueSum(vector<vector<int>>& board) {\n        this -> board = board;\n        m = board.size();\n        n = board[0].size();\n        for(int i = 0; i <= n; i++){\n            for(int j = 0; j <= n; j++){\n                for(int k = 0; k <= n; k++){\n                    for(int t = 0; t < 4; t++){\n                        memo[i][j][k][t] = LLONG_MIN/2;\n                    }\n                }\n            }\n        }\n        vector<vector<pair<int,int>>> grid(m, vector<pair<int,int>>(n));\n        for(int i = 0; i < m; i++){\n            for(int j = 0; j < n; j++){\n                grid[i][j].first = board[i][j];\n                grid[i][j].second = j;\n            }\n        }\n        \n        arr.resize(m);\n        for(int i = 0; i < m; i++){\n            sort(grid[i].rbegin(), grid[i].rend());\n            arr[i].resize(3);\n            arr[i][0].first = grid[i][0].first;\n            arr[i][0].second = grid[i][0].second;\n            arr[i][1].first = grid[i][1].first;\n            arr[i][1].second = grid[i][1].second;\n            arr[i][2].first = grid[i][2].first;\n            arr[i][2].second = grid[i][2].second;\n        }\n        \n        visited.resize(n);\n        for(int i = 0; i < m-2; i++){\n            for(int j = 0; j < 3; j++){\n                int col = arr[i][j].second; LL val = arr[i][j].first;\n                visited[col] = 1;\n                DFS(i+1, 1, col+1, 0, 0, val);\n                visited[col] = 0;\n            }\n        }\n        \n        \n        return res;\n    }\n    void DFS(int row, int count, int col1, int col2, int col3, LL sum){\n        if(row == m && count < 3) return;\n        \n        \n        if(memo[col1][col2][col3][count] > sum){\n            return;\n        }\n        \n        memo[col1][col2][col3][count] = sum;\n        \n        if(count == 3){\n            res = max(res, sum);\n            return;\n        }\n        \n        \n        for(int j = 0; j < 3; j++){\n            int col = arr[row][j].second; LL val = arr[row][j].first;\n            if(visited[col]) continue;\n            visited[col] = 1;\n            if(count == 1){\n                DFS(row+1, count+1, col1, col+1, col3, sum + val);\n            }\n            else if(count == 2){\n                DFS(row+1, count+1, col1,col2, col+1, sum + val);\n            }\n            visited[col] = 0;\n        }    \n        DFS(row+1, count, col1, col2, col3, sum);\n    }\n};\n/*\n\u540c\u4e00\u500brow col \u53ea\u80fd\u6709\u500brook \u8981\u653e\u4e09\u500brooks\n\u6700\u591a\u5f97\u5206\u662f\u591a\u5c11?\n100 * 2, \u4e09\u500b\n\n[[95,-90,-62,-94],[62,59,-21,46],[23,24,19,9],[-79,-12,91,16]]\n[[82,13,51],[-43,-96,60],[-25,70,-79],[86,37,-97],[-87,87,-87],[-67,73,6],[-80,-65,-72]]\n[[-12,70,-48,-74],[-71,-75,63,-67],[-46,81,4,-86],[29,-51,-51,16]]\n*/",
    "submit_ts": "1723910063",
    "subm_id": "1359215956"
}