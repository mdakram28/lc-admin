{
    "username": "6reat-shternsea",
    "submission": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing ll = long long;\nusing ld = long double;\nusing i128 = __int128_t;\nclass Solution {\npublic:\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n\n        int n = edges.size() + 1;\n        vector<vector<int>> g(n);\n        for (int i = 0; i < edges.size(); i++) {\n            g[edges[i][0]].push_back(edges[i][1]);\n            g[edges[i][1]].push_back(edges[i][0]);\n        //     cout<<edges[i][0]<<\" \"<<edges[i][1]<<endl;\n        }\n        vector<int> dp(n);\n        auto dfs1 = [&](auto && func, int u, int f)->void{\n\n\n            for (int nx : g[u]) {\n                if (nx == f)\n                    continue;\n                func(func, nx, u);\n                dp[u] = max(dp[u], dp[nx]);\n            }\n            dp[u] += u % 2 == 0 ? 2 : 1;\n        };\n        vector<int> ans(n);\n        dfs1(dfs1,0,-1);\n        ans[0] = dp[0]-2;\n        auto dfs2 = [&](auto && func, int u, int f)->void{\n            if (u != 0) {\n                int res = 0;\n                for (int nx : g[u]) {\n                    res = max(res, dp[nx]);\n                }\n                ans[u] = res;\n            }\n            sort(g[u].begin(), g[u].end(), [&](int x, int y)->bool{\n                return dp[x] < dp[y];\n            });\n            int p=dp[u];\n            for (int i = 0; i < g[u].size(); i++) {\n                int nx = g[u][i];\n                if (nx == f)\n                    continue;\n                if (i != g[u].size() - 1) {\n                    dp[u] = dp[g[u][g[u].size() - 1]] + (u % 2 == 0 ? 2 : 1);\n                } else {\n                    dp[u]=(u % 2 == 0 ? 2 : 1);\n                    if (g[u].size() != 1) {\n                        dp[u]+=dp[g[u][g[u].size()-2]];\n                    }\n                }\n                // cout<<dp[u]<<\" \"<<u<<\" \"<<nx<<endl;\n                func(func,nx,u);\n            }\n            dp[u]=p;\n        };\n        dfs2(dfs2,0,-1);\n        return ans;\n    }\n};",
    "submit_ts": "1722697552",
    "subm_id": "552266654"
}