{
    "username": "wang-jing-oh",
    "submission": "class Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& q) {\n        int n = a.size();\n        vector<int> b;\n        b.push_back(1e5 + 1);\n        for(auto &i : a) b.push_back(i);\n        b.push_back(1e5 + 1);\n        a = b;\n        vector<int> tr(n + 1);\n        auto add = [&](int x, int y){\n            for(;x<=n;x+=x&-x) tr[x]+=y;\n        };\n        auto qry = [&](int x, int y = 0){\n            for(;x;x-=x&-x) y+=tr[x];\n            return y;\n        };\n        auto change = [&](int x, int op)\n        {\n            add(x, (a[x] > a[x - 1] && a[x] > a[x + 1]) * op);\n            return  (a[x] > a[x - 1] && a[x] > a[x + 1]);\n        };\n        for(int i = 1; i <= n; ++i)\n        change(i, 1);\n        vector<int> ans;\n        for(auto t : q)\n        {\n\n            int op = t[0];\n            if(op == 1)\n            {\n                int l = t[1] + 1, r = t[2] + 1;\n                r--, l++;\n                if(l > r)\n                {\n                    ans.push_back(0);\n                    continue;\n                }\n                // cout<<\"111\\n\";\n                // cout<<qry(r)<<' '<<qry(l - 1)<<endl;\n                ans.push_back(qry(r) - qry(l - 1));\n            }\n            else\n            {\n                int x = t[1] + 1, y = t[2];\n                change(x, -1);\n                if(x!=1) change(x - 1, -1);\n                if(x!=n) change(x + 1, -1);\n                a[x] = y;\n                change(x, 1);\n                if(x!=1) change(x - 1, 1);\n                if(x!=n) change(x + 1, 1);\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718506656.0
}