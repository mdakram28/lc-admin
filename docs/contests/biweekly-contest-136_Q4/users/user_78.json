{
    "username": "dreamy-i3eaver9xt",
    "submission": "class Solution {\npublic:\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n=edges.size()+1;\n        vector<int>p[n];\n        for(int i=0;i<edges.size();i++){\n            p[edges[i][0]].push_back(edges[i][1]);\n            p[edges[i][1]].push_back(edges[i][0]);\n        }\n        vector<int>dp1(n,0),dp2(n,0);\n        vector<int>ans(n,0);\n        function<int(int,int,int)>dfs=[&](int k,int fa,int sum){\n            if(k!=0&&p[k].size()==1){\n                return sum;\n            }\n            for(int i=0;i<p[k].size();i++){\n                if(p[k][i]==fa)continue;\n                int t=dfs(p[k][i],k,sum+((p[k][i]%2)?1:2))-sum;\n                if(t>dp1[k]){\n                    dp2[k]=dp1[k];\n                    dp1[k]=t;\n                }\n                else if(t>dp2[k]){\n                    dp2[k]=t;\n                }\n            }\n            return dp1[k]+sum;\n        };\n        dfs(0,0,0);\n        //cout<<dp1[0]<<endl;\n        //cout<<dp1[1]<<endl;\n        function<void(int,int,int)>dfs1=[&](int k,int fa,int sum){\n            if(k==0){\n                ans[k]=dp1[k];\n            }\n            else{\n                int op=0;\n                if(dp1[k]+((k%2)?1:2)==dp1[fa])op=dp2[fa];\n                else op=dp1[fa];\n                //if(n>3&&k==3)cout<<dp2[fa]<<endl;\n                if(fa%2)op++;\n                else op+=2;\n                ans[k]=max(dp1[k],op);\n                \n                if(op>dp1[k]){\n                    dp2[k]=dp1[k];\n                    dp1[k]=op;\n                }\n                else if(op>dp2[k]){\n                    dp2[k]=op;\n                }\n            }\n            for(int i=0;i<p[k].size();i++){\n                if(p[k][i]==fa)continue;\n                dfs1(p[k][i],k,sum+((p[k][i]%2)?1:2));\n            }\n        };\n        //if(n>3)cout<<dp1[3]<<endl;\n        dfs1(0,0,0);\n        return ans;\n    }\n};",
    "submit_ts": "1722697934",
    "subm_id": "552268527"
}