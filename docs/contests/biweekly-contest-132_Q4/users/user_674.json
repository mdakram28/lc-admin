{
    "username": "N_E_E_R_A_J",
    "submission": "const char fastio = [](){\n    ios_base::sync_with_stdio(false);\n    cin.tie(nullptr);\n    cout.tie(nullptr);\n    return 0;\n}();\n\ntypedef long long int ll;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\n\n#define ALL(iterable) (iterable).begin(), (iterable).end()\n#define RALL(iterable) (iterable).rbegin(), (iterable).rend()\n#define MIN(a, b) ((a) < (b) ? (a) : (b))\n#define MAX(a, b) ((a) > (b) ? (a) : (b))\n#define ROUND(x) (((x) >= 0) ? (ll)((x) + 0.5) : (ll)((x) - 0.5))\n#define DEBUG(...) cout << \"[DEBUG-\" << __LINE__ << \"]:\"; debug_cout(__VA_ARGS__);\n\nshort dx4[] = {-1, 0, 1, 0};\nshort dy4[] = {0, 1, 0, -1};\n\nshort dx8[] = {-1, -1, -1, 0, 1, 1, 1, 0};\nshort dy8[] = {-1, 0, 1, 1, 1, 0, -1, -1};\n\nshort kx[] = {2, 1, -1, -2, -2, -1, 1, 2};\nshort ky[] = {1, 2, 2, 1, -1, -2, -2, -1};\n\ntemplate<typename T>\nvoid debug_cout(const T& arg) {\n    cout << \" \" << arg;\n}\n\ntemplate<typename T, typename... Args>\nvoid debug_cout(const T& firstArg, const Args&... args) {\n    cout << \" \" << firstArg;\n    debug_cout(args...);\n}\n\ntemplate <typename T1, typename T2>\nostream &operator<<(ostream &out, pair<T1, T2> &p)\n{\n    out << \"(\" << p.first << \",\" << p.second << \")\";\n    return out;\n}\n\ntemplate <typename T>\nostream &operator<<(ostream &out, vector<T> &vec)\n{\n    out << \"[\";\n    for (auto it = vec.begin(); it != vec.end(); ++it)\n    {\n        if (it != vec.begin())\n            out << \",\";\n        out << *it;\n    }\n    out << \"]\";\n    return out;\n}\n\nint dp[51][5001];\n\nclass Solution {\n// private:\n//     int helper(vector<int> &nums, int index, int k)\n//     {\n//         int n = nums.size();\n\n//         if (index == n - 1)\n//             return 1;\n        \n//         int answer = 1;\n        \n//         for (int next = index + 1; next < n; next++)\n//         {\n//             if (nums[index] == nums[next])\n//                 answer = max(answer, 1 + helper(nums, next, k));\n//             else if (k > 0)\n//                 answer = max(answer, 1 + helper(nums, next, k - 1));\n//         }\n        \n//         return answer;\n//     }\n\npublic:\n    int maximumLength(vector<int>& nums, int _k) {\n        int n = nums.size();\n        \n        for (int k = 0; k <= _k; k++)\n        {\n            map<int, int> mpk, mpk1;\n            int maxx = INT_MIN, smaxx = INT_MIN;\n            for (int index = n - 1; index >= 0; index--)\n            {\n                if (index == n - 1)\n                    dp[k][index] = 1;\n                else\n                {\n                    dp[k][index] = max(1, mpk[nums[index]]);\n                    \n                    if (k > 0)\n                        dp[k][index] = max(dp[k][index], maxx == mpk1[nums[index]] ? smaxx : maxx);\n                }\n                \n                mpk[nums[index]] = max(mpk[nums[index]], 1 + dp[k][index]);\n                \n                if (k > 0)\n                {\n                    mpk1[nums[index]] = max(mpk1[nums[index]], 1 + dp[k - 1][index]);\n                    if (mpk1[nums[index]] >= maxx)\n                    {\n                        smaxx = maxx;\n                        maxx = mpk1[nums[index]];\n                    }\n                    else if (mpk1[nums[index]] >= smaxx)\n                        smaxx = mpk1[nums[index]];\n                }\n            }\n        }\n        \n        int answer = 0;\n        for (int i = 0; i < n; i++)\n            answer = max(answer, dp[_k][i]);\n\n        return answer;\n    }\n};",
    "submit_ts": 1717862237.0
}