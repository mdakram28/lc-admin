{
    "username": "Andwerp",
    "submission": "typedef long long ll;\nclass Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        int n = s.size();\n        int ans = 0;\n        vector<ll> sums(1, 0);\n        vector<ll> amts(1, 0);\n        int l = 0;\n        for(int i = 0; i < s.size(); i++){\n            if(s[i] == '1'){\n                amts[amts.size() - 1] ++;\n                for(int j = (int) sums.size() - 2; j >= l; j--){\n                    if(sums[j] < -n * 2) {\n                        l = j + 1;\n                        break;\n                    }\n                    sums[j] ++;\n                }\n            }\n            else {\n                ll psum = 1;\n                for(int j = (int) sums.size() - 1; j >= l; j--){\n                    if(sums[j] < -n * 2) {\n                        l = j + 1;\n                        break;\n                    }\n                    sums[j] -= psum;\n                    psum += 2;\n                }\n                sums.push_back(0);\n                amts.push_back(0);\n            }\n            // cout << \"SUMS : \" << \"\\n\";\n            // for(int j = 0; j < sums.size(); j++){\n            //     cout << sums[j] << \" \";\n            // }\n            // cout << \"\\n\";\n            //add to ans\n            ans += amts[sums.size() - 1];\n            for(int j = (int) sums.size() - 2; j >= l; j--){\n                if(sums[j] < -n * 2) {\n                    l = j + 1;\n                    break;\n                }\n                if(sums[j] >= 0){\n                    ans ++;\n                    ans += amts[j];\n                }\n                else {\n                    ans += max(0ll, sums[j] + amts[j] + 1);\n                }\n            }\n            // ans --;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1722136366",
    "subm_id": "1335732185"
}