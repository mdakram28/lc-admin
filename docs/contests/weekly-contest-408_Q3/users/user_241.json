{
    "username": "cm_komi",
    "submission": "class Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        #define int long long\n        int n = s.size();\n        vector<int> pref(n), last(n), last1(n);\n        for( int i = 0, score = 0; i < n; ++i){\n            score += s[i] == '1';\n            pref[i] = score;\n        }\n        for( int i = n-1, score = n; i >= 0; --i){\n            if( s[i] == '0')    score = i;\n            last[i] = score;\n        }\n        \n        for( int i = n-1, score = n; i >= 0; --i){\n            if( s[i] == '1')    score = i;\n            last1[i] = score;\n        }\n\n        int ans = 0;\n        for( int i = 0; i < n; ++i){\n            int j = i;\n\n            while( j < n){\n\n                int one = pref[j];\n                if( i)  one -= pref[i-1];\n                int zero = j - i + 1 - one;\n\n                if( s[j] == '0'){\n                    if( one >= zero * zero){\n                        ans += 1;   j += 1;\n                    }\n                    else{\n                        j = last1[j];\n                    }                        \n                }\n                else{\n                    \n                    if( one >= zero * zero){\n                        ans += last[j] - j ;\n                        j = last[j];\n                    }\n                    else{\n                        int req = zero * zero - one;\n                        j += req;\n                    }\n                }\n            }\n        }\n        return ans;\n        #undef int\n\n    }\n};",
    "submit_ts": "1722137072",
    "subm_id": "1335753338"
}