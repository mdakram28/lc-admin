{
    "username": "ihgazi",
    "submission": "class Solution {\npublic:\n    void dfs(int u, int par, vector<vector<int>> &adj, vector<vector<int>> &dp) {\n        for (auto &v: adj[u]) {\n            if (v==par) continue;\n            dfs(v,u,adj,dp);\n            int t0 = dp[v][0]+(v%2==1?1:2);\n\n            if (t0>dp[u][0]) {\n                dp[u][1] = dp[u][0];\n                dp[u][0] = t0;\n            }\n            else if (t0>dp[u][1]) {\n                dp[u][1] = t0;\n            }\n        }\n    }\n    void dfs2(int u, int par, vector<vector<int>> &adj, vector<vector<int>> &dp, vector<int> &ans) {\n        int prev0 = dp[u][0], prev1 = dp[u][1];\n        if (par==-1) ans[u] = dp[u][0];\n        else {\n            int prevt = dp[u][0]+(u%2==1?1:2);\n            int t0 = (dp[par][0]==prevt?dp[par][1]:dp[par][0])+(par%2==1?1:2);\n            ans[u] = max(t0,dp[u][0]);\n\n            if (t0>dp[u][0]) {\n                dp[u][1] = dp[u][0];\n                dp[u][0] = t0;\n            }\n            else if (t0>dp[u][1]) {\n                dp[u][1] = t0;\n            }\n        }\n\n        for (auto &v: adj[u]) {\n            if (v==par) continue;\n            dfs2(v,u,adj,dp,ans);\n        }\n\n        dp[u][0] = prev0, dp[u][1] = prev1;\n    }\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n = edges.size()+1;\n        vector<vector<int>> adj(n);\n        for (auto &e: edges) {\n            adj[e[0]].push_back(e[1]);\n            adj[e[1]].push_back(e[0]);\n        }\n\n        vector<vector<int>> dp(n,vector<int>(2));\n        dfs(0,-1,adj,dp);\n        vector<int> ans(n);\n        dfs2(0,-1,adj,dp,ans);\n\n        return ans;\n    }\n};",
    "submit_ts": "1722700038",
    "subm_id": "1343229798"
}