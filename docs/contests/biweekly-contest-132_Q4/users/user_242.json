{
    "username": "chinesedfan",
    "submission": "/* eslint-disable no-var, func-style */\n/**\n * @param {number[]} nums\n * @param {number} k\n * @return {number}\n */\nvar maximumLength = function(nums, K) {\n    const n = nums.length\n    const max = Array(K + 1)\n    // const max = Array(n)\n    //     .fill(0)\n    //     .map(() => Array(K + 1))\n    const dp = Array(n)\n        .fill(0)\n        .map(() => Array(K + 1).fill(0))\n    let ans = 0\n    for (let i = 0; i < n; i++) {\n        const x = nums[i]\n        for (let k = 0; k <= K; k++) {\n            if (!i) {\n                dp[i][k] = 1\n                // const o = max[i][k] = max[i][k] || {}\n                const o = max[k] = max[k] || {}\n                o[x] = 1\n                o.all = 1\n                continue\n            }\n            // let temp = 1\n            // for (let j = 0; j < i; j++) {\n            //     if (nums[i] === nums[j]) {\n            //         temp = Math.max(temp, dp[j][k] + 1)\n            //     } else if (k - 1 >= 0) {\n            //         temp = Math.max(temp, dp[j][k - 1] + 1)\n            //     }\n            // }\n            // dp[i][k] = temp\n            dp[i][k] = Math.max(\n                k ? (max[k - 1].all || 0) : 0,\n                max[k][x] || 0,\n            ) + 1\n            // console.log([i, k], temp, dp[i][k])\n        }\n        for (let k = 0; k <= K; k++) {\n            const o = max[k] = max[k] || {}\n            o[x] = Math.max(o[x] || 0, dp[i][k])\n            o.all = Math.max(o.all || 0, dp[i][k])\n            // dp[i][k] = Math.max(\n            //     k ? (max[i - 1][k - 1].all || 0) : 0,\n            //     max[i - 1][k][x] || 0,\n            // ) + 1\n            // console.log([i, k], temp, dp[i][k], max[i - 1])\n            // const o = max[i][k] = max[i][k] || {}\n            // o[x] = Math.max(o[x] || 0, dp[i][k])\n            // o.all = Math.max(o.all || 0, dp[i][k])\n        }\n        ans = Math.max(ans, dp[i][K])\n    }\n    // console.log(dp)\n    // return dp[n - 1][K]\n    return ans\n};\n",
    "submit_ts": 1717860335.0
}