{
    "username": "pein531",
    "submission": "typedef long long LL;\nconst int N = 100010, M = 20;\nint st[N][M], a[N];\n\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n = nums.size();\n        for(int i = 0; i < n; i++) {\n            a[i + 1] = nums[i];\n        }\n        for(int j = 0; j < M; j++) {\n            for(int i = 1; i + (1 << j) - 1 <= n; i++) {\n                if(!j) {\n                    st[i][j] = a[i];\n                }else {\n                    st[i][j] = st[i][j - 1] & st[i + (1<<(j - 1))][j - 1];\n                }\n            }\n        }\n        auto query = [&](int l, int r) {\n            int k = log2(r - l + 1);\n            return st[l][k] & st[r - (1<<k) + 1][k];\n        };\n        LL ans = 0;\n        for(int i = 1; i <= n; i++) {\n            int l = 1, r = i, left = 0, right = 0;\n            while(l <= r) {\n                int mid = l + r >> 1, res = query(mid, i);\n                if(res > k) {\n                    r = mid - 1;\n                }else if(res < k) {\n                    l = mid + 1;\n                }else {\n                    right = mid;\n                    l = mid + 1;\n                }\n            }\n            l = 1, r = i;\n            while(l <= r) {\n                int mid = l + r >> 1, res = query(mid, i);\n                if(res > k) {\n                    r = mid - 1;\n                }else if(res < k) {\n                    l = mid + 1;\n                }else {\n                    left = mid;\n                    r = mid - 1;\n                }\n            }\n            if(right > 0) ans += right - left + 1;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720278295",
    "subm_id": "1311702943"
}