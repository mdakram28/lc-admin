{
    "username": "Utsavk02",
    "submission": "#define ll long long\nclass Solution {\npublic:\n    ll util(ll idx, ll i, ll j, vector<vector<ll>>& v) {\n        ll l = 0, r = i;\n        ll ans = -1;\n        if (idx == 1) {\n            ans = i;\n            r--;\n        } else if (idx == 2) {\n            ans = 0;\n            r--;\n        }\n        while (l <= r) {\n            ll m = l + (r - l) / 2;\n            if (idx == 1) {\n                if ((v[m][j] + i - m) == v[i][j]) {\n                    ans = m + 1;\n                    r = m - 1;\n                } else {\n                    l = m + 1;\n                }\n            } else if (idx == 2) {\n                // cout << m << \" \" << v[m][j]  << \" \" << v[i][j] - 1\n                //      << \" , \";\n                if ((v[m][j] + i - m) == v[i][j]) {\n                    ans = m;\n                    r = m - 1;\n                } else {\n                    l = m + 1;\n                }\n            }\n        }\n        // cout << \" | \";\n        return ans;\n    }\n\n    long long countSubarrays(vector<int>& nums, int k) {\n        ll i, j, n = nums.size(), m = 32;\n        vector<vector<ll>> v(n + 1, vector<ll>(m, 0));\n        for (i = 1; i <= n; i++) {\n            v[i] = v[i - 1];\n            for (j = 0; j < m; j++) {\n                ll num = 1LL << j;\n                if ((num & nums[i - 1]) > 0)\n                    v[i][j]++;\n            }\n        }\n        // for (auto it : v) {\n        //     for (auto it2 : it)\n        //         cout << it2 << \" \";\n        //     cout << endl;\n        // }\n        ll ans = 0;\n        for (i = 1; i <= n; i++) {\n            ll l = 1, r = i;\n            for (j = 0; j < m; j++) {\n                ll num = 1LL << j;\n                bool flag1 = (num & nums[i - 1]);\n                bool flag2 = (num & k);\n                // cout<<flag1<<\" \"<<flag2<<\" ~ \";\n                if (flag1) {\n                    if (flag2) {\n                        ll curr = util(1, i, j, v);\n                        // cout<<curr<<\" \";\n                        l = max(l, curr);\n                    } else {\n                        ll curr = util(2, i, j, v);\n                        // cout << curr << \" ~ \";\n                        r = min(r, curr);\n                    }\n                } else {\n                    if (flag2) {\n                        r = 0;\n                        l = n + 1;\n                    }\n                }\n                // if (j > 5)\n                //     continue;\n                // cout << l << \" \" << r << \" | \";\n            }\n            ans += max(r - l + 1, 0LL);\n            // cout << endl;\n        }\n\n        return ans;\n    }\n};",
    "submit_ts": "1720281195",
    "subm_id": "1311816448"
}