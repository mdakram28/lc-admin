{
    "username": "coolli",
    "submission": "#include <bits/stdc++.h>\n#define fi first\n#define se second\n#define mk make_pair\n#define pii pair<int, int>\n#define pll pair<ll, ll>\n#define V vector\n#define pb push_back\n#define SZ(a) ((int)a.size())\n#define all(a) a.begin(), a.end()\n#define TP template <class o>\n#define TPP template <class t1, class t2>\n#define rep(i, a, b) for (int i = a, i##ed_ = b; i <= i##ed_; i++)\n#define REP(i, a, b) for (int i = b, i##st_ = a; i >= i##st_; i--)\n#define FOR(i, n) rep(i, 1, n)\n#define debug(x) cerr << #x << ' ' << '=' << ' ' << x << endl\nusing namespace std;\ntypedef double db;\ntypedef unsigned ui;\ntypedef long long ll;\ntypedef unsigned long long ull;\n\nTP bool cmax(o& x, o y) { return (x < y ? x = y, 1 : 0); }\nTP bool cmin(o& x, o y) { return (x > y ? x = y, 1 : 0); }\nTP void order(V<o> &a) { sort(all(a)); a.resize(unique(all(a)) - a.begin());}\nTP int get_id(V<o> &a, const o& val) {return lower_bound(all(a), val) - a.begin();}\nll power(ll a, ll b, ll mod) {ll c=1;for(;b;b/=2,a=a*a%mod)if(b&1)c=c*a%mod;return c;}\n\ntemplate<class T>\nstruct BIT {\n    int n; V<T> c; \n    BIT(int n) {init(n);}\n    void init(int n) {this->n = n; c.assign(n + 1, T());}\n    void add(int x, T y) { for( ;x <= n;x += x & -x) c[x] = c[x] + y; }\n    T sum(int x) {T y = c[0]; for( ; x; x &= x - 1) y = y + c[x]; return y; }\n    T sum(int l, int r) {return sum(r) - sum(l - 1);}\n};\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& q) {\n        int n = SZ(a);\n        BIT<int> bit(n);\n        V<int> ans, b(n);\n        auto upd = [&](int x) {\n            if(1 <= x && x < n - 1) {\n                int t = (a[x] > a[x - 1] && a[x] > a[x + 1]);\n                bit.add(x, t - b[x]);\n                b[x] = t;\n            }\n        };\n        rep(i, 1, n - 2) upd(i);\n        for(auto& i : q) {\n            if(i[0] == 2) {\n                a[i[1]] = i[2];\n                upd(i[1]);\n                upd(i[1] - 1);\n                upd(i[1] + 1);\n            } else {\n                if(i[2] - i[1] > 1) ans.pb(bit.sum(i[1] + 1, i[2] - 1));\n                else ans.pb(0);\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718506668.0
}