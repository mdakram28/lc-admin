{
    "username": "yumiysong",
    "submission": "class Solution {\n    public int maximumLength(int[] nums, int k) {\n        int[][] counts = new int[nums.length][k+1];\n        int[] next = new int[nums.length];\n        int j;\n        int max = 1;\n        for (int i = nums.length-1; i >= 0; --i) {\n            counts[i][0] = 1;\n            for (j = i+1; j < nums.length; ++j) {\n                if (nums[j] == nums[i]) {\n                    counts[i][0] = counts[j][0]+1;\n                    next[i] = j;\n                    break;\n                }\n            }\n            if (counts[i][0] > max) {\n                max = counts[i][0];\n            }\n        }\n        int i;\n        Integer rm1, rm2, rv1, rv2;\n        for (int a = 1; a <= k ; ++a) {\n            rm1 = null;\n            rv1 = null;\n            rm2 = null;\n            rv2 = null;\n            for (i = nums.length-1; i >= 0; --i) {\n                counts[i][a] = 0;\n                if (next[i] > 0) {\n                    counts[i][a] = Math.max(counts[i][a],counts[next[i]][a]+1);\n                }\n                if (rm1 != null && rm1 >= counts[i][a] && rv1 != nums[i]) {\n                    counts[i][a] = rm1+1;\n                } else if (rm2 != null && rm2 >= counts[i][a]) {\n                    counts[i][a] = rm2+1;\n                }\n                if (rm1 == null || counts[i][a-1] > rm1) {\n                    if (rv2 != null && nums[i] == rv2) {\n                        rm2 = rm1;\n                        rv2 = rv1;\n                    }\n                    rm1 = counts[i][a-1];\n                    rv1 = nums[i];\n                } else if (rm2 == null || counts[i][a-1] > rm2) {\n                    rm2 = counts[i][a-1];\n                    rv2 = nums[i];\n                }\n                if (counts[i][a] > max) {\n                    max = counts[i][a];\n                }\n            }\n        }\n        return max;\n    }\n}",
    "submit_ts": "1717862260",
    "subm_id": "1281817364"
}