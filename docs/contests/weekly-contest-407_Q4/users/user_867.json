{
    "username": "zhtt0-2",
    "submission": "class Solution {\npublic:\n    vector<pair<int, int>> tree;\n    void build(vector<int>& ans){\n        int n = ans.size();\n        tree = vector<pair<int, int>>(2*n);\n        for(auto i = n; i < 2*n; ++i){\n            tree[i] = {abs(ans[i-n]), i-n};\n        }\n        for(auto i = n-1; i >= 1; --i){\n            int l = 2*i;\n            int r = 2*i+1;\n            if(tree[l].first <= tree[r].first){\n                tree[i] = tree[l];\n            }else{\n                tree[i] = tree[r];\n            }\n        }\n        return;\n    } \n    pair<int, int> get(int l, int r){\n        if(r < l){\n            return {INT_MAX, 0};\n        }\n        if(l == r){\n            return tree[l];\n        }\n        auto ans = get((l+1)/2, (r-1)/2);\n        if(l % 2 == 1 && tree[l].first < ans.first){\n            ans = tree[l];\n        }\n        if(r % 2 == 0 && tree[r].first < ans.first){\n            ans = tree[r];\n        }\n        return ans;\n    }\n    long long get(int l, int r, int n, long long base){\n        //cout << \"get \" << l << \" \" << r << endl;\n        if(r < l){\n            return 0;\n        }\n        long long ret = 0;\n        auto [mi, idx] = get(l+n, r+n);\n        ret += mi - base;\n        ret += get(l, idx-1, n, mi);\n        ret += get(idx+1, r, n, mi);\n        //cout << \"get \" << l << \" \" << r << \" \" << ret << endl;\n        return ret;\n    }\n    long long minimumOperations(vector<int>& nums, vector<int>& target) {\n        int n = nums.size();\n        vector<int> a(n);\n        for(auto i = 0; i < n; ++i){\n            a[i] = target[i] - nums[i];\n        }\n        long long ans = 0;\n        build(a);\n        int pre = 0;\n        bool large = a[0] >= 0;\n        for(auto i = 1; i < n; ++i){\n            if((a[i] >= 0) != large){\n                ans += get(pre, i-1, n, 0);\n                pre = i;\n                large = a[i] >= 0;\n            }\n        }\n        ans += get(pre, n-1, n, 0);\n        return ans;\n    }\n};",
    "submit_ts": "1721532301",
    "subm_id": "548391541"
}