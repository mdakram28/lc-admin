{
    "username": "kmjp",
    "submission": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef signed long long ll;\n\n#undef _P\n#define _P(...) (void)printf(__VA_ARGS__)\n#define FOR(x,to) for(x=0;x<(to);x++)\n#define FORR(x,arr) for(auto& x:arr)\n#define FORR2(x,y,arr) for(auto& [x,y]:arr)\n#define ALL(a) (a.begin()),(a.end())\n#define ZERO(a) memset(a,0,sizeof(a))\n#define MINUS(a) memset(a,0xff,sizeof(a))\ntemplate<class T> bool chmax(T &a, const T &b) { if(a<b){a=b;return 1;}return 0;}\ntemplate<class T> bool chmin(T &a, const T &b) { if(a>b){a=b;return 1;}return 0;}\n//-------------------------------------------------------\n\nll LU2[505][505];\nll RU2[505][505];\nll LD2[505][505];\nll RD2[505][505];\n\nclass Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>& board) {\n        int H=board.size();\n        int W=board[0].size();\n        int y,x;\n        FOR(y,H+2) FOR(x,W+2) {\n\t\t\tLU2[y][x]=RU2[y][x]=LD2[y][x]=RD2[y][x]=-1LL<<60;\n\t\t}\n\t\t\n\t\tll tx[505];\n\t\tFOR(x,W+2) tx[x]=-1LL<<60;\n\t\tFOR(x,W) tx[x+1]=board[0][x];\n\t\tfor(y=2;y<=H;y++) {\n\t\t\tll px=tx[1];\n\t\t\tll cx=board[y-1][0];\n\t\t\tfor(x=2;x<=W;x++) {\n\t\t\t\tll px2=tx[x];\n\t\t\t\tll cx2=board[y-1][x-1];\n\t\t\t\tLU2[y][x]=max(px+cx2,px2+cx);\n\t\t\t\tLU2[y][x]=max(LU2[y][x],LU2[y-1][x]);\n\t\t\t\tLU2[y][x]=max(LU2[y][x],LU2[y][x-1]);\n\t\t\t\tpx=max(px,px2);\n\t\t\t\tcx=max(cx,cx2);\n\t\t\t}\n\t\t\tpx=tx[W];\n\t\t\tcx=board[y-1][W-1];\n\t\t\tfor(x=W-1;x>=1;x--) {\n\t\t\t\tll px2=tx[x];\n\t\t\t\tll cx2=board[y-1][x-1];\n\t\t\t\tRU2[y][x]=max(px+cx2,px2+cx);\n\t\t\t\tRU2[y][x]=max(RU2[y][x],RU2[y-1][x]);\n\t\t\t\tRU2[y][x]=max(RU2[y][x],RU2[y][x+1]);\n\t\t\t\tpx=max(px,px2);\n\t\t\t\tcx=max(cx,cx2);\n\t\t\t}\n\t\t\tFOR(x,W) tx[x+1]=max(tx[x+1],(ll)board[y-1][x]);\n\t\t}\n\t\tFOR(x,W+2) tx[x]=-1LL<<60;\n\t\tFOR(x,W) tx[x+1]=board[H-1][x];\n\t\tfor(y=H-1;y>=1;y--) {\n\t\t\tll px=tx[1];\n\t\t\tll cx=board[y-1][0];\n\t\t\tfor(x=2;x<=W;x++) {\n\t\t\t\tll px2=tx[x];\n\t\t\t\tll cx2=board[y-1][x-1];\n\t\t\t\tLD2[y][x]=max(px+cx2,px2+cx);\n\t\t\t\tLD2[y][x]=max(LD2[y][x],LD2[y+1][x]);\n\t\t\t\tLD2[y][x]=max(LD2[y][x],LD2[y][x-1]);\n\t\t\t\tpx=max(px,px2);\n\t\t\t\tcx=max(cx,cx2);\n\t\t\t}\n\t\t\tpx=tx[W];\n\t\t\tcx=board[y-1][W-1];\n\t\t\tfor(x=W-1;x>=1;x--) {\n\t\t\t\tll px2=tx[x];\n\t\t\t\tll cx2=board[y-1][x-1];\n\t\t\t\tRD2[y][x]=max(px+cx2,px2+cx);\n\t\t\t\tRD2[y][x]=max(RD2[y][x],RD2[y+1][x]);\n\t\t\t\tRD2[y][x]=max(RD2[y][x],RD2[y][x+1]);\n\t\t\t\tpx=max(px,px2);\n\t\t\t\tcx=max(cx,cx2);\n\t\t\t}\n\t\t\tFOR(x,W) tx[x+1]=max(tx[x+1],(ll)board[y-1][x]);\n\t\t}\n\t\t\n\t\tll ret=-1LL<<60;\n\t\tFOR(y,H) FOR(x,W) {\n\t\t\tret=max(ret,board[y][x]+LU2[y][x]);\n\t\t\tret=max(ret,board[y][x]+RU2[y][x+2]);\n\t\t\tret=max(ret,board[y][x]+LD2[y+2][x]);\n\t\t\tret=max(ret,board[y][x]+RD2[y+2][x+2]);\n\t\t\t//cout<<board[y][x]<<\" \"<<LU2[y][x]<<\" \"<<RU2[y][x+2]<<\" \"<<LD2[y+2][x]<<\" \"<<RD2[y+2][x+2]<<\" \"<<ret<<endl;\n\t\t}\n\t\treturn ret;\n\t\t\n        \n        \n    }\n};\n",
    "submit_ts": "1723907386",
    "subm_id": "1359104987"
}