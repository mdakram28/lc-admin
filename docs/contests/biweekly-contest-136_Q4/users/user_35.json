{
    "username": "fan-fan-fan-a9",
    "submission": "int c (int x) {\n    return 2 - (x & 1);\n}\n\ntemplate <typename T> bool chmax(T &x, T y) { if (y > x) { x = y; return true; } return false; }\n\nclass Solution {\npublic:\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n = 2;\n        for (auto& p: edges) {\n            chmax(n, p[0] + 1);\n            chmax(n, p[1] + 1);\n        }\n        vector<vector<int>> e(n);\n        for (auto& p: edges) {\n            int u = p[0];\n            int v = p[1];\n            e[u].push_back(v);\n            e[v].push_back(u);\n        }\n        vector<int> f(n), g(n), w(n);\n        auto dfs1 = [&](auto&& self, int u, int fa) -> void {\n            for (int v: e[u]) {\n                if (v == fa) {\n                    continue;\n                }\n                self(self, v, u);\n                int res = c(v) + f[v];\n                if (res > f[u]) {\n                    g[u] = f[u];\n                    f[u] = res;\n                    w[u] = v;\n                } else if (res > g[u]) {\n                    g[u] = res;\n                }\n            }\n        };\n        dfs1(dfs1, 0, 0);\n        \n        vector<int> ans(n);\n        auto dfs2 = [&](auto&& self, int u, int fa, int up) -> void {\n            ans[u] = max(f[u], up);\n            for (int v: e[u]) {\n                if (v == fa) {\n                    continue;\n                }\n                int v_up = up;\n                if (v == w[u]) {\n                    chmax(v_up, g[u]);\n                } else {\n                    chmax(v_up, f[u]);\n                }\n                v_up += c(u);\n                self(self, v, u, v_up);\n            }\n        };\n        dfs2(dfs2, 0, 0, 0);\n        \n        return ans;\n    }\n};",
    "submit_ts": "1722697417",
    "subm_id": "552266018"
}