{
    "username": "zhongnrrxs",
    "submission": "const int N = 1005;\nclass Solution {\npublic:\n    long long f[N][N][2];\n    long long pr[N][N];\n    long long v[N];\n    long long ans;\n\n    long long max_weights (int n, int m, std::vector<std::vector<int>> g) {\n        for(int i=1;i<=n;i++) \n            for(int j=1;j<=m;j++) \n                pr[i][j]=g[i-1][j-1];\n        for(int i=1;i<=n;i++) \n            for(int j=1;j<=m;j++) \n                pr[i][j]+=pr[i][j-1];\n        for(int i=0;i<=n;i++)\n            for(int j=0;j<=m;j++) f[i][j][0]=f[i][j][1]=-1e15;\n        f[0][0][0] = 0;\n        for(int i=1;i<=n;i++) {\n            for(int h=0;h<=8;h++) v[h] = 0;\n            for(int h=0;h<=m;h++) {\n                if (i-1>=0) v[1] = max(v[1],f[i-1][h][0]-pr[i-1][h]);\n                if (i-2>=0) v[2] = max(v[2],f[i-2][h][0]);\n                if (i-3>=0) v[7] = max(v[7],f[i-3][h][1]+pr[i-2][h]);\n                if (i-3>=0) v[8] = max(v[8],f[i-3][h][0]+pr[i-2][h]);\n                f[i][h][0] = max({f[i][h][0],v[1]+pr[i-1][h],v[2]+pr[i-1][h]});\n            }\n            for(int h=m;h>=0;h--) {\n                if (i-1>=0) v[3] = max(v[3],f[i-1][h][1]+pr[i][h]);\n                if (i-2>=0) v[4] = max(v[4],f[i-2][h][1]+pr[i-1][h]);\n                if (i-1>=0) v[5] = max(v[5],f[i-1][h][0]+pr[i][h]);\n                if (i-2>=0) v[6] = max(v[6],f[i-2][h][0]+pr[i-1][h]);\n                f[i][h][1] = max({f[i][h][1],v[3]-pr[i][h],v[4],v[5]-pr[i][h],v[6]});\n            }\n            for(int h=0;h<=m;h++) {\n                f[i][h][0] = max({f[i][h][0],v[7]+pr[i-1][h],v[8]+pr[i-1][h]});\n            }\n        }\n        for(int i=1;i<=n;i++) \n            for(int h=0;h<=m;h++) {\n                ans = max(ans,f[i][h][1]+(pr[i+1][h]));\n                ans = max(ans,f[i][h][0]+(pr[i+1][h]));\n            }\n        return ans;\n    }\n\n    std::vector<std::vector<int>> rotate(std::vector<std::vector<int>> &grid){\n        int n=grid.size(),m=grid[0].size();\n        std::vector<std::vector<int>> res(m,std::vector<int> (n));\n        for(int i=0,jj=n-1;i<n;i++,jj--){\n            for(int j=0,ii=0;j<m;j++,ii++){\n                res[ii][jj]=grid[i][j];\n            }\n        }\n        return res;\n    };\n    long long maximumScore(vector<vector<int>>& g) {\n        int n=g.size(),m=g[0].size();\n        for(int i=0,j=n-1;i<j;i++,j--) swap(g[i],g[j]);\n\t    g=rotate(g);\n        return max_weights(m,n,g);\n    }\n};",
    "submit_ts": "1721489424",
    "subm_id": "548318714"
}