{
    "username": "ddd-a",
    "submission": "class Solution {\npublic:\n    static const int maxn = 1e5+10;\n    int r[maxn];\n    int segTree[maxn<<2];\n    void build(int x,int l,int r){\n        if(l == r){\n            segTree[x] = r + 1;\n            return ;\n        }\n        int id = x<<1,mid = (l+r)>>1;\n        build(id,l,mid);\n        build(id+1,mid+1,r);\n        segTree[x] = max(segTree[id],segTree[id+1]);\n    }\n    int query(int x,int l,int r,int ql,int qr){\n        if(l > qr || r < ql)return 0;\n        if(l >= ql && r <= qr)return segTree[x];\n        int id = x<<1,mid = (l+r)>>1;\n        return max(query(id,l,mid,ql,qr),query(id+1,mid+1,r,ql,qr));\n    }\n    void update(int x,int l,int r,int upos,int uval){\n        if(l > upos || r<upos)return ;\n        if(l ==r){\n            segTree[x] = uval;\n            return ;\n        }\n        int id = x<<1,mid = (l+r)>>1;\n        update(id,l,mid,upos,uval);\n        update(id+1,mid+1,r,upos,uval);\n        segTree[x] = max(segTree[id],segTree[id+1]);\n    }\n    vector<int> shortestDistanceAfterQueries(int n, vector<vector<int>>& queries) {\n        vector<int>res;\n        int len = n - 1;\n        set<int>p;\n        build(1,1,n);\n        for(int i = 0;i<n;++i)r[i] = i + 1;\n        for(auto q:queries){\n            int u = q[0];\n            int v = q[1];\n            // cout<<query(1,1,n,1,2)<<endl;\n            if(query(1,1,n,1,u + 1) >= v + 1){\n                res.push_back(len);\n                continue;\n            }\n            for(auto it = p.lower_bound(u);it != p.end() && *it<v;++it){\n                len += r[*it] - *it - 1;\n            }\n            for(auto it = p.lower_bound(u);it != p.end() && *it<v;){\n                it = p.erase(it);\n            }\n            len -= v - u - 1;\n            r[u] = v;\n            // cout<<u<<\" \"<<v<<\"Fk\"<<endl;\n            res.push_back(len);\n            p.insert(u);\n            update(1,1,n,u + 1, v + 1);\n            // cout<<v+1<<\"Fk\"<<endl;\n            // cout<<query(1,1,n,1,u + 1)<<endl;\n        }\n        return res;\n    }\n};",
    "submit_ts": "1722741419",
    "subm_id": "552338081"
}