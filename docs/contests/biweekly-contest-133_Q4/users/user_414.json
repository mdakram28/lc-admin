{
    "username": "aadritoD",
    "submission": "\nusing ll = long long;\n\n\nconst ll MOD = 1000000007;\nstruct Mint {\n    \n    ll num;\n    \n    Mint() : num(0) {}\n    \n    Mint(ll val) : num(val) {\n        num %= MOD;\n        num += MOD;\n        num %= MOD;\n    }\n    \n    Mint operator+(const Mint& other) const {\n        return Mint(num + other.num);\n    }\n    \n    void operator+=(const Mint& other) {\n        num += other.num;\n        num %= MOD;\n        num += MOD;\n        num %= MOD;\n    }\n    \n};\n\nclass Solution {\npublic:\n    \n    \n    Mint _dp(int n, int inv, const vector<int>& req_table, vector<vector<Mint>>& dp_table, vector<vector<bool>>& dp) {\n        if (inv < 0) {\n            return Mint(0);\n        }\n        if (n == 1) {\n            return (req_table[1] == 0 || req_table[1] == -1) && inv == 0;\n        }\n        if (dp[n][inv]) {\n            return dp_table[n][inv];\n        }\n        if (req_table[n - 1] != -1) {\n            int diff = inv - req_table[n - 1];\n            if (diff > n - 1 || diff < 0) {\n                dp_table[n][inv] = Mint(0);\n                dp[n][inv] = true;\n                return Mint(0);\n            }\n            Mint ans = _dp(n - 1, req_table[n - 1], req_table, dp_table, dp);\n            dp_table[n][inv] = ans;\n            dp[n][inv] = true;\n            return ans;\n        }\n        Mint ans = Mint(0);\n        for (int prev_inv = max(0, inv - (n - 1)); prev_inv <= inv; prev_inv++) {\n            ans += _dp(n - 1, prev_inv, req_table, dp_table, dp);\n        }\n        dp_table[n][inv] = ans;\n        dp[n][inv] = true;\n        return ans;\n    }\n    \n    \n    int numberOfPermutations(int n, vector<vector<int>>& requirements) {\n        vector<int> perm(n);\n        vector<int> req_table(n + 1, -1);\n        for (auto& req : requirements) {\n            req_table[req[0] + 1] = req[1];\n        }\n        vector<vector<Mint>> dp_table(n + 1, vector<Mint>(req_table[n] + 1, 0));\n        vector<vector<bool>> dp(n + 1, vector<bool>(req_table[n] + 1, false));\n        Mint ans = _dp(n, req_table[n], req_table, dp_table, dp);\n        return ans.num;\n    }\n};",
    "submit_ts": 1719069837.0
}