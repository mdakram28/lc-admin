{
    "username": "msp_008987",
    "submission": "#include <ext/pb_ds/assoc_container.hpp> \n#include <ext/pb_ds/tree_policy.hpp> \nusing namespace __gnu_pbds; \n  \n#define ordered_set tree<int, null_type,less<int>, rb_tree_tag,tree_order_statistics_node_update> \nclass Solution {\n    \npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n=nums.size();\n         ordered_set s;\n        for(int i=1;i<(n-1);i++)\n        {\n            if(nums[i]>nums[i-1] && nums[i]>nums[i+1]){s.insert(i);}\n            \n        }\n        vector<int> ans;\n        \n        for(auto i:queries)\n        {\n            if(i[0]==1)\n            {\n                if((i[1]+1)<=i[2]){\n                ans.push_back(s.order_of_key(i[2])-s.order_of_key(i[1]+1));}\n                else{ans.push_back(0);}\n               \n                \n                \n            }\n            else{\n                nums[i[1]]=i[2];\n                if((i[1]-2)>=0)\n                {\n                    if(nums[i[1]-1]>nums[i[1]-2] && nums[i[1]-1]>nums[i[1]])\n                    {\n                        if(s.find(i[1]-1)==s.end()){s.insert(i[1]-1);}\n                    }\n                    else{\n                        if(s.find(i[1]-1)!=s.end()){s.erase(i[1]-1);}\n                    }\n                }\n                if((i[1]-1)>=0 && (i[1]+1)<n)\n                {\n                    if(nums[i[1]]>nums[i[1]-1] && nums[i[1]]>nums[i[1]+1])\n                    {\n                        if(s.find(i[1])==s.end()){s.insert(i[1]);}\n                    }\n                    else{\n                        if(s.find(i[1])!=s.end()){s.erase(i[1]);}\n                    }\n                    \n                }\n                if((i[1]+2)<n)\n                {\n                    if(nums[i[1]+1]>nums[i[1]] && nums[i[1]+1]>nums[i[1]+2])\n                    {\n                        if(s.find(i[1]+1)==s.end()){s.insert(i[1]+1);}\n                    }\n                    else{\n                        if(s.find(i[1]+1)!=s.end()){s.erase(i[1]+1);}\n                    }\n                }\n                \n            }\n        }\n        return ans;\n        \n    }\n};",
    "submit_ts": 1718508974.0
}