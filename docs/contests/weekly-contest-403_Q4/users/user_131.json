{
    "username": "anh_tai",
    "submission": "int min_x[30][30][30][30]; \nint max_x[30][30][30][30]; \nint min_y[30][30][30][30]; \nint max_y[30][30][30][30]; \n\nclass Solution {\npublic:\n    int minimumSum(vector<vector<int>>& grid) {\n        const int oo = 1e9; \n        int h = grid.size();\n        int w = grid[0].size(); \n        for (int r1 = 0; r1 < h; r1++){\n            for (int c1 = 0; c1 < w; c1++){\n                for (int r2 = r1; r2 < h; r2++){\n                    for (int c2 = c1; c2 < w; c2++){\n                        min_x[r1][c1][r2][c2] = oo; \n                        min_y[r1][c1][r2][c2] = oo; \n                        max_x[r1][c1][r2][c2] = -oo; \n                        max_y[r1][c1][r2][c2] = -oo; \n                    }\n                }\n                \n                for (int r2 = r1; r2 < h; r2++){\n                    for (int c2 = c1; c2 < w; c2++){\n                        if (r2 > r1){\n                            min_x[r1][c1][r2][c2] = min(min_x[r1][c1][r2][c2], min_x[r1][c1][r2-1][c2]);\n                            min_y[r1][c1][r2][c2] = min(min_y[r1][c1][r2][c2], min_y[r1][c1][r2-1][c2]);\n                            max_x[r1][c1][r2][c2] = max(max_x[r1][c1][r2][c2], max_x[r1][c1][r2-1][c2]);\n                            max_y[r1][c1][r2][c2] = max(max_y[r1][c1][r2][c2], max_y[r1][c1][r2-1][c2]);\n                        }\n                        if (c2 > c1){\n                            min_x[r1][c1][r2][c2] = min(min_x[r1][c1][r2][c2], min_x[r1][c1][r2][c2-1]);\n                            min_y[r1][c1][r2][c2] = min(min_y[r1][c1][r2][c2], min_y[r1][c1][r2][c2-1]);\n                            max_x[r1][c1][r2][c2] = max(max_x[r1][c1][r2][c2], max_x[r1][c1][r2][c2-1]);\n                            max_y[r1][c1][r2][c2] = max(max_y[r1][c1][r2][c2], max_y[r1][c1][r2][c2-1]);\n                        }\n                        if (grid[r2][c2] == 1){\n                            min_x[r1][c1][r2][c2] = min(min_x[r1][c1][r2][c2], r2);\n                            min_y[r1][c1][r2][c2] = min(min_y[r1][c1][r2][c2], c2);\n                            max_x[r1][c1][r2][c2] = max(max_x[r1][c1][r2][c2], r2);\n                            max_y[r1][c1][r2][c2] = max(max_y[r1][c1][r2][c2], c2);\n                        }\n                    }\n                }\n            }\n        }\n        \n        auto calc = [&](int r1, int c1, int r2, int c2) -> long long {\n            int lo_x = min_x[r1][c1][r2][c2];\n            int hi_x = max_x[r1][c1][r2][c2];\n            int lo_y = min_y[r1][c1][r2][c2];\n            int hi_y = max_y[r1][c1][r2][c2];\n            //cout << r1 << \" \" << c1 << \" \" << r2 << \" \" << c2 << \" \" << (hi_x - lo_x + 1) * (hi_y - lo_y + 1) << \"\\n\" ;\n            return 1LL * (hi_x - lo_x + 1) * (hi_y - lo_y + 1); \n        };\n        \n        long long ans = 1e18;\n        // 3 rows;\n        for (int r1 = 0; r1 < h; r1++){\n            for (int r2 = r1 + 1; r2 < h-1; r2++){\n                ans = min(ans, calc(0,0,r1,w-1) + calc(r1+1,0,r2,w-1) + calc(r2+1,0,h-1,w-1));\n            }\n        }\n        // 3 cols; \n        for (int c1 = 0; c1 < w; c1++){\n            for (int c2 = c1 + 1; c2 < w - 1; c2++){\n                ans = min(ans, calc(0,0,h-1,c1) + calc(0,c1+1,h-1,c2) + calc(0,c2+1,h-1,w-1)); \n            }\n        }\n        // first cut horizontal;\n        for (int r = 0; r < h-1; r++){\n            for (int c = 0; c < w - 1; c++){\n                 ans = min(ans, calc(0,0,r,w-1) + calc(r+1,0,h-1,c) + calc(r+1,c+1,h-1,w-1));   \n                 ans = min(ans, calc(r+1,0,h-1,w-1) + calc(0,0,r,c) + calc(0,c+1,r,w-1));\n            }    \n        }\n        // first cut vertical; \n        for (int c = 0; c < w-1; c++){\n            for (int r = 0; r < h-1; r++){\n                ans = min(ans, calc(0,0,h-1,c) + calc(0,c+1,r+1,w-1) + calc(r+1,c+1,h-1,w-1));\n                ans = min(ans, calc(0,c+1,h-1,w-1) + calc(0,0,r,c) + calc(r+1,0,h-1,c));\n            }\n        }\n        \n        return ans; \n    }\n};",
    "submit_ts": "1719112873",
    "subm_id": "1297311183"
}