{
    "username": "ni-hong-ge",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        long long ans = 0;\n        int n = nums.size();\n        vector<bool> v(n);\n        for (int i = 0; i < n; i++) {\n            if ((nums[i] & k) == k) {\n                v[i] = true;\n            }\n        }\n        long long l = 0, s = LONG_LONG_MAX;\n        vector<int> cnt(32, 0);\n        for (int i = 0; i < n; i++) {\n            if (v[i]) {\n                ;\n            } else {\n                int r=l;\n                for (int j = l; j < i; j++) {\n                    while(s!=k&&r<i){\n                        for (int ii = 0; ii < 32; ii++) {\n                            if (!(nums[r] & (1 << ii))) {\n                                cnt[ii] ++;\n                            }\n                        }\n                        s&=nums[r++];\n                    }\n                    if(s==k){\n                        ans += i-r+1;\n                        for (int ii = 0; ii < 32; ii++) {\n                            if (!(nums[l] & (1 << ii))) {\n                                cnt[ii] --;\n                                if(!cnt[ii]){\n                                    s+=(1<<ii);\n                                }\n                            }\n                        }\n                        l++;\n                    }\n                    // cout<<\"s=\"<<s<<\" ans=\"<<ans<<endl;\n                }\n                for(int i=0;i<32;i++){\n                    cnt[i]=0;\n                }\n                s = LONG_LONG_MAX;\n                l = i + 1;\n            }\n        }\n\n        // cout << \"ans=\" << ans << endl;\n        int r=l;\n        for (int j = l; j < n; j++) {\n            while(s!=k&&r<n){\n                for (int ii = 0; ii < 32; ii++) {\n                    if (!(nums[r] & (1 << ii))) {\n                        cnt[ii] ++;\n                    }\n                }\n                s&=nums[r++];\n            }\n            if(s==k){\n                ans += n-r+1;\n                for (int ii = 0; ii < 32; ii++) {\n                    if (!(nums[l] & (1 << ii))) {\n                        cnt[ii] --;\n                        if(!cnt[ii]){\n                            s+=(1<<ii);\n                        }\n                    }\n                }\n                l++;\n            }\n            // cout<<\"s=\"<<s<<\" ans=\"<<ans<<endl;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720280656",
    "subm_id": "544572828"
}