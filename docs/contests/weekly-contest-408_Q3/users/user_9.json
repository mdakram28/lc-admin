{
    "username": "brenner1",
    "submission": "#include \"bits/stdc++.h\"\nusing namespace std;\n\n#define endl '\\n'\n#define rep(i, a, b) for (int i = a; i < (b); i++)\n#define all(x) (x).begin(), (x).end()\n#define rall(x) (x).rbegin(), (x).rend()\n#define sz(x) (int)(x).size()\n#define sq(x) (x)*(x)\ntemplate<class T, class U> inline void chmin(T& a, U b) { if (a > b) a = b; }\ntemplate<class T, class U> inline void chmax(T& a, U b) { if (a < b) a = b; }\nmt19937 rng((int) chrono::steady_clock::now().time_since_epoch().count());\ntypedef long long ll;\ntypedef long double ld;\ntypedef __int128 i128;\n\nclass Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        int n = sz(s);\n        vector<int> pos;\n        rep(i, 0, n) if (s[i] == '0') pos.push_back(i);\n\n        ll ans = 0;\n        for (int i = n - 1; i >= 0; i--) {\n            if (sz(pos) && pos.back() > i) pos.pop_back();\n            if (sz(pos)) {\n                ans += i - pos.back();\n                for (int j = sz(pos) - 1; j >= 0; j--) {\n                    int zeros = sz(pos) - j;\n                    if (zeros*zeros >= n) break;\n                    int ones = (i - pos[j] + 1) - zeros;\n                    int need = max(0, zeros*zeros - ones);\n                    int nxt = (j > 0 ? pos[j - 1] + 1 : 0);\n                    ans += max(0, pos[j] - nxt + 1 - need);\n                }\n            } else {\n                ans += i + 1;\n            }\n        }\n        return ans;\n    }\n};\n\n",
    "submit_ts": "1722134701",
    "subm_id": "1335675335"
}