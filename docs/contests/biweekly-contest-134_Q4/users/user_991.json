{
    "username": "cai-liao-xian-zhi",
    "submission": "class Solution {\npublic:\n    static const int N = 31;\n    int f(vector<vector<int>> &s,int l,int r){\n        int ans = 0;\n        for(int i=0;i<N;++i){\n            if(s[r+1][i]-s[l][i]==r-l+1)ans |= (1<<i);\n        }\n        return ans;\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n = nums.size();\n        vector<vector<int>>s(n+1,vector<int>(N));\n        for(int i=0;i<n;++i){\n            for(int j=0;j<N;++j){\n                s[i+1][j] = s[i][j];\n                if(nums[i]&(1<<j))s[i+1][j]++;\n            }\n        }\n        long long ans = 0, res = -1;\n        int x = nums[0];\n        for(int i=0;i<n;++i){\n            //x &= nums[i];\n            //if(x>k)continue;\n            int l = 0, r = i, res = -1;\n            while(l<=r){\n                int m = (l+r)>>1, y = f(s,m,i);\n                if(y>k)r = m-1;\n                else if(y<k)l = m+1;\n                else{\n                    res = m;\n                    r = m-1;\n                }\n            }\n            if(res==-1)continue;\n            int L = res;\n            l = 0, r = i, res = -1;\n            while(l<=r){\n                int m = (l+r)>>1, y = f(s,m,i);\n                if(y>k)r = m-1;\n                else if(y<k)l = m+1;\n                else{\n                    res = m;\n                    l = m+1;;\n                }\n            }\n            ans += res-L+1;\n            //cout<<i<<\" \"<<ans<<endl;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720280145",
    "subm_id": "544570715"
}