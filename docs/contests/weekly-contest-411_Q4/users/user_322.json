{
    "username": "Ryuzaki__L",
    "submission": "class Solution {\npublic:\n    #define ll long long\n    vector<long long> countKConstraintSubstrings(string s, int k, vector<vector<int>>& qu){\n        ll l=0,n=s.size(),c1=0,c2=0;\n        vector<int> v(n),left(n);\n        for(ll i=0;i<n;i++){\n            if(s[i]=='0')\n                c1++;\n            else\n                c2++;\n            if(c1<=k || c2<=k)\n                v[i]=i-l+1,left[i]=l;\n            else{\n                while(c1>k && c2>k){\n                    if(s[l]=='0')\n                        c1--;\n                    else\n                        c2--;\n                    l++;\n                }\n                v[i]=i-l+1;\n                left[i]=l;\n            }\n            // cout<<left[i]<<\" \";\n        }\n        vector<ll> pre(n+1),p(n+1);\n        for(ll i=0;i<n;i++){\n            pre[i+1]=pre[i]+v[i];\n            p[i+1]=p[i]+left[i];\n        }\n        vector<ll> ans;\n        for(auto &q:qu){\n            ll t=pre[q[1]+1]-pre[q[0]];\n            // if(q[0]==0)\n            // t++;\n            auto it=lower_bound(left.begin(),left.end(),q[0])-left.begin();\n            it=min((int)it,q[1]+1);\n            it-=q[0];\n            // cout<<it<<\" \";\n            if(it!=0){\n                t-=(it*(q[0])-(p[it+q[0]]-p[q[0]]));\n            }\n            ans.push_back(t);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1723950712",
    "subm_id": "1359753052"
}