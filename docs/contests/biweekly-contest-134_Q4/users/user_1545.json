{
    "username": "mighty__sharath",
    "submission": "class Solution {\npublic:\n    int prefix_count[32][100001];\n \n        void findPrefixCount(vector<int> arr, int n)\n        {\n            for (int i = 0; i < 32; i++) {\n                prefix_count[i][0] = ((arr[0] >> i) & 1);\n                for (int j = 1; j < n; j++) {\n                    prefix_count[i][j] = ((arr[j] >> i) & 1);\n                    prefix_count[i][j] += prefix_count[i][j - 1];\n                }\n            }\n        }\n\n        // Function to answer query\n        int rangeAnd(int l, int r)\n        {\n            int ans = 0;\n            for (int i = 0; i < 32; i++) {\n                int x;\n                if (l == 0){\n                    x = prefix_count[i][r];\n                }\n                else{\n                    x = prefix_count[i][r]- prefix_count[i][l - 1];\n                }\n                if (x == r - l + 1){\n                    ans = (ans | (1 << i));\n                }\n            }\n\n            return ans;\n        }\n    long long countSubarrays(vector<int>& nums, int k){\n        int n=nums.size();\n        findPrefixCount(nums,n);\n        long long ans=0;\n        for(int i=0;i<n;i++){\n            if((nums[i]&k)!=k){\n                continue;\n            }\n            int start=0,end=0;\n            int low=i;\n            int high=n-1;\n            while(high-low>1){\n                int mid=(high+low)/2;\n                if(rangeAnd(i,mid)<=k){\n                    high=mid;\n                }\n                else{\n                    low=mid;\n                }\n            }\n            // cout<<i<<\" \";\n            if(rangeAnd(i,low)==k){\n                start=low;\n            }\n            else if(rangeAnd(i,high)==k){\n                start=high;\n            }\n            else{\n                // cout<<i<<endl;\n                continue;\n            }\n            low=i;\n            high=n-1;\n            while(high-low>1){\n                int mid=(high+low)/2;\n                if(rangeAnd(i,mid)<k){\n                    high=mid;\n                }\n                else{\n                    low=mid;\n                }\n            }\n            if(rangeAnd(i,high)==k){\n                end=high;\n            }\n            else{\n                end=low;\n            }\n            // cout<<i<<\" \"<<end<<\" \"<<start<<endl;\n            ans+=(end-start+1);\n        }\n        // cout<<endl;\n        return ans;\n    }\n};",
    "submit_ts": "1720280793",
    "subm_id": "1311802242"
}