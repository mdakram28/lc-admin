{
    "username": "user3087gX",
    "submission": "using ll = long long;\nusing PI = pair<int,int>;\nclass Solution {\npublic:\n    long long fn(int i , int cnt ,int r1 , int r2, vector<vector<PI>> &temp\n    ,vector<vector<vector<vector<ll>>>> &dp){\n        if(cnt==3) return 0;\n        if(i==temp.size()) return -1e15;\n        if(dp[i][cnt][r1][r2]!=-1e15) return dp[i][cnt][r1][r2];\n        long long ans = -1e15;\n        for(int j = 0 ; j<3 ; j++){\n            if(cnt==0){\n                ans = max(ans , temp[i][j].first + fn(i+1 , 1 , temp[i][j].second,r2 , temp,dp));\n            }\n            if(cnt==1 && temp[i][j].second!=r1){\n                ans = max(ans , temp[i][j].first + fn(i+1 , 2 , r1 , temp[i][j].second,temp,dp));\n            }\n            if(cnt==2 && temp[i][j].second!=r1 && temp[i][j].second!=r2){\n                ans = max(ans , temp[i][j].first + fn(i+1 , 3 , r1 , r2 , temp,dp));\n            }\n        }\n        ans = max(ans , fn(i+1 , cnt , r1 , r2 , temp , dp));\n        return dp[i][cnt][r1][r2] = ans;\n    }\n    long long maximumValueSum(vector<vector<int>>& board) {\n        int m = board.size() , n = board[0].size();\n        vector<vector<vector<vector<ll>>>> dp(m , \n            vector<vector<vector<ll>>>(3,\n                vector<vector<ll>>(n+1,\n                    vector<ll>(n+1 , -1e15)\n                )\n            )\n        );\n        vector<vector<PI>> temp(m , vector<PI> (n));\n        for(int i = 0 ; i<m ; i++){\n            for(int j = 0 ; j<n ; j++){\n                temp[i][j] = {board[i][j] , j};\n            }\n            sort(rbegin(temp[i]) , rend(temp[i]));\n        }\n        return fn(0 , 0, n, n , temp , dp);\n    }\n};",
    "submit_ts": "1723909740",
    "subm_id": "1359203985"
}