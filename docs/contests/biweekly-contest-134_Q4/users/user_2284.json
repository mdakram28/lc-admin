{
    "username": "U7KARSH",
    "submission": "class Solution {\npublic:\nlong long countSubarrays(vector<int>& nums, int k) \n{\n    map<int,int> m;\n    map<int,int> m1,m2,m3;\n    int n = nums.size();\n    for (int i = 0; i < n; i++)\n    {\n        if ((nums[i]&k)<k)\n        {\n            m[i]++;\n        }\n        \n    }\n    m[n]++;\n    long long int x{0},y{0},z{-1}, p, ans{0};\n    while (y<n)\n    {\n        if ((nums[y]&k)<k)\n        {\n            m1.clear();\n            m2.clear();\n            z = -1;\n            y++;\n            x = y;\n            continue;\n        }\n        if (z==-1)\n        {\n            z = nums[y];\n        }\n        else\n        {\n            z = (z&nums[y]);\n        }\n        p = nums[y];\n        if (m3[y]==0)\n        {\n            for (long long j = 0; j < 31; j++)\n            {\n                if ((p&(1LL<<j)))\n                {\n                    m1[j]++;    \n                }\n                else\n                {\n                    m2[j]++;\n                }\n            }\n            m3[y]++;\n        }\n        \n        if (z==k)\n        {\n            auto it = m.upper_bound(y);\n            ans += it->first - y;\n            p = nums[x];\n            x++;\n            if (x>y)\n            {\n                z = -1;\n                y = x;\n                m1.clear();\n                m2.clear();\n            }\n            else\n            {\n                for (long long j = 0; j < 31; j++)\n                {\n                    if ((p&(1LL<<j)))\n                    {\n                        m1[j]--;    \n                    }\n                    else\n                    {\n                        m2[j]--;\n                        if (m2[j]==0)\n                        {\n                            if (m1[j])\n                            {\n                                z |= (1LL<<j);\n                            }   \n                        }\n                        \n                    }\n                }\n            }\n            \n        }\n        else\n        {\n            y++;\n        }\n        \n    }\n    return ans;\n}\n};",
    "submit_ts": "1720281196",
    "subm_id": "1311816495"
}