{
    "username": "Ma_Lin",
    "submission": "class Solution {\npublic:\n    int f[100005], K;\n    void ins(int p){\n        if (p == 0) return;\n        while (p <= K){\n            ++f[p];\n            p += (p & (p ^ (p-1)));\n        }        \n    }\n\n    int calc(int p){\n        int v = 0;\n        while (p){\n            v += f[p];\n            p -= (p & (p ^ (p-1))); \n        }\n\n        return v;\n    }\n    \n    int minChanges(vector<int>& a, int KK) {\n        int i, j, x, n = a.size(), cnt[100005], l, r;\n        int res = n / 2;\n        K = KK;\n        for (i = 0; i <= K; ++i) cnt[i] = 0;\n        vector<int> ev[100005];\n        for (i = 0; n - 1 - i > i; ++i){\n            ev[a[i]].push_back(a[n - 1 - i]);\n            x = labs(a[i] - a[n - 1 - i]);\n            cnt[x]++;\n        }\n        \n        for (x = 0; 2 * x < K + 2; ++x) res = min(res, n / 2 - cnt[x]);\n\n        for (i = 1; i <= K; ++i) f[i] = 0;\n        l = K - x + 1; r = x - 1;\n        for (i = l; i <= r; ++i) \n            for (auto h : ev[i])\n                ins(h);\n        \n        for (; x <= K; ++x){\n            while (l > K - x + 1){\n                --l;\n                for (auto h : ev[l]) ins(h);\n            }\n            \n            while (r < x - 1){\n                ++r;\n                for (auto h : ev[r]) ins(h);\n            }\n            \n            j = calc(x - 1) - calc(K - x);\n            res = min(res, n / 2 - cnt[x] + j);\n        }\n        \n        return res;\n    }\n};",
    "submit_ts": "1721487400",
    "subm_id": "1327387387"
}