{
    "username": "incognito123",
    "submission": "#define ll long long\n\nconst ll NN=1e5;\nll seg_tree[4*NN];\n\nclass Solution {\npublic:\n    void update(ll v,ll tl,ll tr,ll id,ll val){\n        if(tl==id && tr==id){\n            seg_tree[v]=val;\n            return ;\n        }\n        if(tl>id||tr<id){\n            return ;\n        }\n        ll tm=(tl+tr)/2;\n        update(v*2,tl,tm,id,val);\n        update(v*2+1,tm+1,tr,id,val);\n        seg_tree[v]=seg_tree[2*v]+seg_tree[2*v+1];\n        return ;\n    }\n\n    ll query(ll v,ll tl,ll tr,ll l,ll r){\n        if(tr<l||tl>r){\n            return 0;\n        }\n        if(l<=tl&&tr<=r){\n            return seg_tree[v];\n        }\n        ll tm=(tl+tr)/2;\n        auto p1=query(v*2,tl,tm,l,r);\n        auto p2=query(v*2+1,tm+1,tr,l,r);\n        return p1+p2;\n    }\n \n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        ll n=nums.size();\n        update(1,1,n,1,0);\n        update(1,1,n,n,0);\n        for(ll i=1;i<n-1;i++){\n            if(nums[i]>nums[i-1]&&nums[i]>nums[i+1]) update(1,1,n,i+1,1);\n            else update(1,1,n,i+1,0);\n        }\n        // for(ll i=1;i<=n;i++) cout<<query(1,1,n,i,i)<<\" \";\n        // cout<<endl;\n        vector<int> ans;\n        for(auto p:queries){\n            ll l=p[1];\n            ll r=p[2];\n            if(p[0]==1){\n                if(r-l>1){\n                    ll fk=query(1,1,n,l+1,r+1);\n                    ll fk1=query(1,1,n,l+1,l+1);\n                    ll fk2=query(1,1,n,r+1,r+1);\n                    fk-=(fk1+fk2);\n                    ans.push_back(fk);\n                    continue;\n                }\n                ans.push_back(0);\n            }\n            else{\n                nums[l]=r;\n                for(ll j=l-1;j<=l+1;j++){\n                    if(j<0||j>=n) continue;\n                    if(j==0||j==n-1) update(1,1,n,j+1,0);\n                    else if (nums[j]>nums[j-1]&&nums[j]>nums[j+1]) update(1,1,n,j+1,1);\n                    else update(1,1,n,j+1,0);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507954.0
}