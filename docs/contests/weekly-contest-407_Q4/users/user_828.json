{
    "username": "Navodayan",
    "submission": "class Solution {\npublic:\n\n    pair<int,int> t[400050];\n    pair<int,int>combine(pair<int,int>&a, pair<int,int>&b){\n        if(a.second>b.second){\n            return b;\n        }\n        return a;\n    }\n    void build(int v, int tl, int tr,vector<int>&a){\n        if(tl == tr){\n            t[v] = make_pair(tl,a[tl]);\n            return;\n        }\n        int mid = (tl+tr)/2;\n        build(2*v, tl, mid,a);\n        build(2*v+1,mid+1,tr,a);\n        t[v] = combine(t[2*v],t[2*v+1]);\n    }\n\n    pair<int,int> get_ans(int v, int tl, int tr, int l, int r){\n        if(tl>r || tr<l){\n            return {0,1e9};\n        }\n        if(l<=tl && tr<=r){\n            return t[v];\n        }\n        int mid = (tl+tr)/2;\n        pair<int,int> a = get_ans(2*v,tl,mid,l,r);\n        pair<int,int> b = get_ans(2*v+1,mid+1,tr,l,r);\n        return combine(a,b);\n    }\n    long long find(int l, int r, int val, int n,vector<int>&diff){\n        if(l>r){\n            return 0ll;\n        }\n        pair<int,int> temp = get_ans(1,0,n-1,l,r);\n        int index = temp.first;\n        \n        return find(l,index-1,diff[index],n,diff)+find(index+1,r,diff[index],n,diff)+(1ll*(diff[index]-val));\n    }\n    long long minimumOperations(vector<int>& nums, vector<int>& target) {\n        int n = nums.size();\n        vector<pair<int,int>>range;\n        vector<int>diff(n);\n        for(int i=0;i<n;i++){\n            diff[i] = target[i]-nums[i];\n        }\n        int lo = 0;\n        int curr = 0;\n        if(diff[0]>=0){\n            curr = 1;\n        }\n        for(int i=1;i<n;i++){\n            int temp = 0;\n            if(diff[i]>=0){\n                temp = 1;\n            }\n            if(curr != temp){\n                range.push_back({lo,i-1});\n                lo = i;\n                curr = temp;   \n            }\n        }\n        range.push_back({lo,n-1});\n        long long ans = 0;\n        for(int i=0;i<n;i++){\n            diff[i] = abs(diff[i]);\n        }\n        build(1,0,n-1,diff);\n        for(auto it : range){\n            int l = it.first;\n            int r = it.second;\n            ans += find(l,r,0,n,diff);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1721531616",
    "subm_id": "1327965498"
}