{
    "username": "876pol",
    "submission": "class Solution {\npublic:\n    vector<int> countOfPeaks(vector<int> &nums, vector<vector<int>> &queries) {\n        int n = nums.size();\n        vector<int> bit(n + 1);\n        function<int(int)> query_point = [&](int x) -> int {\n            int ret = 0;\n            for (int i = (x + 1); i > 0; i -= (i & -i)) ret += bit[i];\n            return ret;\n        };\n        function<int(int, int)> query = [&](int l, int r) -> int {\n            return query_point(r) - query_point(l - 1);\n        };\n        function<void(int, int)> update = [&](int ind, int x) {\n            for (int i = (ind + 1); i <= n; i += (i & -i)) bit[i] += x;\n        };\n        function<bool(int)> is_peak = [&](int ind) -> bool {\n            if (ind == 0 || ind == n - 1) return false;\n            return nums[ind - 1] < nums[ind] && nums[ind] > nums[ind + 1];\n        };\n        for (int i = 0; i < n; i++)\n            if (is_peak(i)) {\n                update(i, 1);\n            }\n        int q = queries.size();\n        vector<int> ans;\n        for (int i = 0; i < q; i++) {\n            if (queries[i][0] == 1) {\n                if (queries[i][1] + 1 <= queries[i][2] - 1) {\n                    ans.push_back(query(queries[i][1] + 1, queries[i][2] - 1));\n                } else {\n                    ans.push_back(0);\n                }\n            } else {\n                int ind = queries[i][1];\n                for (int i = max(0, ind - 1); i <= min(n - 1, ind + 1); i++) {\n                    if (is_peak(i)) update(i, -1);\n                }\n                nums[ind] = queries[i][2];\n                for (int i = max(0, ind - 1); i <= min(n - 1, ind + 1); i++) {\n                    if (is_peak(i)) update(i, 1);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718506610.0
}