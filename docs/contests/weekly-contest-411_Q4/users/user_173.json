{
    "username": "YaoBIG",
    "submission": "#include \"bits/stdc++.h\"\n#define rep(i, a, n) for (auto i = a; i <= (n); ++i)\n#define revrep(i, a, n) for (auto i = n; i >= (a); --i)\n#define all(a) a.begin(), a.end()\n#define sz(a) (int)(a).size()\ntemplate<class T> inline bool chmax(T &a, T b) { if (a < b) { a = b; return 1; } return 0; }\ntemplate<class T> inline bool chmin(T &a, T b) { if (b < a) { a = b; return 1; } return 0; }\nusing namespace std;\n \ntemplate<class A, class B> string to_string(const pair<A, B> &p);\ntemplate<class A, class B, class C> string to_string(const tuple<A, B, C> &p);\ntemplate<class A, class B, class C, class D> string to_string(const tuple<A, B, C, D> &p);\nstring to_string(const string &s) { return '\"' + s + '\"'; }\nstring to_string(const char *s) { return to_string((string) s); }\nstring to_string(char c) { return \"'\" + string(1, c) + \"'\"; }\nstring to_string(bool x) { return x ? \"true\" : \"false\"; }\ntemplate<size_t L> string to_string(const bitset<L> &x) { return x.to_string(); }\ntemplate<class A, class T = typename A::value_type> string to_string(const A &v) {\n\tbool first = 1;\n\tstring res = \"{\";\n\tfor (const auto &x: v) {\n\t\tif (!first) res += \", \";\n\t\tfirst = 0;\n\t\tres += to_string(x);\n\t}\n\tres += \"}\";\n\treturn res;\n}\ntemplate<class A, class B> string to_string(const pair<A, B> &p) {\n\treturn \"(\" + to_string(p.first) + \", \" + to_string(p.second) + \")\";\n}\ntemplate<class A, class B, class C> string to_string(const tuple<A, B, C> &p) {\n\treturn \"(\" + to_string(get<0>(p)) + \", \" + to_string(get<1>(p)) + \", \" + to_string(get<2>(p)) + \")\";\n}\ntemplate<class A, class B, class C, class D> string to_string(const tuple<A, B, C, D> &p) {\n\treturn \"(\" + to_string(get<0>(p)) + \", \" + to_string(get<1>(p)) + \", \" + to_string(get<2>(p)) + \", \" + to_string(get<3>(p)) + \")\";\n}\n\nvoid debug_out() { cerr << endl; }\ntemplate<class H, class... T> void debug_out(const H& h, const T&... t) {\n\tcerr << \" \" << to_string(h);\n\tdebug_out(t...);\n}\n#ifndef ONLINE_JUDGE\n\t#define debug(...) cerr << \"[\" << #__VA_ARGS__ << \"]:\", debug_out(__VA_ARGS__)\n#else\n\t#define debug(...) if (0) puts(\"No effect.\")\n#endif\n\nusing ll = long long;\nusing pii = pair<int, int>;\nusing vi = vector<int>;\nusing vvi = vector<vi>;\n\nclass Solution {\npublic:\n\tvector<long long> countKConstraintSubstrings(string as, int k, vector<vector<int>>& queries) {\n\t\tint n = sz(as);\n\t\tvector<int> bs(n);\n\n\t\tint ptr = 0;\n\t\tvector<int> cnt(2);\n\t\trep(i, 0, n - 1) {\n\t\t\twhile (ptr < n) {\n\t\t\t\tint x = as[ptr] - '0';\n\t\t\t\tif (cnt[x] + 1 > k && cnt[x ^ 1] > k) break;\n\t\t\t\tcnt[x]++;\n\t\t\t\tptr++;\n\t\t\t}\n\t\t\tbs[i] = ptr;\n\t\t\tcnt[as[i] - '0']--;\n\t\t}\n\t\tvector<ll> pres(n + 1);\n\t\trep(i, 0, n - 1) {\n\t\t\tpres[i + 1] = pres[i] + bs[i];\n\t\t}\n\t\tvector<ll> ans;\n\n\t\tfor (auto &vec : queries) {\n\t\t\tint l = vec[0];\n\t\t\tint r = vec[1];\n\t\t\tint ind = lower_bound(all(bs), r + 1) - bs.begin();\n\t\t\tchmin(ind, r);\n\t\t\tchmax(ind, l);\n\t\t\tll res = pres[ind] - pres[l] + 1ll * (r - ind + 1) * (r + 1);\n\t\t\tres -= 1ll * (l + r) * (r - l + 1) / 2;\n\t\t\tans.push_back(res);\n\t\t}\n\t\treturn ans;\n\t}\n};\n",
    "submit_ts": "1723952344",
    "subm_id": "556411041"
}