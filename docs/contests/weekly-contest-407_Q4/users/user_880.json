{
    "username": "tzhuan",
    "submission": "class Solution {\npublic:\n    long long minimumOperations(vector<int>& nums, vector<int>& target) {\n        const int N = nums.size();\n        vector<int> diff; diff.reserve(N);\n        for (int i = 0; i < N; ++i) diff.push_back(target[i] - nums[i]);\n\n        function<long long(int, int, int)> positive = [&](int a, int b, int k) {\n            if (a == b) return 0LL;\n            int m = INT_MAX;\n            for (int i = a; i < b; ++i) m = min(m, diff[i]);\n            long long ans = m - k;\n            for (int i = a, p = a; i <= b; ++i) {\n                if (i == b or diff[i] == m) {\n                    ans += positive(p, i, m);\n                    p = i + 1;\n                }\n            }\n            // cout << \"positive: \" << a << \" \" << b << \" \" << k << \": \" << ans << endl;\n            return ans;\n        };\n        function<long long(int, int, int)> negative = [&](int a, int b, int k) {\n            // cout << \"negative: \" << a << \" \" << b << \" \" << k << endl;\n            if (a == b) return 0LL;\n            int m = INT_MIN;\n            for (int i = a; i < b; ++i) m = max(m, diff[i]);\n            long long ans = abs(m) - abs(k);\n            for (int i = a, p = a; i <= b; ++i) {\n                if (i == b or diff[i] == m) {\n                    ans += negative(p, i, m);\n                    p = i + 1;\n                }\n            }\n            return ans;\n        };\n        auto same = [](int a, int b) {\n            return a > 0 and b > 0 or a < 0 and b < 0;\n        };\n        // for (auto d: diff) cout << d << \" \"; cout << endl;\n        long long ans = 0;        \n        for (int i = 1, p = 0; i <= N; ++i) {\n            if (i == N or !same(diff[i - 1], diff[i])) {\n                if (diff[p] > 0) ans += positive(p, i, 0);\n                else if (diff[i - 1] < 0) ans += negative(p, i, 0);\n                p = i;\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1721532019",
    "subm_id": "1327975669"
}