{
    "username": "harryB17",
    "submission": "#define ll long long\nconst int N = 1e5 + 2;\nint trees[N*4];\nint n;\nclass Solution {\npublic:\n    void build(int node, int st, int en, vector<int> &arr){\n        if(st == en){\n            if(st-1 >= 0 && st+1 < n && arr[st] > arr[st-1] && arr[st] > arr[st+1])\n                trees[node] = 1;\n            else trees[node] = 0;\n            return;\n        }\n        int mid = (st+en)/2;\n        build(2*node, st, mid, arr);\n        build(2*node + 1, mid+1, en, arr);\n        trees[node] = trees[2*node] + trees[2*node + 1];\n    }\n    \n    int query(int node, int st, int en, int l, int r){\n        if(st > r || en < l) return 0;\n        if(l <= st && r >= en) return trees[node];\n        \n        int mid = (st + en)/2;\n        int q1 = query(2*node, st, mid, l, r);\n        int q2 = query(2*node + 1, mid+1, en, l, r);\n    \n        return q1 + q2;\n    }\n    \n    void update(int node, int st, int en, int idx, int val, vector<int> &arr){\n        if(st == en && st == idx){\n            if(val != -1) arr[st] = val;\n            if(st-1 >= 0 && st+1 < n && arr[st] > arr[st-1] && arr[st] > arr[st+1])\n                trees[node] = 1;\n            else trees[node] = 0;\n            return;\n        }\n    \n        int mid = (st + en)/2;\n        if(mid >= idx) update(2*node, st, mid, idx, val, arr);\n        else update(2*node + 1, mid+1, en, idx, val, arr);\n        trees[node] = trees[2*node] + trees[2*node + 1];\n    }\n    \n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        n = nums.size();\n        build(1,0,n-1,nums);\n        \n        vector<int> ans;\n        for(auto &i : queries){\n            if(i[0] == 1) ans.push_back(query(1,0,n-1,i[1],i[2]) - query(1,0,n-1,i[1],i[1]) - \n                                        (i[1] == i[2] ? 0 : query(1,0,n-1,i[2],i[2])));\n            else{\n                update(1,0,n-1,i[1],i[2],nums);\n                if(i[1]+1 < n) update(1,0,n-1,i[1]+1,-1,nums);\n                if(i[1]-1 >= 0) update(1,0,n-1,i[1]-1,-1,nums);\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507778.0
}