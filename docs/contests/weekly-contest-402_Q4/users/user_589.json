{
    "username": "HcVAHovxGN",
    "submission": "class Solution {\npublic:\n    static const int N = 1e5+100;\n    int a[N];\n    void add(int x, int y) {\n        x+=10;\n        for(;x<N;x+=x&-x){\n            a[x]+=y;\n        }\n    }\n    int calc(int x) {\n        x+=10;\n        int ans = 0;\n        for(;x > 0;x-=x&-x) {\n            ans += a[x];\n        }\n        return ans;\n    }\n    int flag[N];\n    void to(vector<int> &nums, int i) {\n        if(i == 0 || i == nums.size() - 1) return ;\n        int ok = (nums[i] > nums[i - 1] && nums[i] > nums[i + 1]);\n        if(flag[i] ^ ok) {\n            int last = flag[i] ? 1 : -1;\n            add(i, -last);\n        }\n        flag[i] = ok;\n    }\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        for(int i = 1; i + 1 < nums.size(); i++) {\n            if(nums[i] > nums[i - 1] && nums[i] > nums[i + 1]) {\n                add(i, 1);\n                flag[i] = 1;\n            }\n        }\n        vector<int> ve;\n        for(auto &t:queries) {\n            if(t[0] == 1) {\n                if(t[2] == t[1]) {\n                    ve.push_back(0);\n                } else {\n                    ve.push_back(calc(t[2] - 1) - calc(t[1]));\n                }\n            } else {\n                nums[t[1]] = t[2];\n                int i = t[1];\n                if(i == 0) {\n                    i++;\n                }\n                if(i == nums.size() - 1) {\n                    i--;\n                }\n                to(nums, i + 1);\n                to(nums, i);\n                to(nums, i - 1);\n            }\n            // cout << \"nums[0]\" << nums[0] << \":\\n\";\n            // for(int j = 0; j < 6; j++) {\n            //     cout << \"(\" <<flag[j] << \", \" << calc(j) - calc(j - 1) << \")\" << \" \\n\"[j==5];\n            // }\n        }\n        return ve;\n    }\n};",
    "submit_ts": 1718507984.0
}