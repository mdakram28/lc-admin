{
    "username": "puspendra_09",
    "submission": "class segtree {\npublic:\n\tvector<int> sgt;\n\tsegtree(int n) {\n\t\tsgt.resize(4 * n + 1);\n\t}\n\n\tvoid build(int index , int low , int high , vector<int>& arr) {\n\t\tif (low == high) {\n\t\t\tsgt[index] = arr[low];\n\t\t\treturn;\n\t\t}\n\t\tint mid = (low + high) >> 1;\n\n\t\tbuild(2 * index + 1 , low , mid , arr);\n\t\tbuild(2 * index + 2 , mid + 1, high , arr);\n\n\t\tsgt[index] = (sgt[2 * index + 1] & sgt[2 * index + 2]);\n\t}\n\tint query(int index , int low , int high , int l ,  int r) {\n\t\tif (low >= l and high <=  r) {\n\t\t\treturn sgt[index];\n\t\t}\n\t\tif (l > high or r < low) {\n\t\t\treturn INT_MAX;\n\t\t}\n\n\t\tint mid = (low + high) >> 1;\n\n\t\tint left = query(2 * index + 1 , low , mid , l , r);\n\t\tint right = query(2 * index + 2 , mid + 1 , high , l , r);\n\n\t\treturn (left & right);\n\t}\n};\n\n\n\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& a, int k) {\n        int n = a.size();\n        segtree ob(n);\n        ob.build(0 , 0 , n - 1 , a);\n        long long ans = 0;\n        for(int i = 0; i < n; i++) {\n            int lb = -1 , ub = -1;\n            int low = i;\n            int high = n - 1;\n            while(low <= high) {\n                int mid = (low + high) >> 1;\n                int rangeAnd = ob.query(0 , 0 , n - 1 , i , mid);\n                if(rangeAnd > k) {\n                    low = mid + 1;\n                }\n                else if(rangeAnd < k) {\n                    high = mid - 1;\n                }\n                else {\n                    lb = mid;\n                    high = mid - 1;\n                }\n            }\n            low = i;\n            high = n - 1;\n            while(low <= high) {\n                int mid = (low + high) >> 1;\n                int rangeAnd = ob.query(0 , 0 , n - 1 , i , mid);\n                if(rangeAnd > k) {\n                    low = mid + 1;\n                }\n                else if(rangeAnd < k) {\n                    high = mid - 1;\n                }\n                else {\n                    ub = mid;\n                    low = mid + 1;\n                }\n            }\n            if(lb == -1) continue;\n            ans += (ub - lb + 1);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720278001",
    "subm_id": "1311689810"
}