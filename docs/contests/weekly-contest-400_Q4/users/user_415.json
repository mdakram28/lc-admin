{
    "username": "user0747oJ",
    "submission": "class Solution {\n    fun minimumDifference(nums: IntArray, k: Int): Int {\n        var diff = Int.MAX_VALUE\n        var i = 0\n\n        while (i < nums.size) {\n            when {\n                nums[i] == k -> {\n                    diff = 0\n                    break\n                }\n\n                nums[i] < k -> {\n                    diff = min(diff, k - nums[i])\n                    i++\n                }\n\n                else -> {\n                    var j = i\n                    while (j < nums.size && nums[j] > k) {\n                        j++\n                    }\n\n                    diff = min(diff, solve(nums, k, i, j - 1))\n                    i = j\n                }\n            }\n        }\n\n        return diff\n    }\n\n    private fun solve(nums: IntArray, k: Int, start: Int, end: Int): Int {\n        if (start == end) return nums[start] - k\n\n        var diff = Int.MAX_VALUE\n        var size = 0\n        val v = IntArray(30)\n        var i = start\n\n        fun add(x: Int) {\n            size += 1\n\n            var y = 1\n            repeat(v.size) {\n                v[it] += if (x and y == y) 1 else 0\n                y *= 2\n            }\n        }\n\n        fun remove(x: Int) {\n            size -= 1\n\n            var y = 1\n            repeat(v.size) {\n                v[it] -= if (x and y == y) 1 else 0\n                y *= 2\n            }\n        }\n\n        fun getValue(): Int {\n            var result = 0\n            var y = 1\n\n            repeat(v.size) {\n                result += if (v[it] == size) y else 0\n                y *= 2\n            }\n\n            return result\n        }\n\n        fun isGood(): Boolean {\n            return getValue() >= k\n        }\n\n\n        for (j in start..end) {\n            add(nums[j])\n\n            while (!isGood()) {\n                diff = min(diff, k - getValue())\n                remove(nums[i])\n                i++\n            }\n\n            // (i..j)\n            diff = min(diff, getValue() - k)\n        }\n\n        return diff\n    }\n}",
    "submit_ts": "1717298674",
    "subm_id": "1274787321"
}