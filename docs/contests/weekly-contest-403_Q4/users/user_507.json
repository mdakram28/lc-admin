{
    "username": "VimT",
    "submission": "impl Solution {\n    pub fn minimum_sum(grid: Vec<Vec<i32>>) -> i32 {\n        let m = grid.len();\n        let n = grid[0].len();\n        let mut result = i32::MAX;\n    \n        let mut prefix_sum = vec![vec![0; n + 1]; m + 1];\n        for i in 1..=m {\n            for j in 1..=n {\n                prefix_sum[i][j] = grid[i - 1][j - 1]\n                    + prefix_sum[i - 1][j]\n                    + prefix_sum[i][j - 1]\n                    - prefix_sum[i - 1][j - 1];\n            }\n        }\n    \n        if prefix_sum[m][n] == 3 {\n            return 3;\n        }\n        if prefix_sum[m][n] == (m * n) as i32 {\n            return prefix_sum[m][n];\n        }\n    \n        // \u4f7f\u7528\u524d\u7f00\u548c\u6570\u7ec4\u6765\u8ba1\u7b97\u4efb\u610f\u77e9\u5f62\u51851\u7684\u6570\u91cf\n        let sum = |x1: usize, y1: usize, x2: usize, y2: usize| -> i32 {\n            let result = prefix_sum[x2 + 1][y2 + 1]\n                - prefix_sum[x1][y2 + 1]\n                - prefix_sum[x2 + 1][y1]\n                + prefix_sum[x1][y1];\n            result\n        };\n    \n    \n        // \u8ba1\u7b97 (x1, y1) -> (x2, y2) \u8fd9\u4e2a\u533a\u57df\u5185\u80fd\u5305\u542b\u6240\u67091\u7684\u6700\u5c0f\u7684\u77e9\u5f62\u7684\u9762\u79ef\n        let min_rectangle = |mut x1, mut y1, mut x2, mut y2| -> i32 {\n            while x1 < x2 && sum(x1, y1, x1, y2) == 0 {\n                x1 += 1;\n            }\n            while x1 < x2 && sum(x2, y1, x2, y2) == 0 {\n                x2 -= 1;\n            }\n            while y1 < y2 && sum(x1, y1, x2, y1) == 0 {\n                y1 += 1;\n            }\n            while y1 < y2 && sum(x1, y2, x2, y2) == 0 {\n                y2 -= 1;\n            }\n            (x2 - x1 + 1) as i32 * (y2 - y1 + 1) as i32\n        };\n    \n        // \u90fd\u6a2a\u5411\u5207\u5206\uff0c\u679a\u4e3e\u4e2d\u95f4\u4e24\u4e2a\u5207\u5272\u70b9\n        for i in 0..m - 2 {\n            for j in i + 1..m - 1 {\n                if sum(0, 0, i, n - 1) == 0 || sum(i + 1, 0, j, n - 1) == 0 || sum(j + 1, 0, m - 1, n - 1) == 0 {\n                    continue;\n                }\n                let area1 = min_rectangle(0, 0, i, n - 1);\n                let area2 = min_rectangle(i + 1, 0, j, n - 1);\n                let area3 = min_rectangle(j + 1, 0, m - 1, n - 1);\n                result = result.min(area1 + area2 + area3);\n                // println!(\"heng  0-{i}={} {i}-{j}={} {j}-{m}={}\", area1, area2, area3);\n            }\n        }\n    \n        // \u90fd\u7eb5\u5411\u5207\u5206\uff0c\u679a\u4e3e\u4e2d\u95f4\u4e24\u4e2a\u5207\u5272\u70b9\n        for i in 0..n - 2 {\n            for j in i + 1..n - 1 {\n                if sum(0, 0, m - 1, i) == 0 || sum(0, i + 1, m - 1, j) == 0 || sum(0, j + 1, m - 1, n - 1) == 0 {\n                    continue;\n                }\n                let area1 = min_rectangle(0, 0, m - 1, i);\n                let area2 = min_rectangle(0, i + 1, m - 1, j);\n                let area3 = min_rectangle(0, j + 1, m - 1, n - 1);\n                result = result.min(area1 + area2 + area3);\n                // println!(\"zong  0-{i}={} {i}-{j}={} {j}-{m}={}\", area1, area2, area3);\n            }\n        }\n    \n        // \u4e00\u4e2a\u4e0a\u9762\u7684\u6a2a\u5411\u5207\u5206\uff0c\u4e24\u4e2a\u7eb5\u5411\u5207\u5206\n        for i in 0..m-1 {\n            for j in 0..n - 1 {\n                if sum(0, 0, i, n - 1) == 0 || sum(i + 1, 0, m - 1, j) == 0 || sum(i + 1, j + 1, m - 1, n - 1) == 0 {\n                    continue;\n                }\n                let area1 = min_rectangle(0, 0, i, n - 1);\n                let area2 = min_rectangle(i + 1, 0, m - 1, j);\n                let area3 = min_rectangle(i + 1, j + 1, m - 1, n - 1);\n                result = result.min(area1 + area2 + area3);\n                // println!(\"shang  0-{i}={} {i}-{j}={} {j}-{m}={}\", area1, area2, area3);\n            }\n        }\n    \n        // \u4e00\u4e2a\u4e0b\u9762\u7684\u6a2a\u5411\u5207\u5206\uff0c\u4e24\u4e2a\u7eb5\u5411\u5207\u5206\n        for i in 1..m {\n            for j in 0..n - 1 {\n                if sum(i, 0, m - 1, n - 1) == 0 || sum(0, 0, i - 1, j) == 0 || sum(0, j + 1, i - 1, n - 1) == 0 {\n                    continue;\n                }\n                let area1 = min_rectangle(i, 0, m - 1, n - 1);\n                let area2 = min_rectangle(0, 0, i - 1, j);\n                let area3 = min_rectangle(0, j + 1, i - 1, n - 1);\n                result = result.min(area1 + area2 + area3);\n                // println!(\"xia  0-{i}={} {i}-{j}={} {j}-{m}={}\", area1, area2, area3);\n            }\n        }\n    \n        // \u4e00\u4e2a\u5de6\u8fb9\u7684\u7eb5\u5411\u5207\u5206\uff0c\u4e24\u4e2a\u6a2a\u5411\u5207\u5206\n        for j in 0..n - 1 {\n            for i in 0..m - 1 {\n                if sum(0, 0, m - 1, j) == 0 || sum(0, j + 1, i, n - 1) == 0 || sum(i + 1, j + 1, m - 1, n - 1) == 0 {\n                    continue;\n                }\n                let area1 = min_rectangle(0, 0, m - 1, j);\n                let area2 = min_rectangle(0, j + 1, i, n - 1);\n                let area3 = min_rectangle(i + 1, j + 1, m - 1, n - 1);\n                result = result.min(area1 + area2 + area3);\n                // println!(\"zuo  0-{i}={} {i}-{j}={} {j}-{m}={}\", area1, area2, area3);\n            }\n        }\n    \n        // \u4e00\u4e2a\u53f3\u8fb9\u7684\u7eb5\u5411\u5207\u5206\uff0c\u4e24\u4e2a\u6a2a\u5411\u5207\u5206\n        for j in 1..n {\n            for i in 0..m - 1 {\n                if sum(0, j, m - 1, n - 1) == 0 || sum(0, 0, i, j - 1) == 0 || sum(i + 1, 0, m - 1, j - 1) == 0 {\n                    continue;\n                }\n                let area1 = min_rectangle(0, j, m - 1, n - 1);\n                let area2 = min_rectangle(0, 0, i, j - 1);\n                let area3 = min_rectangle(i + 1, 0, m - 1, j - 1);\n                result = result.min(area1 + area2 + area3);\n                // println!(\"you  0-{i}={} {i}-{j}={} {j}-{m}={}\", area1, area2, area3);\n            }\n        }\n    \n        result\n    }\n}",
    "submit_ts": 1719114767.0
}