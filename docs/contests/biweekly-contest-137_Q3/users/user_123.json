{
    "username": "zhou2003",
    "submission": "//\u3053\u306e\u6e07\u304d\u3001\u596a\u3063\u3066\u304f\u308c\u308b\u304b\n#include<stdio.h>\n#include<iostream>\n#include<string.h>\n#include<math.h>\n#include<algorithm>\n#include<queue>\n#include<stack>\n#include<map>\n#include<set>\n#include<bitset>\n#include<assert.h>\n#include<time.h>\n#include<vector>\n#include<unordered_map>\nusing namespace std;\ntypedef long long ll;\ntypedef long double db;\ntypedef vector<int> vi;\ntypedef pair<int, int> pii;\nconst int N = 200000 + 100;\nconst db pi = acos(-1.0);\n#define lowbit(x) ((x) & (-x))\n#define sqr(x) (x) * (x)\n#define rep(i,a,b) for (int i = a; i <= b;i++)\n#define per(i,a,b) for (int i = a; i >= b;i--)\n#define go(x,a) for (auto &x: a)\n#define trav(u,i,sq) for (register int i = head[u], v = sq[i].to; i; i = sq[i].nxt, v=sq[i].to)\n#define fir first\n#define sec second\n#define mkp make_pair\n#define pb push_back\n#define maxd 1000000007\n#define eps 1e-8\n\nnamespace My_Math{\n\t#define N 100000\n\n\tint fac[N+100],invfac[N+100];\n\n\tint add(int x,int y) {return x+y>=maxd?x+y-maxd:x+y;}\n\tint dec(int x,int y) {return x<y?x-y+maxd:x-y;}\n\tint mul(int x,int y) {return 1ll*x*y%maxd;}\n\tll qpow(ll x,int y)\n\t{\n\t\tll ans=1;\n\t\twhile (y)\n\t\t{\n\t\t\tif (y&1) ans=mul(ans,x);\n\t\t\tx=mul(x,x);y>>=1;\n\t\t}\n\t\treturn ans;\n\t}\n\tint getinv(int x) {return qpow(x,maxd-2);}\n\n\tint C(int n,int m)\n\t{\n\t\tif ((n<m) || (n<0) || (m<0)) return 0;\n\t\treturn mul(mul(fac[n],invfac[m]),invfac[n-m]);\n\t}\n\n\tvoid math_init()\n\t{\n\t\tfac[0]=invfac[0]=1;\n\t\trep(i,1,N) fac[i]=mul(fac[i-1],i);\n\t\tinvfac[N]=getinv(fac[N]);\n\t\tper(i,N-1,1) invfac[i]=mul(invfac[i+1],i+1);\n\t}\n\t#undef N\n}\nusing namespace My_Math;\n\nclass Solution {\n\npublic:\n    long long maximumValueSum(vector<vector<int>>& a) {\n        int n=a.size(),m=a[0].size();\n\t\tvector<vector<int>> mx(n+10,vector<int>(3,-1));\n\t\trep(i,0,n-1) {\n\t\t\trep(j,0,m-1) {\n\t\t\t\tif ((mx[i][0]==-1)||(a[i][j]>a[i][mx[i][0]])) {\n\t\t\t\t\tmx[i][2]=mx[i][1];\n\t\t\t\t\tmx[i][1]=mx[i][0];\n\t\t\t\t\tmx[i][0]=j;\n\t\t\t\t} else if ((mx[i][1]==-1)||(a[i][j]>a[i][mx[i][1]])) {\n\t\t\t\t\tmx[i][2]=mx[i][1];\n\t\t\t\t\tmx[i][1]=j;\n\t\t\t\t} else if ((mx[i][2]==-1)||(a[i][j]>a[i][mx[i][2]])) {\n\t\t\t\t\tmx[i][2]=j;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n        vector<pii> pos,chk;\n        rep(i,0,n-1) rep(j,0,m-1) pos.pb(mkp(i,j));\n        sort(pos.begin(),pos.end(),[&a](pii x, pii y) {\n            return a[x.fir][x.sec]>a[y.fir][y.sec];\n        });\n        vector<int> cntr(n+1,0),cntc(m+1,0);\n        for (auto &u: pos) {\n            int x=u.fir,y=u.sec;\n            if ((cntr[x]<3)&&(cntc[y]<3)) {\n                chk.pb(mkp(x,y));\n                cntr[x]++;cntc[y]++;\n            }\n        }\n\n\t\tll ans=-1e18;\n\t\trep(i,0,n-1) rep(j,0,n-1) {\n\t\t\tif (i==j) continue;\n\t\t\tint p1=mx[i][0],p2=mx[j][0];\n\t\t\tif (p1==p2) p2=mx[j][1];\n            ll tmp=a[i][p1]+a[j][p2];\n\t\t\tfor (auto &u:chk) {\n                int x=u.fir,y=u.sec;\n                if ((x!=i)&&(x!=j)&&(y!=p1)&&(y!=p2)) {\n                    ans=max(ans,tmp+a[x][y]);\n                    break;\n                }\n            }\n\t\t}\n\t\treturn ans;\n    }\n};",
    "submit_ts": "1723906974",
    "subm_id": "556322821"
}