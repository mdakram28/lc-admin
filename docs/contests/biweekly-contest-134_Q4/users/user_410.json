{
    "username": "fan_hadoop",
    "submission": "class Solution {\n    int[][] cnt;\n    public long countSubarrays(int[] nums, int k) {\n        int n = nums.length;\n        cnt = new int[n+1][31];\n        for(int i = 0; i < n; i++){\n            for(int j = 0; j < 31; j++){\n                int t = (nums[i]>>j)&1;\n                cnt[i+1][j] = t+cnt[i][j];\n            }\n        }\n        long ans = 0;\n        for(int i = 0; i < n; i++){\n            // int start = i;\n            int l = i, r = n-1;\n            while(l < r){\n                int mid = (r+l)>>1;\n                int v = getV(i, mid);\n                if(v<=k){\n                    r=mid;\n                }else{\n                    l=mid+1;\n                }\n            }\n            if(getV(i, r)!=k) continue;\n            int ll = r;\n            l = i; r = n-1;\n            while(l < r){\n                int mid = (r+l+1)>>1;\n                int v = getV(i, mid);\n                if(v>=k){\n                    l=mid;\n                }else{\n                    r=mid-1;\n                }\n            }\n            if(getV(i, l) != k) continue;\n            int rr = l;\n            ans += rr-ll+1;\n        }\n        return ans;\n    }\n    public int getV(int i, int mid){\n        int v = 0;\n        for(int j = 0; j < 31; j++){\n            if(cnt[mid+1][j]-cnt[i][j]==mid-i+1){\n                v |= (1<<j);\n            }\n        }\n        return v;\n    }\n}\n\n\n\n\n\n\n\n\n\n",
    "submit_ts": "1720278564",
    "subm_id": "544563210"
}