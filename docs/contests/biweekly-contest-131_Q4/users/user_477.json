{
    "username": "ri-mu-_pjy",
    "submission": "class Solution {\npublic:\n    #define ll long long\n#define inf 0x3f3f3f3f\n#define lson l,m,rt<<1\n#define rson m+1,r,rt<<1|1\n#define maxn 100010\nint lsum[maxn<<2];//lsum\u8868\u793a\u533a\u95f4\u5de6\u8d77\u6700\u957f\u8fde\u7eed\u4e0a\u5347\u5e8f\u5217\u7684\u957f\u5ea6\nint rsum[maxn<<2];//rsum\u8868\u793a\u533a\u95f4\u53f3\u8d77\u6700\u957f\u8fde\u7eed\u4e0a\u5347\u5e8f\u5217\u7684\u957f\u5ea6\nint msum[maxn<<2];//msum\u8868\u793a\u533a\u95f4\u6700\u957f\u8fde\u7eed\u4e0a\u5347\u5e8f\u5217\u7684\u957f\u5ea6\nint num[maxn];\n \nvoid pushup(int l,int r,int rt)//\u533a\u95f4\u5408\u5e76\n{\n    int m=(l+r)>>1;\n    lsum[rt]=lsum[rt<<1];\n    rsum[rt]=rsum[rt<<1|1];\n    msum[rt]=max(msum[rt<<1],msum[rt<<1|1]);\n    if(num[m]<num[m+1])//\u5982\u679c\u505a\u533a\u95f4\u7684\u53f3\u7aef\u5c0f\u4e8e\u53f3\u533a\u95f4\u7684\u5de6\u7aef\n    {\n        if(lsum[rt<<1]==m-l+1)//\u5982\u679c\u5de6\u533a\u95f4\u5168\u4e3a\u4e0a\u5347\u5e8f\u5217\n            lsum[rt]=lsum[rt<<1]+lsum[rt<<1|1];\n        if(rsum[rt<<1|1]==r-m)//\u5982\u679c\u53f3\u533a\u95f4\u5168\u4e3a\u4e0a\u5347\u5e8f\u5217\n            rsum[rt]=rsum[rt<<1|1]+rsum[rt<<1];\n        msum[rt]=max(msum[rt],lsum[rt<<1|1]+rsum[rt<<1]);\n    }\n}\n \nvoid build(int l,int r,int rt)\n{\n \n    if(l==r)\n    {\n        lsum[rt]=rsum[rt]=msum[rt]=1;\n        return;\n    }\n    int m=(l+r)>>1;\n    build(lson);\n    build(rson);\n    pushup(l,r,rt);\n}\n \nvoid updata(int p,int c,int l,int r,int rt)//\u5355\u70b9\u66f4\u65b0\n{\n    if(l==r)\n    {\n        num[l]=c;\n        return ;\n    }\n    int m=(l+r)>>1;\n    if(m>=p)\n        updata(p,c,lson);\n    else updata(p,c,rson);\n    pushup(l,r,rt);\n}\n \nint query(int L,int R,int l,int r,int rt)\n{\n    if(l>=L&&R>=r)\n        return msum[rt];\n    int ret=0;\n    int m=(l+r)>>1;\n    if(m>=L)  ret=max(ret,query(L,R,lson));\n    if(R>m)   ret=max(ret,query(L,R,rson));\n    if(num[m]<num[m+1])   //\u5982\u679c\u505a\u533a\u95f4\u7684\u53f3\u7aef\u5c0f\u4e8e\u53f3\u533a\u95f4\u7684\u5de6\u7aef,\u5c31\u8fde\u8d77\u6765\n    {\n        ret=max(ret,min(m-L+1,rsum[rt<<1])+min(R-m,lsum[rt<<1|1]));\n    }\n    return ret;\n}\n    vector<bool> getResults(vector<vector<int>>& queries) {\n        vector<bool>ans;\n        int tn=queries.size();\n        int n=min(50001,tn*3+1);\n        for(int i=1;i<=n;i++)\n            num[i]=i;\n        build(1,n,1);\n        for(int i=0;i<queries.size();i++)\n        {\n            if(queries[i].size()==2)\n            {\n                int tx=queries[i][1];\n                updata(tx,10000000,1,n,1);\n                \n            }\n            else\n            {\n                int tx=queries[i][1];\n                int sz=queries[i][2];\n                int len=query(1,tx,1,n,1);\n                //cout<<sz<<endl;\n                if(sz<=len)\n                    ans.push_back(true);\n                else\n                    ans.push_back(false);\n            }\n        }\n        return ans;\n    }\n};\n/*\nint main()\n{\n    int n,t,m,i;\n    char s[10];\n    scanf(\"%d%d\",&n,&m);\n    {\n        for(i=1;i<=n;i++)\n            scanf(\"%d\",&num[i]);\n        build(1,n,1);\n        int a,b;\n        printf(\"%d\\n\",query(1,n,1,n,1));\n        while(m--)\n        {\n            scanf(\"%d %d\",&a,&b);\n            updata(a,b,1,n,1);\n            int len=query(1,n,1,n,1);\n        }\n    }\n}\n*/",
    "submit_ts": 1716652508.0
}