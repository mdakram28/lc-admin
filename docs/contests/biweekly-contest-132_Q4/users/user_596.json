{
    "username": "devansh789",
    "submission": "class Solution {\npublic:\n    int maximumLength(vector<int>& v, int k) {\n        int n = v.size();\n        vector<vector<int>> dp(n,vector<int>(k+1));\n        vector<int> prev(n,-1);\n        map<int,int> m;\n        for(int i = 0; i < n; i++) {\n            if(m.find(v[i])!=m.end()) prev[i] = m[v[i]];\n            m[v[i]] = i;\n        }\n        int ans = 1;\n        vector<pair<int,int>> p1(k+1,{0,-1});\n        vector<pair<int,int>> p2(k+1,{0,-1});\n        for(int i = 0; i < n; i++) {\n            dp[i][k] = 1;\n            for(int j = 0; j <= k; j++) {\n                if(prev[i]!=-1) dp[i][j] = max(dp[i][j],dp[prev[i]][j]+1);\n                if(p1[j].second==v[i]) dp[i][j] = max(dp[i][j],p1[j].first+1);\n                if(p2[j].second==v[i]) dp[i][j] = max(dp[i][j],p2[j].first+1);\n                if(dp[i][j]>=p1[j].first) {\n                    if(p1[j].second==v[i]) p1[j].first = dp[i][j];\n                    else {\n                        p2[j] = p1[j];\n                        p1[j] = {dp[i][j],v[i]};\n                    }\n                }\n                else if(dp[i][j]>p2[j].first) p2[j] = {dp[i][j],v[i]};\n                if(j>0) {\n                    if(p1[j].second!=v[i]&&p1[j].second!=-1) dp[i][j-1] = max(dp[i][j-1],p1[j].first+1);\n                    if(p2[j].second!=v[i]&&p2[j].second!=-1) dp[i][j-1] = max(dp[i][j-1],p2[j].first+1);\n                    if(dp[i][j-1]>=p1[j-1].first) {\n                        if(p1[j-1].second==v[i]) p1[j-1].first = dp[i][j-1];\n                        else {\n                            p2[j-1] = p1[j-1];\n                            p1[j-1] = {dp[i][j-1],v[i]};\n                        }\n                    }\n                    else if(dp[i][j-1]>p2[j-1].first) p2[j-1] = {dp[i][j-1],v[i]};\n                }\n            }\n        }\n        for(int i = 0; i < n; i++) {\n            for(int j = 0; j <= k; j++) {\n                // cout << dp[i][j] << \" \";\n                ans = max(ans,dp[i][j]);\n            }\n            // cout << endl;\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1717862310.0
}