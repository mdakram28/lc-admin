{
    "username": "adoring-stonebrakerr7q",
    "submission": "class Solution {\n\n\t\n    public long countSubarrays(int[] nums, int k) {\n    \tthis.nums = nums;\n    \tdp = new int[nums.length][log(nums.length) + 1];\n    \tbuild();\n    \t// for(int i = 0; i < nums.length; i++) {\n    \t// \tint cur = nums[i];\n    \t// \tfor(int j = i; j < nums.length; j++) {\n    \t// \t\tcur &= nums[j];\n    \t// \t\tSystem.out.println(cur + \" \" + get(i, j));\n    \t// \t}\n    \t// }\n    \tlong ans = 0;\n    \tfor(int i = 0; i < nums.length; i++) {\n    \t\tint l = bs1(k, i, nums.length - 1), r = bs2(k, i, nums.length - 1);\n    \t\tif(l != nums.length && r != nums.length) ans += r - l + 1;\n    \t}\n    \treturn ans;\n    }\n    \n    public int bs2(int tar, int left, int right) {\n    \t// >= k \u6700\u9760\u5de6\u8fb9\u7684\u6570\n    \tint l = left;\n    \twhile(left <= right) {\n    \t\tint mid = (left + right) >> 1;\n    \t\tif(get(l, mid) >= tar) left = mid + 1;\n    \t\telse right = mid - 1;\n    \t}\n    \treturn right;\n    }\n    \n    public int bs1(int tar, int left, int right) {\n    \t// <= k \u6700\u9760\u53f3\u8fb9\n    \tint l = left;\n    \twhile(left <= right) {\n    \t\tint mid = (left + right) >> 1;\n    \t\tint c = get(l, mid);\n    \t\tif(c < tar) {\n    \t\t\tright = mid - 1;\n    \t\t}else if(c > tar) {\n    \t\t\tleft = mid + 1;\n    \t\t}else {\n    \t\t\tright = mid - 1;\n    \t\t}\n    \t}\n    \treturn left;\n    }\n    \n\tint[] nums;\n\tint[][] dp;\n    public void build() {\n    \tfor(int i = 0; i < nums.length; i++) {\n    \t\tdp[i][0] = nums[i];\n    \t}\n    \tfor(int j = 1; (1 << j) <= nums.length; j++) {\n    \t\tfor(int i = 0; i + (1 << j) - 1 < nums.length; i++) {\n    \t\t\tdp[i][j] = dp[i][j - 1] & dp[i + (1 << (j - 1))][j - 1];\n    \t\t}\n    \t}\n    }\n    \n    public int get(int l, int r) {\n    \tint j = log(r - l + 1);\n    \treturn dp[l][j] & dp[r - (1 << j) + 1][j];\n    }\n    \n    public int log(int x) {\n    \treturn (int)(Math.log(x) / Math.log(2));\n    }\n    \n}",
    "submit_ts": "1720279273",
    "subm_id": "544566736"
}