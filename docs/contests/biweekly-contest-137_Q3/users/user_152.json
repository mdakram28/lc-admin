{
    "username": "mastoori1234",
    "submission": "typedef long long ll;\n\nclass Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>& arr) {\n        \n        ll n = arr.size();\n        ll m = arr[0].size();\n        \n        auto withinRange = [&]( ll r, ll c)->bool {\n            return (0<=r) && (r<n) && (0<=c) && (c<m);\n        };\n        \n        const ll nINF = -1e16;\n        \n        ll ans = nINF;\n        \n        vector< vector<ll> > pr( n, vector<ll>( m));\n        vector< vector<ll> > sr( n, vector<ll>( m));\n            \n        vector< vector<ll> > ul( n, vector<ll>( m));\n        vector< vector<ll> > ur( n, vector<ll>( m));\n        vector< vector<ll> > dl( n, vector<ll>( m));\n        vector< vector<ll> > dr( n, vector<ll>( m));\n\n        \n        for( ll i=0; i<n; i++) {\n            for( ll j=0; j<m; j++) {\n                ul[i][j] = ur[i][j] = dl[i][j] = dr[i][j] = pr[i][j] = sr[i][j] = arr[i][j];\n            }\n        }\n        \n        for( ll i=0; i<n; i++) {\n            for( ll j=1; j<m; j++) {\n                pr[i][j] = max( pr[i][j], pr[i][j-1]);\n            }\n        }\n        \n        for( ll i=0; i<n; i++) {\n            for( ll j=m-2; j>=0; j--) {\n                sr[i][j] = max( sr[i][j], sr[i][j+1]);\n            }\n        }\n        \n        for( ll i=0; i<n; i++) {\n            for( ll j=0; j<m; j++) {\n                ul[i][j] = max(\n                    ul[i][j],\n                    max( (i>0)?ul[i-1][j]:nINF, (j>0)?ul[i][j-1]:nINF)\n                );\n            }\n        }\n\n        for( ll i=0; i<n; i++) {\n            for( ll j=m-1; j>=0; j--) {\n                ur[i][j] = max(\n                    ur[i][j],\n                    max( (i>0)?ur[i-1][j]:nINF, (j+1<m)?ur[i][j+1]:nINF)\n                );\n            }\n        }\n        \n        for( ll i=n-1; i>=0; i--) {\n            for( ll j=0; j<m; j++) {\n                dl[i][j] = max(\n                    dl[i][j],\n                    max( (i+1<n)?dl[i+1][j]:nINF, (j>0)?dl[i][j-1]:nINF)\n                );\n            }\n        }\n        \n        for( ll i=n-1; i>=0; i--) {\n            for( ll j=m-1; j>=0; j--) {\n                dr[i][j] = max(\n                    dr[i][j],\n                    max( (i+1<n)?dr[i+1][j]:nINF, (j+1<m)?dr[i][j+1]:nINF)\n                );\n            }\n        }\n        \n        for( ll i=0; i<n; i++) {\n            for( ll j=0; j<m; j++) {\n                if(withinRange(i-1, j-1) && withinRange(i+1, j+1)) {\n                    ans = max( ans, arr[i][j]+ul[i-1][j-1]+dr[i+1][j+1]);\n                }\n                if(withinRange(i+1, j-1) && withinRange(i-1, j+1)) {\n                    ans = max( ans, arr[i][j]+dl[i+1][j-1]+ur[i-1][j+1]);\n                }\n                for( ll ii=i+1; ii<n; ii++) {\n                    if(withinRange(ii,j-1) && withinRange(ii+1, j+1)) {\n                        ans = max( ans, arr[i][j]+pr[ii][j-1]+dr[ii+1][j+1]);\n                    }\n                    if(withinRange(ii+1,j-1) && withinRange(ii, j+1)) {\n                        ans = max( ans, arr[i][j]+dl[ii+1][j-1]+sr[ii][j+1]);\n                    }\n                }\n                for( ll ii=i-1; ii>=0; ii--) {\n                    if(withinRange(ii,j-1) && withinRange(ii-1, j+1)) {\n                        ans = max( ans, arr[i][j]+pr[ii][j-1]+ur[ii-1][j+1]);\n                    }\n                    if(withinRange(ii-1,j-1) && withinRange(ii, j+1)) {\n                        ans = max( ans, arr[i][j]+ul[ii-1][j-1]+sr[ii][j+1]);\n                    }\n                }\n            }\n        }\n        \n    \n        return ans;\n    }\n};",
    "submit_ts": "1723906954",
    "subm_id": "1359081505"
}