{
    "username": "papapapa69",
    "submission": "class Solution {\npublic:\n    typedef long long ll;\n    //ledu ques \n    long long countSubarrays(vector<int>& nums, int k) {\n        ll n=nums.size();\n        ll ans=0;\n        vector<vector<ll>>hash(n,vector<ll>(30,0));\n        for(int i=0;i<n;i++){\n            ll idhar=nums[i];\n            for(ll j=0;j<30;j++){\n                ll check=1<<j;\n                if(check&idhar){\n                    hash[i][j]++;\n                }\n                if(i!=0){\n                    hash[i][j]+=hash[i-1][j];\n                }\n            }\n        }\n        for(int i=0;i<n;i++){\n            //last index where and is greater than k \n            ll res=i-1;\n            ll s=i;\n            ll e=n-1;\n            while(s<=e){\n                ll m=(s+e)>>1;\n                ll idhar=0;\n                for(ll j=0;j<30;j++){\n                    ll tot=hash[m][j];\n                    if(i!=0){\n                        tot-=hash[i-1][j];\n                    }\n                    if(tot==m-i+1){\n                        ll add=1<<j;\n                        idhar+=add;\n                    }\n                    \n                }\n              if(idhar>k){\n                  res=m;\n                  s=m+1;\n              }  \n                else{\n                    e=m-1;\n                }\n            }\n            \n             ll res2=n;\n            s=i;\n            e=n-1;\n            while(s<=e){\n                ll m=(s+e)>>1;\n                ll idhar=0;\n                for(ll j=0;j<30;j++){\n                    ll tot=hash[m][j];\n                    if(i!=0){\n                        tot-=hash[i-1][j];\n                    }\n                    if(tot==m-i+1){\n                        ll add=1<<j;\n                        idhar+=add;\n                    }\n                    \n                }\n              if(idhar<k){\n                  res2=m;\n                  e=m-1;\n              }  \n                else{\n                    s=m+1;\n                }\n            }\n          //  cout<<res2<<\" \"<<res<<\" \"<<endl;\n            ll tot=res2-res-1;\n            ans+=tot;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720278117",
    "subm_id": "1311695046"
}