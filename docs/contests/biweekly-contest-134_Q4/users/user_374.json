{
    "username": "user2237El",
    "submission": "typedef long long ll;\nstruct sparseTable\n {\n     //sparseTable sp1;\n     //sp1.init(n(size));\n     //sp1.build(left(array));\n     ll n,k;\n     vector< vector<ll> > table;\n     vector<ll> logs;\n     \n     void init1(ll x)\n     {\n             n=x;\n             logs.resize(n+1);\n             logs[1]=0;\n             for(ll i=2;i<=n;i++)\n                     logs[i]=logs[i/2]+1;\n             k=*max_element(logs.begin(),logs.end());\n             table.resize(k+1,vector<ll> (n+1,-1e9) );\n     }\n  \n     ll operation(ll x,ll y)\n     {\n         return x&y;\n     }\n  \n     void build(vector<ll> &arr)\n     {\n         for(ll i=0;i<n;i++)\n                 table[0][i]=arr[i];\n  \n         for(ll j=1;j<=k;j++)\n         {\n             for(ll i=0;i+(1<<j)<=n;i++)\n                 table[j][i]=operation(table[j-1][i],table[j-1][i+(1<<(j-1))]);\n         }\n     }\n  \n     ll query(ll l , ll r)\n     {\n         ll j = logs[r - l + 1];\n         ll answer = operation(table[j][l], table[j][r-(1<<j)+1]);\n         return answer;\n     }\n }; \n\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& nums1, int k) {\n        vector<ll> nums;\n        for(int i=0;i<nums1.size();i++){\n            nums.push_back(nums1[i]);\n        }\n        ll n=nums.size();\n        sparseTable st;\n        st.init1(n);\n        st.build(nums);\n\n        ll gans=0;\n        for(int i=0;i<n;i++){\n            ll l=0,r=i;\n            ll ans=-1;\n            while(l<=r){\n                ll mid=(l+r)/2;\n                if(st.query(mid,i)<k){\n                    l=mid+1;\n                    ans=mid;\n                }\n                else{\n                    r=mid-1;\n                }\n            }\n            l=0,r=i;\n            ll ans2=-1;\n             while(l<=r){\n                ll mid=(l+r)/2;\n                if(st.query(mid,i)<=k){\n                    l=mid+1;\n                    ans2=mid;\n                }\n                else{\n                    r=mid-1;\n                }\n            }\n           // cout<<ans<<\" \"<<ans2<<endl;\n            gans+=(ans2-ans);\n        }\n        return gans;\n    }\n};",
    "submit_ts": "1720277844",
    "subm_id": "1311682698"
}