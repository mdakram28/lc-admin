{
    "username": "12121-b",
    "submission": "const int N = 100010;\n\nclass Solution {\npublic:\n    int n;\n    int a[N], b[N], c[N];\n    int query(int u) {\n        int res = 0;\n        while(u) {\n            res += c[u];\n            u -= u&-u;\n        }\n        return res;\n    }\n\n    void add(int u, int v) {\n        while(u <= n) {\n            c[u] += v;\n            u += u&-u;\n        }\n    }\n\n    int query(int l, int r) {\n        if(l > r) return 0;\n        return query(r) - query(l-1);\n    }\n\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        n = nums.size();\n        vector<int> ans;\n        ans.clear();\n        for(int i = 1; i <= n; ++i) {\n            a[i] = nums[i - 1];\n        }\n        for(int i = 1; i <= n; ++i) {\n            c[i] = 0;\n        }\n        for(int i = 1; i <= n; ++i) {\n            b[i] = ((a[i] > a[i - 1]) && (a[i] > a[i + 1]));\n            add(i, b[i]);\n        }\n        for(auto q: queries) {\n            int tp = q[0], index = q[1], val = q[2];\n            if(tp == 2) {\n                int x = index + 1;\n                for(int i = x - 1; i <= x + 1; ++i) {\n                    if(i - 1 >= 1 && i + 1 <= n) {\n                        add(i, -((a[i] > a[i - 1]) && (a[i] > a[i + 1])));\n                    }\n                }\n                a[x] = val;\n                for(int i = x - 1; i <= x + 1; ++i) {\n                    if(i - 1 >= 1 && i + 1 <= n) {\n                        add(i, ((a[i] > a[i - 1]) && (a[i] > a[i + 1])));\n                    }\n                }\n            }else {\n                ans.push_back(query(index + 2, val));\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507133.0
}