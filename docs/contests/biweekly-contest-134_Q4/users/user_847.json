{
    "username": "nicolaSaporetti",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        int sz = nums.size();\n        v.assign(sz+1,vector<int>(32));\n        long long r = 0;\n        int p = 0;\n        for(int i=0;i<sz;i++)\n        {\n            for(int j=0;j<32;j++)\n            {\n                v[i+1][j]=v[i][j];\n                if((1<<j)&nums[i]) v[i+1][j]++;\n            }\n            if(toSkip(k,nums[i]))\n            {\n                p=i+1;\n                //cout<<\"P \"<<p<<endl;\n            }\n            if(canC(p,i)==k)\n            {\n                //cout<<\"Comp\"<<endl;\n                int res = i;\n                int minv=p;\n                int maxv=i;\n                while(minv<=maxv)\n                {\n                    int avg=(minv+maxv)/2;\n                    if(k==canC(avg,i))\n                    {\n                        res=avg;\n                        minv=avg+1;\n                    }\n                    else maxv=avg-1;\n                }\n                //cout<<\"R: \"<<res<<endl;\n                r+=(long long)(res-p+1);\n            }\n        }\n        return r;\n    }\nprivate:\n    bool toSkip(int k, int n)\n    {\n        for(int j=0;j<32;j++)\n        {\n            if(k&(1<<j) && !(n&(1<<j))) return true;\n        }\n        return false;\n    }\n    int canC(int pos,int l)\n    {\n        int val = 0;\n        for(int i=0;i<32;i++)\n        {\n            if(v[l+1][i]-v[pos][i]==l-pos+1) val|=(1<<i);\n        }\n        return val;\n    }\n\n    vector<vector<int>> v;\n};",
    "submit_ts": "1720280068",
    "subm_id": "1311775723"
}