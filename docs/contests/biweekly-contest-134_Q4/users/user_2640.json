{
    "username": "sanjay77",
    "submission": "void insert(long long *a,long long l,long long k,long long val){\n    long long i=l+k;\n    a[i]=val;\n    i=(i-1)/2;\n    while(i>0)\n    {\n        if(a[i]==-1) a[i]=val;\n        else a[i]=(a[i]&val);\n        i=(i-1)/2;\n    }\n    return ;\n}\n\nlong long say(long long *a,long long l,long long r,long long k){\n    l=l+k;r=r+k;\n    if(l==r)  return a[l];\n    else\n    {\n        long long i=l; long long j=r;\n        long long ans=a[l]&a[r];\n        // a[i]=a[i]+d; a[j]=a[j]+d;\n        long long p1; long long p2;\n        while( (i-1)/2 != (j-1)/2 )\n        {\n            p1=(i-1)/2; p2=(j-1)/2;\n            if( 2*p1+1 == i) ans=ans&a[2*p1+2];\n                // a[2*p1+2]=a[2*p1+2]+d;\n            if( 2*p2+2 == j) ans=ans&a[2*p2+1];\n                // a[2*p2+1]=a[2*p2+1]+d;\n            i=p1;j=p2;\n        }\n        return ans;\n    }\n    return -1;\n}\n\n// long long solve1(){\n//     long long l=i,r=n;\n//     while(l+1<r)\n//     {\n//         long long mid=(l+r)/2;\n//         if(say()>k) l=mid;\n//         else r=mid;\n//     }\n//     return l;\n// }\n\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& b, int k) {\n        \n        long long n=b.size();\n        vector<long long> a;\n        for(int i=0;i<n;i++) a.push_back(b[i]);\n        a.push_back(0);\n        long long p=1;\n        while(p<n) p=2*p;\n        long long seg[2*p+5]; \n        long long k1=p-1;\n        for(long long i=0;i<k1;i++) seg[i]=-1;\n        for(long long i=0;i<n;i++)\n        {\n            insert(seg,i,k1,a[i]);\n        }\n        \n\n        long long ans=0;\n        for(long long i=0;i<n;i++)\n        {\n            if(a[i]<k) continue;\n            if(a[i]==k)\n            {\n                long long l=i,r=n;\n\n                long long l1=i-1;\n                l=i,r=n;\n                while(l+1<r)\n                {\n                    long long mid=(l+r)/2;\n                    if(say(seg,i,mid,k1)>=k) l=mid;\n                    else r=mid;\n                }\n\n                long long l2=r;\n                ans+=(l2-l1-1);\n            }\n            else\n            {\n                long long l=i,r=n;\n                while(l+1<r)\n                {\n                    long long mid=(l+r)/2;\n                    if(say(seg,i,mid,k1)>k) l=mid;\n                    else r=mid;\n                }\n\n                long long l1=l;\n\n                l=i,r=n;\n                while(l+1<r)\n                {\n                    long long mid=(l+r)/2;\n                    if(say(seg,i,mid,k1)>=k) l=mid;\n                    else r=mid;\n                }\n\n                long long l2=r;\n                ans+=(l2-l1-1);\n            }\n            \n            // cout<<i<<\" \"<<ans<<\"\\n\";\n            \n        }\n        \n        return ans;\n\n        \n    }\n};",
    "submit_ts": "1720277536",
    "subm_id": "1311668322"
}