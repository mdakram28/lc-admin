{
    "username": "reeeeein",
    "submission": "#define N 120\nint n,m;\nint f[N][N][10][10];\n\nvoid prework(){\n\tfor(int i=0;i<9;i++){\n\t\tfor(int j=0;j<9;j++){\n\t\t\tif(i==0 and j==0) continue;\n\t\t\tfor(int k=1;k<=n-(1<<i)+1;k++){\n\t\t\t\tfor(int p=1;p<=m-(1<<j)+1;p++){\n\t\t\t\t\tif(i==0)\n\t\t\t\t\t\tf[k][p][i][j]=std::max(f[k][p][i][j-1],f[k][p+(1<<(j-1))][i][j-1]);\n\t\t\t\t\telse\n\t\t\t\t\t\tf[k][p][i][j]=std::max(f[k][p][i-1][j],f[k+(1<<(i-1))][p][i-1][j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nint query(int r1,int c1,int r2,int c2){\n    if(r1>r2||c1>c2)return -2e9;\n\tint k1=log2(r2-r1+1);\n\tint k2=log2(c2-c1+1);\n\tint ret = std::max(f[r1][c1][k1][k2],std::max(f[r2-(1<<k1)+1][c1][k1][k2],std::max(f[r1][c2-(1<<k2)+1][k1][k2],f[r2-(1<<k1)+1][c2-(1<<k2)+1][k1][k2])));\n    // printf(\"%d %d %d %d %d\\n\",r1,c1,r2,c2,ret);\n    return ret;\n}\n\nclass Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>& board) {\n        n=board.size();\n        m=board[0].size();\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=1;j<=m;j++)\n\t\t\t\tf[i][j][0][0]=board[i-1][j-1];\n\t\t}\n        prework();\n        long long ret=-1e10;\n        for(int i=1;i<n-1;i++){\n            for(int j=0;j<m;j++){\n                for(int k=0;k<m;k++){\n                    if(k==j)continue;\n                    long long ans = board[i][j];\n                    ans+=query(1,k+1,i,k+1);\n                    int c1=min(j,k),c2=max(j,k);\n                    ans+=max(query(i+2,1,n,c1),max(query(i+2,c1+2,n,c2),query(i+2,c2+2,n,m)));\n                    ret=max(ans,ret);\n                    // printf(\"i=%d j=%d k=%d val1=%d val2=%d val3=%d ans=%d\\n\",i,j,k,board[i][j],query(1,k+1,i,k+1),max(query(i+2,1,n,c1),max(query(i+2,c1+2,n,c2),query(i+2,c2+2,n,m))),ans);\n                }\n            }\n        }\n        return ret;\n    }\n};",
    "submit_ts": "1723909209",
    "subm_id": "556335040"
}