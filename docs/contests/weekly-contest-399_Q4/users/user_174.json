{
    "username": "rupa6",
    "submission": "static const int mod = 1e9+7;\n\nstruct Node {\n    long long lr;\n    long long lnr;\n    long long lrn;\n    long long lnrn;\n    \n    Node() {};\n    \n    Node(long long lr, long long lnr, long long lrn, long long lnrn): lr(lr), lnr(lnr), lrn(lrn), lnrn(lnrn) {};\n    \n    int ans() {\n        return max(max(lr, lnr), max(lrn, lnrn))%mod;\n    }\n};\n\nclass Solution {\npublic:\n    #define ii pair<int, int>\n    static const int N = 500000;\n    Node st[N];\n    vector<int> a;\n        \n    Node merge(Node f, Node s) {\n        auto node=Node();\n        node.lr=max(f.lr + s.lnr, f.lrn + s.lr);\n        node.lnr=max(f.lnr + s.lnr, f.lnrn + s.lr);\n        node.lrn = max(f.lr + s.lnrn, f.lrn+s.lrn);\n        node.lnrn = max(f.lnr + s.lnrn, f.lnrn + s.lrn);\n        return node;\n    }\n    \n    Node build(int id, int l, int r) {\n        if(r<l) return Node(0,0,0,0);\n        if(l==r) {\n            return st[id] = Node{(a[l]>0 ? a[l] : 0), 0, 0, 0};\n        }\n        int mid=l+((r-l)>>1);\n        st[id] = merge(build(id<<1, l, mid), build((id<<1)+1, mid+1, r));\n        // cout<<id<<\"::\"<<st[id].lr<<' '<<st[id].lnr<<' '<<st[id].lrn<<' '<<st[id].lnrn<<endl;\n        return st[id];\n    }\n    \n    int ql;\n    void update(int id, int l, int r) {\n        if(l==r) {\n            st[id] = Node{(a[l]>0 ? a[l] : 0), 0, 0, 0};\n            return;\n        }\n        if(l>ql || r<ql) return;\n        int mid=l+((r-l)>>1);\n        update(id<<1, l, mid);\n        int noder=((id<<1)+1);\n        update(noder, mid+1, r);\n        st[id] = merge(st[id<<1], st[noder]);\n    }\n    \n    \n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        a=nums;\n        build(1, 0, a.size()-1);\n        int ans=0;\n        for(auto q: queries) {\n            a[q[0]]=q[1];\n            ql=q[0];\n            update(1, 0, a.size()-1);\n            // cout<<st[1].ans()<<endl;\n            ans=(ans+0LL+st[1].ans())%mod;\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1716695815.0
}