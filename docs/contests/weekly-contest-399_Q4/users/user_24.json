{
    "username": "pingchungchang",
    "submission": "class Solution {\npublic:\n    #define pii pair<int,int>\n    #define pll pair<ll,ll>\n    #define ll long long\n    const ll mod = 1e9+7;\n    struct node{\n        ll dp[2][2];\n        node(){\n            memset(dp,0,sizeof(dp));\n        }\n    };\n    struct SEG{\n        #define mid ((l+r)>>1)\n        #define ls now*2+1\n        #define rs now*2+2\n        vector<node> seg;\n        void init(int n){\n            seg = vector<node>(n*4,node());\n        }\n        node pull(node pl,node pr){\n            node re = node();\n            re.dp[0][0] = max({pl.dp[0][0]+pr.dp[1][0],pl.dp[0][1]+pr.dp[0][0],0ll});\n            re.dp[0][1] = max({pl.dp[0][1]+pr.dp[0][1],pl.dp[0][0]+pr.dp[1][1],re.dp[0][0]});\n            re.dp[1][0] = max({pl.dp[1][0]+pr.dp[1][0],pl.dp[1][1]+pr.dp[0][0],re.dp[0][0]});\n            re.dp[1][1] = max({pl.dp[1][0]+pr.dp[1][1],pl.dp[1][1]+pr.dp[0][1],re.dp[0][0],re.dp[0][1],re.dp[1][0]});\n            return re;\n        }\n        void modify(int now,int l,int r,int p,int v){\n            if(l == r){\n                memset(seg[now].dp,0,sizeof(seg[now].dp));\n                seg[now].dp[1][1] = max(v,0);\n                return;\n            }\n            if(mid>=p)modify(ls,l,mid,p,v);\n            else modify(rs,mid+1,r,p,v);\n            seg[now] = pull(seg[ls],seg[rs]);\n        }\n        #undef ls\n        #undef rs\n        #undef mid\n    };\n    SEG seg;\n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        seg.init(n);\n        for(int i = 0;i<n;i++){\n            seg.modify(0,0,n-1,i,nums[i]);\n        }\n        ll ans = 0;\n        for(auto &i:queries){\n            int p = i[0],v = i[1];\n            seg.modify(0,0,n-1,p,v);\n            ans += seg.seg[0].dp[1][1];\n            ans %= mod;\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1716691964.0
}