{
    "username": "ssayzx",
    "submission": "class Solution {\npublic:\n    #define LOG(format, ...) do { \\\n        if (0) printf(format, ##__VA_ARGS__); \\\n    } while (0)   \n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        #define IS_LEAF(_mp, _u, _p) (!(_mp)[_u].size() || ((_mp)[_u].size() == 1 && (_mp)[_u][0] == _p))\n        int n = edges.size() + 1;\n        vector<vector<int>> mp(n);\n        for (auto& e : edges) {\n            mp[e[0]].push_back(e[1]);\n            mp[e[1]].push_back(e[0]);\n        }\n\n        vector<vector<int>> rt(n, vector<int>(2, 0));\n        vector<int> ans(n, 0);\n\n        auto update = [&](int u, int val) {\n            if (val > rt[u][0]) {\n                rt[u][1] = rt[u][0];\n                rt[u][0] = val;\n            } else if (val > rt[u][1]) {\n                rt[u][1] = val;\n            }\n        };\n\n        function<void(int u, int p)> dfs1 = [&](int u, int p) {\n            if (IS_LEAF(mp, u, p)) { \n                return;\n            }\n            for (auto v : mp[u]) {\n                if (v == p) continue;\n                dfs1(v, u);\n                update(u, rt[v][0] + ((v % 2) ? 1 : 2));\n            }\n            LOG(\"rt[%d][0]=%d, rt[%d][1]=%d\\n\", u, rt[u][0], u, rt[u][1]); \n        };\n        dfs1(0, -1);\n\n        function<void(int u, int p)> dfs2 = [&](int u, int p) {\n            // UpdateAns(env); // \u66f4\u65b0\u6839\u4e3acur\u65f6\u7684\u7b54\u6848\uff0c\u5f53\u524d\u662f\u4ee5cur\u4e3a\u6839\u7684\u8fd0\u884c\u73af\u5883\n            ans[u] = rt[u][0];\n            if (IS_LEAF(mp, u, p)) return;\n            \n            for (auto v : mp[u]) {\n                if (v == p) continue;\n\n                auto pu = rt[u], pv = rt[v];\n                if (pu[0] == pv[0] + ((v % 2) ? 1 : 2)) {\n                    rt[u][0] = rt[u][1];\n                }\n                LOG(\"--1 rt[%d][0]=%d, rt[%d][1]=%d, %d\\n\", v, rt[v][0], v, rt[v][1], rt[u][0]); \n                update(v, rt[u][0] + ((u % 2) ? 1 : 2));\n                LOG(\"--2 rt[%d][0]=%d, rt[%d][1]=%d\\n\", v, rt[v][0], v, rt[v][1]); \n                dfs2(v, u);\n\n                rt[u] = pu;\n                rt[v] = pv;\n                \n            }\n        };\n        dfs2(0, -1);\n\n        return ans;\n    }\n};",
    "submit_ts": "1722700646",
    "subm_id": "552280698"
}