{
    "username": "tungghun22",
    "submission": "class Solution {\n    typedef long long ll;\n    typedef vector<ll> vl;\n    typedef vector<int> vi;\n    \npublic:\n    struct SGT{\n        vl sgt;\n        void init(int n){\n            sgt.resize((n+5)*4);\n        }\n        int lc(int x){\n            return 2*x+1;\n        }\n        int rc(int x){\n            return 2*x+2;\n        }\n        void pull(int x,int l,int r){\n            if(l>=r) return;\n            sgt[x] = sgt[lc(x)] & sgt[rc(x)];\n        }\n        void build(int x,int l,int r,vi &a){\n            if(l>r) return;\n            if(l==r){\n                sgt[x] = a[l];\n                return;\n            }\n            int mid = (l+r) / 2;\n            build(lc(x),l,mid,a);\n            build(rc(x),mid+1,r,a);\n            pull(x,l,r);\n        }\n        ll query(int x,int l,int r,int a,int b){\n            if(l>r || r<a || l>b){\n                return (1LL << 40)-1;\n            }\n            if(a<=l && r<=b){\n                return sgt[x];\n            }\n            int mid = (l+r) / 2;\n            ll lres = query(lc(x),l,mid,a,b);\n            ll rres = query(rc(x),mid+1,r,a,b);\n            return lres & rres;\n        }\n    };\n    long long countSubarrays(vector<int>& nums, int k) {\n        const int n = nums.size();\n        SGT sgt;\n        sgt.init(n);\n        sgt.build(0,0,n-1,nums);\n        ll res = 0;\n        for(int i = 0;i<n;i++){\n            if((nums[i] & k) != k){\n                continue;\n            }\n            ll l = 0,r = i;\n            while(l<=r){\n                ll mid = (l+r) / 2;\n                ll qry = sgt.query(0,0,n-1,mid,i);\n                if(qry < k){\n                    l = mid + 1;\n                }\n                else{\n                    r = mid - 1;\n                }\n            }\n            ll lb = l;\n            if(sgt.query(0,0,n-1,lb,i) > k){\n                continue;\n            }\n            l = lb; r = i;\n            while(l<=r){\n                ll mid = (l+r) / 2;\n                ll qry = sgt.query(0,0,n-1,mid,i);\n                if(qry == k){\n                    l = mid + 1;\n                }\n                else{\n                    r = mid - 1;\n                }\n            }\n            ll ub = l-1;\n            res += ub - lb + 1;\n        }\n        return res;\n    }\n};",
    "submit_ts": "1720278473",
    "subm_id": "1311710699"
}