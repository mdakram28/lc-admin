{
    "username": "liouzhou_101",
    "submission": "template<class T, class U>\nbool freshmax(T& a, const U& b)\n{\n\treturn a < T(b) ? a = b, 1 : 0;\n}\n\ntemplate<class T, class U>\nbool freshmin(T& a, const U& b)\n{\n\treturn a > T(b) ? a = b, 1 : 0;\n}\n\nint dp1[33][33][33][33], dp2[33][33][33][33], dp3[33][33][33][33];\nint s[33][33];\n\nint get(int x1, int x2, int y1, int y2)\n{\n    return s[x2 + 1][y2 + 1] - s[x1][y2 + 1] - s[x2 + 1][y1] + s[x1][y1];\n}\n\nclass Solution {\npublic:\n    int minimumSum(vector<vector<int>>& g) {\n        int n = g.size(), m = g[0].size();\n        \n        for (int i = 0; i < n; ++i)\n            for (int j = 0; j < m; ++j)\n            {\n                s[i + 1][j + 1] = s[i + 1][j] + s[i][j + 1] - s[i][j] + g[i][j];\n            }\n        \n\t\tfor (int x1 = 0; x1 < n; ++x1)\n\t\t\tfor (int x2 = x1; x2 < n; ++x2)\n\t\t\t\tfor (int y1 = 0; y1 < m; ++y1)\n\t\t\t\t{\n\t\t\t\t\tint xmin = n, xmax = -1, ymin = m, ymax = -1;\n\t\t\t\t\tfor (int y2 = y1; y2 < m; ++y2)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (int x = x1; x <= x2; ++x)\n\t\t\t\t\t\t\tif (g[x][y2])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfreshmin(xmin, x);\n\t\t\t\t\t\t\t\tfreshmin(ymin, y2);\n\t\t\t\t\t\t\t\tfreshmax(xmax, x);\n\t\t\t\t\t\t\t\tfreshmax(ymax, y2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tdp1[x1][x2][y1][y2] = max(xmax - xmin + 1, 0) * max(ymax - ymin + 1, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\tconst int INF = 1000000000;\n\t\tfor (int x1 = n - 1; x1 >= 0; --x1)\n\t\t\tfor (int x2 = x1; x2 < n; ++x2)\n\t\t\t\tfor (int y1 = m - 1; y1 >= 0; --y1)\n\t\t\t\t\tfor (int y2 = y1; y2 < m; ++y2)\n\t\t\t\t\t{\n\t\t\t\t\t\tdp2[x1][x2][y1][y2] = INF;\n\t\t\t\t\t\tdp3[x1][x2][y1][y2] = INF;\n\t\t\t\t\t\tfor (int x = x1; x < x2; ++x)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfreshmin(dp2[x1][x2][y1][y2], dp1[x1][x][y1][y2] + dp1[x + 1][x2][y1][y2]);\n\t\t\t\t\t\t\tfreshmin(dp3[x1][x2][y1][y2], dp1[x1][x][y1][y2] + dp2[x + 1][x2][y1][y2]);\n\t\t\t\t\t\t\tfreshmin(dp3[x1][x2][y1][y2], dp2[x1][x][y1][y2] + dp1[x + 1][x2][y1][y2]);\n\t\t\t\t\t\t\tif (get(x1, x, y1, y2) == get(x1, x2, y1, y2)) freshmin(dp2[x1][x2][y1][y2], dp2[x1][x][y1][y2]), freshmin(dp3[x1][x2][y1][y2], dp3[x1][x][y1][y2]);\n\t\t\t\t\t\t\tif (x + 1 <= x2 && get(x + 1, x2, y1, y2) == get(x1, x2, y1, y2)) freshmin(dp2[x1][x2][y1][y2], dp2[x + 1][x2][y1][y2]), freshmin(dp3[x1][x2][y1][y2], dp3[x + 1][x2][y1][y2]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (int y = y1; y < y2; ++y)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfreshmin(dp2[x1][x2][y1][y2], dp1[x1][x2][y1][y] + dp1[x1][x2][y + 1][y2]);\n\t\t\t\t\t\t\tfreshmin(dp3[x1][x2][y1][y2], dp1[x1][x2][y1][y] + dp2[x1][x2][y + 1][y2]);\n\t\t\t\t\t\t\tfreshmin(dp3[x1][x2][y1][y2], dp2[x1][x2][y1][y] + dp1[x1][x2][y + 1][y2]);\n\t\t\t\t\t\t\tif (get(x1, x2, y1, y) == get(x1, x2, y1, y2)) freshmin(dp2[x1][x2][y1][y2], dp2[x1][x2][y1][y]), freshmin(dp3[x1][x2][y1][y2], dp3[x1][x2][y1][y]);\n\t\t\t\t\t\t\tif (y + 1 <= y2 && get(x1, x2, y + 1, y2) == get(x1, x2, y1, y2)) freshmin(dp2[x1][x2][y1][y2], dp2[x1][x2][y + 1][y2]), freshmin(dp3[x1][x2][y1][y2], dp3[x1][x2][y + 1][y2]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\treturn dp3[0][n - 1][0][m - 1];\n    }\n};",
    "submit_ts": 1719113258.0
}