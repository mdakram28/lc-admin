{
    "username": "Fkaiser7",
    "submission": "#define lli long long\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        lli ans=0;\n        lli n=nums.size();\n        vector<vector<lli>>v(31,vector<lli>(n));\n        vector<lli>v1(31);\n        for(lli i=0;i<n;i++){\n            for(lli j=0;j<=30;j++){\n                lli t=1<<j;\n                if(nums[i]&t){\n                    if(i==0){\n                        v[j][i]=1;\n                    }\n                    else{\n                        v[j][i]=1+v[j][i-1];\n                    }\n                }\n            }\n        }\n        //cout<<\"hi\\n\";\n        //cout<<v[1].size()<<endl;\n        for(lli i=0;i<=30;i++){\n            lli t=1<<i;\n            if(k&t){\n                v1[i]++;\n            }\n        }\n        for(lli i=0;i<n;i++){\n            lli ind1=n,ind2=-1;\n            for(lli j=0;j<=30;j++){\n                if(v1[j]){\n                    lli lo=i,hi=n-1;\n                    lli ans=-1;\n                    while(lo<=hi){\n                        lli mid=(lo+hi)/2;\n                        if((v[j][mid]-(i==0?0:v[j][i-1]))==mid-i+1){\n                            ans=mid;\n                            lo=mid+1;\n                        }\n                        else{\n                            hi=mid-1;\n                        }\n                    }\n                    //cout<<i<<\" \"<<j<<\" \"<<ans<<endl;\n                    ind1=min(ind1,ans);\n                }\n                else{\n                    lli lo=i,hi=n-1;\n                    lli ans=n;\n                    while(lo<=hi){\n                        lli mid=(lo+hi)/2;\n                        if((v[j][mid]-(i==0?0:v[j][i-1]))!=mid-i+1){\n                            ans=mid;\n                            hi=mid-1;\n                        }\n                        else{\n                            lo=mid+1;\n                        }\n                    }\n                    ind2=max(ind2,ans);\n                }\n            }\n            //cout<<i<<\" \"<<ind1<<\" \"<<ind2<<endl;\n            if(ind2<=ind1){\n                if(ind2==-1){\n                    ans+=ind1;\n                }\n                else if(ind1==n){\n                    ans+=n-ind2;\n                }\n                else{\n                ans+=ind1-ind2+1;\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279999",
    "subm_id": "1311773235"
}