{
    "username": "zhenliang153",
    "submission": "class Solution {\npublic:\n    long long minimumOperations(vector<int>& nums, vector<int>& target) {\n        const int n = nums.size();\n        vector<int> diff(n);\n        for (int i = 0; i < n; ++i) {\n            diff[i] = target[i] - nums[i];\n        }\n        long long ret = 0;\n        auto f = [](vector<int>& arr) -> long long {\n            if (arr.empty()) {\n                return 0;\n            }\n            if (arr[0] < 0) {\n                for (auto& a : arr) {\n                    a = -a;\n                }\n            }\n            const int n = arr.size();\n            vector<int> left(n), right(n);\n            stack<int> s;\n            for (int i = 0; i < n; ++i) {\n                while (!s.empty() && arr[s.top()] > arr[i]) {\n                    s.pop();\n                }\n                left[i] = s.empty() ? -1: s.top();\n                s.push(i);\n            }\n            s = stack<int>();\n            for (int i = n - 1; i >= 0; --i) {\n                while (!s.empty() && arr[s.top()] >= arr[i]) {\n                    s.pop();\n                }\n                right[i] = s.empty() ? n: s.top();\n                s.push(i);\n            }\n            long long ret = 0;\n            for (int i = 0; i < n; ++i) {\n                const int l = left[i];\n                const int r = right[i];\n                int L = 0, R = 0;\n                if (l != -1) {\n                    L = arr[l];\n                }\n                if (r != n) {\n                    R = arr[r];\n                }\n                ret += arr[i] - max(L, R);\n            }\n            return ret;\n        };\n        vector<int> arr;\n        for (int i = 0; i < n; ++i) {\n            if (diff[i] == 0) {\n                ret += f(arr);\n                arr.clear();\n                continue;\n            }\n            if (!arr.empty() && (arr.back() > 0) != (diff[i] > 0)) {\n                ret += f(arr);\n                arr.clear();\n            }\n            arr.push_back(diff[i]);\n        }\n        ret += f(arr);\n        return ret;\n    }\n};",
    "submit_ts": "1721533790",
    "subm_id": "548401016"
}