{
    "username": "Nreyog",
    "submission": "struct ST {\n\n    vector<vector<int>> st;\n\n    ST() {}\n    ST(vector<int> &a) {\n        int n = a.size();\n        int k = __lg(n);\n        st = vector<vector<int>> (n, vector<int> (k + 1));\n        for (int i = 0; i < n; i++) {\n            st[i][0] = a[i];\n        }\n        for(int i = 1; i <= k; i++) {\n            for(int j = 0; j + (1 << i) - 1 < n; j++) {\n                st[j][i] = st[j][i - 1] & st[j + (1 << (i - 1))][i - 1];\n            }\n        }\n    }\n    \n    int query(int l, int r) {\n        int k = __lg(r - l + 1);\n        return st[l][k] & st[r - (1 << k) + 1][k];\n    }\n};\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        long long res = 0;\n        int n = nums.size();\n        ST S(nums);\n        for (int i = 0; i < n; i++) {\n            int l = i, r = n;\n            while (l < r) {\n                int m = l + r >> 1;\n                if (S.query(i, m) > k) {\n                    l = m + 1;\n                } else {\n                    r = m;\n                }\n            }\n            int ll = i, rr = n;\n            while (ll < rr) {\n                int m = ll + rr >> 1;\n                if (S.query(i, m) >= k) {\n                    ll = m + 1;\n                } else {\n                    rr = m;\n                }\n            }\n            res += ll - l;\n        }\n        return res;\n    }\n};",
    "submit_ts": "1720277504",
    "subm_id": "544557067"
}