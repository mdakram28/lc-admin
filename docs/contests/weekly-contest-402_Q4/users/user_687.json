{
    "username": "Wilsano",
    "submission": "class Solution {\npublic:\n    vector<int> bit;\n    \n    int query(int x){\n        int count = 0;\n        while(x > 0){\n            count += bit[x];\n            x -= (x & -x);\n        }\n        return count;\n    }\n    \n    void update(int x, int val){\n        while(x <= 1e5){\n            bit[x] += val;\n            x += (x & -x);\n        }\n    }\n\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n\n        bit.resize(1e5 + 2, 0);\n\n        int n = nums.size();\n        set<int> peaks;\n        for(int i = 1; i < n - 1; ++i){\n            if(nums[i - 1] < nums[i] && nums[i] > nums[i + 1]){\n                update(i, 1);\n            }\n        }\n        \n        vector<int> res;\n        for(const auto& q : queries){\n            int type = q[0];\n            // find peaks\n            if(type == 1){\n                int right = query(q[2] - 1);\n                int left = query(q[1]);\n                int count = right - left;\n                count = max(0, count);\n                res.push_back(count);\n            }\n            // modify the array and peaks\n            else{\n                int index = q[1];\n                int val = q[2];\n                \n                for(int i = index - 1; i <= index + 1; ++i){\n                    if(i <= 0 || i >= n - 1){\n                        continue;\n                    }\n                    if(nums[i - 1] < nums[i] && nums[i] > nums[i + 1]){\n                        update(i, -1);\n                    }\n                }\n                \n                nums[index] = val;\n                \n                for(int i = index - 1; i <= index + 1; ++i){\n                    if(i <= 0 || i >= n - 1){\n                        continue;\n                    }\n                    if(nums[i - 1] < nums[i] && nums[i] > nums[i + 1]){\n                        update(i, 1);\n                    }\n                }\n            }\n        }\n        \n        return res;\n    }\n};",
    "submit_ts": 1718507632.0
}