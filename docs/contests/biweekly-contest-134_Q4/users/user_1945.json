{
    "username": "samonkeys",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        long long ans = 0;\n        int val = -1;\n        int left = 0;\n        vector<int> idxs( 32, INT_MAX );\n        for( int i = 0; i < nums.size(); ++i ) {\n            int num = nums[ i ];\n            if( ( num & k ) != k ) {\n                for( int j = 0; j < 31; ++j ) {\n                    idxs[ j ] = INT_MAX;\n                }\n                left = -1;\n            }\n            else {\n                bool valid = true;\n                int minIdx = i;\n                for( int j = 0; j < 31; ++j ) {\n                    int mask = 1 << j;\n                    if( ( mask & num ) && !( mask & k ) ) {\n                        minIdx = min( minIdx, idxs[ j ] );\n                        if( idxs[ j ] == INT_MAX ) {\n                            valid = false;\n                        }\n                    }\n\n                    if( !( mask & num ) ) {\n                        idxs[ j ] = i;\n                    }\n                }\n\n                if( left == -1 ) {\n                    left = i;\n                }\n\n                if( !valid ) {\n                    continue;\n                }\n\n                //cout<<i<<\",\"<<minIdx<<\",\"<<left<<\"\\n\";\n                ans += minIdx - left + 1;\n            }\n        }\n\n        return ans;\n    }\n};",
    "submit_ts": "1720281217",
    "subm_id": "1311817248"
}