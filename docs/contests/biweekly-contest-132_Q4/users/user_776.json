{
    "username": "somyakumar",
    "submission": "\ntypedef struct{\n    int val1, val2, len1, len2;\n}maxvals;\n\nclass Solution {\npublic:\n\n    int maximumLength(vector<int>& nums, int k) {\n        int n = nums.size();\n        int dp[n][k+1];\n        for(int j=0; j<=k; j++)dp[0][j] = 1;\n        int ans = 1;\n        \n        map<int, int> mps[k+1];\n        maxvals maxi[k+2];\n        for(int i=0; i<=k; i++)maxi[i].val1 = maxi[i].val2 = -1;\n\n        for(int i=0; i<n; i++){\n            for(int j=0; j<=k; j++){\n                dp[i][j] = 1;\n                dp[i][j] = max(dp[i][j], 1+ mps[j][nums[i]]);\n                if(j){\n                    if(maxi[j-1].val1 == -1){\n                        maxi[j].val1 = nums[i];\n                        maxi[j].len1 = dp[i][j];\n                    }\n                    else{\n                        if(maxi[j-1].val1 != nums[i]){\n                            dp[i][j] = max(dp[i][j], 1 + maxi[j-1].len1);\n                        }\n                        else if(maxi[j-1].val2 != -1){\n                            dp[i][j] = max(dp[i][j], 1 + maxi[j-1].len2);\n                        }\n                    }\n                }\n\n                // update\n                if(maxi[j].val1 == -1){\n                        maxi[j].val1 = nums[i];\n                        maxi[j].len1 = dp[i][j];\n                    }\n                    else if(maxi[j].val2 == -1){\n                        if(maxi[j].len1 >= dp[i][j]){\n                            maxi[j].len2 = dp[i][j];\n                            maxi[j].val2 = nums[i];\n                        }\n                        else {\n                            maxi[j].len2 = maxi[j].len1;\n                            maxi[j].val2 = maxi[j].val1;\n                            maxi[j].len1 = dp[i][j];\n                            maxi[j].val1 = nums[i];\n                        }\n                    }\n                    else{\n                        if(dp[i][j] <=maxi[j].len1 && dp[i][j] >maxi[j].len2){\n                            maxi[j].len2 = dp[i][j];\n                            maxi[j].val2 = nums[i];\n                        }\n                        else if(dp[i][j] >maxi[j].len1){\n                            maxi[j].len2 = maxi[j].len1;\n                            maxi[j].val2 = maxi[j].val1;\n                            maxi[j].len1 = dp[i][j];\n                            maxi[j].val1 = nums[i];\n                        }\n                    }\n                mps[j][nums[i]] = max(mps[j][nums[i]], dp[i][j]);\n                ans = max(ans, dp[i][j]);\n            }\n        }\n        return ans;\n\n    }\n};",
    "submit_ts": 1717861541.0
}