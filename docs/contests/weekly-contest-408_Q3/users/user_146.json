{
    "username": "tarptaeya",
    "submission": "class Solution:\n    def numberOfSubstrings(self, s: str) -> int:\n        def getcount(arr, target):\n            if target < arr[0]:\n                return 0\n            lo = 0\n            hi = len(arr) - 1\n            ans = -1\n            while lo <= hi:\n                mid = (lo + hi) // 2\n                if arr[mid] <= target:\n                    ans = mid\n                    lo = mid + 1\n                else:\n                    hi = mid - 1\n            return ans + 1\n\n        n = len(s)\n        ans = x = 0\n        # while x * x + x <= n:\n        #     d = {0: [-1]}\n        #     prefix = 0\n        #     for i in range(n):\n        #         if s[i] == '0':\n        #             prefix += 1\n        #         arr = d.get(prefix - x)\n        #         if arr:\n        #             ans += getcount(arr, i - (x * x + x))\n        #         if prefix not in d:\n        #             d[prefix] = []\n        #         d[prefix].append(i)\n        #     x += 1\n\n        d = {0: [-1]}\n        prefix = 0\n        for i in range(n):\n            if s[i] == '0':\n                prefix += 1\n            x = 0\n            while x * x + x <= i + 1:\n                arr = d.get(prefix - x)\n                if arr:\n                    ans += getcount(arr, i - (x * x + x))\n                x += 1\n            if prefix not in d:\n                d[prefix] = []\n            d[prefix].append(i)\n        return ans",
    "submit_ts": "1722137040",
    "subm_id": "1335752378"
}