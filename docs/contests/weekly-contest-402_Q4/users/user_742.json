{
    "username": "quasicompact",
    "submission": "class ST {\nprivate:\n\tint DEF_VAL = 0; // default value\n\tint op(int a, int b){return (a + b);} // operation\n\tint N;\n\tvector<int> S;\n\tint s_query(int a0, int a1){\n\t\tif(a0 >= a1){return DEF_VAL;}\n\t\tif(a0+1 == a1){return S[a0];}\n\t\tint ans = DEF_VAL;\n\t\tif(a0%2==1){ans = op(ans , S[a0  ]); a0++;}\n\t\tif(a1%2==1){ans = op(ans , S[a1-1]); a1--;}\n\t\tans = op(ans , s_query(a0/2,a1/2));\n\t\treturn ans;\n\t}\npublic:\n\tST(const vector<int> A){\n\t\tN = 1;\n\t\twhile((1 << N) < A.size()){N++;}\n\t\tS.resize(1 << (N+1),DEF_VAL);\n\t\tfor(int i=0;i<(1<<N);i++){ S[(1<<N)+i] = (i < A.size() ? A[i] : DEF_VAL); }\n\t\tfor(int n=N-1;n>=0;n--){\n\t\t\tfor(int i=(1<<n);i<(1<<(n+1));i++){\n\t\t\t\tS[i] = op(S[2*i] , S[2*i+1]);\n\t\t\t}\n\t\t}\n\t}\n    void update(int i, int val){\n        i += (1<<N);\n\t\t// printf(\" -- %d %d\\n\",i,(int)S.size());\n        S[i] = val;\n        while(i > 1){\n            int j = i/2;\n            S[j] = op(S[2*j],S[2*j+1]);\n            i=j;\n        }\n    }\n\tint query(int a0, int a1){\n\t\treturn s_query((1<<N)+a0,(1<<N)+a1);\n\t}\n    void print_val(){\n\t\tfor(int n=0;n<=N;n++){for(int i=0;i<(1<<n);i++){printf(\"%d \",S[(1<<n)+i]);}printf(\"\\n\");}\n    }\n};\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n\t\tvector<int> A(nums.size());\n\t\tfor(int i=0;i<A.size();i++){A[i] = ((i-1 >= 0 && i+1<nums.size() && nums[i] > nums[i-1] && nums[i] > nums[i+1]) ? 1 : 0);}\n\t\tST *myst = new ST(A);\n        vector<int> ans;\n\t\tfor(auto &v : queries){\n\t\t\t// printf(\"%d %d %d\\n\",v[0],v[1],v[2]);\n\t\t\t// myst->print_val();\n\t\t\tif(v[0] == 2){\n\t\t\t\tnums[v[1]] = v[2];\n\t\t\t\tfor(int i=max(v[1]-1,0);i<=min(v[1]+1,(int)nums.size()-1);i++){\n\t\t\t\t\tmyst->update(i,((i-1 >= 0 && i+1<nums.size() && nums[i] > nums[i-1] && nums[i] > nums[i+1]) ? 1 : 0));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{ans.push_back(myst->query(v[1]+1,v[2]));}\n\t\t\t// myst->print_val();\n\t\t\t// printf(\"---------\\n\");\n\t\t}\n\t\treturn ans;\n    }\n};\n",
    "submit_ts": 1718507748.0
}