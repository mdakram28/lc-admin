{
    "username": "xuan-ni-shi",
    "submission": "#pragma GCC optimize(2)\nclass Solution {\npublic:\n    vector<int>son[100005];\n    vector<int>sonlength[100005];\n    int fa[100005]={0};\n    int falength[100005]={0};\n    int mx[100005][2];\n    int ans[100005];\n    void update(int now,int tmp){\n        if(tmp>mx[now][0]){\n                mx[now][1]=mx[now][0];\n                mx[now][0]=tmp;\n        }\n        else if(tmp>mx[now][1])mx[now][1]=tmp;\n    }\n    int dfs(int now){\n        int siz=son[now].size();\n        for(int i=0;i<siz;i++){\n            int tmp=0;\n            if(fa[now]==son[now][i]){\n                sonlength[now].push_back(0);\n                continue;\n            }\n            fa[son[now][i]]=now;\n            tmp+=dfs(son[now][i]);\n            if(son[now][i]%2)tmp++;\n            else tmp+=2;\n            update(now,tmp);\n            sonlength[now].push_back(tmp);\n        }\n        return mx[now][0];\n    }\n    void dfs1(int now){\n        ans[now]=max(mx[now][0],mx[now][1]);\n        ans[now]=max(ans[now],falength[now]);\n        int siz=son[now].size();\n        for(int i=0;i<siz;i++){\n            if(son[now][i]==fa[now])continue;\n            int sson=son[now][i];\n            int cal=0;\n            if(now%2)cal=1;\n            else cal=2;\n            int nedadd=0;\n            if(sonlength[now][i]==mx[now][0])nedadd=mx[now][1];\n            else nedadd=mx[now][0];\n            nedadd=max(nedadd,falength[now]);\n            cal+=nedadd;\n            falength[sson]=cal;\n            dfs1(sson);\n        }\n    }\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int siz=edges.size();\n        for(int i=0;i<siz;i++){\n            son[edges[i][0]].push_back(edges[i][1]);\n            son[edges[i][1]].push_back(edges[i][0]);\n        }\n        for(int i=0;i<siz;i++){\n            mx[i][0]=mx[i][1]=0;\n        }\n        dfs(0);\n        vector<int>ans1;\n        dfs1(0);\n        //printf(\"%d %d\",mx[0][0],mx[0][1]);\n        for(int i=0;i<=siz;i++)ans1.push_back(ans[i]);\n        return ans1;\n    }\n};",
    "submit_ts": "1722700270",
    "subm_id": "552279109"
}