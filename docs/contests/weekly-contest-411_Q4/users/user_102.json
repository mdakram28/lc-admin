{
    "username": "garyjhu",
    "submission": "class Solution {\n    public long[] countKConstraintSubstrings(String s, int k, int[][] queries) {\n        int n = s.length();\n        int[] max0 = new int[n];\n        int[] max1 = new int[n];\n        for (int i = 0, j = 0, count = 0; i < n; i++) {\n            while (j < n) {\n                if (s.charAt(j) == '0') {\n                    if (count == k) break;\n                    count++;\n                }\n                j++;\n            }\n            max0[i] = j - 1;\n            if (s.charAt(i) == '0') count--;\n        }\n        for (int i = 0, j = 0, count = 0; i < n; i++) {\n            while (j < n) {\n                if (s.charAt(j) == '1') {\n                    if (count == k) break;\n                    count++;\n                }\n                j++;\n            }\n            max1[i] = j - 1;\n            if (s.charAt(i) == '1') count--;\n        }\n        int[] max = new int[n];\n        for (int i = 0; i < n; i++) max[i] = Math.max(max0[i], max1[i]);\n//        for (int i = 0; i < n; i++) System.out.print(max0[i] + \" \");\n//        System.out.println();\n//        for (int i = 0; i < n; i++) System.out.print(max1[i] + \" \");\n//        System.out.println();\n//        for (int i = 0; i < n; i++) System.out.print(max[i] + \" \");\n//        System.out.println();\n//        System.out.println();\n        long[] pre = new long[n + 1];\n        for (int i = 0; i < n; i++) {\n            pre[i + 1] = pre[i] + max[i] - i + 1;\n        }\n        int m = queries.length;\n        long[] res = new long[m];\n        for (int i = 0; i < m; i++) {\n            int[] q = queries[i];\n            int lo = q[0], hi = q[1];\n            while (lo <= hi) {\n                int mid = (lo + hi) / 2;\n                if (max[mid] <= q[1]) lo = mid + 1;\n                else hi = mid - 1;\n            }\n            res[i] = pre[hi + 1] - pre[q[0]] + (long) (q[1] - lo + 1) * (q[1] - lo + 2) / 2;\n        }\n        return res;\n    }\n}\n",
    "submit_ts": "1723952778",
    "subm_id": "1359804411"
}