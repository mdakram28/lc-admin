{
    "username": "IZa7CMN6fi",
    "submission": "class Solution {\n\n    int[] tv;\n    class Tree {\n        int l, r;\n        Tree lt, rt;\n        int v;\n        Tree(int ll, int rr) {\n            l = ll;\n            r = rr;\n            if(l == r) {\n                if(l == 0 || l == tv.length - 1) v = 0;\n                else {\n                    v = tv[l] > tv[l - 1] && tv[l] > tv[l + 1] ? 1 : 0;\n                }\n            } else {\n                int mid = (l + r) >>1;\n                lt = new Tree(ll, mid);\n                rt = new Tree(mid + 1, rr);\n                v = lt.v + rt.v;\n            }\n        }\n\n        public int query(int ll, int rr) {\n            if(ll > rr) return 0;\n            if(l ==ll && r == rr) return v;\n            int mid = (l + r) >> 1;\n            if(rr <= mid) return lt.query(ll, rr);\n            else if(ll > mid) return rt.query(ll, rr);\n            else return lt.query(ll, mid) + rt.query(mid + 1, rr);\n        }\n\n        public void update(int index) {\n            if(index < 0 || index >= tv.length) return;\n            if(l == index && r == index) {\n                if(l == 0 || l == tv.length - 1) v = 0;\n                else {\n                    v = tv[l] > tv[l - 1] && tv[l] > tv[l + 1] ? 1 : 0;\n                }\n            } else {\n                int mid = (l + r) >> 1;\n                if(index <= mid) lt.update(index);\n                else rt.update(index);\n                v = lt.v + rt.v;\n            }\n        }\n    }\n\n    public List<Integer> countOfPeaks(int[] nums, int[][] queries) {\n        tv = nums;\n        Tree t = new Tree(0, tv.length - 1);\n        List<Integer> ans = new ArrayList<>();\n        for (int[] query : queries) {\n            if(query[0] == 1) {\n                ans.add(t.query(query[1] + 1, query[2] - 1));\n            } else {\n                tv[query[1]] = query[2];\n                t.update(query[1] - 1);\n                t.update(query[1]);\n                t.update(query[1] + 1);\n            }\n        }\n        return ans;\n    }\n}",
    "submit_ts": 1718507198.0
}