{
    "username": "fovait",
    "submission": "'''\nk=0, all same\nk=1, \n'''\nclass Solution:\n    def maximumLength(self, nums: List[int], k: int) -> int:\n        n = len(nums)\n        nums = [0] + nums\n        dp = [[0] * (k + 1) for _ in range(n + 1)]\n        dp1 = [0] * (k + 1)\n        dp2 = [0] * (k + 1)\n        c1 = [0] * (k + 1)\n        c2 = [0] * (k + 1)\n        Lastp = defaultdict(int)\n        ans = 0\n        for i in range(1, n+1):\n            x = nums[i]\n            f1 = dp1.copy()\n            f2 = dp2.copy()\n            cf1 = c1.copy()\n            cf2 = c2.copy()\n            for j in range(k+1):\n                if j > i:\n                    break\n                dp[i][j] = dp[Lastp[x]][j] + 1\n                if j != 0:\n                    if c1[j - 1] != x:\n                        dp[i][j] = max(dp[i][j], dp1[j - 1] + 1)\n                    else:\n                        if c2[j - 1] != x:\n                            dp[i][j] = max(dp[i][j], dp2[j - 1] + 1)\n                if dp[i][j] >= dp1[j]:\n                    if c1[j] != x:\n                        dp2[j] = dp1[j]\n                        c2[j] = c1[j]\n                    dp1[j] = dp[i][j]\n                    c1[j] = x\n                elif dp[i][j] >= dp2[j]:\n                    dp2[j] = dp[i][j]\n                    c2[j] = x\n                ans = max(ans, dp[i][j])\n            Lastp[x] = i\n        return ans",
    "submit_ts": 1717861360.0
}