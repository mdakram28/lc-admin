{
    "username": "AutumnMist",
    "submission": "public class Solution {\n    public long CountSubarrays(int[] nums, int k) {\n        long ans = 0;\n        var dict = LogTrick(nums);\n        foreach(var v in dict)\n        {\n            foreach(int key in v.Keys)\n            {\n                if(key == k) ans += v[key][1] - v[key][0] + 1;\n            }\n        }\n        return ans;\n    }\n    //res[i]\u8868\u793a\u4ee5i\u4e3a\u53f3\u7aef\u70b9 \u5de6\u4fa7\u4e0d\u540cand\u503c\u7684\u533a\u95f4\u5217\u8868\n    private Dictionary<int, int[]>[] LogTrick(int[] nums)\n    {\n        int n = nums.Length;\n        Dictionary<int, int[]>[] res = new Dictionary<int, int[]>[n];\n        res[0] = new Dictionary<int, int[]>();\n        res[0][nums[0]] = new int[] { 0, 0 };\n        for (int i = 1; i < n; i++)\n        {\n            res[i] = new Dictionary<int, int[]>();\n            foreach (int v in res[i - 1].Keys)\n            {\n                int vAnd = v & nums[i];\n                if (!res[i].ContainsKey(vAnd))\n                {\n                    res[i][vAnd] = new int[] { res[i - 1][v][0], res[i - 1][v][1] };\n                }\n                else\n                {\n                    res[i][vAnd][0] = Math.Min(res[i][vAnd][0], res[i - 1][v][0]);\n                    res[i][vAnd][1] = Math.Max(res[i][vAnd][1], res[i - 1][v][1]);\n                }\n            }\n            if (!res[i].ContainsKey(nums[i]))\n            {\n                res[i][nums[i]] = new int[] { i, i };\n            }\n            else\n            {\n                res[i][nums[i]][1] = i;\n            }\n        }\n        return res;\n    }\n}",
    "submit_ts": "1720277361",
    "subm_id": "544556181"
}