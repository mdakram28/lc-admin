{
    "username": "xyxx",
    "submission": "class Solution {\npublic:\n    vector<vector<int>> bit;\n    \n    void make(vector<int>& ar)\n    {\n        int n = log2(ar.size())+1;\n        bit.assign(n, vector<int>(ar.size(), 0));\n        \n        for(int i=0;i<ar.size();++i)\n            bit[0][i]=ar[i];\n        \n        for(int i=1;i<n;++i)\n        {\n            for(int j=(1<<i)-1;j<ar.size();++j)\n            {\n                bit[i][j]=bit[i-1][j]&bit[i-1][j-(1<<(i-1))];\n            }\n        }\n    }\n    \n    int get(int l, int r)\n    {\n        if(l==r)\n            return bit[0][l];\n        int x = log2(r-l+1);\n        return bit[x][r]&bit[x][l+(1<<x)-1];       \n        \n    }\n    \n    long long countSubarrays(vector<int>& ar, int k) {\n        long ans = 0;\n        make(ar);\n        \n        for(int i=0;i<ar.size();++i)\n        {\n            int s = 0, e = i, lef=-1, rig=-1;\n            //cout<<s<<\" \"<<e<<endl;\n            while(s<=e)\n            {\n                int mid = (s+e)>>1;\n                int x = get(mid, i);\n                if(x==k)\n                    lef=mid, e = mid-1;\n                else if(x<k)\n                    s = mid+1;\n                else\n                    e = mid-1;\n            }\n            \n            s=0, e=i;\n            while(s<=e)\n            {\n                int mid = (s+e)>>1;\n                int x = get(mid, i);\n                if(x==k)\n                    rig=mid, s = mid+1;\n                else if(x<k)\n                    s = mid+1;\n                else\n                    e = mid-1;\n            }\n            \n            //cout<<i<<\" \"<<rig-lef+1<<endl;\n            \n            if(lef!=-1)\n                ans+=(rig-lef+1);\n        }\n        //cout<<endl;\n        \n        return ans;\n    }\n};",
    "submit_ts": "1720279607",
    "subm_id": "1311758013"
}