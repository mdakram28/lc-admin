{
    "username": "ctnya_8135",
    "submission": "class Solution {\npublic:\n    #define MAXX 50005\n    struct node {\n        int64_t ans, wo_left, wo_right, wo_both;\n        node () : ans(0), wo_left(0), wo_right(0), wo_both(0) {}\n    };\n    node segtree[4 * MAXX];\n    \n    void update(int i, int l, int r, int idx, vector<int>& nums) {\n        if (idx < l || r < idx)\n            return;\n        if (l == r) {\n            segtree[i].ans = max(nums[l], 0);\n            segtree[i].wo_left = segtree[i].wo_right = 0;\n            return;\n        }      \n        int mid = (l + r) / 2, lc = 2 * i + 1, rc = 2 * i + 2;\n        update(lc, l, mid, idx, nums);\n        update(rc, mid + 1, r, idx, nums);\n        segtree[i].ans = max(segtree[lc].ans + segtree[rc].wo_left, segtree[rc].ans + segtree[lc].wo_right);\n        segtree[i].wo_left = max(segtree[lc].wo_left + segtree[rc].wo_left, segtree[lc].wo_both + segtree[rc].ans);\n        segtree[i].wo_right = max(segtree[rc].wo_right + segtree[lc].wo_right, segtree[rc].wo_both + segtree[lc].ans);\n        segtree[i].wo_both = max(segtree[lc].wo_left + segtree[rc].wo_both, segtree[lc].wo_both + segtree[rc].wo_right);\n    }\n    \n    const int mod = 1e9 + 7;\n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        for (int i = 0; i < n; i++) \n            update(0, 0, n - 1, i, nums);\n        int ans = 0;\n        for (auto &q: queries) {\n            nums[q[0]] = q[1];\n            update(0, 0, n - 1, q[0], nums);\n            ans = (1LL * ans + segtree[0].ans) % mod;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1716692905",
    "subm_id": "1268068642"
}