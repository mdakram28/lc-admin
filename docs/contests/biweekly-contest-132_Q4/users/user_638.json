{
    "username": "yolo12345",
    "submission": "class Solution {\npublic:\n    int maximumLength(vector<int>& nums, int k) {\n        int res=0;\n        vector<set<pair<int,int>>> pq(k+1);\n        map<pair<int,int>,int> mp;\n        int n=nums.size();\n        for(int i=0;i<n;i++){\n            vector<int> ans(k+1,0);\n            ans[0]=1;\n            for(int j=0;j<=k;j++){\n                if(mp.count({nums[i],j})) ans[j]=max(ans[j],1+mp[{nums[i],j}]);\n            }\n            for(int j=0;j<k;j++){\n                if(pq[j].size()<1) continue;\n                auto it=pq[j].rbegin();\n                auto p=*it;\n                if(p.second!=nums[i]){\n                    ans[j+1]=max(ans[j+1],1+p.first);\n                    continue;\n                }\n                if(pq[j].size()<2) continue;\n                pq[j].erase(p);\n                it=pq[j].rbegin();\n                auto p2=*it;\n                ans[j+1]=max(ans[j+1],1+p2.first);\n                pq[j].insert(p);\n            }\n            for(int j=0;j<=k;j++){\n                if(ans[j]<j+1) continue;\n                res=max(res,ans[j]);\n                if(mp.count({nums[i],j})){\n                    pq[j].erase({mp[{nums[i],j}],nums[i]});\n                }\n                mp[{nums[i],j}]=ans[j];\n                pq[j].insert({ans[j],nums[i]});\n            }\n        }\n        return res;\n    }\n};",
    "submit_ts": 1717861906.0
}