{
    "username": "hxu10",
    "submission": "M = 10**18 + random.randint(1,10**9)\n\npows = [1]\nfor _ in range(50000):\n    pows.append(pows[-1]*27%M)\n    \n\nclass Solution(object):\n    def minimumCost(self, target, words, costs):\n        \"\"\"\n        :type target: str\n        :type words: List[str]\n        :type costs: List[int]\n        :rtype: int\n        \"\"\"\n        \n\n        \n        \n        n = len(target)\n        \n        if target == target[0]*n:\n            dp = [float('inf')]*(n+1)\n            dp[-1] = 0\n            \n            dic = {}\n            \n            \n            for i,word in enumerate(words):\n                if word[0] != target[0] :  continue \n                if word != word[0] * len(word):  continue \n                l = len(word)\n                if l not in dic:  dic[l] = costs[i]\n                else:  dic[l] = min(dic[l], costs[i])\n                    \n                    \n            ls = sorted([l for l in dic])\n                    \n            for i in range(n):\n                for l in ls:\n                    if l > i + 1:  continue \n                    dp[i] = min(dp[i], dp[i-l] + dic[l])\n                    \n            if dp[n-1]==float('inf'):\n                return -1\n            \n        \n            return dp[n-1]\n        \n\n            \n            \n        ls = {}\n        for word in words:\n            if word[-1] not in ls:\n                ls[word[-1]] = set()            \n            ls[word[-1]].add(len(word))\n            \n        \n        \n\n        \n\n        \n        dp = [float('inf')]*(n+1)\n        \n        dp[-1] = 0\n        \n        dic = {}\n        \n        \n        \n        for i,word in enumerate(words):\n            curr = 0\n            for c in word:\n                curr = curr * 27 + ord(c) - 96 \n                curr %= M\n                \n            if curr in dic:\n                dic[curr] = min(dic[curr], costs[i])\n            else:\n                dic[curr] = costs[i]\n                \n                \n        h = [0]*(n+1)\n        \n        for i in range(n):\n            h[i] = h[i-1] * 27 + ord(target[i]) - 96\n            h[i] %= M\n        \n        \n        \n        \n            \n        \n        \n        for i in range(n):\n            if target[i] not in ls:  continue \n            for l in ls[target[i]]:\n                num =( h[i] - h[i-l] * pows[l]) % M\n                if num in dic:\n                    dp[i] = min(dp[i], dp[i-l] + dic[num])\n                    \n                    \n        if dp[n-1]==float('inf'):\n            return -1\n        \n        return dp[n-1]\n    \n                \n                \n                \n        \n        \n        \n        \n        \n        ",
    "submit_ts": "1720321995",
    "subm_id": "1312337879"
}