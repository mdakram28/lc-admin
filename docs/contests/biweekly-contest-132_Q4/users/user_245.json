{
    "username": "user2937Vz",
    "submission": "\nclass Solution:\n    def maximumLength(self, a: List[int], k: int) -> int:\n        n = len(a)\n        take = sorted(list(set(a)))\n        key = dict()\n        for i in range(len(take)):\n            key[take[i]] = i\n        \n        sz = len(take)\n        dp = [[0 for i in range(sz)] for j in range(k + 1)]\n        max_two = [[[0 , -1] , [0 , -1]] for i in range(k + 1)]\n        for i in range(n):\n            for j in range(k , -1 , -1):\n                x = key[a[i]]\n                dp[j][x] = max(dp[j][x] , dp[j][x] + 1)\n                \n                if(j):\n                    if(max_two[j - 1][0][-1] == x):\n                        dp[j][x] = max(dp[j][x] , max_two[j - 1][1][0] + 1)\n                    else:\n                        dp[j][x] = max(dp[j][x] , max_two[j - 1][0][0] + 1)\n                \n                \n                if(max_two[j][0][1] == x):\n                    max_two[j][0][0] = dp[j][x]\n                else:\n                    if(max_two[j][0][0] < dp[j][x]):\n                        max_two[j][1] = max_two[j][0]\n                        max_two[j][0] = [dp[j][x] , x]\n                    elif(max_two[j][1][0] < dp[j][x]):\n                        max_two[j][1] = [dp[j][x] , x]\n        \n        \n        ans = 0\n        for i in range(k + 1):\n            ans = max(ans , max_two[i][0][0])\n        \n        \n        return ans\n                \n            \n            \n            \n            \n            ",
    "submit_ts": 1717860612.0
}