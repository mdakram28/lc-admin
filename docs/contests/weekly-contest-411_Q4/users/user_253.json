{
    "username": "\u65e0\u540d\u68cb\u811a",
    "submission": "class Solution {\npublic:\n    vector<long long> countKConstraintSubstrings(string s, int k, vector<vector<int>>& qrs) {\n        int n=s.size();\n        vector<long long> ans, re(n+1),rep(n+1),ls(n+1),lsp(n+1),to(n);\n        int l=0, r=0, a=0, b=0;\n        while(r<n){\n            if(s[r++]=='0'){\n                ++a;\n            }else{\n                ++b;\n            }\n            while(l<r&&(a>k&&b>k)){\n                if(s[l++]=='0'){\n                    --a;\n                }else{\n                    --b;\n                }\n            }\n            re[r]=r-l;\n            rep[r]=re[r]+rep[r-1];\n        }\n        l=r=a=b=0;\n        while(l<n){\n            while(r<n){\n                int aa=a,bb=b;\n                if(s[r]=='0'){\n                    ++aa;\n                }else{\n                    ++bb;\n                }\n                if(aa<=k||bb<=k){\n                    a=aa;\n                    b=bb;\n                    ++r;\n                }else{\n                    break;\n                }\n            }\n            \n            to[l]=r;\n            ls[l+1]=r-l;\n            lsp[l+1]=lsp[l]+ls[l+1];\n            if(s[l]=='0'){\n                --a;\n            }else{\n                --b;\n            }\n            ++l;\n        }\n//         if(1){\n//             cout<<\"re = \";\n//             for(int i:re){\n//                 cout<<i<<\"\\t\";\n//             }\n//             cout<<endl;\n            \n//             cout<<\"rep = \";\n//             for(int i:rep){\n//                 cout<<i<<\"\\t\";\n//             }\n//             cout<<endl;\n            \n//             cout<<\"ls = \";\n//             for(int i:ls){\n//                 cout<<i<<\"\\t\";\n//             }\n//             cout<<endl;\n            \n//             cout<<\"lsp = \";\n//             for(int i:lsp){\n//                 cout<<i<<\"\\t\";\n//             }\n//             cout<<endl;\n            \n//             cout<<\"to = \";\n//             for(int i:to){\n//                 cout<<i<<\"\\t\";\n//             }\n//             cout<<endl;\n//         }\n        for(const auto &qr:qrs){\n            int ll=qr[0],rr=qr[1];\n            long long tmp=rep[rr+1]-lsp[ll];\n            if(to[ll]>rr){\n                long long len=rr-ll+1;\n                tmp=(1+len)*(len)/2;\n            }\n            ans.push_back(tmp);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1723951713",
    "subm_id": "556407198"
}