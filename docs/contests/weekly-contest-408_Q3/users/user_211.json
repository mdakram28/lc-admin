{
    "username": "abhishekrana25112002",
    "submission": "#include <string>\n#include <vector>\n#define ll long long\n\nclass Solution {\npublic:\n    int numberOfSubstrings(std::string s) {\n        ll n = s.size();\n        ll ans = 0, onecnt = 0;\n\n        // Precompute the positions of the first zero after each index\n        vector<ll> nextZero(n, n), onecount(n, 0);\n        for(int i = 0 ; i < n ; i++) {\n            onecount[i] = onecnt;\n            if(s[i] == '1')             onecnt++;         \n        }\n        if(s[n - 1] == '0')             nextZero[n - 1] = n - 1;\n        for (ll i = n - 2; i >= 0; --i) {\n            if (s[i] == '0') {\n                nextZero[i] = i;\n            } else {\n                nextZero[i] = nextZero[i + 1];\n            }\n        }\n\n        // Count substrings involving both zeros and ones\n        for (ll i = 0; i < n; ++i) {\n            ll ones = 0, zeros = 0, j;\n            if(s[i] == '1') {\n                j = nextZero[i];\n                ones += (j - i);\n            }\n            else {\n                j = i;\n            }\n            while(j < n) {\n                if (s[j] == '0') {\n                    ++zeros;\n                } else {\n                    ++ones;\n                }\n\n                if (ones >= zeros * zeros) {\n                    ++ans;\n                }\n\n                // Break early if zeros^2 is larger than remaining ones in the substring\n                if (zeros * zeros > ones + (n - j - 1)) {\n                    break;\n                }\n                j++;\n            }\n        }\n\n        // Count substrings with only ones\n        ll i = 0;\n        while (i < n) {\n            while (i < n && s[i] == '0') {\n                ++i;\n            }\n            ll j = i;\n            while (j < n && s[j] == '1') {\n                ++j;\n            }\n            ll len = j - i;\n            ans += len * (len + 1) / 2;\n            i = j;\n        }\n\n        return ans;\n    }\n};\n",
    "submit_ts": "1722137498",
    "subm_id": "1335765505"
}