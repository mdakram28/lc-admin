{
    "username": "megurine",
    "submission": "template<typename T>\nclass fenwick {\nprivate:\n    vector<T> fenw;\n    int n;\npublic:\n    explicit fenwick(int _n) : n(_n), fenw(_n) {\n        assert(_n >= 0);\n    }\n\n    void modify(int x, T v) {\n        for (int i = x; i < n; i |= i + 1)\n            fenw[i] += v;\n    }\n\n    T get(int x) {\n        T v{};\n        for (int i = x; i >= 0; i = (i & (i + 1)) - 1)\n            v += fenw[i];\n        return v;\n    }\n};\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int> &nums, vector<vector<int>> &queries) {\n        int n = nums.size();\n        vector<int> a(n + 2, 1e9);\n        fenwick<int> fcc(n + 2);\n        for (int i = 1; i <= n; ++i) {\n            a[i] = nums[i - 1];\n        }\n        for (int i = 1; i <= n; ++i) {\n            fcc.modify(i, a[i] > a[i - 1] && a[i] > a[i + 1]);\n        }\n        vector<int> ans;\n        for (auto &it: queries) {\n            if (it[0] == 1) {\n                int l = it[1], r = it[2];\n                int val = 0;\n                if (r - l >= 2) {\n                    val = fcc.get(r) - fcc.get(l + 1);\n                }\n                ans.emplace_back(val);\n            } else {\n                int i = it[1] + 1;\n                cout << i << endl;\n                for (int j = i - 1; j <= i + 1; ++j) {\n                    if (j >= 1 && j <= n)\n                        fcc.modify(j, -int(a[j] > a[j - 1] && a[j] > a[j + 1]));\n                }\n                a[i] = it[2];\n                for (int j = i - 1; j <= i + 1; ++j) {\n                    if (j >= 1 && j <= n)\n                        fcc.modify(j, a[j] > a[j - 1] && a[j] > a[j + 1]);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718506613.0
}