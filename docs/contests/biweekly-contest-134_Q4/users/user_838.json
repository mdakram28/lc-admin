{
    "username": "notSayeef",
    "submission": "\n#define ll long long\n#define fr(m) for(int i=0; i<m; i++)\n#define fro(m) for(int i=1; i<m; i++)\n#define frj(m) for(int j=0; j<m; j++)\n#define frr(n) for(int i=n; i>=0; i--)\n#define pb push_back\n#define pf push_front\n#define orr ||\n#define nl '\\n'\n#define nll cout<<'\\n'\n#define mod 1000000007\n#define inf (1LL<<60)\n#define inff (1<<30)-1\n#define yes cout<<\"YES\"<<nl\n#define no cout<<\"NO\"<<nl\n#define ff first\n#define ss second\n#define all(v) v.begin(), v.end()\n#define fastio ios_base::sync_with_stdio(false); cin.tie(NULL)\n#define mxn changeit\n\nll keep[31][100005];\n\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& arr, int k) {\n        int n=arr.size();\n        fr(n){\n            frj(30){\n                int b=(arr[i]>>j)&1;\n                keep[j][i+1]=keep[j][i]+b;\n            }\n        }\n        ll ans=0;\n        for(int i=0; i<n; i++){\n            ll mn=inf, mx=-inf;\n            if((arr[i]&k)!=k) continue;\n            cout<<\"i \"<<i<<nl;\n            frj(30){\n                int b=(k>>j)&1;\n                if(b){\n                    ll l=i, r=n-1, upto=i;\n                    while(l<=r){\n                        ll mid=(l+r)/2;\n                        ll sum=keep[j][mid+1]-keep[j][i];\n                        if(sum==mid-i+1){\n                            upto=mid, l=mid+1;\n                        }\n                        else r=mid-1;\n                    }\n                    mn=min(mn,upto);\n                }\n                else{\n                    ll l=i, r=n-1, upto=i-1;\n                    while(l<=r){\n                        ll mid=(l+r)/2;\n                        ll sum=keep[j][mid+1]-keep[j][i];\n                        if(sum==mid-i+1){\n                            upto=mid, l=mid+1;\n                        }\n                        else r=mid-1;\n                    }\n                    mx=max(mx,upto);\n                }\n\n            }\n            // cout<<mn<<\" \"<<mx<<nl;\n            if(!k){\n                ans+=n-mx-1;\n            }\n            else if(mx!=-inf && mn!=inf) ans+=max(0ll,mn-mx);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279456",
    "subm_id": "1311751929"
}