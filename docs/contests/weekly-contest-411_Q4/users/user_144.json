{
    "username": "9am",
    "submission": "/**\n * @param {string} s\n * @param {number} k\n * @param {number[][]} queries\n * @return {number[]}\n */\nvar countKConstraintSubstrings = function(s, k, queries) {\n    const n = s.length;\n    let t = s.split('');\n    s = '';\n    // \u5df2i\u4e3a\u7ed3\u5c3e\u7684\u6709a[i]\u4e2a\n    const getA = () => {\n        const f = new Array(n).fill(0);\n        let l = 0;\n        let c0 = 0;\n        let c1 = 0;\n        for (let i = 0; i < n; i++) {\n            if (t[i] === '0') c0++;\n            else c1++;\n            while (c0 > k && c1 > k) {\n                if (t[l] === '0') c0--;\n                else c1--;\n                l++;\n            }\n            f[i] = i - l + 1;\n        }\n        return f;\n    }\n    const a = getA();\n    t.reverse();\n    const b = getA();\n    b.reverse();\n    for (let i = 1; i < n; i++) {\n        a[i] += a[i - 1];\n        b[i] += b[i - 1];\n    }\n    // const b = new Array(n).fill(0);\n    // console.log(a);\n    // const b = new Array(n).\n    return queries.map(([x, y]) => {\n        if (x === 0) return a[y];\n        if (a[y] - a[y - 1] >= y - x + 1) return (y - x + 1) * (y - x + 2) / 2;\n        // let r = 0;\n        // for (let i = x; i <= y; i++) {\n        //     r += Math.min(a[i], i - x + 1);\n        //     // console.log(i, r);\n        // }\n        return a[y] - b[x - 1];\n    });\n};",
    "submit_ts": "1723953071",
    "subm_id": "556415347"
}