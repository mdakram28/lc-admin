{
    "username": "SouLPegasuS",
    "submission": "class Solution {\npublic:\n    \n    void modify(vector<int> &bits, int n, bool add){\n        int flag = add ? 1 : -1;\n        for(int i=0; i<32; i++){\n            bits[i] += flag*((n>>i)&1);\n        }\n    }\n\n    int calAnd(vector<int> &bits, int len){\n        int res = 0;\n        for(int i=0; i<32; i++){\n            if(bits[i]==len)res += (1ll<<i);\n        }\n        return res;\n    }\n    \n    long long help(int lo, int hi, vector<int> &a){\n        long long res= 0;\n        int i=lo, j=lo;\n        vector<int> bits(32,0);\n        for(; j<=hi; j++){\n            modify(bits,a[j],1);\n            int len = j-i+1, curr = calAnd(bits, len);\n            if(curr!=0)res += len;\n            while(curr==0){\n                // cout<<i<<\" \"<<j<<\" \"<<curr<<\"\\n\";\n                modify(bits, a[i], 0);\n                i++; len--;\n                curr = calAnd(bits, len);\n                if(curr!=0)res+= len;\n            }\n        }\n        long long len = hi-lo+1;\n        res = (len*(len+1)/2)-res;\n        return res;\n    }\n    \n    long long countSubarrays(vector<int>& a, int k) {\n        int n = a.size();\n        long long ans = 0;\n        vector<int> is(n,0);\n        for(int i=0; i<n; i++){\n            if((k&a[i])==k){\n                is[i]=1;\n                a[i]-=k;\n            }\n        }\n        int i=0, j=0;\n        for(; j<n; j++){\n            if(is[j]==0){\n                if(i!=j)ans += help(i,j-1,a);\n                i=j+1;\n            }\n        }\n        if(is[n-1]==1)ans+=help(i,n-1,a);\n        return ans;\n    }\n};",
    "submit_ts": "1720280849",
    "subm_id": "1311804246"
}