{
    "username": "tanishkgpt",
    "submission": "typedef long long ll;\n\nclass SegmentTree\n{\n\nprivate:\n\n    vector<ll> seg;\n\npublic:\n\n    SegmentTree(ll n)\n    {\n        seg.resize(4*n+1);\n    }\n\n    void build(ll ind,ll lo,ll hi,vector<ll> &a)\n    {\n        if(lo==hi)\n        {\n            seg[ind]=a[lo];\n            return;\n        }\n        ll mid=lo+(hi-lo)/2;\n        build(2*ind+1,lo,mid,a);\n        build(2*ind+2,mid+1,hi,a);\n        seg[ind]=(seg[2*ind+1]&seg[2*ind+2]);\n    }\n\n    ll query(ll ind,ll lo,ll hi,ll l,ll r)\n    {\n        if(l>hi||lo>r)\n        {\n            return (1LL<<31)-1;\n        }\n        if(l<=lo&&hi<=r)\n        {\n            return seg[ind];\n        }\n        ll mid=lo+(hi-lo)/2;\n        ll left=query(2*ind+1,lo,mid,l,r),right=query(2*ind+2,mid+1,hi,l,r);\n        return (left&right);\n    }\n\n};\n\nclass Solution\n{\npublic:\nll countSubarrays(vector<int> &nums,int K)\n{\n    ll k=(ll)K,n=(ll)nums.size(),ans=0;\n    vector<ll> a;\n    for(auto &v:nums)\n    {\n        a.push_back((ll)v);\n    }\n    SegmentTree st(n);\n    st.build(0,0,n-1,a);\n    for(ll i=0;i<n;++i)\n    {\n        ll idx1=-1,idx2=-1,lo=i,hi=n-1;\n        bool found=false;\n        while(hi>=lo)   // 1st idx <= k\n        {\n            ll mid=lo+(hi-lo)/2;\n            ll x=st.query(0,0,n-1,i,mid);\n            if(x==k)\n            {\n                found=true;\n            }\n            if(x<=k)\n            {\n                idx1=mid;\n                hi=mid-1;\n            }\n            else\n            {\n                lo=mid+1;\n            }\n        }\n        lo=i;\n        hi=n-1;\n        while(hi>=lo)   // last idx >= k\n        {\n            ll mid=lo+(hi-lo)/2;\n            ll x=st.query(0,0,n-1,i,mid);\n            if(x>=k)\n            {\n                idx2=mid;\n                lo=mid+1;\n            }\n            else\n            {\n                hi=mid-1;\n            }\n        }\n        if(found)\n        {\n            ans+=(idx2-idx1+1);\n        }\n    }\n    return ans;\n}\n};",
    "submit_ts": "1720277443",
    "subm_id": "1311663911"
}