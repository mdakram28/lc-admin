{
    "username": "StackEnqueue2",
    "submission": "#define ll long long\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& a, int k) {\n        ll ans=0;\n        int n=a.size();\n        int p[n][32];\n        for(int i=0;i<n;i++)\n        {\n            for(int j=0;j<32;j++)\n            {\n                if(i == 0)p[i][j] = 0;\n                else p[i][j] = p[i-1][j];\n                int x=a[i]>>j;\n                if(x&1)p[i][j]++;\n            }\n        }\n        for(int i=0;i<n;i++)\n        {\n            int f=-1,s=-1;\n            int l=i,h=n-1;\n            while(l<=h)\n            {\n                int m=l+h;m>>=1;\n                int an=0;\n                for(int j=0;j<32;j++)\n                {\n                    int c=p[m][j];\n                    if(i!=0)c-=p[i-1][j];\n                    \n                    if(c == m-i+1)an+=(1<<j);\n                }\n                \n                if(an<k)\n                {\n                    h=m-1;\n                }\n                else if(an == k)\n                {\n                    f=m;\n                    h=m-1;\n                }\n                else\n                {\n                    l=m+1;\n                }\n            }\n            \n            \n            l=i,h=n-1;\n            while(l<=h)\n            {\n                int m=l+h;m>>=1;\n                int an=0;\n                for(int j=0;j<32;j++)\n                {\n                    int c=p[m][j];\n                    if(i!=0)c-=p[i-1][j];\n                    \n                    if(c == m-i+1)an+=(1<<j);\n                }\n                \n                if(an<k)\n                {\n                    h=m-1;\n                }\n                else if(an == k)\n                {\n                    s=m;\n                    l=m+1;\n                }\n                else\n                {\n                    l=m+1;\n                }\n            }\n            \n            if(f == -1){\n                // cout<<ans<<\" \";\n                continue;\n            }\n            \n            ans+=(s-f+1);\n            // cout<<ans<<\" \";\n        }\n        cout<<\"\\n\";\n        return ans;\n    }\n};",
    "submit_ts": "1720277670",
    "subm_id": "1311674555"
}