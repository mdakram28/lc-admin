{
    "username": "incra",
    "submission": "class Solution {\npublic:\n    static const int N = 31,INF = 0x3f3f3f3f;\n    int f[N][N][N][N][4];\n    int minx[N][N][N][N],maxx[N][N][N][N],miny[N][N][N][N],maxy[N][N][N][N];\n    void tomax (int &x,int y) {\n        x = max (x,y);\n    }\n    void tomin (int &x,int y) {\n        x = min (x,y);\n    }\n    int DP (int x1,int y1,int x2,int y2,int d) {\n        if (d == 1) return f[x1][y1][x2][y2][1];\n        int &ans = f[x1][y1][x2][y2][d];\n        if (ans != -1) return ans;\n        ans = INF;\n        for (int j = 1;j < d;j++) {\n            for (int i = x1;i < x2;i++) ans = min (ans,DP (x1,y1,i,y2,j) + DP (i + 1,y1,x2,y2,d - j));\n            for (int i = y1;i < y2;i++) ans = min (ans,DP (x1,y1,x2,i,j) + DP (x1,i + 1,x2,y2,d - j));\n        }\n        return ans;\n    }\n    int minimumSum(vector<vector<int>>& g) {\n        int n = g.size (),m = g[0].size ();\n        memset (f,-1,sizeof (f));\n        memset (minx,0x3f,sizeof (minx));\n        memset (maxx,-0x3f,sizeof (maxx));\n        memset (miny,0x3f,sizeof (miny));\n        memset (maxy,-0x3f,sizeof (maxy));\n        for (int x1 = 1;x1 <= n;x1++) {\n            for (int y1 = 1;y1 <= m;y1++) {\n                for (int x2 = x1;x2 <= n;x2++) {\n                    for (int y2 = y1;y2 <= m;y2++) {\n                        int &xl = minx[x1][y1][x2][y2],&xr = maxx[x1][y1][x2][y2],&yl = miny[x1][y1][x2][y2],&yr = maxy[x1][y1][x2][y2];\n                        if (g[x2 - 1][y2 - 1]) xl = xr = x2,yl = yr = y2;\n                        if (x2 - 1 >= x1) {\n                            tomin (xl,minx[x1][y1][x2 - 1][y2]);\n                            tomax (xr,maxx[x1][y1][x2 - 1][y2]);\n                            tomin (yl,miny[x1][y1][x2 - 1][y2]);\n                            tomax (yr,maxy[x1][y1][x2 - 1][y2]);\n                        }\n                        if (y2 - 1 >= y1) {\n                            tomin (xl,minx[x1][y1][x2][y2 - 1]);\n                            tomax (xr,maxx[x1][y1][x2][y2 - 1]);\n                            tomin (yl,miny[x1][y1][x2][y2 - 1]);\n                            tomax (yr,maxy[x1][y1][x2][y2 - 1]);\n                        }\n                        if (xl != INF) f[x1][y1][x2][y2][1] = (xr - xl + 1) * (yr - yl + 1);\n                        else f[x1][y1][x2][y2][1] = 0;\n                    }\n                }\n            }\n        }\n        int ans = INF;\n        for (int i = 1;i <= 3;i++) tomin (ans,DP (1,1,n,m,i));\n        return ans;\n    }\n};",
    "submit_ts": 1719112006.0
}