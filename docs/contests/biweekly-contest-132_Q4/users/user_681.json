{
    "username": "ruts",
    "submission": "class Solution {\npublic:\nint dp[5005][60][4][2];\nmap<int,vector<int>>mp;\nint n,k;\nvector<int>a;\n\nint solve(int i, int last , int was, int start) {\n    if(last > k) {\n        return -1e5;\n    }\n    if(i >= n) {\n        return 0;\n    }\n\n    if(dp[i][last][was][start] != -1) return dp[i][last][was][start];\n    int ans = 0;\n    if(!start) {\n        ans = max(ans,1 + solve(i+1,last,was,1));\n        auto p = lower_bound(mp[a[i]].begin(),mp[a[i]].end(),i+1);\n        int next = n;\n        if(p != mp[a[i]].end()) {\n        next = *p;\n        } \n        ans = max(ans,1 + solve(next,last,1,1));\n        ans = max(ans,solve(i+1,last,was,start));\n    } else {\n     if(was) {\n     ans = max(ans, 1 + solve(i+1,last,0,start));\n     auto p = lower_bound(mp[a[i]].begin(),mp[a[i]].end(),i+1);\n     int next = n;\n     if(p != mp[a[i]].end()) {\n        next = *p;\n     }\n     ans = max(ans, 1 + solve(next,last,1,start));\n     } else {\n     ans = max(ans, 1 + solve(i+1,last+1,0,start));\n     auto p = lower_bound(mp[a[i]].begin(),mp[a[i]].end(),i+1);\n     int next = n;\n     if(p != mp[a[i]].end()) {\n        next = *p;\n     }\n     ans = max(ans, solve(i+1,last,0,start));\n     ans = max(ans, 1 + solve(next,last+1,1,start));\n     }\n    }\n    return dp[i][last][was][start] = ans;\n}\n\n\nint maximumLength(vector<int>& b, int K) {\n    a = b;\n    k = K;\n    n = (int)a.size();\n    for(int i = 0 ; i < n ; i++) {\n        mp[a[i]].push_back(i);\n    }\n    memset(dp,-1,sizeof(dp));\n    return solve(0,0,0,0);\n}\n};",
    "submit_ts": 1717861744.0
}