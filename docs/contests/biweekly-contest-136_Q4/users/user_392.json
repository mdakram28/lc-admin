{
    "username": "faulea",
    "submission": "#include <bits/stdc++.h>\nusing namespace std;\nclass Solution {\npublic:\n    vector<int> timeTaken(vector<vector<int>> &edges) {\n        const int M = 0;\n        int n = edges.size() + 1;\n        vector<int> ans(n, 0);\n        vector<array<int, 3>> dp(n, {M, M, M});\n        vector<vector<int>> g(n);\n        vector<int> d(n, -1);\n        for (const auto &e : edges) {\n            g[e[0]].emplace_back(e[1]);\n            g[e[1]].emplace_back(e[0]);\n        }\n        const auto dfs0 = [&](auto &&dfs, int u, int fa) -> pair<int, int> {\n            int a = M, b = M;\n            for (int v : g[u]) {\n                if (v == fa) {\n                    continue;\n                }\n                auto [ta, tb] = dfs(dfs, v, u);\n                if (v % 2 == 0) {\n                    ta += 2;\n                    tb += 2;\n                } else {\n                    ta += 1;\n                    tb += 1;\n                }\n                if (ta >= a) {\n                    d[u] = v;\n                    b = a;\n                    a = ta;\n                } else if (ta > b) {\n                    b = ta;\n                }\n            }\n            dp[u][1] = a, dp[u][2] = b;\n            return {a, b};\n        };\n        dfs0(dfs0, 0, -1);\n        const auto dfs = [&](auto &&dfs, int u, int fa) -> void {\n            if (fa != -1) {\n                int a = dp[fa][1], b = dp[fa][2];\n                int dd = d[fa];\n                if (dd == u) {\n                    dp[u][0] = max(dp[fa][0], b) + (fa % 2 == 0 ? 2 : 1);\n                } else {\n                    dp[u][0] = max(dp[fa][0], a) + (fa % 2 == 0 ? 2 : 1);\n                }\n            }\n            for (int v : g[u]) {\n                if (v == fa) {\n                    continue;\n                }\n                dfs(dfs, v, u);\n            }\n        };\n        dfs(dfs, 0, -1);\n        for (int i = 0; i < n; ++i) {\n            ans[i] = max(dp[i][0], dp[i][1]);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1722700504",
    "subm_id": "552280099"
}