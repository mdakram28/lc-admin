{
    "username": "yc-li",
    "submission": "class Solution:\n    def countKConstraintSubstrings(self, s: str, k: int, q: List[List[int]]) -> List[int]:\n        i = 0\n        n = len(s)\n\n        l = [0] * n\n        c0 = 0\n        c1 = 0\n\n        for j in range(n):\n            if s[j] == \"0\":\n                c0 += 1\n            else:\n                c1 += 1\n            while c0 > k and c1 > k:\n                if s[i] == \"0\":\n                    c0 -= 1\n                else:\n                    c1 -= 1\n                \n                \n                i += 1\n\n            l[j] = i\n\n\n        pr = [1]\n        prl = [l[0]]\n        for i in range(1, n):\n            prl.append(prl[-1] + l[i])\n            pr.append(pr[-1] + (i - l[i] + 1))\n\n        ans = []\n        # print(i, l, prl, pr)\n\n        for u, v in q:\n            pass\n            s = 0\n            l1 = u\n            l2 = bisect_right(l, u) - 1\n\n            r1 = v\n            # r2 = bisect_right(l, v) - 1\n            l2 = min(l2, r1)\n            if l1 == 0:\n                s = pr[r1]\n            else:\n                s = pr[r1] - pr[l1 - 1]\n            \n            # print(l1, l2, r1)\n            # print(s)\n\n            # s = s + v * (r2 - r1 + 1)\n            # s = s - ((r2 - r1 + 1) * (r2 + r1) // 2)\n            # print(s)\n\n            s = s - u * (l2 - l1 + 1)\n            s = s + (prl[l2] - (prl[l1 - 1] if l1 != 0 else 0))\n            # print(s)\n            \n            ans.append(s)\n\n\n        return ans\n\n",
    "submit_ts": "1723952543",
    "subm_id": "1359798694"
}