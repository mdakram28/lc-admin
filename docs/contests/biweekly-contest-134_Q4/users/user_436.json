{
    "username": "hkmaxi",
    "submission": "#define ll long long\nclass Solution {\npublic:\n    ll get_value(vector<vector<ll> >&csum,ll l,ll r){\n        ll value=0;\n        for(ll i=0;i<=30;i++){\n            if(csum[r][i]-csum[l-1][i]==r-l+1){\n                value=value+(1ll<<i);\n            }\n        }\n        return value;\n    }\n    ll get_sol(vector<vector<ll> > &csum,ll n,ll k){\n        ll cnt=0;\n        for(ll i=1;i<=n;i++){\n\n            ll lo=i,hi=n,r=i-1,q=i-1;\n            while(hi>=lo){\n                ll mid=(hi+lo)/2ll;\n                ll value=get_value(csum,i,mid);\n\n                if(value>=k){\n                    r=max(r,mid);\n                    lo=mid+1;\n                }else{\n                    hi=mid-1;\n                }\n            }\n\n            lo=i,hi=n;\n            while(hi>=lo){\n                ll mid=(hi+lo)/2ll;\n                ll value=get_value(csum,i,mid);\n                if(value>k){\n                    q=max(q,mid);\n                    lo=mid+1;\n                }else{\n                    hi=mid-1;\n                }\n            }\n\n           // cout<<i<<\" \"<<r<<\" \"<<q<<endl;\n            if(r>=i and r>=q){\n\n                cnt=cnt+(r-q);\n            }\n\n\n        }\n\n        return cnt;\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        ll n=nums.size();\n\n        vector<vector<ll> > csum(n+1,vector<ll> (35,0));\n        for(ll i=1;i<=n;i++){\n            ll val=nums[i-1];\n            for(ll j=0;j<=30;j++){\n                csum[i][j]=csum[i-1][j];\n                if(val & (1ll<<j)){\n                    csum[i][j]++;\n                }\n            }\n        }\n\n\n\n        return get_sol(csum,n,k);\n    }\n};",
    "submit_ts": "1720278911",
    "subm_id": "1311729522"
}