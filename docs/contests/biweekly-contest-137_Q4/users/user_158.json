{
    "username": "Gradesking",
    "submission": "typedef long long ll;\n\nll A[500][500], n, m;\n\nll cal_2(vector<vector<ll>> A) {\n    ll ans = -1e18;\n    ll n = A.size(), m = A[0].size();\n    ll x = 0, y = 0;\n    for (ll i = 0; i < n; ++i) {\n        for (ll j = 0; j < m; ++j) {\n            if (A[i][j] > A[x][y]) {\n                x = i;\n                y = j;\n            }\n        }\n    }\n    ll a = (x == 0 ? 1 : 0), b = (y == 0 ? 1 : 0);\n    for (ll i = 0; i < n; ++i) {\n        if (i == x)\n            continue;\n        for (ll j = 0; j < m; ++j) {\n            if (j == y)\n                continue;\n            if (A[i][j] > A[a][b]) {\n                a = i;\n                b = j;\n            }\n        }\n    }\n    ans = max(ans, A[x][y] + A[a][b]);\n\n    vector<ll> v, v2;\n    for (ll i = 0; i < m; ++i) {\n        if (i == y)\n            continue;\n        v.push_back(A[x][i]);\n    }\n    for (ll i = 0; i < n; ++i) {\n        if (i == x)\n            continue;\n        v2.push_back(A[i][y]);\n    }\n    sort(v.begin(), v.end());\n    sort(v2.begin(), v2.end());\n    reverse(v.begin(), v.end());\n    reverse(v2.begin(), v2.end());\n    ans = max(ans, v[0] + v2[0]);\n    return ans;\n}\n\nll f1() {\n    ll x = 0, y = 0;\n    for (ll i = 0; i < n; ++i) {\n        for (ll j = 0; j < m; ++j) {\n            if (A[i][j] > A[x][y]) {\n                x = i;\n                y = j;\n            }\n        }\n    }\n    vector<vector<ll>> v;\n    for (ll i = 0; i < n; ++i) {\n        if (i == x)\n            continue;\n        vector<ll> tmp;\n        for (ll j = 0; j < m; ++j) {\n            if (j == y)\n                continue;\n            tmp.push_back(A[i][j]);\n        }\n        v.push_back(tmp);\n    }\n    return cal_2(v) + A[x][y];\n}\n\nll f2() {\n    ll x = 0, y = 0;\n    for (ll i = 0; i < n; ++i) {\n        for (ll j = 0; j < m; ++j) {\n            if (A[i][j] > A[x][y]) {\n                x = i;\n                y = j;\n            }\n        }\n    }\n\n    vector<ll> row, col;\n    for (ll i = 0; i < m; ++i) {\n        row.push_back(A[x][i]);\n    }\n    for (ll i = 0; i < n; ++i) {\n        col.push_back(A[i][y]);\n    }\n\n    vector<ll> big_row, big_col;\n    for (int i = 0; i < m; ++i) {\n        ll big = -1e18;\n        for (int j = 0; j < m; ++j) {\n            if (j == y || j == i)\n                continue;\n            big = max(big, row[j]);\n        }\n        big_row.push_back(big);\n    }\n    for (int i = 0; i < n; ++i) {\n        ll big = -1e18;\n        for (int j = 0; j < n; ++j) {\n            if (j == x || j == i)\n                continue;\n            big = max(big, col[j]);\n        }\n        big_col.push_back(big);\n    }\n\n    ll ans = -1e18;\n    for (ll i = 0; i < n; ++i) {\n        if (i == x)\n            continue;\n        for (ll j = 0; j < m; ++j) {\n            if (j == y)\n                continue;\n            ans = max(ans, A[i][j] + big_row[j] + big_col[i]);\n        }\n    }\n    return ans;\n}\n\nclass Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>& board) {\n        n = board.size();\n        m = board[0].size();\n        for (int i = 0; i < n; ++i) {\n            for (int j = 0; j < m; ++j) {\n                A[i][j] = board[i][j];\n            }\n        }\n        return max(f1(), f2());\n    }\n};",
    "submit_ts": "1723908551",
    "subm_id": "556331505"
}