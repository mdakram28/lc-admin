{
    "username": "AnantBansal",
    "submission": "#pragma GCC optimize(\"-Ofast\")\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx,avx,avx2,fma\")\n#pragma GCC optimize(\"unroll-loops\")\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n#define dbg(x) cout << #x << \" = \" << x << \"\\n\"\n#define pb push_back\n#define fi first\n#define se second\n#define all(x) (x).begin(), (x).end()\n#define set_bits(x) __builtin_popcountll(x)\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& arr, int k) {\n        ll n = arr.size();\n        vector<vector<ll>> pre(n + 1, vector<ll>(31, 0));\n        for(ll i = 1; i <= n; i++){\n            for(ll bit = 0; bit < 31; bit++){\n                if((1LL << bit) & arr[i - 1]){\n                    pre[i][bit]++;\n                }\n            }\n            for(ll bit = 0; bit < 31; bit++){\n                pre[i][bit] += pre[i-1][bit];\n            }\n        }\n        auto check = [&](ll j, ll i) -> ll{\n            if(j > i){\n                return -1;\n            }\n            ll curr = 0;\n            for(ll bit = 0; bit < 31; bit++){\n                if(pre[i][bit] - pre[j - 1][bit] == (i - j + 1)){\n                    curr += (1LL << bit);\n                }\n            }\n            return curr;\n        };\n        ll ans = 0;\n        for(ll i = 1; i <= n; i++) {\n            ll low = 1, high = i;\n            ll id = 0;\n            while(low <= high) {\n                ll mid = (low + high) >> 1;\n                if(check(mid, i) >= k) {\n                    id = mid;\n                    high = mid - 1;\n                } else {\n                    low = mid + 1;\n                }\n            }\n            low = 1, high = i;\n            ll id1 = 0;\n            while(low <= high) {\n                ll mid = (low + high) >> 1;\n                if(check(mid, i) <= k) {\n                    id1 = mid;\n                    low = mid + 1;\n                } else {\n                    high = mid - 1;\n                }\n            }\n            if(id != 0) ans += (id1 - id + 1);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720278595",
    "subm_id": "1311715973"
}