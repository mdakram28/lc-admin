{
    "username": "DylanSmith",
    "submission": "typedef long long ll;\n \n#define pb push_back\n#define sz(x) (int)x.size()\n#define all(x) begin(x),end(x)\n#define lb(x,y) lower_bound(all(x),y)-begin(x)\nclass Solution {\npublic:\n    int query(vector<int> &tree, int l, int r) {\n        l += sz(tree) / 2; r += sz(tree) / 2;\n        int res = (1 << 30) - 1;\n        while (l <= r) {\n            if (l % 2 == 1) {\n                res &= tree[l];\n                l >>= 1;\n                l++;\n            } else {\n                l >>= 1;\n            }\n            if (r % 2 == 0) {\n                res &= tree[r];\n                r >>= 1;\n                r--;\n            } else {\n                r >>= 1;\n            }\n        }\n        return res;\n    }\n    int search1(vector<int> &tree, int k, int i, int l, int r) {\n        if (l > r) return -1;\n        int mid = (l + r) / 2;\n        if (query(tree, i, mid) <= k) {\n            int m = search1(tree, k, i, l, mid - 1);\n            if (m == -1) return mid;\n            return m;\n        }\n        return search1(tree, k, i, mid + 1, r);\n    }\n    int search2(vector<int> &tree, int k, int i, int l, int r) {\n        if (l > r) return -1;\n        int mid = (l + r) / 2;\n        if (query(tree, i, mid) >= k) {\n            int m = search2(tree, k, i, mid + 1, r);\n            if (m == -1) return mid;\n            return m;\n        }\n        return search2(tree, k, i, l, mid - 1);\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        int N = sz(nums);\n        int M = 1; while (M < sz(nums)) M <<= 1;\n        vector<int> tree(M * 2, (1 << 30) - 1);\n        for (int i = 0; i < sz(nums); i++) {\n            tree[i + M] = nums[i];\n        }\n        for (int i = M - 1; i > 0; i--) {\n            tree[i] = tree[i * 2] & tree[i * 2 + 1];\n        }\n        ll res = 0;\n        for (int i = 0; i < N; i++) {\n            int l = search1(tree, k, i, i, sz(nums) - 1);\n            int r = search2(tree, k, i, i, sz(nums) - 1);\n            if (l != -1 && r != -1 && l <= r) res += r - l + 1;\n        }\n        return res;\n    }\n};",
    "submit_ts": "1720277911",
    "subm_id": "1311685739"
}