{
    "username": "omhari",
    "submission": "class Solution {\npublic:\n    void inc(vector<int> &bit, int n)\n    {\n        for(int i=0; i<=30; i++)\n            if((n&(1<<i)))\n                bit[i]++;\n    }\n    bool check(vector<int> &bit, int n, int cnt)\n    {\n        for(int i=0; i<=30; i++)\n        {\n            if((n&(1<<i)) && bit[i]!=cnt)\n                return false;\n            else if((n&(1<<i))==0 && bit[i]==cnt)\n                return false;\n        }\n        \n        return true;\n    }\n    \n    bool dec(vector<int> &bit, int d, int k, int cnt)\n    {\n        vector<int> temp=bit;\n        \n\n        for(int i=0; i<=30; i++)\n        {\n            if((d&(1<<i)))\n                temp[i]--;\n        }\n        // cout<<\"HI\\n\";\n        for(int i=0; i<=30; i++)\n        {\n            if((k&(1<<i)) && temp[i]!=cnt-1)\n                return false;\n            else if((k&(1<<i))==0 && temp[i]==cnt-1)\n                return false;\n        }\n        bit=temp;\n        \n        return true;\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        long long ans=0;\n        int n=nums.size();\n        vector<int> v(n), bit(32);\n        \n        for(int i=0; i<n; i++)\n        {\n            v[i]=((nums[i]&k)==k);\n            \n            if(v[i]==1 && i>0)\n                v[i]+=v[i-1];\n        }\n        int l=0, r=0;\n        \n        while(r<n)\n        {\n            if(v[r]==0)\n            {\n                l=r+1;\n                r=r+1;\n                bit.assign(32, 0);\n                continue;\n            }\n            \n            \n            \n            inc(bit, nums[r]);\n            while(l<=r && dec(bit, nums[l], k, r-l+1))\n            {\n                l++;\n            }\n            \n            if(check(bit, k, r-l+1))\n            {\n                ans++;\n                if(l>0)\n                    ans+=v[l-1];\n            }\n            \n            // cout<<l<<\" \"<<r<<endl;\n            r++;\n        }\n        \n        return ans;\n    }\n};",
    "submit_ts": "1720279760",
    "subm_id": "1311764029"
}