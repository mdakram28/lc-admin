{
    "username": "duong2803",
    "submission": "const int mxN = 1e6 + 5;\nint to[mxN][26], sl[mxN], term[mxN], d[mxN][26], de[mxN], id[mxN];\nint cur = 0;\n \nvoid add_string(const string &s, int i){\n\tint u = 0;\n\tfor(char c: s){\n\t\tif(!to[u][c - 'a'])\n\t\t\tto[u][c - 'a'] = ++cur;\n\t\tu = to[u][c - 'a'];\n\t}\t\n\tterm[u] = u;\n    id[u] = i;\n}\n \nvoid push_sl(){\n\tqueue<int> q;\n\tq.push(0);\n\twhile(q.size()){\n\t\tint u = q.front(); q.pop();\n\t\tfor(int i = 0; i < 26; ++i){\n\t\t\tint v = to[u][i];\n\t\t\tif(v){\n\t\t\t\tsl[v] = d[sl[u]][i];\n\t\t\t\tif(!term[v])\n\t\t\t\t\tterm[v] = term[sl[v]];\n\t\t\t\tde[v] = de[u] + 1;\t\n\t\t\t\td[u][i] = v;\n\t\t\t\tq.push(v);\n\t\t\t}else\n\t\t\t\td[u][i] = d[sl[u]][i];\t\n \n\t\t}\n\t}\t\n}\n\nconst int inf = 1e9;\n\nclass Solution {\npublic:\n    int minimumCost(string t, vector<string>& w, vector<int>& c) {\n        int n = w.size();\n        map<string, int> mp;\n        for(int i = 0; i < n; ++i){\n            if(mp.find(w[i]) != mp.end())\n                mp[w[i]] = min(mp[w[i]], c[i]);\n            else\n                mp[w[i]] = c[i];\n        }\n        int total = 0;\n        for(const string& s: w){\n            total += s.size();\n        }\n\n        cur = 0;\n        for(int i = 0; i <= total + 5; ++i){\n            sl[i] = term[i] = de[i] = 0; \n            for(int j = 0; j < 26; ++j){\n                to[i][j] = d[i][j] = 0;\n            }\n        }\n\n        for(int i = 0; i < n; ++i){\n            if(mp[w[i]] == c[i])\n                add_string(w[i], i);\n        }\n        push_sl();\n        vector<int> dp(t.size() + 1, inf);\n        dp[0] = 0;\n        int u = 0;\n        for(int i = 1; i <= t.size(); ++i){\n            u = d[u][t[i - 1] - 'a'];\n            int v = term[u];\n            while(v){\n                dp[i] = min(dp[i], c[id[v]] + dp[i - de[v]]);\n                v = term[sl[v]];\n            }\n        }\n        return dp.back() == inf ? -1 : dp.back();\n    }\n};",
    "submit_ts": "1720320713",
    "subm_id": "1312302512"
}