{
    "username": "qq1239426256",
    "submission": "class FenwickTree {\nprivate:\n    vector<long long> tr;\n\npublic:\n    FenwickTree(int n) : tr(n + 10, 0) {}\n    static inline int lowbit(int x) {\n        return x & (-x);\n    }\n    void add(int x, int delta) {\n        while (x < tr.size()) {\n            tr[x] += delta;\n            x += lowbit(x);\n        }\n    }\n    long long query(int x) {\n        long long res = 0;\n        while (x > 0) {\n            res += tr[x];\n            x -= lowbit(x);\n        }\n        return res;\n    }\n};\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        FenwickTree ft(n);\n        for (int i = 1; i < n - 1; i++) {\n            if (nums[i] > nums[i - 1] && nums[i] > nums[i + 1]) {\n                ft.add(i + 1, 1);\n            }\n        }\n        vector<int> res;\n        auto f = [&](int x) -> bool {\n            if (x == 0 || x == n - 1) return false;\n            return nums[x] > nums[x - 1] && nums[x] > nums[x + 1];\n        };\n        for (auto& q : queries) {\n            if (q[0] == 1) {\n                int l = q[1] + 1;\n                int r = q[2] + 1;\n                if(l == r)\n                    res.push_back(0);\n                else\n                    res.push_back(ft.query(r - 1) - ft.query(l));\n            } else {\n                int idx = q[1];\n                for (int i : {-1, 0, 1}) {\n                    int tmp = idx + i;\n                    if (0 <= tmp && tmp < n) {\n                        if (f(tmp))\n                            ft.add(tmp + 1, -1);\n                    }\n                }\n                nums[idx] = q[2];\n                for (int i : {-1, 0, 1}) {\n                    int tmp = idx + i;\n                    if (0 <= tmp && tmp < n) {\n                        if (f(tmp))\n                            ft.add(tmp + 1, 1);\n                    }\n                }\n            }\n        }\n        return res;\n    }\n};",
    "submit_ts": 1718507091.0
}