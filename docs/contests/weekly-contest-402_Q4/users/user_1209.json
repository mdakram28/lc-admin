{
    "username": "noobthms",
    "submission": "func countOfPeaks(nums []int, queries [][]int) []int {\n    n := len(nums)\n\tarr := make([]int, n)\n\tfor i := 1; i < n-1; i++ {\n\t\tif nums[i] > nums[i-1] && nums[i] > nums[i+1] {\n\t\t\tarr[i] = 1\n\t\t}\n\t}\n\tbit := build(arr)\n\tans := make([]int, 0)\n\tfor _, q := range queries {\n\t\tif q[0] == 1 {\n\t\t\tif q[1]+1 < q[2] {\n\t\t\t\tans = append(ans, rangeSum(bit, q[1]+1, q[2]))\n\t\t\t} else {\n\t\t\t\tans = append(ans, 0)\n\t\t\t}\n\t\t} else {\n\t\t\tindex := q[1]\n\t\t\tnums[index] = q[2]\n\t\t\tfor j := -1; j <= 1; j++ {\n\t\t\t\tidx := index + j\n\t\t\t\tif idx > 0 && idx < n-1 {\n\t\t\t\t\tv := 0\n\t\t\t\t\tif nums[idx] > nums[idx-1] && nums[idx] > nums[idx+1] {\n\t\t\t\t\t\tv = 1\n\t\t\t\t\t}\n\t\t\t\t\tif arr[idx] != v {\n\t\t\t\t\t\tupdate(bit, idx+1, v-arr[idx])\n\t\t\t\t\t\tarr[idx] = v\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//fmt.Println(arr)\n\t\t//fmt.Println(bit)\n\t}\n\treturn ans\n}\n\nfunc build(arr []int) []int {\n\tn := len(arr)\n\tb := make([]int, n+1)\n\tfor i, j := 1, 0; i <= n; i++ {\n\t\tb[i] += arr[i-1]\n\t\tif j = i + i&-i; j <= n {\n\t\t\tb[j] += b[i]\n\t\t}\n\t}\n\treturn b\n}\n\nfunc update(b []int, i, delta int) {\n\tfor ; i < len(b); i += i & -i {\n\t\tb[i] += delta\n\t}\n}\nfunc prefixSum(b []int, i int) int {\n\tsum := 0\n\tfor ; i > 0; i &= i - 1 {\n\t\tsum += b[i]\n\t}\n\treturn sum\n}\nfunc rangeSum(b []int, f, t int) int {\n\treturn prefixSum(b, t) - prefixSum(b, f)\n}",
    "submit_ts": "1718507994",
    "subm_id": "539784688"
}