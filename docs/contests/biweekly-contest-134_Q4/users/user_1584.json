{
    "username": "akshar_7",
    "submission": "class Solution:\n    def countSubarrays(self, nums: List[int], k: int) -> int:\n        n = len(nums)\n        nd = 0\n        i = j = 0\n        b = [0]*30\n        pos = [1*(k&i==k) for i in nums]\n        cen = []\n        while j<n:\n            x = nums[j]\n            y = 0\n            while x:\n                b[y] += x&1\n                x = x>>1\n                y += 1\n            nd = 0\n            for l in range(30):\n                nd += (b[l]//(j-i+1))*(1<<l)\n            #print(i, j, nd)\n            if nd==k:\n                cen.append([i, j])\n            while nd<=k and i<j:\n                x = nums[i]\n                y = 0\n                while x:\n                    b[y] -= x&1\n                    x = x>>1\n                    y += 1\n                nd = 0\n                i += 1\n                for l in range(30):\n                    nd += (b[l]//(j-i+1))*(1<<l)\n                #print(i, j, nd)\n                if nd==k:\n                    cen.append([i, j])\n            j += 1\n        j = -1\n        pre = []\n        for i in range(n):\n            if pos[i]:\n                if j==-1: j = i\n                pre.append(j)\n            else:\n                pre.append(-1)\n                j = -1\n        j = -1\n        suf = [0]*n\n        for i in range(n-1, -1, -1):\n            if pos[i]:\n                if j==-1: j = i\n                suf[i] = j\n            else:\n                suf[i] = -1\n                j = -1\n        #print(cen)\n        #print(pre)\n        #print(suf)\n        ans = 0\n        m = 0\n        for i, j in cen:\n            x, y = (i-pre[i]+1), (suf[j]-j+1)\n            ans += x*y\n            #print(x, y)\n            m += 1\n        #print(ans)\n        for i in range(m-1):\n            x, y = cen[i]\n            l, r = cen[i+1]\n            if pre[x]==pre[l]:\n                u, v = (x-pre[x]+1), (suf[r]-r+1)\n                #print(u, v)\n                ans -= u*v\n        return ans",
    "submit_ts": "1720281460",
    "subm_id": "1311825935"
}