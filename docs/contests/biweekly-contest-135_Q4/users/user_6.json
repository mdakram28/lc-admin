{
    "username": "tiger2005",
    "submission": "class Solution {\npublic:\n    long long dp[2][110][110];\n    long long maximumScore(vector<vector<int>>& grid) {\n        int n = grid.size();\n        vector<vector<long long>> cpy(n + 1, vector<long long>(n));\n        for (int i = 1; i <= n; i ++)\n            for (int j = 0; j < n; j ++)\n                cpy[i][j] = grid[i - 1][j] + cpy[i - 1][j];\n        auto f = dp[0], g = dp[1];\n\n        /*\n                e \n            i j k\n\n            g[j][k] = max(\n                max_(max(i, j) >= k) (f[i][j])\n                max_(max(i, j) < k) (f[i][j] - s'[max(i, j)] + s'[k])\n            ) + (j > k ? s[j] - s[k])\n        */\n        for (int j = 0; j <= n; j ++)\n            for (int k = 0; k <= n; k ++) {\n                if (j != 0)\n                    f[j][k] = -1e18;\n                else\n                    f[j][k] = 0;\n            }\n\n        for (int e = 1; e < n; e ++) {\n            for (int j = 0; j <= n; j ++) {\n                long long tmp = -1e18;\n                vector<long long> assist(n + 1, -1e18);\n                for (int i = 0; i <= n; i ++)\n                    assist[max(i, j)] = max(assist[max(i, j)], f[i][j] - cpy[max(i, j)][e - 1]);\n                for (int k = 0; k <= n; k ++) {\n                    g[j][k] = tmp + cpy[k][e - 1];\n                    tmp = max(tmp, assist[k]);\n                }\n                tmp = -1e18;\n                assist.assign(n + 1, -1e18);\n                for (int i = 0; i <= n; i ++)\n                    assist[max(i, j)] = max(assist[max(i, j)], f[i][j]);\n                for (int k = n; k >= 0; k --) {\n                    tmp = max(tmp, assist[k]);\n                    g[j][k] = max(g[j][k], tmp);\n                    if (j > k)\n                        g[j][k] += cpy[j][e] - cpy[k][e];\n                }\n            }\n            swap(f, g);\n        }\n\n        long long ans = 0;\n        for (int i = 0; i <= n; i ++)\n            for (int j = 0; j <= n; j ++)\n                ans = max(ans, f[i][j]);\n        return ans;\n    }\n};",
    "submit_ts": "1721487973",
    "subm_id": "548312366"
}