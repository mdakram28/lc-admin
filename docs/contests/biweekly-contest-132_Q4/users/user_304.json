{
    "username": "vermachakshu",
    "submission": "class Solution {\npublic:\n    int maximumLength(vector<int>& a, int k) {\n        int n = a.size();\n        int ans = 1;\n        \n        set<pair<int, int>> st[k + 1];\n        unordered_map<int, int> val[k + 1];\n        \n        for(int i=0; i<n; i++){\n            for(int kk=k; kk>=0; kk--){\n                {\n//                  Prev = a[i]\n                    if(!kk || (val[kk].find(a[i]) != val[kk].end())){\n                        int v = 0;\n                        if(val[kk].find(a[i]) != val[kk].end()) st[kk].erase({v, a[i]}), v = val[kk][a[i]];\n                        val[kk][a[i]] = ++v;\n                        st[kk].insert({v, a[i]});\n                    }   \n                }\n                \n                if(kk != k && !st[kk].empty())\n                {\n//                 Prev != a[i]\n                    auto mx = *(st[kk].rbegin());\n                    int v = mx.first;\n                    int num = mx.second;\n                    \n                    if(num == a[i]){\n                        if(st[kk].size() == 1)  continue;\n                        else{\n                            mx = *prev(st[kk].rbegin());\n                            v = mx.first;\n                            num = mx.second;\n                        }\n                    }\n                    \n                    if((val[kk + 1].find(a[i]) == val[kk + 1].end()) || val[kk+1][a[i]] < v + 1){\n                        if(val[kk + 1].find(a[i]) != val[kk + 1].end()) st[kk + 1].erase({val[kk + 1][a[i]], a[i]});\n                        val[kk + 1][a[i]] = v + 1;\n                        st[kk + 1].insert({val[kk + 1][a[i]], a[i]});\n                    }\n                }\n            }\n        }\n        \n        for(int kk=0; kk<=k; kk++){\n            if(st[kk].empty())  continue;\n            auto mx = *(st[kk].rbegin());\n            int v = mx.first;\n            ans = max(ans, v);\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1717860691.0
}