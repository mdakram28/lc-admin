{
    "username": "kml123",
    "submission": "#include <ext/pb_ds/assoc_container.hpp> \n#include <ext/pb_ds/tree_policy.hpp> \nusing namespace __gnu_pbds; \n  \n#define ordered_set tree<int, null_type,less<int>, rb_tree_tag,tree_order_statistics_node_update> \n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        ordered_set st;\n        for(int i=1;i<nums.size()-1;i++){\n            if(nums[i]>nums[i-1] && nums[i]>nums[i+1]){\n                st.insert(i);\n            }\n        }\n        vector<int>ans;\n        int n=nums.size();\n        for(auto it:queries){\n            if(it[0]==1){\n                int l=it[1]+1,r=it[2]-1;\n                if(l>r){\n                    ans.push_back(0);\n                    continue;\n                }\n                //cout<<st.order_of_key(r + 1)<<\" \"<<st.order_of_key(l)<<endl;\n                int count = st.order_of_key(r + 1) - st.order_of_key(l);\n                count=max(count,0);\n                \n                ans.push_back(count);\n            }\n            else{\n                int i=it[1],val=it[2];\n                if(i-2>=0 && nums[i-1]>nums[i-2] && nums[i-1]>nums[i]){\n                    st.erase(i-1);\n                }\n                if(i-1>=0 && i+1<n && nums[i]>nums[i-1] && nums[i]>nums[i+1]){\n                    st.erase(i);\n                }\n                if(i>=0 && i+2<n && nums[i+1]>nums[i] && nums[i+1]>nums[i+2]){\n                    st.erase(i+1);\n                }\n                nums[i]=val;\n                if(i-2>=0 && nums[i-1]>nums[i-2] && nums[i-1]>nums[i]){\n                    st.insert(i-1);\n                }\n                if(i-1>=0 && i+1<n && nums[i]>nums[i-1] && nums[i]>nums[i+1]){\n                    st.insert(i);\n                }\n                if(i>=0 && i+2<n && nums[i+1]>nums[i] && nums[i+1]>nums[i+2]){\n                    st.insert(i+1);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507932.0
}