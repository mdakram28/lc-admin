{
    "username": "Molotfi",
    "submission": "class Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        \n        int n = s.length();\n        \n        \n        vector<int> pref(n+1, 0);\n        vector<int> zeros;\n        zeros.push_back(0);\n        \n        for(int i=0; i<n; i++){\n            pref[i+1] = pref[i] + (s[i] == '1');\n            \n            \n        }\n        \n        int L = 0;\n        \n        auto is_good = [&](int i, int j){\n            int ones = pref[i] - pref[j-1];\n            int zeros = i-j+1-ones;\n            \n            return ones >= zeros*zeros;\n            \n        };\n        \n        auto calc = [&](int i, int j){\n            return pref[i] - pref[j-1];\n        };\n        \n        \n        int ans = 0;\n        for(int i=1; i<=n; i++){\n                if(s[i-1] == '0'){\n                zeros.push_back(i);\n            }\n            \n                //ones\n                \n                ans += i - zeros.back();\n                for(int j=zeros.size()-1; j>=L+1; j--){\n                    \n                    \n                    \n                    if(is_good(i, zeros[j])){\n                        ans += zeros[j] - zeros[j-1];\n                    }else{\n                        int ones = calc(i, zeros[j]);\n                        int zero = i - zeros[j] +1 - ones;\n                        \n                        int need = zero*zero - ones;\n                        \n                        if(zeros[j] - zeros[j-1] < need)continue;\n                        \n                        ans += zeros[j] - zeros[j-1] - need;\n                    }\n                }\n            \n            if(zeros.size() - L > 201){\n                L++;\n            }\n            \n            \n            //cout << ans << endl;\n        }\n        \n        \n        return ans;\n        \n        \n    }\n};",
    "submit_ts": "1722137691",
    "subm_id": "1335770972"
}