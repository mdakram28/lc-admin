{
    "username": "shrana_ak",
    "submission": "class SegmentTree {\n  int n;\n  int *seg;\n  vector<int> arr;\n  void build(int s,int e,int si,vector<int> &a) {\n      if(s==e) {\n          if(s==0 || s==arr.size()-1 || arr[s]<=arr[s-1] || arr[s]<=arr[s+1]) {\n              seg[si] = 0;\n          } else {\n              seg[si] = 1;\n          }\n          return;\n      }\n      \n      int mid = (s+e)/2;\n      build(s,mid,2*si+1,a);\n      build(mid+1,e,2*si+2,a);\n      seg[si] = seg[2*si+1] + seg[2*si+2];\n  }\n    \n  void update(int s,int e,int si, int idx) {\n      if(s==e) {\n          if(s==0 || s==arr.size()-1 || arr[s]<=arr[s-1] || arr[s]<=arr[s+1]) {\n              seg[si] = 0;\n          } else {\n              seg[si] = 1;\n          }\n          return;\n      }\n      if(idx<s ||idx>e) return;\n      int mid = (s+e)/2;\n      update(s,mid,2*si+1,idx);\n      update(mid+1,e,2*si+2,idx);\n      seg[si] = seg[2*si+1] + seg[2*si+2];\n  }\n    \n  int query(int s,int e,int si,int ql,int qr) {\n      if(s>=ql && e<=qr) {\n          return seg[si];\n      }\n      if(s>qr||e<ql) return 0;\n      int mid = (s+e)/2;\n      return query(s,mid,2*si+1,ql,qr) + query(mid+1,e,2*si+2,ql,qr);\n  }\n  public: \n  SegmentTree(int size, vector<int> &a) {\n     n = size;\n     arr = a;\n     seg = new int[a.size()*4+1];\n     build(0,n-1,0,a);\n  }\n    \n  void update(int idx, int val) {\n      arr[idx] = val;\n      update(0,n-1,0,idx);\n      if(idx-1 >= 0)\n        update(0,n-1,0,idx-1);\n      if(idx+1 <arr.size())\n          update(0,n-1,0,idx+1);\n  }\n    \n  int query(int ql,int qr) {\n      if(ql==qr) {\n          return 0;\n      }\n      return query(0,n-1,0,ql+1,qr-1);\n  }\n};\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        SegmentTree seg(nums.size(), nums);\n        vector<int> ans;\n        for(auto i:queries) {\n            int type = i[0];\n            if(type==1) {\n                ans.push_back(seg.query(i[1],i[2]));\n            } else {\n                seg.update(i[1],i[2]);\n            }\n        }\n        return ans;\n    }\n};\n\n// [5,9,3,10,5,10,8,7]\n// [[2,5,5],[2,5,2],[2,4,9],[1,2,7],[1,4,6]]\n\n// 5,9,3,10,5,5,8,7\n// 5,9,3,10,5,2,8,7\n// 5,9,3,10,9,2,8,7\n",
    "submit_ts": 1718507753.0
}