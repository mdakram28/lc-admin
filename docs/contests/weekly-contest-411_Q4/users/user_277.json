{
    "username": "Yuriy Kaminskiy",
    "submission": "typedef long long ll;\nclass Solution {\npublic:\n    vector<long long> countKConstraintSubstrings(string s, int k, vector<vector<int>>& queries) {\n        unsigned j0 = 0;\n        unsigned j1 = 0;\n        unsigned c0 = 0;\n        unsigned c1 = 0;\n        const unsigned n = s.length();\n        vector<unsigned> J0(n);\n        vector<unsigned> J1(n);\n        vector<ll> Js(n + 1);\n        vector<ll> J0s(n + 1);\n        vector<ll> J1s(n + 1);\n        for (unsigned i = 0; i < n; ++i) {\n            unsigned c = s[i] - '0';\n            c0 += c ^ 1;\n            c1 += c;\n            while(c0 > k) {\n                unsigned cj = s[j0++] - '0';\n                c0 -= cj ^ 1;\n            }\n            while(c1 > k) {\n                unsigned cj = s[j1++] - '0';\n                c1 -= cj;\n            }\n            J0[i] = j0;\n            J1[i] = j1;\n            J0s[i + 1] = J0s[i] + j0;\n            J1s[i + 1] = J1s[i] + j1;\n            Js[i + 1] = Js[i] + min(j0, j1);\n        }\n        const unsigned m = queries.size();\n        vector<ll> ret(m);\n        vector<unsigned> idx(m);\n        iota(idx.begin(), idx.end(), 0u);\n        sort(idx.begin(), idx.end(), [&queries](auto a, auto b) { return queries[a][0] < queries[b][0]; });\n        unsigned lastl = 0;\n        unsigned j0mod = 0;\n        unsigned j1mod = 0;\n        for (auto i: idx) {\n            cout << 'i' << i << endl;\n            auto &q = queries[i];\n            unsigned l = q[0];\n            unsigned r = q[1];\n            while(j0mod < n && J0[j0mod] < l) {\n                ++j0mod;\n            }\n            while(j1mod < n && J1[j1mod] < l) {\n                ++j1mod;\n            }\n            unsigned jmod = max(j0mod, j1mod);\n            //cout << 'jmod' << j1mod << ' ' << j1mod\n            auto reti = ((r+3ll)*r-l*(l+1ll)+2)/2;\n            if (jmod <= r) {\n                reti -= (jmod - l + 0ll)*l + Js[r + 1] - Js[jmod];\n            } else {\n                reti -= (r - l + 1ll)*l;\n            }\n            ret[i] = reti;\n        }\n        return ret;\n    }\n};",
    "submit_ts": "1723952734",
    "subm_id": "1359803355"
}