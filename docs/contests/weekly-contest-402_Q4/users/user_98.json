{
    "username": "pingchungchang",
    "submission": "class Solution {\npublic:\n    struct BIT{\n        vector<int> bit;\n        int n;\n        void init(int _n){\n            n = _n+10;\n            bit = vector<int>(n,0);\n        }\n        void modify(int p,int v){\n            p++;\n            for(;p<n;p+=p&-p)bit[p] += v;\n            return;\n        }\n        int getval(int s,int e){\n            s++,e++;\n            int re = 0;\n            for(;e>0;e-= e&-e)re += bit[e];\n            s--;\n            for(;s>0;s-= s&-s)re -= bit[s];\n            return re;\n        }\n    };\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        BIT bit;\n        int n = nums.size();\n        bit.init(n);\n        vector<int> isp(n,0);\n        for(int i = 1;i+1<n;i++){\n            if(nums[i]>nums[i-1]&&nums[i]>nums[i+1])isp[i] = 1,bit.modify(i,1);\n        }\n        vector<int> ans;\n        for(auto &i:queries){\n            if(i[0] == 1){\n                int s = i[1],e = i[2];\n                ans.push_back(bit.getval(s,e)-isp[s]-(s != e?isp[e]:0));\n            }\n            else{\n                int idx = i[1],val = i[2];\n                nums[idx] = val;\n                for(int j = idx-1;j<=idx+1;j++){\n                    if(j<0||j>=n)continue;\n                    bit.modify(j,-isp[j]);\n                    isp[j] = 0;\n                    if(j != 0&&j != n-1&&nums[j]>nums[j+1]&&nums[j]>nums[j-1])isp[j] = 1,bit.modify(j,1);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718505971.0
}