{
    "username": "saadakbar10",
    "submission": "#define sz(x) (ll)(x).size()\n#define ll long long\nusing namespace std;\n\nconst ll mod = 1e9+7;\n\nclass Solution {\nprivate:\n    void merge(ll i, vector<vector<ll>>& st) {\n        for (ll x = 0; x < 4; x++) {\n            st[i][x] = 0;\n            for (ll y = 1; y < 4; y++) {\n                st[i][x] = max(st[i][x], st[2 * i][(x & 2) + (y & 1)] + st[2 * i + 1][(x & 1) + (y & 2)]);\n            }\n        }\n    }\n\n    void change(ll i, ll val, vector<vector<ll>>& st) {\n        ll j = sz(st) / 2 + i;\n        st[j][0] = val;\n        j /= 2;\n        while (j > 0) {\n            merge(j, st);\n            j /= 2;\n        }\n    }\n\npublic:\n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        ll n = sz(nums);\n        ll q = sz(queries);\n        ll l = 1;\n        while (l < n) {\n            l *= 2;\n        }\n\n        vector<vector<ll>> st(2 * l, vector<ll>(4, 0));\n        for (ll i = 0; i < n; i++) {\n            st[l + i][0] = nums[i];\n        }\n        for (ll i = l - 1; i > 0; i--) {\n            merge(i, st);\n        }\n\n        ll ans = 0;\n        for (ll i = 0; i < q; i++) {\n            ll p = queries[i][0];\n            ll x = queries[i][1];\n            change(p, x, st);\n\n            ll cans = 0;\n            for (ll j = 0; j < 4; j++) {\n                cans = max(cans, st[1][j]);\n            }\n            ans = (ans+cans)%mod;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1716693328",
    "subm_id": "1268082805"
}