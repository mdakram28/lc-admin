{
    "username": "shawnxi",
    "submission": "class Solution:\n    def countSubarrays(self, nums: List[int], k: int) -> int:\n        \n        n = len(nums)\n        \n        i = 0\n        j1 = -1\n        j2 = -1\n        \n        o = [0]*32\n        z = [0]*32\n        \n        o2 = [0]*32\n        z2 = [0]*32\n        \n        def put1(i):\n            a = 0\n            \n            for idx in range(31):\n                if i&1:\n                    o[idx]+=1\n                else:\n                    z[idx]+=1\n                i>>=1\n                if o[idx] and not z[idx]:\n                    a+=(1<<idx)\n            \n            return a\n        \n        def del1(i):\n            a = 0\n            for idx in range(31):\n                if i&1:\n                    o[idx]-=1\n                else:\n                    z[idx]-=1\n                i>>=1\n                if o[idx] and not z[idx]:\n                    a+=(1<<idx)\n            \n            return a\n        \n        def try_put1(i):\n            a = 0\n            \n            for idx in range(31):\n                o1 = o[idx]\n                z1 = z[idx]\n                if i&1:\n                    o1+=1\n                else:\n                    z1+=1\n                i>>=1\n                if o1 and not z1:\n                    a+=(1<<idx)\n            \n            return a\n        \n        def put2(i):\n            a = 0\n            \n            for idx in range(31):\n                if i&1:\n                    o2[idx]+=1\n                else:\n                    z2[idx]+=1\n                i>>=1\n                if o2[idx] and not z2[idx]:\n                    a+=(1<<idx)\n            \n            return a\n        \n        def del2(i):\n            a = 0\n            for idx in range(31):\n                if i&1:\n                    o2[idx]-=1\n                else:\n                    z2[idx]-=1\n                i>>=1\n                if o2[idx] and not z2[idx]:\n                    a+=(1<<idx)\n            \n            return a\n        \n        def try_put2(i):\n            a = 0\n            \n            for idx in range(31):\n                o1 = o2[idx]\n                z1 = z2[idx]\n                if i&1:\n                    o1+=1\n                else:\n                    z1+=1\n                i>>=1\n                if o1 and not z1:\n                    a+=(1<<idx)\n            \n            return a\n        \n        res = 0\n        \n        t1 = 0\n        t2 = 0\n        \n        while i<n:\n                \n            if j2<i:\n                j2 = i\n                t2 = put2(nums[i])\n                \n            \n            while j2+1<n and t2&nums[j2+1]>k:\n                t2 = put2(nums[j2+1])\n                j2+=1\n                \n            \n            if j1<j2:\n                o,z = list(o2), list(z2)\n                t1 = t2\n                j1 = j2\n                \n            \n            while j1+1<n and t1&nums[j1+1]>=k:\n                t1 = put1(nums[j1+1])\n                j1+=1\n                \n            \n                \n            if t1==k:\n                res+=j1-j2\n            \n            if t2==k:\n                res+=1\n            \n           \n            t1 = del1(nums[i])\n            t2 = del2(nums[i])\n            i+=1\n            \n        return res\n            \n                    \n            \n            ",
    "submit_ts": "1720281106",
    "subm_id": "544574547"
}