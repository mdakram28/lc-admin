{
    "username": "heuristic-black3ze",
    "submission": "class Solution {\npublic:\n    long long maximumScore(vector<vector<int>>& grid) {\n        int n = grid.size(), m = grid[0].size();\n        vector<vector<long long>> pre(m, vector<long long>(n + 1));\n        for (int i = 0; i < m; i++) {\n            for (int j = 1; j <= n; j++) {\n                pre[i][j] = pre[i][j - 1] + grid[j - 1][i];\n            }\n        }\n        const long long inf = 0x3f3f3f3f3f3f3f3fLL;\n        vector<vector<long long>> f(n + 1, vector<long long>(n + 1, -inf));\n        for (int i = 0; i <= n; i++) f[0][i] = 0;\n        for (int i = 1; i < m; i++) {\n            vector<vector<long long>> tf(n + 1, vector<long long>(n + 1, -inf)), tf2(n + 1, vector<long long>(n + 1));\n            for (int j = 0; j <= n; j++) {\n                for (int k = 0; k <= n; k++) {\n                    int l = max(j, k);\n                    tf[k][l] = max(tf[k][l], f[j][k] - pre[i - 1][l]);\n                    tf2[k][l] = max(tf2[k][l], f[j][k]);\n                }\n            }\n            for (int j = 0; j <= n; j++) {\n                for (int k = 1; k <= n; k++) {\n                    tf[j][k] = max(tf[j][k], tf[j][k - 1]);\n                }\n            }\n            for (int j = 0; j <= n; j++) {\n                long long cur = -inf;\n                for (int k = n; k >= 0; k--) {\n                    tf[j][k] += pre[i - 1][k];\n                    cur = max(cur, tf2[j][k]);\n                    tf[j][k] = max(tf[j][k], cur);\n                }\n            }\n            \n            for (int j = 0; j <= n; j++) {\n                for (int k = 0; k <= n; k++) {\n                    if (j > k) {\n                        long long add = pre[i][j];\n                        add -= pre[i][k];\n                        tf[j][k] += add;\n                    }\n                }\n            }\n            f.swap(tf);\n        }\n        long long ans = -inf;\n        for (int i = 0; i <= n; i++) {\n            ans = max(ans, *max_element(f[i].begin(), f[i].end()));\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1721488030",
    "subm_id": "548312594"
}