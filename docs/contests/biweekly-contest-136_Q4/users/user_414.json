{
    "username": "thorfinn_",
    "submission": "#define ll long long\nclass Solution {\npublic:\n    ll subtree[200005] , dp[200005];\n    vector<int> adj[200005];\n    ll dfs1(ll node ,ll par){\n        ll mx = 0;\n        for(auto p : adj[node]){\n            if(p != par){\n                ll val = dfs1(p, node);\n                if(p % 2 == 0) mx = max(mx, val + 2);\n                else mx = max(mx, val + 1);\n            }\n        }\n        return subtree[node] = mx;\n    }\n    void dfs(ll node ,ll mx, ll par){\n        ll o = mx;\n        if(par != -1){\n            ll g = mx;\n            if(par % 2 == 0) g += 2;\n            else g++;\n            o = g;\n            dp[node] = max(subtree[node], g);\n        }\n        else dp[node] = subtree[node];\n        vector<ll> v,v1;\n        for(auto p : adj[node]){\n            if(p != par){\n                v.push_back(subtree[p]);\n                v1.push_back(p);\n            }\n        }\n        vector<ll> suf(v.size() + 1);\n        suf[v.size()] = 0;\n        for(ll i = v.size() - 1;i>=0;i--){\n            ll cur = v[i];\n            if(v1[i] % 2 == 0) cur += 2;\n            if(v1[i] % 2 != 0) cur++;\n            suf[i] = max(cur, suf[i+1]);\n        }\n        ll mxx = 0;\n        for(ll i = 0;i<v.size();i++){\n            ll g = suf[i+1],h = v[i];\n            if(v1[i] % 2 == 0) h += 2;\n            if(v1[i] % 2 != 0) h++;\n            ll rem = max(mxx, g);\n            dfs(v1[i],max(rem,o), node);\n            mxx = max(mxx, h);\n        }\n    }\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        ll n = 0;\n        for(ll i = 0;i<edges.size();i++){\n            ll u = edges[i][0];\n            ll v = edges[i][1];\n            adj[u].push_back(v);\n            adj[v].push_back(u);\n            n = max(n, v);\n            n = max(n, u);\n        }\n        dfs1(0,-1);\n        dfs(0,0,-1);\n        vector<int> ans(n + 1);\n        for(int i = 0;i<=n;i++) ans[i] = dp[i];\n        return ans;\n    }\n};",
    "submit_ts": "1722697121",
    "subm_id": "1343134959"
}