{
    "username": "Sloth_junkie",
    "submission": "struct SegmentTree {\n    int size;\n    vector<int> mini;\n \n    void init(int n)\n    {\n        size = 1;\n        while(size < n)\n        {\n            size *= 2;\n        }\n \n        mini.assign(2*size,0);\n    }\n    void set(int i, int v, int x, int lx, int rx)\n    {\n        if(rx-lx == 1)\n        {\n            mini[x] = v;\n            return;\n        }\n \n        int m = (lx+rx)/2;\n        if(i < m)\n        {\n            set(i,v,(2*x)+1,lx,m);\n        }\n        else\n        {\n            set(i,v,(2*x)+2,m,rx);\n        }\n \n        mini[x] = mini[(2*x)+1]+mini[(2*x)+2];\n    }\n    void set(int i, int v)\n    {\n        set(i,v,0,0,size);\n    }\n \n    int minrange(int l, int r, int x, int lx, int rx)\n    {\n        if(lx>= r || rx <= l)\n        {\n            return 0;\n        }\n \n        if(lx >= l && rx <= r)\n        {\n            return mini[x];\n        }\n \n        int m = (lx+rx)/2;\n \n        int l1 = minrange(l,r,(2*x)+1,lx,m);\n        int l2 = minrange(l,r,(2*x)+2,m,rx);\n \n        return l1+l2;\n    }\n    int minrange(int l, int r)\n    {\n        return minrange(l,r+1,0,0,size);\n    }\n};\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        SegmentTree st;\n        int n = nums.size();\n        st.init(n+1);\n        for(int i = 1; i<n-1; i++)\n        {\n            if(nums[i] > nums[i-1] && nums[i] > nums[i+1])\n            {\n                // cout<<i<<endl;\n                st.set(i,1);\n            }\n        }\n        \n        vector<int> ans;\n        for(auto it:queries)\n        {\n            if(it[0] == 1)\n            {\n                ans.push_back(st.minrange(it[1]+1,it[2]-1));\n            }\n            else\n            {\n                int ind = it[1];\n                nums[ind] = it[2];\n                if(ind-1 > 0)\n                {\n                    if(nums[ind-1] > nums[ind-2] && nums[ind-1] > nums[ind])\n                    {\n                        st.set(ind-1,1);\n                    }\n                    else\n                    {\n                        st.set(ind-1,0);\n                    }\n                }\n                if(ind > 0 && ind < n-1)\n                    if(nums[ind] > nums[ind-1] && nums[ind] > nums[ind+1])\n                    {\n                        st.set(ind,1);\n                    }\n                    else\n                    {\n                        st.set(ind,0);\n                    }\n                \n                if(ind+1 < n-1)\n                {\n                    if(nums[ind+1] > nums[ind] && nums[ind+1] > nums[ind+2])\n                    {\n                        st.set(ind+1,1);\n                    }\n                    else\n                    {\n                        st.set(ind+1,0);\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1718506804",
    "subm_id": "1289631522"
}