{
    "username": "Dragos Ristache",
    "submission": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef pair<int,int> pii;\ntypedef pair<double, double> pdd;\n#define pb push_back\n#define mp make_pair\n#define fs first\n#define sc second\n#define rep(i, from, to) for (int i = from; i < (to); ++i)\n#define all(x) x.begin(), x.end()\n#define sz(x) (int)(x).size()\n#define FOR(i, to) for (int i = 0; i < (to); ++i)\ntypedef vector<vector<int> > vvi;\ntypedef vector<ll> vll;\ntypedef vector<vll> vvll;\ntypedef vector<pair<int, int> > vpi;\ntypedef pair<ll,ll> pll;\ntypedef vector<string> vs;\nconst char en = '\\n';\npair<pii,pii> best[555];\nclass Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>& m) {\n        int N = sz(m);\n        int M = sz(m[0]);\n        ll ret = -1000000000LL * 100LL;\n        FOR(i, M) {\n            best[i] = {{0,ret}, {0,ret}};\n        }\n        for (int i=0;i<N;++i) {\n            if (i >= 2) {\n                vector<pair<ll,pii>> S;\n                for (int j=0;j<M;++j) {\n                    pll max1 = {-1000000000LL * 100, 0};\n                    pll max2 = {-1000000000LL * 100, 0};\n                    \n                    for (int k=j+1;k<M;++k) {\n                        ll cost;\n                        if (best[j].fs.fs != best[k].fs.fs) {\n                            cost = best[j].fs.sc + best[k].fs.sc;\n                        } else {\n                            cost = max(best[j].fs.sc + best[k].sc.sc, best[j].sc.sc + best[k].fs.sc);\n                        }\n                        if (cost > max1.fs) {\n                            swap(max1, max2);\n                            max1 = {cost, k};\n                        } else if (cost > max2.fs) {\n                            max2 = {cost, k};\n                        }\n                    }\n                    S.pb({max1.fs, {j, max1.sc}});\n                    S.pb({max2.fs, {j, max2.sc}});\n                }\n                for (int j=0;j<M;++j) {\n                    for (auto el : S) {\n                        if (el.sc.fs == j || el.sc.sc == j) continue;\n                        else {\n                            ret = max(ret, 1LL*m[i][j] + el.fs);\n                        }\n                    }\n                }\n            }\n            FOR(j, M) {\n                if (best[j].fs.sc < m[i][j]) {\n                    swap(best[j].fs, best[j].sc);\n                    best[j].fs = {i, m[i][j]};\n                } else if (best[j].sc.sc < m[i][j]) {\n                    best[j].sc = {i, m[i][j]};\n                }\n            }\n        }\n        return ret;\n    }\n};\n",
    "submit_ts": "1723907474",
    "subm_id": "1359109332"
}