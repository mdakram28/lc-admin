{
    "username": "garjemehul164",
    "submission": "vector<int> lg((int)1e6);\nclass Solution {\npublic:\n    int func(long long l, long long r, vector<vector<int>> &dp)\n    {\n        int len = r-l+1;\n        int lk = lg[len];\n        int and1 = dp[l][lk];\n        int and2 = dp[r+1-(1<<lk)][lk];\n        return (and1&and2);\n    }\n    void sieve()\n    {\n        for(int i = 2 ; i < 1e6 ; i++)\n                lg[i] = 1 + lg[i/2];\n    }\n    long long countSubarrays(vector<int>& v, int k) \n    {\n        if(lg[2]!=1)\n            sieve();\n        int n = v.size();   \n        long long ans = 0;\n        vector<vector<int>> dp(n, vector<int> (32));\n        for(int i = 0 ; i < n ; i++)\n                dp[i][0] = v[i];\n        for(int i = 1 ; i < 30 ; i++)\n            for(int j = 0 ; ((j+(1<<i))<=n) ; j++)\n                dp[j][i] = dp[j][i-1]&dp[j+(1<<(i-1))][i-1];\n        long long ret = 0;\n        for(long long i = 0 ; i < n ; i++)\n        {\n            long long l = i , r = n-1, ind = -1;\n            while(l<=r)\n            {\n                int m = (l+r)/2;\n                int got = func(i, m, dp);\n                // cout<<\"--> \"<<  i<<\" \"<<m<<\" \"<<got<<endl;\n                if((got&k)!=k)\n                    r = m-1;\n                else\n                    ind = m, l = m+1;\n            }\n            if(ind==-1)\n                continue;\n            long long ind2 = -1;\n            l=i, r = ind;\n            while(l<=r)\n            {\n                int m = (l+r)/2;\n                int got = func(i, m, dp);\n                if(got!=k)\n                {\n                    l = m+1;\n                }\n                else\n                {\n                    ind2 = m, r = m-1;\n                }\n            }\n            if(ind2==-1)continue;\n            // cout<<i<<\" \"<<ind2<<\" \"<<ind<<endl;\n            ind = ind-ind2+1;\n            ans += ind;\n            \n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279617",
    "subm_id": "1311758412"
}