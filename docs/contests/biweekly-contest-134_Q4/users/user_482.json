{
    "username": "nitesh_sinha",
    "submission": "\nclass Solution\n{\n\n    void addBits(vector<int> &setBits, int num)\n    {\n        for (int i = 0; i < 31; i++)\n        {\n            if (num & (1 << i))\n                setBits[i]++;\n        }\n    }\n\n    void removeBits(vector<int> &setBits, int num)\n    {\n        for (int i = 0; i < 31; i++)\n        {\n            if (num & (1 << i))\n                setBits[i]--;\n        }\n    }\n\n    int getAnd(vector<int> &setBits, int size)\n    {\n        int result = 0;\n        for (int i = 0; i < 31; i++)\n        {\n            if (setBits[i] == size)\n                result |= (1 << i);\n        }\n        return result;\n    }\n\n\n    long long f(vector<int> &nums, int k)\n    {\n        // return the number of subarrays with & of all elements >= k\n        long long count = 0;\n        int j = 0;\n        int subArrayAnd = nums[0];\n        vector<int> bitArray(31, 0);\n        for (int i = 0; i < nums.size(); i++)\n        {\n            addBits(bitArray, nums[i]);\n            // cout<<i<<\" \"<<j<<\" \"<<getAnd(bitArray)<<endl;\n            while (getAnd(bitArray, i - j + 1) < k && j <= i)\n            {\n                removeBits(bitArray, nums[j]);\n                j++;\n            }\n            // cout<<i<<\" \"<<j<<\" \"<<getAnd(bitArray)<<endl;\n            if (getAnd(bitArray, i - j + 1) >= k)\n                count += i - j + 1;\n        }\n\n        return count;\n    }\n\npublic:\n    long long countSubarrays(vector<int> &nums, int k)\n    {\n        // cout<<f(nums, k)<<\" \"<<f(nums, k+1)<<endl;\n        return f(nums, k) - f(nums, k + 1);\n    }\n};",
    "submit_ts": "1720279068",
    "subm_id": "1311736019"
}