{
    "username": "thiago_bastos",
    "submission": "class Fenwick {\n    vector<int> ft;\n    int n;\n    \n    public:\n    \n    Fenwick(vector<int>& nums) {\n        n = nums.size();\n        ft.assign(n + 1, 0);\n        for(int i = 0; i < n; ++i)\n            upd(i, nums[i]);\n    }\n    \n    void upd(int k, int val) {\n        for(++k; k <= n; k += k & -k)\n            ft[k] += val;\n    }\n    \n    int query(int k) {\n        int ans {};\n        for(++k; k > 0; k -= k & -k)\n            ans += ft[k];\n        return ans;\n    }\n    \n    int query(int l, int r) {\n        if(l > r) return 0;\n        return query(r) - query(l - 1);\n    }\n};\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        vector<int> peak(n, 0);\n        \n        for(int i = 1; i < n - 1; ++i)\n            peak[i] = nums[i] > nums[i - 1] && nums[i] > nums[i + 1];\n        \n        Fenwick ft(peak);\n        vector<int> answers;\n        \n        auto updIndex = [&](int k, int x) {\n            if(k > 0 && k < n - 1)\n                ft.upd(k, x * (nums[k] > max(nums[k - 1], nums[k + 1])));\n        };\n        \n        for(auto& query : queries) {\n            int type = query[0];\n            \n            if(type == 1) {\n                int l = query[1], r = query[2];\n                answers.push_back(ft.query(l + 1, r - 1));\n            } else {\n                int index = query[1], val = query[2];\n                updIndex(index, -1);\n                updIndex(index - 1, -1);\n                updIndex(index + 1, -1);\n                nums[index] = val;\n                updIndex(index, 1);\n                updIndex(index - 1, 1);\n                updIndex(index + 1, 1);\n            }\n        }\n        \n        return answers;\n    }\n};",
    "submit_ts": 1718506646.0
}