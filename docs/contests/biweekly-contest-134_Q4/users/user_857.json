{
    "username": "zhi-cr",
    "submission": "typedef long long LL;\nclass Solution {\npublic:\n    int dp[100010][33];\n    bool check1(int r,int l,int k)\n    {\n        int res=cal(l,r,k);\n        if((res|k)==k)\n        return true;\n        return false;\n    }\n    int cal(int r,int l,int k)\n    {   \n        // cout<<r<<\" \"<<l<<\" \"<<k<<\"\\n\";\n         int res=0;\n        for(int i=0;i<32;i++)\n        {\n            if(dp[r][i]-dp[l-1][i]==(r-l+1))\n            {\n                // cout<<\"!!!!!!!!!!!\"<<i<<\"\\n\";\n                res=res|(1<<i);\n            }\n        }\n        // cout<<res<<\"\\n\";\n        return res;\n    }\n     bool check2(int r,int l,int k)\n    {\n        int res=cal(l,r,k);\n        if((res|k)==res)\n        return true;\n        return false;\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n=nums.size();\n        LL ans=0;\n        for(int i=0;i<n;i++)\n        {\n            for(int j=0;j<32;j++)\n            {\n                dp[i+1][j]=dp[i][j];\n                if(nums[i]>>j&1)\n                {\n                    dp[i+1][j]++;\n                }\n                // cout<<\"!\"<<i<<\" \"<<j<<\" \"<<dp[i+1][j]<<\"\\n\";\n            }\n        }\n        for(int i=0;i<n;i++)\n        {\n            int r_bound,l_bound;\n            int l=0,r=i;\n            while(l<r)\n            {\n                int mid=(l+r)/2;\n                // cout<<i<<\" \"<<mid<<\" \"<<cal(mid+1,i+1,k)<<\"\\n\";\n                bool res=check2(mid+1,i+1,k);\n                if(!res)\n                l=mid+1;\n                else r=mid; \n            }\n            l_bound=l;\n            if(cal(i+1,l_bound+1,k)!=k)\n            continue;\n            l=0,r=i;\n            while(l<r)\n            {\n                int mid=(l+r+1)/2;\n                bool res=check1(mid+1,i+1,k);\n                if(!res)\n                r=mid-1;\n                else l=mid; \n            }\n            r_bound=l;\n            if(cal(i+1,r_bound+1,k)!=k)\n            continue;\n            // cout<<l_bound<<\" \"<<r_bound<<\" \"<<i<<\"\\n\";\n            ans+=((LL)r_bound-l_bound+1);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720280233",
    "subm_id": "544571115"
}