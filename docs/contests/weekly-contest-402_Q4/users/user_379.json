{
    "username": "hkmaxi",
    "submission": "\nclass Solution {\npublic:\n    int bit[100005];\n    void upd(int ind,int n,int v){\n        while(ind<=n){\n            bit[ind]=bit[ind]+v;\n            ind+=(ind & (-ind));\n        }\n    }\n    \n    int query(int ind){\n        int s=0;\n        while(ind>0){\n            s=s+bit[ind];\n            ind-=ind&(-ind);\n        }\n        return s;\n    }\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n=nums.size();\n        vector<int> status(n+1,0);\n        vector<int> a(n+1);\n        \n        for(int i=1;i<=n;i++){\n            a[i]=nums[i-1];\n        }\n        \n        for(int i=1;i<=n;i++){\n            \n            if(i-1>=1 and i+1<=n and a[i]>a[i-1] and a[i]>a[i+1]){\n                status[i]=1;\n                upd(i,n,status[i]);\n            }\n        }\n        \n        \n        \n        vector<int> sol;\n        for(auto q:queries){\n            if(q[0]==1){\n                int l=q[1]+1;\n                int r=q[2]+1;\n                int ans=0;\n                if(r-1>=l)ans=query(r-1)-query(l);\n                sol.push_back(ans);\n            }else{\n                int index=q[1]+1;\n                int value=q[2];\n                \n                a[index]=value;\n                \n                \n                int prev=status[index];\n                int curr=(index-1>=1 and index+1<=n and a[index]>a[index-1] and a[index]>a[index+1]);\n                status[index]=curr;\n                upd(index,n,curr-prev);\n                \n                \n                if(index-1>=1){\n                    int prev=status[index-1];\n                    int curr=(index-1>=1 and index-2>=1 and index<=n and a[index-1]>a[index-2] and a[index-1]>a[index]);\n                    status[index-1]=curr;\n                    upd(index-1,n,curr-prev);\n                }\n                \n                if(index+1<=n){\n                    int prev=status[index+1];\n                    int curr=(index+1<=n and index>=1 and index+2<=n and a[index+1]>a[index] and a[index+1]>a[index+2]);\n                    status[index+1]=curr;\n                    upd(index+1,n,curr-prev);\n                }   \n            }\n            \n        }\n            \n            return sol;\n        }\n    \n};",
    "submit_ts": 1718507382.0
}