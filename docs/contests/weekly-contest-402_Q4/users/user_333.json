{
    "username": "chromate00",
    "submission": "using ll=long long;\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        ll n=size(nums);\n        vector<ll>fen(n+1);\n        auto get=[&](ll x)\n        {\n            ll val=0;\n            while(x>0)\n            {\n                val+=fen[x];\n                x-=x&-x;\n            }\n            return val;\n        };\n        auto add=[&](ll x,ll a)\n        {\n            while(x<=n)\n            {\n                fen[x]+=a;\n                x+=x&-x;\n            }\n        };\n        for(int i=1;i+1<n;i++)\n        {\n            if(nums[i]>nums[i-1]&&nums[i]>nums[i+1])add(i+1,1);\n        }\n        vector<int>ans;\n        for(auto v:queries)\n        {\n            ll c=v[0];\n            if(c==1)\n            {\n                ll L=v[1];\n                ll R=v[2];\n                ans.push_back(max(0LL,get(R)-get(L+1)));\n                \n            }\n            else\n            {\n                ll i=v[1];\n                ll x=v[2];\n                for(int j=i-1;j<=i+1;j++)\n                {\n                    if(j<1||j+1>=n)continue;\n                    if(nums[j]>nums[j-1]&&nums[j]>nums[j+1])add(j+1,-1);\n                }\n                nums[i]=x;\n                for(int j=i-1;j<=i+1;j++)\n                {\n                    if(j<1||j+1>=n)continue;\n                    if(nums[j]>nums[j-1]&&nums[j]>nums[j+1])add(j+1,1);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1718506619",
    "subm_id": "1289625298"
}