{
    "username": "r32626",
    "submission": "class FenwickTree:\n    def __init__(self, size):\n        self.size = size\n        self.tree = [0] * (size + 1)\n\n    def update(self, index, delta):\n        while index <= self.size:\n            self.tree[index] += delta\n            index += index & -index\n\n    def prefix_sum(self, index):\n        sum = 0\n        while index > 0:\n            sum += self.tree[index]\n            index -= index & -index\n        return sum\n\n    def range_sum(self, left, right):\n        return self.prefix_sum(right+1) - self.prefix_sum(left)\n\nclass Solution:\n    def countOfPeaks(self, nums: List[int], queries: List[List[int]]) -> List[int]:\n\n        def count_peaks(nums):\n            n = len(nums)\n            peaks = [0] * n\n            for i in range(1, n - 1):\n                if nums[i] > nums[i - 1] and nums[i] > nums[i + 1]:\n                    peaks[i] = 1\n            return peaks\n\n        n = len(nums)\n        peaks = count_peaks(nums)\n        fenwick_tree = FenwickTree(n)\n\n        # Initialize Fenwick Tree with the peaks\n        for i in range(1, n - 1):\n            if peaks[i] == 1:\n                fenwick_tree.update(i + 1, 1)\n\n        results = []\n        \n        for query in queries:\n            if query[0] == 1:\n                li, ri = query[1], query[2]\n                if li == ri or li + 1 == ri:\n                    results.append(0)\n                else:\n                    results.append(fenwick_tree.range_sum(li + 1, ri - 1))\n            elif query[0] == 2:\n                indexi, vali = query[1], query[2]\n                indexi += 1\n                # Update nums and peaks\n                nums[indexi - 1] = vali\n                for i in range(max(1, indexi - 1), min(n - 1, indexi + 1) + 1):\n                    was_peak = peaks[i - 1]\n                    is_peak = 1 if (i > 1 and i < n and nums[i - 1] > nums[i - 2] and nums[i - 1] > nums[i]) else 0\n                    peaks[i - 1] = is_peak\n                    if was_peak != is_peak:\n                        fenwick_tree.update(i, is_peak - was_peak)\n\n        return results\n",
    "submit_ts": 1718508298.0
}