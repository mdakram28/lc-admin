{
    "username": "yangxm",
    "submission": "constexpr int MAX = 100010;\n\nint a[MAX], sum[MAX], p[MAX], pre[MAX];\n\nint Calc(int n, int k) {\n  int cnt = 0, ret = 0, q = k;\n  for (int i = pre[k]; i >= 0 && cnt * cnt <= sum[k]; i = i ? pre[i - 1] : -1) {\n    int d = sum[k] - cnt * cnt;\n    d = min(p[d + 1], q);\n    ret += max(0, d - i);\n    ++cnt;\n    q = i;\n  } \n  return ret;\n}\n\nclass Solution {\npublic:\n    int numberOfSubstrings(string s) {\n      int n = s.length(), q = 0;\n      a[0] = 0;\n      sum[0] = 0;\n      p[0] = -1;\n      for (int i = 1; i <= n; ++i) {\n        a[i] = s[i - 1] - '0';\n        sum[i] = sum[i - 1] + a[i];\n        if (a[i]) {\n          p[sum[i]] = i;\n        } else {\n          q = i;\n        }\n        pre[i] = q;\n      }\n      p[sum[n] + 1] = n + 1;\n      int ret = 0;\n      for (int i = 1; i <= n; ++i) {\n        int cur = Calc(n, i);\n        ret += cur;\n      }\n      return ret;\n    }\n};",
    "submit_ts": "1722136184",
    "subm_id": "1335726338"
}