{
    "username": "elated-hugleydp",
    "submission": "func countSubarrays(nums []int, k int) (ans int64) {\n\tsum := make([][]int, 32) // 32\u4e2a\u524d\u7f00\u548c\uff0c\u6bcf\u4e2a\u8003\u5bdf1\u4e2abit\u4f4d\u7f6e\n\tfor i := range sum  {\n\t\tsum[i] = makePrefix(nums, i)\n        //fmt.Println(sum[i])\n\t}\n    \n\t// \u679a\u4e3e\u5b50\u6570\u7ec4\u7684\u8d77\u70b9\n\tfor i := 0; i < len(nums); i++ {\n\t\tleft, right := i, len(nums)-1\n\t\tfor j := range sum {\n\t\t\tif k&(1<<j) > 0 {\n\t\t\t\t// \u8be5\u4f4d\u7f6e\u5fc5\u987b\u90fd\u662f1\n               // fmt.Println(j, \"bit must 1\")\n                end := sort.Search(len(sum[j]), func(x int) bool { return x>=i && sum[j][x]-sum[j][i] < x-i })\n                if  end >= i {\n                    right = min(right, end-2)\n                }\n\n                //fmt.Println(i, \"right\", right)\n\t\t\t} else {\n\t\t\t\t// \u8be5\u4f4d\u7f6e\u5fc5\u987b\u81f3\u5c11\u67090\n                //fmt.Println(j, \"bit must 0\")\n                end := sort.Search(len(sum[j]), func(x int) bool { return x>=i && sum[j][x]-sum[j][i] < x-i })\n                if end >= i{\n                    left = max(left, end-1)\n                }\n                \n                //fmt.Println(i, \"left\", left)\n\t\t\t}\n\t\t}\n        //fmt.Println(left, right)\n        if right>=left {\n            ans += int64(right - left+1)\n        }\n\t}\n\treturn\n}\n\nfunc makePrefix(nums []int, bit int) []int {\n\tsum := make([]int, len(nums)+1)\n\tfor i := range nums {\n\t\tv := 0\n\t\tif nums[i]&(1<<bit) > 0 {\n\t\t\tv = 1\n\t\t}\n\t\tsum[i+1] = sum[i] + v\n\t}\n\treturn sum\n}",
    "submit_ts": "1720281335",
    "subm_id": "544575381"
}