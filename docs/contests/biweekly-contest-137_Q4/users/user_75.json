{
    "username": "Larry",
    "submission": "class Solution:\n    def maximumValueSum(self, board: List[List[int]]) -> int:\n        R = len(board)\n        C = len(board[0])\n        INF = 10 ** 20\n        \n        items = []\n        for r, row in enumerate(board):\n            items.extend(list(sorted(((x, index) for index, x in enumerate(row)))[-4:]))\n        items.sort()\n        #print(items)\n        lower_bound = items[0][0]\n        if len(items) > 20:\n            lower_bound = items[-20][0]\n        #print(lower_bound)\n                \n        cols = collections.defaultdict(set)\n        for j in range(C):\n            current_cols = []\n            for i in range(R):\n                current_cols.append((board[i][j], j, i))\n            for x, c, r in list(sorted(current_cols))[-4:]:\n                cols[c].add(r)\n        \n        new_board = []\n        for r, row in enumerate(board):\n            current = list(sorted(((x, index) for index, x in enumerate(row) if r in cols[index] and x >= lower_bound))[-4:])\n            if len(current) > 0:\n                new_board.append(current)\n\n        R = len(new_board)\n        #print(new_board)        \n        \n        @cache\n        def go(row, count, c1, c2):\n            if count == 3:\n                return 0\n            \n            if row == R:\n                return -INF\n            \n            best = -INF\n            for x, index in new_board[row]:\n                if index != c1 and index != c2:\n                    if c1 == -1:\n                        best = max(best, go(row + 1, count + 1, index, -1) + x)\n                    elif c2 == -1:\n                        best = max(best, go(row + 1, count + 1, c1, index) + x)\n                    else:\n                        best = max(best, go(row + 1, count + 1, c1, c2) + x)\n            best = max(best, go(row + 1, count, c1, c2))\n            return best\n        \n        return go(0, 0, -1, -1)",
    "submit_ts": "1723907586",
    "subm_id": "1359114817"
}