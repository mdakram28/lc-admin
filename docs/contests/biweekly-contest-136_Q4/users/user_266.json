{
    "username": "ni-hong-ge",
    "submission": "class Solution {\npublic:\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n=edges.size()+1;\n        vector<vector<int>> v(n);\n        for(auto x:edges){\n            v[x[0]].push_back(x[1]);\n            v[x[1]].push_back(x[0]);\n        }\n        vector<int> vis(n,0);\n        vector<vector<int>> mmax(n,{0,0});\n        function<int(int)> dfs=[&](int now){\n            vis[now]=1;\n            int ret=0;\n            for(auto x:v[now]){\n                if(vis[x])continue;\n                int t;\n                if(x%2==0)\n                t=dfs(x)+2;\n                else\n                t=dfs(x)+1;\n                if(mmax[now][0]<=t){\n                    mmax[now][1]=mmax[now][0];\n                    mmax[now][0]=t;\n                }else if(mmax[now][1]<t){\n                    mmax[now][1]=t;\n                }\n                ret=max(ret,t);\n            }\n            return ret;\n        };\n        vector<int> ans(n);\n        ans[0]=dfs(0);\n        // for(int i=0;i<n;i++){\n        //     cout<<mmax[i][0]<<\" \"<<mmax[i][1]<<endl;\n        // }\n        for(int i=0;i<n;i++)vis[i]=0;\n        function<int(int)> dfs1=[&](int now){\n            vis[now]=1;\n            int ret=0;\n            for(auto x:v[now]){\n                if(vis[x])continue;\n                int k;\n                if(x%2)k=1;\n                else k=2;\n                int kfa;\n                if(now%2)kfa=1;\n                else kfa=2;\n                if(mmax[now][0]-k==mmax[x][0]){\n                    int t=mmax[now][1]+kfa;\n                    if(mmax[x][0]<=t){\n                        mmax[x][1]=mmax[x][0];\n                        mmax[x][0]=t;\n                    }else if(mmax[x][1]<t){\n                        mmax[x][1]=t;\n                    }\n                    ans[x]=max(mmax[x][0],mmax[now][1]+kfa);\n                }else{\n                    ans[x]=mmax[now][0]+kfa;\n\n                    int t=ans[x];\n                    if(mmax[x][0]<=t){\n                        mmax[x][1]=mmax[x][0];\n                        mmax[x][0]=t;\n                    }else if(mmax[x][1]<t){\n                        mmax[x][1]=t;\n                    }\n                }\n                // cout<<\"ans \"<<x<<\" =\"<<ans[x]<<endl;\n                dfs1(x);\n            }\n            return ret;\n        };\n        dfs1(0);\n        return ans;        \n    }\n};",
    "submit_ts": "1722699779",
    "subm_id": "552277110"
}