{
    "username": "manoj230322",
    "submission": "class Solution {\n    \n    void dfs(int node,int parent,vector<vector<int>> &adj,vector<int> &dp){\n        \n        for(auto &x : adj[node]){\n            if(x!=parent){\n                \n                dfs(x,node,adj,dp);\n            }\n        }\n        \n        \n            int ans = 0;\n            for(auto &x : adj[node]){\n                if(x!=parent){\n                    if(x&1){\n                    ans=max(ans,dp[x]+1);\n                }else{\n                    ans=max(ans,dp[x]+2);\n                }\n                }\n                \n            }\n            dp[node]=ans;\n        \n        \n        \n    }\n    \n    void dfs2(int node,int parent,int pans,vector<vector<int>> &adj,vector<int> &dp,vector<int> &ans){\n        if(parent==-1){\n            int ans1 = 0;\n            vector<int> a;\n            for(auto &x : adj[node]){\n                if(x!=parent){\n                    a.push_back(x);\n                }\n            }\n            int sz = a.size();\n            vector<int> pfxmx(sz),sfxmx(sz);\n            for(int i = 0 ; i<sz ; i++){\n                if(i==0){\n                    if(a[i]&1){\n                        pfxmx[i]=dp[a[i]]+1;\n                    }else{\n                        pfxmx[i]=dp[a[i]]+2;\n                    }\n                }else{\n                    if(a[i]&1){\n                        pfxmx[i]=dp[a[i]]+1;\n                    }else{\n                        pfxmx[i]=dp[a[i]]+2;\n                    }\n                    pfxmx[i]=max(pfxmx[i],pfxmx[i-1]);\n                }\n            }\n            \n            for(int i = sz-1 ; i>=0 ; i--){\n                if(i==sz-1){\n                    if(a[i]&1){\n                        sfxmx[i]=dp[a[i]]+1;\n                    }else{\n                        sfxmx[i]=dp[a[i]]+2;\n                    }\n                }else{\n                    if(a[i]&1){\n                        sfxmx[i]=dp[a[i]]+1;\n                    }else{\n                        sfxmx[i]=dp[a[i]]+2;\n                    }\n                    sfxmx[i]=max(sfxmx[i],sfxmx[i+1]);\n                }\n            }\n            \n            for(int i = 0  ; i<sz ; i++){\n                if(i>=1 && i<=sz-2){\n                    dfs2(a[i],node,max({ans1,pfxmx[i-1],sfxmx[i+1]}),adj,dp,ans);\n                }else if(i>=1){\n                    dfs2(a[i],node,max({ans1,pfxmx[i-1]}),adj,dp,ans);\n                }else if(i<=sz-2){\n                    dfs2(a[i],node,max({ans1,sfxmx[i+1]}),adj,dp,ans);\n                }else{\n                    dfs2(a[i],node,ans1,adj,dp,ans);\n                }\n            }\n            \n            ans[node]=pfxmx[sz-1];\n            \n            \n        }else{\n            int ans1 = pans;\n            if((parent%2)==0){\n                ans1+=2;\n            }else{\n                ans1+=1;\n            }\n            vector<int> a;\n            for(auto &x : adj[node]){\n                if(x!=parent){\n                    a.push_back(x);\n                }\n            }\n            int sz = a.size();\n            if(sz==0){\n                ans[node]=ans1;\n            }else{\n               vector<int> pfxmx(sz),sfxmx(sz);\n            for(int i = 0 ; i<sz ; i++){\n                if(i==0){\n                    if(a[i]&1){\n                        pfxmx[i]=dp[a[i]]+1;\n                    }else{\n                        pfxmx[i]=dp[a[i]]+2;\n                    }\n                }else{\n                    if(a[i]&1){\n                        pfxmx[i]=dp[a[i]]+1;\n                    }else{\n                        pfxmx[i]=dp[a[i]]+2;\n                    }\n                    pfxmx[i]=max(pfxmx[i],pfxmx[i-1]);\n                }\n            }\n            \n            for(int i = sz-1 ; i>=0 ; i--){\n                if(i==sz-1){\n                    if(a[i]&1){\n                        sfxmx[i]=dp[a[i]]+1;\n                    }else{\n                        sfxmx[i]=dp[a[i]]+2;\n                    }\n                }else{\n                    if(a[i]&1){\n                        sfxmx[i]=dp[a[i]]+1;\n                    }else{\n                        sfxmx[i]=dp[a[i]]+2;\n                    }\n                    sfxmx[i]=max(sfxmx[i],sfxmx[i+1]);\n                }\n            }\n            \n            for(int i = 0  ; i<sz ; i++){\n                if(i>=1 && i<=sz-2){\n                    dfs2(a[i],node,max({ans1,pfxmx[i-1],sfxmx[i+1]}),adj,dp,ans);\n                }else if(i>=1){\n                    dfs2(a[i],node,max({ans1,pfxmx[i-1]}),adj,dp,ans);\n                }else if(i<=sz-2){\n                    dfs2(a[i],node,max({ans1,sfxmx[i+1]}),adj,dp,ans);\n                }else{\n                    dfs2(a[i],node,ans1,adj,dp,ans);\n                }\n            }\n            \n            ans[node]=max(ans1,pfxmx[sz-1]); \n            }\n            \n            \n            \n            \n        }\n    }\npublic:\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n = edges.size()+1;\n        vector<int> ans(n);\n        vector<int> dp(n);\n        vector<vector<int>> adj(n);\n        for(auto &x : edges){\n            adj[x[0]].push_back(x[1]);\n            adj[x[1]].push_back(x[0]);\n        }\n        \n        dfs(0,-1,adj,dp);\n        dfs2(0,-1,0,adj,dp,ans);\n        \n        return ans;\n        \n        \n    }\n};",
    "submit_ts": "1722700420",
    "subm_id": "1343241384"
}