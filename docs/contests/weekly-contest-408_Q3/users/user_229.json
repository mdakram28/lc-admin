{
    "username": "omhari",
    "submission": "class Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        int n=s.size();\n        int cnt=count(s.begin(), s.end(), '1');\n        vector<int> pl(n), pr(n);\n        int ans=0;\n        if(s[0]=='1')\n            pl[0]=1;\n        for(int i=1; i<n; i++)\n        {\n            if(s[i]=='0')\n            {\n                pl[i]=0;\n                ans+=(pl[i-1]*(pl[i-1]+1))/2;\n            }\n            else\n                pl[i]=1+pl[i-1];\n        }\n        \n        ans+=(pl[n-1]*(pl[n-1]+1))/2;\n        \n        \n        if(s[n-1]=='1')\n            pr[n-1]=1;\n        for(int i=n-2; i>=0; i--)\n        {\n            if(s[i]=='0')\n                pr[i]=0;\n            else\n                pr[i]=1+pr[i+1];\n        }\n        cout<<ans<<endl;\n        \n        for(int zero=1; zero*zero<=cnt; zero++)\n        {\n            int l=0, r=0;\n            int c=0, o=0;\n            while(r<n)\n            {\n                \n                if(s[r]=='0')\n                    c++;\n                else\n                    o++;\n                // if(s[r]=='1')\n                // {\n                //     r++;\n                //     continue;   \n                // }\n                    \n                \n                while(l<=r && (c>zero || s[l]=='1'))\n                {\n                    if(s[l]=='0')\n                        c--;\n                    else\n                        o--;\n                    l++;\n                }\n                \n                \n                if(c==zero)\n                {\n                    int lc=0, rc=0;\n                    if(l>0)\n                        lc=pl[l-1];\n                    if(r<n-1)\n                        rc=pr[r+1];\n                    \n                    if(lc+o<c*c)\n                    {\n                        ans+=0;\n                    }\n                    else if(o>=c*c)\n                    {\n                        // ans+=(lc+1)*(rc+1);\n                        ans+=lc+1;\n                    }\n                    else\n                    {\n                        ans+=(lc-(c*c-o))+1;\n//                         int temp=(lc+1)*(rc+1);\n//                         int need=c*c-o;\n//                         // need+=1;\n//                         temp=temp-need;\n                        \n//                         if(lc<need-1)\n//                             temp+=(need-1-lc);\n                        \n//                         if(rc<need-1)\n//                             temp+=(need-1-rc);\n//                         ans+=temp;\n                        // cout<<lc<<\" \"<<rc<<endl;\n                        // cout<<temp<<endl;\n                    }\n                    // cout<<lc<<\" \"<<o<<endl;\n                    // cout<<l<<\" \"<<r<<\" \"<<ans<<endl;\n                }\n                \n                r++;\n            }\n            // cout<<ans<<endl;\n        }\n        \n        \n            \n        return ans;\n    }\n};",
    "submit_ts": "1722137657",
    "subm_id": "1335770017"
}