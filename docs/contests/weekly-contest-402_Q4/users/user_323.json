{
    "username": "00zi-jian",
    "submission": "class fenwicktree:\n\n    def __init__(self, n):\n        self.BITTree = [0] * (n + 1)\n        self.size = n\n\n    def getsum(self, i):\n        s = 0\n        i = i + 1\n        while i > 0:\n            s += self.BITTree[i]\n            i -= i & (-i)\n\n        return s\n\n    def query(self, l, r):\n\n        return self.getsum(r) - self.getsum(l - 1)\n\n    def update(self, i, v):\n\n        i += 1\n        while i <= self.size:\n            self.BITTree[i] += v\n            i += i & (-i)\n\nclass Solution:\n    def countOfPeaks(self, A: List[int], Q: List[List[int]]) -> List[int]:\n        n=len(A)\n        ans=[]\n        fw=fenwicktree(n)\n        B=[0]*n\n        for i in range(1,n-1):\n            if A[i]>A[i-1] and A[i]>A[i+1]:\n                fw.update(i,1)\n                B[i]=1\n        for L in Q:\n            if L[0]==1:\n                l,r=L[1],L[2]\n                if l+1<=r-1:\n                    res=fw.query(l+1,r-1)\n                else:\n                    res=0\n                ans.append(res)\n            else:\n                idx,v=L[1],L[2]\n                if 0<idx<n-1:\n                    if B[idx]==0:\n                        if v>A[idx-1] and v>A[idx+1]:\n                            B[idx]=1\n                            fw.update(idx,1)\n                    else:\n                        if v<=A[idx-1] or v<=A[idx+1]:\n                            B[idx]=0\n                            fw.update(idx,-1)\n                if 0<idx-1<n-1:\n                    if B[idx-1]==0:\n                        if A[idx-1]>v and A[idx-1]>A[idx-2]:\n                            B[idx-1]=1\n                            fw.update(idx-1,1)\n                    else:\n                        if A[idx-1]<=v:\n                            B[idx-1]=0\n                            fw.update(idx-1,-1)\n                if 0<idx+1<n-1:\n                    if B[idx+1]==0:\n                        if A[idx+1]>v and A[idx+1]>A[idx+2]:\n                            B[idx+1]=1\n                            fw.update(idx+1,1)\n                    else:\n                        if A[idx+1]<=v:\n                            B[idx+1]=0\n                            fw.update(idx+1,-1)\n\n                \n                A[idx]=v\n        return ans\n            ",
    "submit_ts": "1718506882",
    "subm_id": "539777851"
}