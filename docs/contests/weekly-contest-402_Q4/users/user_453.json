{
    "username": "harttle",
    "submission": "/**\n * @param {number[]} nums\n * @param {number[][]} queries\n * @return {number[]}\n */\nvar countOfPeaks = function(nums, queries) {\n    // [8,10,10,9,10]\n    // [1,10,10,9,10]\n    // [1,10,7,9,10]\n    const N = nums.length\n    const bit = new BIT(N)\n    for (let i = 1; i < N - 1; i++) {\n        if (isPeak(i)) bit.increment(i + 1, 1)\n    }\n    const ans = []\n    for (const [type, a1, a2] of queries) {\n        if (type === 1) {\n            // console.log(`${a2} > ${a1} + 1 ? ${bit.sum(a2)} - ${bit.sum(a1 + 1)} : 0`)\n            ans.push(a2 > a1 + 1 ? bit.sum(a2) - bit.sum(a1 + 1) : 0)\n        } else {\n            nums[a1] = a2\n            for (let j = Math.max(1, a1 - 1); j <= Math.min(N - 2, a1 + 1); j++) {\n                const curr = isPeak(j) ? 1 : 0\n                // console.log(`change nums[${a1}] to ${a2}, update to ${curr}`)\n                bit.update(j + 1, curr)\n            }\n        }\n    }\n    return ans\n    \n    function count(i) {\n        let ans = 0\n        return ans\n    }\n    function isPeak(i) {\n        return i >= 1 && i <= N - 2 && nums[i] > nums[i - 1] && nums[i] > nums[i + 1]\n    }\n};\n/*\n * Template from contest.js\n * Github: https://github.com/harttle/contest.js\n * Website: https://harttle.land/contest.js/\n */\n// src/bit.ts\nvar BIT = class {\n  constructor(N) {\n    this.N = N;\n    this.sums = Array(N + 1).fill(0);\n    this.nums = Array(N + 1).fill(0);\n  }\n  increment(n, diff) {\n    this.nums[n] += diff;\n    while (n <= this.N) {\n      this.sums[n] += diff;\n      n += n & -n;\n    }\n  }\n  update(n, val) {\n    this.increment(n, val - this.nums[n]);\n  }\n  sum(n) {\n    let sum = 0;\n    while (n > 0) {\n      sum += this.sums[n];\n      n -= n & -n;\n    }\n    return sum;\n  }\n};",
    "submit_ts": 1718506990.0
}