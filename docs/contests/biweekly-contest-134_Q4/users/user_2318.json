{
    "username": "D_Vode",
    "submission": "class Solution {\npublic:\n    typedef long long ll;\n\n    bool check(vector<bool> &a, vector<ll> &bits){\n        for(auto it:bits){\n            if(!a[it]) return false;\n        }\n        return true;\n    }\n\n    long long countSubarrays(vector<int>& a, int k) {\n        ll n = a.size();\n        vector<vector<bool>> dp(n,vector<bool> (32,false));\n\n        for(int i=0; i<n; i++){\n            for(int j=0; j<32; j++){\n                if(a[i]&(1<<j)){\n                    dp[i][j]=true;\n                }\n            }\n        }\n\n        vector<ll> bits;\n        for(int i=0; i<32; i++){\n            if(k&(1<<i)){\n                bits.push_back(i);\n            }\n        }\n\n        ll res=0;\n\n        for(int i=0; i<n; ){\n            ll j=i; \n            while(j<n && check(dp[j],bits)) j++;\n\n            for(int d=i; d<j;){\n                int p =d;\n                int sum = a[p];\n                while(p<j && ((sum&a[p])!=k)){\n                    sum = sum&a[p];\n                    p++;\n                }\n                if(p==j){break;}\n                sum = sum&a[p];\n                ll sum2 = a[p];\n                ll index = p;\n                while((sum2&a[index])!=k){\n                    sum2 = sum2&a[index];\n                    index--;\n                }\n                res += (j-p)*(index-d+1);\n                d=index+1;\n            }\n            if(i==j) i++;\n            else i=j;\n        }\n        return res;\n    }\n};",
    "submit_ts": "1720281571",
    "subm_id": "1311830329"
}