{
    "username": "kan-yu-3",
    "submission": "class Solution:\n\n    def timeTaken(self, edges: List[List[int]]) -> List[int]:\n        @cache\n        def f1(u, fa):\n            res = 0 if u == 0 else 1 if u & 1 else 2\n            mx, lmx = (0, 0), 0\n            for v in es[u]:\n                if v != fa:\n                    if f1(v, u) > mx[0]:\n                        mx, lmx = (f1(v, u), v), mx[0]\n                    elif f1(v, u) > lmx:\n                        lmx = f1(v, u)\n            nonlocal record\n            record[u] = (mx[0], mx[1], lmx) # max_val, index, less_max_val\n            return res + mx[0]\n\n        def f2(u, fa, up):\n            for v in es[u]:\n                if v != fa:\n                    upper = record[u][0] if record[u][1] != v else record[u][2]\n                    upper = max(upper, up)\n                    lower = f1(v, u)\n                    # print(u, v, upper, lower)\n                    if u & 1 and v & 1:\n                        upper, lower = upper + 1, lower - 1\n                    elif not (u & 1) and not (v & 1):\n                        upper, lower = upper + 2, lower - 2\n                    elif u & 1:\n                        upper, lower = upper + 1, lower - 2\n                    else:\n                        upper, lower = upper + 2, lower - 1\n                    nonlocal ans\n                    ans[v] = max(upper, lower)\n                    f2(v, u, upper)\n\n\n        n = len(edges) + 1\n        record = [0] * n\n        es = [[] for _ in range(n)]\n        for u, v in edges:\n            es[u].append(v)\n            es[v].append(u)\n        ans = [0] * n \n        ans[0] = f1(0, -1)\n        # print(record)\n        f2(0, -1, 0)\n        return ans\n",
    "submit_ts": "1722699116",
    "subm_id": "552274165"
}