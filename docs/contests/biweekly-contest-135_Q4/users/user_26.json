{
    "username": "lucifer1006",
    "submission": "impl Solution {\n    pub fn maximum_score(grid: Vec<Vec<i32>>) -> i64 {\n        let n = grid.len();\n        if n == 1 {\n            return 0;\n        }\n\n        let mut colacc = vec![vec![0i64; n + 1]; n];\n        for col in 0..n {\n            for i in 0..n {\n                colacc[col][i + 1] = colacc[col][i] + grid[i][col] as i64;\n            }\n        }\n\n        let mut dp = vec![vec![0i64; n + 1]; n + 1];\n        for fst in 0..=n {\n            for snd in 0..=n {\n                if fst > snd {\n                    dp[fst][snd] = colacc[1][fst] - colacc[1][snd];\n                } else if fst < snd {\n                    dp[fst][snd] = colacc[0][snd] - colacc[0][fst];\n                }\n            }\n        }\n\n        for col in 2..n {\n            let mut ndp = vec![vec![0i64; n + 1]; n + 1];\n            let mut hi = vec![0i64; n + 1];\n            for fst in 0..=n {\n                for snd in 0..=n {\n                    hi[snd] = hi[snd].max(dp[fst][snd]);\n                    for thd in snd + 1..=n {\n                        let extra = colacc[col - 1][thd] - colacc[col - 1][fst.max(snd)];\n                        ndp[snd][thd] = ndp[snd][thd].max(dp[fst][snd] + extra);\n                    }\n                }\n            }\n            \n            for snd in 0..=n {\n                for thd in 0..=snd {\n                    ndp[snd][thd] = ndp[snd][thd].max(hi[snd] + colacc[col][snd] - colacc[col][thd]);\n                }\n            }\n            \n            dp = ndp;\n        }\n\n        dp.iter()\n            .map(|snd| snd.iter().copied().max().unwrap())\n            .max()\n            .unwrap()\n    }\n}\n",
    "submit_ts": "1721488935",
    "subm_id": "548316608"
}