{
    "username": "abhishekvanjani",
    "submission": "class TreeObj {\n    public:\n    long long ii;\n    long long ie;\n    long long ei;\n    long long ee;\n};\nclass Solution {\npublic:\n    TreeObj tree[1000000];\n    void build(vector<int> &nums, int l, int r, int i=1) {\n        if(l>r)\n            return;\n        if(l==r)\n        {\n            TreeObj obj;\n            obj.ii=nums[l];\n            obj.ie=0;\n            obj.ei=0;\n            obj.ee=0;\n            tree[i]=obj;\n            return;\n        }\n        if(l+1==r)\n        {\n            TreeObj obj;\n            obj.ii=0;\n            obj.ie=nums[l];\n            obj.ei=nums[r];\n            obj.ee=0;\n            tree[i]=obj;\n            return;\n        }\n        int m=(l+r)/2;\n        build(nums,l,m,2*i);\n        build(nums,m+1,r,2*i+1);\n        TreeObj obj;\n        obj.ii=max(tree[2*i].ii+tree[2*i+1].ei, max(tree[2*i].ie+tree[2*i+1].ii, tree[2*i].ie+tree[2*i+1].ei));\n        obj.ie=max(tree[2*i].ii+tree[2*i+1].ee, max(tree[2*i].ie+tree[2*i+1].ie, tree[2*i].ie+tree[2*i+1].ee));\n        obj.ei=max(tree[2*i].ei+tree[2*i+1].ei, max(tree[2*i].ee+tree[2*i+1].ei, tree[2*i].ee+tree[2*i+1].ii));\n        obj.ee=max(tree[2*i].ei+tree[2*i+1].ee, max(tree[2*i].ee+tree[2*i+1].ee, tree[2*i].ee+tree[2*i+1].ie));\n        tree[i]=obj;\n    }\n    \n    void update(vector<int> &nums, int index, int val, int l, int r, int i=1) {\n        if(l>r)\n            return;\n        if(l==r)\n        {\n            nums[l]=val;\n            TreeObj obj;\n            obj.ii=nums[l];\n            obj.ie=0;\n            obj.ei=0;\n            obj.ee=0;\n            tree[i]=obj;\n            return;\n        }\n        int mid=(l+r)/2;\n        if(index<=mid)\n            update(nums,index,val,l,mid,2*i);\n        else\n            update(nums,index,val,mid+1,r,2*i+1);\n        \n        TreeObj obj;\n        if(l+1==r)\n        {\n            obj.ii=0;\n            obj.ie=nums[l];\n            obj.ei=nums[r];\n            obj.ee=0;\n        }\n        else \n        {\n            obj.ii=max(tree[2*i].ii+tree[2*i+1].ei, max(tree[2*i].ie+tree[2*i+1].ii, tree[2*i].ie+tree[2*i+1].ei));\n            obj.ie=max(tree[2*i].ii+tree[2*i+1].ee, max(tree[2*i].ie+tree[2*i+1].ie, tree[2*i].ie+tree[2*i+1].ee));\n            obj.ei=max(tree[2*i].ei+tree[2*i+1].ei, max(tree[2*i].ee+tree[2*i+1].ei, tree[2*i].ee+tree[2*i+1].ii));\n            obj.ee=max(tree[2*i].ei+tree[2*i+1].ee, max(tree[2*i].ee+tree[2*i+1].ee, tree[2*i].ee+tree[2*i+1].ie));\n        }\n        tree[i]=obj;\n    }\n    \n    long long query() {\n        return max(max(tree[1].ii, tree[1].ie), max(tree[1].ei, tree[1].ee));\n    }\n    \n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        build(nums,0,nums.size()-1);\n        //cout<<query()<<\" \";\n        \n        long long ans=0, m=1000000007;\n        for(int i=0;i<queries.size();i++)\n        {\n            update(nums,queries[i][0], queries[i][1], 0, nums.size()-1);\n            ans=(ans+query()%m)%m;\n            //cout<<ans<<\" \";\n        }\n        //cout<<endl;\n        return ans;\n    }\n};",
    "submit_ts": 1716694118.0
}