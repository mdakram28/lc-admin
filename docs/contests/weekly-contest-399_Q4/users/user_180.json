{
    "username": "neko643",
    "submission": "vector<vector<vector<int> > > st = vector<vector<vector<int> > >(200000, vector<vector<int> > (2, vector<int> (2)));\nclass Solution {\npublic:\n    vector<int> a;\n    void build(int i, int L, int R) {\n        if(L == R) {\n            st[i][0][0] = 0;\n            st[i][0][1] = max(a[L], 0);\n            st[i][1][0] = 0;\n            st[i][1][1] = 0;\n            return;\n        }\n        \n        int x = i * 2 + 1, y = i * 2 + 2, M = (L + R) / 2;\n        build(x, L, M);\n        build(y, M + 1, R);\n        st[i][0][0] = max(st[x][0][1] + st[y][1][0], st[x][0][0] + st[y][0][0]);\n        st[i][0][1] = max(st[x][0][1] + st[y][1][1], st[x][0][0] + st[y][0][1]);\n        st[i][1][0] = max(st[x][1][1] + st[y][1][0], st[x][1][0] + st[y][0][0]);\n        st[i][1][1] = max(st[x][1][1] + st[y][1][1], st[x][1][0] + st[y][0][1]);\n    }\n    \n    void update(int i, int L, int R, int ind, int val) { \n        if(L == R) {\n            a[L] = val;\n            st[i][0][0] = 0;\n            st[i][0][1] = max(a[L], 0);\n            st[i][1][0] = 0;\n            st[i][1][1] = 0;\n            return;\n        }\n        \n        int x = i * 2 + 1, y = i * 2 + 2, M = (L + R) / 2;\n        if(ind <= M) {\n            update(x, L, M, ind, val);\n        } else {\n            update(y, M + 1, R, ind, val);\n        }\n        \n        st[i][0][0] = max(st[x][0][1] + st[y][1][0], st[x][0][0] + st[y][0][0]);\n        st[i][0][1] = max(st[x][0][1] + st[y][1][1], st[x][0][0] + st[y][0][1]);\n        st[i][1][0] = max(st[x][1][1] + st[y][1][0], st[x][1][0] + st[y][0][0]);\n        st[i][1][1] = max(st[x][1][1] + st[y][1][1], st[x][1][0] + st[y][0][1]);\n    }\n    \n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        a = nums;\n        long long ans = 0, n = nums.size(), mod = 1e9 + 7;\n        build(0, 0, n - 1);\n        for(auto el : queries) {\n            update(0, 0, n - 1, el[0], el[1]);\n            int mx = 0;\n            for(int i = 0; i < 2; i++) {\n                for(int j = 0; j < 2; j++) {\n                    mx = max(mx, st[0][i][j]);\n                }\n            }\n            (ans += mx) %= mod;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1716693335",
    "subm_id": "1268083011"
}