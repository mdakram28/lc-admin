{
    "username": "MarkovProcess",
    "submission": "class Solution(object):\n    def countSubarrays(self, nums, k):\n        \"\"\"\n        :type nums: List[int]\n        :type k: int\n        :rtype: int\n        \"\"\"\n        def bi(x):\n            if x==0:\n                return [0]*32\n            r=[]\n            y=x\n            while y>0:\n                r.append(y%2)\n                y=y//2\n            while len(r)<32:\n                r.append(0)\n            return r\n        \n        n=len(nums)\n        a=[]\n        s=bi(k)\n        for x in nums:\n            a.append(bi(x))\n        c=[0]*32\n        r=0\n        def fail(v):\n            for i in range(32):\n                if s[i]==1 and v[i]==0:\n                    return True\n            return False\n        def success(v):\n            for i in range(32):\n                if s[i]==0 and v[i]==0:\n                    return False\n            return True\n        ttf=[fail(a[i]) for i in range(n)]\n        locf=[-1]*n\n        if ttf[n-1]==True:\n            locf[n-1]=n-1\n        else:\n            locf[n-1]=n\n        for i in range(n-2,-1,-1):\n            if ttf[i]==True:\n                locf[i]=i\n            else:\n                locf[i]=locf[i+1]\n        p=0\n        for q in range(n):\n            #print('ini',p,q,c)\n            if ttf[q]==False:\n                for j in range(32):\n                    c[j]+=1-a[q][j]\n                if success(c):\n                    r+=locf[q]-q\n                    #print(p,q,r)\n                    ind=False\n                    while p<q:\n                        for j in range(32):\n                            c[j]-=1-a[p][j]\n                        p+=1\n                        if success(c):\n                            r+=locf[q]-q\n                            #print(p,q,r)\n                        else:\n                            ind=True\n                            break\n                    if ind==False:\n                        c=[0]*32\n                        p=q+1\n\n            else:\n                p=q+1\n                c=[0]*32\n        return r",
    "submit_ts": "1720280271",
    "subm_id": "1311783112"
}