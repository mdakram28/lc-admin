{
    "username": "KovvuriVenkatSatyaReddy",
    "submission": "class SegTree{\nprivate:\n    int n;\n    vector<int> tr;\npublic:\n    SegTree(int N){\n        n = N;\n        tr.resize(4*n+1,0);\n    }\n    void update(int ind,int val,int low,int high,int i){\n        if(low == high){\n            tr[ind] = val;\n            return;\n        }\n        int mid = (low+high)/2;\n        if(i<=mid)  update(2*ind+1,val,low,mid,i);\n        else    update(2*ind+2,val,mid+1,high,i);\n        tr[ind] = (tr[2*ind+1]&tr[2*ind+2]);\n    }\n    int query(int ind,int low,int high,int l,int r){\n        // low high l r     l r low high\n        if(high < l || r < low) return INT_MAX;\n        // l low high r\n        if(low >=l && high <= r)    return tr[ind];\n        int mid = (low+high)/2;\n        return (query(2*ind+1,low,mid,l,r)&query(2*ind+2,mid+1,high,l,r));\n    }\n};\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n=nums.size();\n        long long res = 0;\n        SegTree tr(n);\n        for(int i=0;i<n;i++){\n            tr.update(0,nums[i],0,n-1,i);\n            // cout<<tr.query(0,0,n-1,i,i)<<\" \";\n        }\n        for(int i=0;i<n;i++){\n            int l=i,u=n-1;\n            if(nums[i] < k) continue;\n            int ans = -1;\n            while(l<=u){\n                int mid = (l+u)/2;\n                int qr = tr.query(0,0,n-1,i,mid);\n                if(qr == k){\n                    ans = mid;\n                    u = mid-1;\n                }\n                else if(qr < k){\n                    u = mid-1;\n                }\n                else{\n                    l = mid+1;\n                }\n            }\n            int low = ans;\n            l = i,u = n-1;\n            ans = -1;\n            while(l<=u){\n                int mid = (l+u)/2;\n                int qr = tr.query(0,0,n-1,i,mid);\n                // cout<<mid<<\" \"<<qr<<endl;\n                if(qr == k){\n                    ans = mid;\n                    l = mid+1;\n                }\n                else if(qr < k){\n                    u = mid-1;\n                }\n                else{\n                    l = mid+1;\n                }\n            }\n            int high = ans;\n            // cout<<low<<\" \"<<high<<endl;\n            if(high != -1)\n                res += high-low+1;\n        }\n        return res;\n    }\n};",
    "submit_ts": "1720278830",
    "subm_id": "1311726099"
}