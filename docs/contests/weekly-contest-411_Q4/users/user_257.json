{
    "username": "Noobron",
    "submission": "class Solution {\npublic:\n    vector<long long> countKConstraintSubstrings(string s, int k, vector<vector<int>>& queries) {\n        long long l = 0, r = 0, z = 0, o = 0;\n        vector<long long> pos, pre, res;\n        \n        while(r < s.size())\n        {\n            if (s[r] == '0')\n                z++;\n            else\n                o++;\n            \n            \n            if (z > k && o > k)\n            {\n                long long x1 = 0, x2 = 0, zc1 = 0, oc1 = 0, zc2 = 0, oc2 = 0;\n                while(z-zc1 > k && l+x1 < r)\n                {\n                    if (s[l+x1] == '0')\n                        zc1++;\n                    else\n                        oc1++;\n                    x1++;\n                }\n\n                while(o-oc2 > k && l+x2 < r)\n                {\n                    if (s[l+x2] == '1')\n                        oc2++;\n                    else\n                        zc2++;\n                    x2++;\n                }\n                \n                if (x1 > x2)\n                {\n                    l += x2;\n                    z -= zc2;\n                    o -= oc2;\n                }\n                else \n                {\n                    l += x1;\n                    z -= zc1;\n                    o -= oc1;\n                }\n            }\n            \n            \n            pos.push_back(l);\n            pre.push_back((r == 0 ? 0 : pre[r-1]) + r-l+1);\n                    \n            r++;\n        }\n        \n        // for(int i: pos)\n        //     cout<<i<<\" \";\n        // cout<<\"\\n\";\n        \n        for(auto&q: queries)\n        {\n            int i = q[0], j = q[1];\n            long long t = 0;\n            \n            auto it = lower_bound(pos.begin(), pos.end(), i);\n            int p = it - pos.begin();\n            //cout<<p<<\" \";\n            \n            if (p > j)\n            {\n                long long n = j-i+1;\n                t = n*(n+1)/2;\n            }\n            else\n            {\n                t = pre[j] - (p ? pre[p-1] : 0);\n                long long n = p-i;\n                t += n*(n+1)/2;\n            }\n            \n            res.push_back(t);\n        }\n        \n        return res;\n    }\n};",
    "submit_ts": "1723952449",
    "subm_id": "1359796523"
}