{
    "username": "x____x",
    "submission": "class Solution {\npublic:\n  vector<int> timeTaken(vector<vector<int>>& edges) {\n    int n = edges.size() + 1;\n    vector<vector<int>> g(n);\n    for (const auto& e : edges) {\n      g[e[0]].push_back(e[1]);\n      g[e[1]].push_back(e[0]);\n    }\n    vector<int> o1(n, -1), o2(n, -1), z1(n, -1), z2(n, -1), u(n);\n    \n    function<int(int, int)> dfs = [&](int x, int f) -> int {\n      for (int y : g[x]) {\n        if (y != f) {\n          int v = dfs(y, x);\n          if (y % 2) {\n            if (v > o1[x]) {\n              o2[x] = o1[x];\n              o1[x] = v;\n            } else if (v > o2[x]) {\n              o2[x] = v;\n            }\n          } else {\n            if (v > z1[x]) {\n              z2[x] = z1[x];\n              z1[x] = v;\n            } else if (v > z2[x]) {\n              z2[x] = v;\n            }\n          }\n        }\n      }\n      int ret = 0;\n      if (o1[x] >= 0) ret = max(ret, o1[x] + 1);\n      if (z1[x] >= 0) ret = max(ret, z1[x] + 2);\n      u[x] = ret;\n      return ret;\n    };\n    dfs(0, -1);\n    \n    vector<int> ret(n);\n    function<void(int, int, int)> go = [&](int x, int f, int t) {\n      int t0 = 0;\n      if (f >= 0) {\n        t0 = t + (f % 2 ? 1 : 2);\n      }\n      ret[x] = max(ret[x], t0);\n      ret[x] = max(ret[x], u[x]);\n      for (int y : g[x]) {\n        if (y != f) {\n          if (y % 2) {\n            int t1 = u[y] == o1[x] ? o2[x] : o1[x];\n            int t2 = z1[x];\n            int t3 = t0;\n            if (t1 >= 0) t3 = max(t3, t1 + 1);\n            if (t2 >= 0) t3 = max(t3, t2 + 2);\n            go(y, x, t3);\n          } else {\n            int t1 = o1[x];\n            int t2 = u[y] == z1[x] ? z2[x] : z1[x];\n            int t3 = t0;\n            if (t1 >= 0) t3 = max(t3, t1 + 1);\n            if (t2 >= 0) t3 = max(t3, t2 + 2);\n            go(y, x, t3);\n          }\n        }\n      }\n    };\n    go(0, -1, -1);\n    return ret;\n  }\n};",
    "submit_ts": "1722698504",
    "subm_id": "1343182771"
}