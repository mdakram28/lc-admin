{
    "username": "Emma_wang",
    "submission": "class Bit {\n    vector<int> cv;\n    vector<int> data;\n    int cn;\npublic:\n    Bit(int size) : cn(size), cv(size+1, 0), data(size+1, 0) {}\n\n    int lowbit(int x){\n        return x & (-x);\n    }\n\n    void update(int i, int x){\n        data[i] += x;\n        while(i <= cn){\n            cv[i] += x;\n            i += lowbit(i);\n        }\n    }\n\n    int query(int i){\n        int sum = 0;\n        while(i > 0){\n            sum += cv[i];\n            i -= lowbit(i); \n        }\n        return sum;\n    }\n    int get(int i) {\n        return data[i];\n    }\n};\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        Bit bit(n);\n        for (int i = 1; i < n - 1; ++i) {\n            if (nums[i] > nums[i-1] && nums[i] > nums[i+1]) {\n                bit.update(i, 1);\n            }\n        }\n        vector<int> res;\n        for (const auto& qu : queries) {\n            if (qu[0] == 1) {\n                int cnt = bit.query(qu[2]) - bit.query(qu[1] - 1);\n                if (bit.query(qu[2]) - bit.query(qu[2] - 1) == 1) {\n                    cnt--;\n                }\n                if (qu[2] > qu[1] && bit.query(qu[1]) - bit.query(qu[1] - 1) == 1) {\n                    cnt--;\n                }\n                res.push_back(max(cnt,0));\n            } else {\n                int idx = qu[1];\n                nums[idx] = qu[2];\n                auto process = [&](int i) {\n                    if (i < 1 || i >= n-1) return;\n                    int now = bit.get(i);\n                    if (i >= 1 && i < n - 1) {\n                        if (nums[i] > nums[i-1] && nums[i] > nums[i+1]) {\n                            bit.update(i, 1 - now);\n                        } else {\n                            bit.update(i, -now);\n                        }\n                    }\n                };\n                process(idx);\n                process(idx-1);\n                process(idx+1);\n            }\n        }\n        return res;\n    }\n};",
    "submit_ts": 1718508145.0
}