{
    "username": "ianwong1999",
    "submission": "class Solution {\npublic:\n    int dat[400055];\n    bool is_peak(int id, vector<int>& nums) {\n        return id > 0 && id + 1 < (int)nums.size() && nums[id] > nums[id - 1] && nums[id] > nums[id + 1];\n    }\n    void build(int id, int x, int y, vector<int>& nums) {\n        if (x == y) {\n            dat[id] = is_peak(x, nums);\n            return;\n        }\n        \n        int mid = (x + y) >> 1;\n        \n        build(id + id, x, mid, nums);\n        build(id + id + 1, mid + 1, y, nums);\n        \n        dat[id] = dat[id + id] + dat[id + id + 1];\n    }\n    void update(int id, int x, int y, int w, vector<int>& nums) {\n        if (w > y || w < x) return;\n        if (x == y) {\n            dat[id] = is_peak(x, nums);\n            return;\n        }\n        \n        int mid = (x + y) >> 1;\n        \n        if (w <= mid) update(id + id, x, mid, w, nums);\n        else update(id + id + 1, mid + 1, y, w, nums);\n        \n        dat[id] = dat[id + id] + dat[id + id + 1];\n    }\n    int query(int id, int x, int y, int l, int r) {\n        if (l > r || l > y || r < x) return 0;\n        if (l <= x && y <= r) return dat[id];\n        \n        int mid = (x + y) >> 1;\n        \n        return query(id + id, x, mid, l, r) + query(id + id + 1, mid + 1, y, l, r);\n    }\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = (int)nums.size();\n        \n        build(1, 0, n - 1, nums);\n        \n        vector<int> res;\n        \n        for (const auto& vec : queries) {\n            int ope = vec[0];\n            int x = vec[1];\n            int y = vec[2];\n            \n            if (ope == 1) {\n                res.push_back(query(1, 0, n - 1, x + 1, y - 1));\n            } else {\n                nums[x] = y;\n                update(1, 0, n - 1, x, nums);\n                update(1, 0, n - 1, x - 1, nums);\n                update(1, 0, n - 1, x + 1, nums);\n            }\n        }\n        \n        return res;\n    }\n};",
    "submit_ts": 1718506090.0
}