{
    "username": "Superultra",
    "submission": "#include <bits/stdc++.h>\nusing namespace std; \n\n#define ll long long\n#define FOR(i, x, y) for (int i = x; i < y; i++)\n#define ld long double\n\ntemplate<class T> struct BIT{ //REMEMBER TO INIT\n    int N; vector<T> bit;\n    void init(int N_){ N = N_; bit.resize(N + 5, 0); }\n    void upd(int i, T val){ for (; i <= N; i += i & (-i)) bit[i] += val; }\n    void rupd(int l, int r, T val){ upd(l, val); upd(++r, -val); }\n    T qry(int i){\n        T ret = 0;\n        for (; i > 0; i -= i & (-i)) ret += bit[i];\n        return ret;\n    }\n    T qry(int l, int r){ return qry(r) - qry(l - 1); }\n    int lb(T val){\n        int pos = 0;\n        for (int pw = (1 << 25); pw; pw /= 2)\n            if (pos + pw <= N and bit[pos + pw] < val)\n                pos += pw, val -= bit[pos];\n        return ++pos;\n    }\n};\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& A, vector<vector<int>>& queries) {\n        vector<int> ans;\n        int n = A.size();\n\n        vector<int> B{0};\n        for (int i : A)\n            B.push_back(i);\n        A = B;\n\n        BIT<int> bit;\n        bit.init(n + 5);\n\n        FOR(i, 2, n){\n            if (A[i] > A[i - 1] and A[i] > A[i + 1])\n                bit.upd(i, 1);\n        }\n        for (auto V : queries){\n            int t = V[0];\n            int a = V[1];\n            int b = V[2];\n\n            if (t == 1){\n                a++;\n                b++;\n                if (a + 1 > b - 1)\n                    ans.push_back(0);\n                else\n                    ans.push_back(bit.qry(a + 1, b - 1));\n            }\n            else{\n                a++;\n\n                for (int i : {a - 1, a, a + 1}){\n                    if (i >= 2 and i <= n - 1){\n                        if (A[i] > A[i - 1] and A[i] > A[i + 1])\n                            bit.upd(i, -1);\n                    }\n                }\n\n                A[a] = b;\n\n                for (int i : {a - 1, a, a + 1}){\n                    if (i >= 2 and i <= n - 1){\n                        if (A[i] > A[i - 1] and A[i] > A[i + 1])\n                            bit.upd(i, 1);\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718505389.0
}