{
    "username": "_batman__",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        \n         int  n = nums.size();\n        \n        vector <vector <int> > st(n, vector <int> (20, -1));\n        vector <int> log(n + 1);\n        log[1] = 0;\n        for(int i = 2; i<=n; i++) log[i] = 1 + log[i/2];\n        \n        for(int i = 0; i<n; i++) st[i][0] = nums[i];\n        for(int j = 1; j<20; j++){\n            for(int i = 0; i<n; i++){\n                if(i + (1 << j) <= n) st[i][j] = (st[i][j - 1] & st[i + (1 << (j - 1))][j - 1]);\n            }\n        }\n        \n        auto AND = [&](int l, int r){\n            int len = r - l + 1;\n            if(1 << log[len] == len) return st[l][ log[len] ];\n            \n            return (st[l][ log[len] ] & st[r - (1 << log[len]) + 1][ log[len] ]);\n        };\n        \n        long long ans = 0;\n        \n        for(int i=0;i<nums.size();i++){\n                int l = -1;\n            \n                int s = i , e = nums.size()-1;\n            \n                int t1 = -1;\n            \n                while(s<=e){\n                      int mid = (s+e)>>1;\n                    \n                      int andi = AND(i,mid);\n                    \n                      if(andi <= k){\n                          t1 = mid;\n                          e = mid - 1;\n                      }\n                      else s = mid + 1;\n                }\n            \n                int t2 = -1;\n            \n                s = i , e = nums.size() - 1;\n            \n                while(s<=e){\n                      int mid = (s+e)>>1;\n                    \n                      int andi = AND(i,mid);\n                    \n                      if(andi >= k){\n                          t2 = mid;\n                          s = mid + 1;\n                      }\n                      else e = mid - 1;\n                }\n            \n                if(t1==-1) continue;\n            \n                int check = AND(i,t1);\n            \n               //cout << t1 << \" \" << t2 << endl;\n            \n               if(check == k){\n                   ans += t2 - t1 + 1;\n               }\n                \n        }\n        \n        return ans;\n\n\n            \n    }\n};",
    "submit_ts": "1720278366",
    "subm_id": "1311706013"
}