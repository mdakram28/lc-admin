{
    "username": "shivamxdd",
    "submission": "#define ll long long\nstruct segtree{\n \n    int size;\n    vector<ll> sums;\n    void init(int n){\n        size=1;\n        while(size<n) size*=2;\n        sums.resize(2*size,((1ll<<31)-1));\n \n    }\n    void set(int i,int v,int x,int lx,int rx ){\n        if(rx-lx==1){\n            sums[x]=v;\n            return;\n        }\n        int m=(lx+rx)/2;\n        if(i<m){\n            set(i,v,2*x+1,lx,m);\n        }else {\n            set(i,v,2*x+2,m,rx);\n        }\n        sums[x]=sums[2*x+1]&sums[2*x+2];\n    }\n \n    void set(int i,int v){\n        set(i,v,0,0,size);\n \n    }\n \n    ll query(int l,int r,int x,int lx,int rx){\n        if(rx<= l || lx>=r) return ((1ll<<31)-1);\n        \n         if(rx<=r && lx>= l) return sums[x];\n        \n        else {\n            int m=(lx+rx)/2;\n            ll s1=query(l,r,2*x+1,lx,m);\n            ll s2=query(l,r,2*x+2,m,rx);\n            return s1&s2;\n        }\n        \n    }\n \n    ll query(int l,int r){\n        return query(l,r,0,0,size);\n \n    }\n \n};class Solution {\npublic:\n    \n    \n    long long countSubarrays(vector<int>& nums, int k) {\n        int n=nums.size();\n        segtree st;\n        long long ans=0;\n        st.init(n);\n        for(int i=0;i<n;i++){\n            st.set(i,nums[i]);\n            \n        }\n        \n        \n        for(int i=0;i<n;i++){\n            int l=i;\n            int r=n-1;\n            while(l<r){\n                int mid=(l+r+1)/2;\n                if(st.query(i,mid+1)<k){\n                    r=mid-1;\n                }else {\n                    l=mid;\n                }\n            }\n            int l2=i;\n            int r2=n;\n            while(l2<r2){\n                int mid=(l2+r2)/2;\n                if(st.query(i,mid+1)>k){\n                    l2=mid+1;\n                }else {\n                    r2=mid;\n                }\n            }\n            if(l2<=l && st.query(i,l+1)==k){\n                ans+=l-l2+1;\n            }\n        }\n        return ans;\n        \n        \n        \n    }\n};",
    "submit_ts": "1720278616",
    "subm_id": "1311716892"
}