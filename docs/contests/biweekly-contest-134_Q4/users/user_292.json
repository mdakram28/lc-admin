{
    "username": "turneja",
    "submission": "class Solution {\npublic:\n    int pref[100005][32];\n\n    int get(int l, int r, int n) {\n        int ans = 0;\n        for (int j = 0; j < 31; j++) {\n            int ct = pref[r][j];\n            if (l > 0) {\n                ct -= pref[l - 1][j];\n            }\n            if (ct == r - l + 1) {\n                ans += 1 << j;\n            }\n        }\n        return ans;\n    }\n    \n    long long countSubarrays(vector<int>& nums, int k) {\n        int n = nums.size();\n        for (int i = 0; i < n; i++) {\n            for (int j = 0; j < 31; j++) {\n                int b = 1 << j;\n                int c = nums[i] & b;\n                if (c != 0) {\n                    pref[i][j] = 1;\n                } else {\n                    pref[i][j] = 0;\n                }\n                if (i != 0) {\n                    pref[i][j] += pref[i - 1][j];\n                }\n            }\n        }\n        long long ans = 0;\n        for (int i = 0; i < n; i++) {\n            int l = 0, r = i, rt = -1, lf = n;\n            while (l <= r) {\n                int mid = (l + r) / 2;\n                int sum = get(mid, i, n);\n                //cout << i << \" \" << l << \" \" << r << \" \" << sum << endl;\n                if (sum > k) {\n                    r = mid - 1;\n             \n                } else if (sum == k) {\n                    rt = max(rt, mid);\n                    l = mid + 1;\n                    \n                } else {\n                    l = mid + 1;\n                }\n            }\n\n            if (rt == -1) {\n                continue;\n            }\n            l = 0, r = i;\n            \n            while (l <= r) {\n                int mid = (l + r) / 2;\n                int sum = get(mid, i, n);\n                if (sum > k) {\n                    r = mid - 1;\n                } else if (sum == k) {\n                    lf = min(lf, mid);\n                    r = mid - 1;\n                    \n                } else {\n                    l = mid + 1;\n                }\n            }\n            if (lf == n) {\n                continue;\n            }\n            //cout << i << \" \" << rt << \" \" << lf << endl;\n            ans += rt - lf + 1;\n        }\n        return ans;\n        \n    }\n};",
    "submit_ts": "1720277648",
    "subm_id": "1311673480"
}