{
    "username": "MinhBaoSoCool",
    "submission": "class Solution {\npublic:\n    \n    int* M;\n    \n    void init(int id, int l, int r, vector<int>& nums){\n        if(l==r){\n            if(l==0 || l==nums.size()-1) M[id]=0;\n            else {\n                if(nums[l]>nums[l-1] && nums[l]>nums[l+1]) M[id]=1;\n                else M[id]=0;\n            }\n            return;\n        }\n        int m=(l+r)/2;\n        init(id*2+1, l, m, nums);\n        init(id*2+2, m+1, r, nums);\n        M[id]=M[id*2+1]+M[id*2+2];\n    }\n    \n    void init(vector<int>& nums){\n        int n=nums.size();\n        M=new int[4*n+4];\n        init(0, 0, n-1, nums);\n    }\n    \n    void update(int id, int l, int r, int u, vector<int>& nums){\n        if(l>u || r<u) return;\n        if(l==r){\n            if(l==0 || l==nums.size()-1) M[id]=0;\n            else {\n                if(nums[l]>nums[l-1] && nums[l]>nums[l+1]) M[id]=1;\n                else M[id]=0;\n            }\n            return;\n        }\n        int m=(l+r)/2;\n        update(id*2+1, l, m, u, nums);\n        update(id*2+2, m+1, r, u, nums);\n        M[id]=M[id*2+1]+M[id*2+2];\n    }\n    \n    void update(int i, int v, vector<int>& nums){\n        nums[i]=v;\n        update(0, 0, nums.size()-1, i, nums);\n        if(i-1>=0) update(0, 0, nums.size()-1, i-1, nums);\n        if(i+1<nums.size()) update(0, 0, nums.size()-1, i+1, nums);\n    }\n    \n    int query(int id, int l, int r, int u, int v){\n        if(l>v || r<u) return 0;\n        if(u<=l && v>=r) return M[id];\n        int m=(l+r)/2;\n        int a=query(id*2+1, l, m, u, v);\n        int b=query(id*2+2, m+1, r, u, v);\n        return a+b;\n    }\n    \n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        init(nums);\n        vector<int> ans;\n        for(vector<int> q: queries){\n            if(q[0]==1){\n                int a=query(0, 0, nums.size()-1, q[1], q[2]);\n                int b=query(0, 0, nums.size()-1, q[1], q[1]);\n                int c=0;\n                if(q[1]!=q[2]) c=query(0, 0, nums.size()-1, q[2], q[2]);\n                ans.push_back(a-b-c);\n            }\n            else {\n                update(q[1], q[2], nums);\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718508827.0
}