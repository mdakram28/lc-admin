{
    "username": "jtcheng26",
    "submission": "class Solution {\npublic:\n    const long long MOD = 1e9+7;\n    struct FenwickTree {\n        vector<int> bit;  // binary indexed tree\n        int n;\n        const long long MOD = 1e9+7;\n\n        FenwickTree(int n) {\n            this->n = n;\n            bit.assign(n, 0);\n        }\n\n        FenwickTree(vector<int> const &a) : FenwickTree(a.size()) {\n            for (size_t i = 0; i < a.size(); i++)\n                add(i, a[i]);\n        }\n\n        long long sum(int r) {\n            long long ret = 0;\n            for (; r >= 0; r = (r & (r + 1)) - 1)\n                ret = (ret + bit[r]) % MOD;\n            return ret;\n        }\n\n        long long sum(int l, int r) {\n            return (sum(r) - sum(l - 1) + MOD) % MOD;\n        }\n\n        void add(int idx, int delta) {\n            for (; idx < n; idx = idx | (idx + 1))\n                bit[idx] = (bit[idx] + delta) % MOD;\n        }\n    };\n    int countOfPairs(vector<int>& nums) {\n        /*\n        \n        tree[i] += sum(tree[0..i])\n        tree2[j] += sum(tree[j..n])\n        - sum(both[i][j])\n        \n        dp1[i][j] += dp1[i-1][0..j] - dp2[i-1][0..nums[i]-j-1]\n        dp2[i][nums[i]-j] += dp2[i-1][j..n] - dp1[i-1][j+1..n]\n        \n        return max(dp1[n-1][0..n], dp2[n-1][0..n])\n        */\n        \n        int m = 50;\n        int n = nums.size();\n        vector<FenwickTree> dp1(n, FenwickTree(m+1));\n        vector<FenwickTree> dp2(n, FenwickTree(m+1));\n        for (int i=0;i<n;i++) {\n            for (int j=0;j<=nums[i];j++) {\n                if (i == 0) {\n                    dp1[i].add(j, 1);\n                } else {\n                    int hi = j - max(0, nums[i] - j - (nums[i-1] - j));\n                    if (hi >= 0) {\n                        long long add = dp1[i-1].sum(0, hi);\n                        dp1[i].add(j, add);\n                    }\n                }\n            }\n        }\n        \n        return dp1[n-1].sum(0, m);\n    }\n};",
    "submit_ts": "1723346109",
    "subm_id": "1351570384"
}