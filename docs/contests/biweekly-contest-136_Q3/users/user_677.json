{
    "username": "rusart",
    "submission": "public class Solution\n{\n    public int MinFlips(int[][] grid)\n    {\n        var flipCount = 0;\n        var n = grid.Length;\n        var m = grid[0].Length;\n        for (var r = 0; r < n / 2; r++)\n        {\n            for (var c = 0; c < m / 2; c++)\n            {\n                var sum = grid[r][c] + grid[r][^(c + 1)] + grid[^(r + 1)][c] + grid[^(r + 1)][^(c + 1)];\n                if (sum is 0 or 4)\n                {\n                    continue;\n                }\n\n                flipCount += sum switch\n                {\n                    1 or 3 => 1,\n                    _ => 2\n                };\n            }\n        }\n\n        if (n % 2 == 1 && m % 2 == 1 && grid[n / 2][m / 2] == 1) flipCount++;\n\n        var onesCount = 0;\n        var centerFlips = 0;\n        if (n % 2 == 1)\n        {\n            var row = grid[n / 2];\n            var l = 0;\n            var r = m - 1;\n            while (l < r)\n            {\n                if (row[l] != row[r])\n                {\n                    centerFlips++;\n                }\n                else if (row[l] == 1)\n                {\n                    onesCount += 2;\n                }\n\n                l++;\n                r--;\n            }\n        }\n\n        if (m % 2 == 1)\n        {\n            var t = 0;\n            var b = n - 1;\n            while (t < b)\n            {\n                if (grid[t][m / 2] != grid[b][m / 2])\n                {\n                    centerFlips++;\n                }\n                else if (grid[t][m / 2] == 1)\n                {\n                    onesCount += 2;\n                }\n\n                t++;\n                b--;\n            }\n        }\n\n        if (onesCount % 4 != 0 && centerFlips == 0)\n        {\n            centerFlips += 2;\n        }\n\n        return flipCount + centerFlips;\n    }\n}",
    "submit_ts": "1722697529",
    "subm_id": "1343149807"
}