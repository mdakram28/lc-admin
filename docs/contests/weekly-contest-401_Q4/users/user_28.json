{
    "username": "AntonRaichuk",
    "submission": "typedef long double ld;\n \ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef pair<int,pii> p3;\ntypedef pair<ll,ll> pl;\ntypedef pair<int,pl> p3l;\ntypedef pair<double,double> pdd;\ntypedef vector<int> vi;\ntypedef vector<ld> vd;\n \n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define REP(i,n) FOR(i,0,n)\n#define SORT(v) sort((v).begin(),(v).end())\n#define UN(v) SORT(v),(v).erase(unique((v).begin(),(v).end()),(v).end())\n#define CL(a,b) memset(a,b,sizeof a)\n#define pb push_back\n\n// to_string, stoi, stoll, gcd, __builtin_popcount - already exist\n//\n// unordered_map<int, int> depth;\n// for (auto& [k, v] : depth)\n\nclass Solution {\npublic:\n    int maxTotalReward(vector<int>& r) {\n        vector<pii> t;\n        t.pb({0,0});\n        UN(r);\n        REP(i,r.size()){\n            vector<pii> nt;\n            REP(j,t.size())if(t[j].first<r[i]){\n                nt.pb({t[j].first+r[i],min(t[j].second+r[i],2*r[i]-1)});\n            }\n            vector<pii> z;\n            int p1=0,p2=0;\n            while(p1<t.size() || p2<nt.size()){\n                if(p1<t.size() && (p2==nt.size() || t[p1].first<=nt[p2].first)){\n                    if(z.empty() || z.back().second<t[p1].first-1)z.pb(t[p1]);\n                    else z.back().second=max(z.back().second,t[p1].second);\n                    p1++;\n                }else{\n                    if(z.empty() || z.back().second<nt[p2].first-1)z.pb(nt[p2]);\n                    else z.back().second=max(z.back().second,nt[p2].second);\n                    p2++;\n                }\n            }\n            t=z;\n        }\n        return t.back().second;\n    }\n};",
    "submit_ts": 1717901518.0
}