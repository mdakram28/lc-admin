{
    "username": "tanakat01",
    "submission": "class BIT:\n    def __init__(self, n):\n        j = math.ceil(math.log2(n))\n        self.o, self.m = 2 ** j - 1, 2 ** j - 1 + n\n        self.hist = [0] * self.m\n    def inc(self, i, v):\n        i = i + self.o\n        while i >= 0:\n            self.hist[i] += v\n            i = (i - 1) // 2\n    def le(self, i):\n        if i < 0:\n            return 0\n        i = self.o + i\n        r = self.hist[i]\n        p = (i - 1) // 2\n        while p >= 0:\n            if i == (2 * p + 2):\n                r += self.hist[i - 1]\n            p, i = (p - 1) // 2, p\n        return r\n    def get(self, i):\n        return self.hist[self.o + i]\nclass Solution:\n    def countOfPeaks(self, nums: List[int], queries: List[List[int]]) -> List[int]:\n        n = len(nums)        \n        bit = BIT(n)\n        for i in range(1, n - 1):\n            if nums[i - 1] < nums[i] > nums[i + 1]:\n                bit.inc(i, 1)\n        ans = []                \n        for cmds in queries:\n            if cmds[0] == 1:\n                if cmds[2] - cmds[1] >= 2:\n                    ans.append(bit.le(cmds[2] - 1) - bit.le(cmds[1]))\n                else:\n                    ans.append(0)\n            else:\n                i, val = cmds[1], cmds[2]\n                nums[i] = val\n                if i >= 2:\n                    oldv = bit.get(i - 1)\n                    newv = 1 if nums[i - 2] < nums[i - 1] > nums[i] else 0\n                    bit.inc(i - 1, newv - oldv)\n                if i + 2 < n:\n                    oldv = bit.get(i + 1)\n                    newv = 1 if nums[i] < nums[i + 1] > nums[i + 2] else 0\n                    bit.inc(i + 1, newv - oldv)\n                if 1 <= i < n - 1:\n                    oldv = bit.get(i)\n                    newv = 1 if nums[i - 1] < nums[i] > nums[i + 1] else 0\n                    bit.inc(i, newv - oldv)\n                #print(f'bit={[bit.get(i) for i in range(n)]}')\n        return ans                    \n                    ",
    "submit_ts": "1718506802",
    "subm_id": "1289631474"
}