{
    "username": "erel3",
    "submission": "const int mod = 1000000007;\nconst int maxn = 50050;\nclass Solution {\n    long long u[4 * maxn][4];\n    \n    void build(int v, int tl, int tr, vector<int>& nums) {\n        if (tl == tr) {\n            u[v][0] = 0;\n            u[v][1] = 0;\n            u[v][2] = 0;         \n            u[v][3] = nums[tl];\n            return;\n        }\n        \n        int tm = (tl + tr) >> 1;\n        build(v * 2 + 1, tl, tm, nums);\n        build(v * 2 + 2, tm + 1, tr, nums);\n\n        u[v][0] = 0;\n        u[v][1] = 0;\n        u[v][2] = 0;         \n        u[v][3] = 0;\n        for (int i = 0; i < 4; i++) {\n            for (int j = 0; j < 4; j++) {\n                if ((i & 2) && (j & 1)) {\n                    continue;\n                }\n                int to = (i & 1) | (j & 2);\n                u[v][to] = max(u[v][to], u[v * 2 + 1][i] + u[v * 2 + 2][j]);\n            }\n        }\n    }\n    \n    void upd(int v, int tl, int tr, int pos, int val) {\n        if (pos < tl || tr < pos) return;\n        if (tl == tr) {\n            u[v][0] = 0;\n            u[v][1] = 0;\n            u[v][2] = 0;         \n            u[v][3] = val;\n            return;\n        }\n        \n        int tm = (tl + tr) >> 1;\n        upd(v * 2 + 1, tl, tm, pos, val);\n        upd(v * 2 + 2, tm + 1, tr, pos, val);\n        \n        u[v][0] = 0;\n        u[v][1] = 0;\n        u[v][2] = 0;         \n        u[v][3] = 0;\n        for (int i = 0; i < 4; i++) {\n            for (int j = 0; j < 4; j++) {\n                if ((i & 2) && (j & 1)) {\n                    continue;\n                }\n                int to = (i & 1) | (j & 2);\n                u[v][to] = max(u[v][to], u[v * 2 + 1][i] + u[v * 2 + 2][j]);\n            }\n        }\n    }\npublic:\n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        int ans = 0;\n        build(0, 0, nums.size() - 1, nums);\n        for (int i = 0; i < queries.size(); i++) {\n            upd(0, 0, nums.size() - 1, queries[i][0], queries[i][1]);\n            ans = (0ll + ans + max({u[0][0], u[0][1], u[0][2], u[0][3]})) % mod;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1716692897",
    "subm_id": "1268068354"
}