{
    "username": "sserxhs",
    "submission": "#include \"bits/stdc++.h\"\nusing namespace std;\ntemplate <class T, size_t size=tuple_size<T>::value>\nstring to_debug(T, string s=\"\")\n\trequires(not ranges::range<T>);\nstring to_debug(auto x)\n\trequires requires(ostream &os) { os<<x; }\n{\n\treturn static_cast<ostringstream>(ostringstream()<<x).str();\n}\nstring to_debug(ranges::range auto x, string s=\"\")\n\trequires(not is_same_v<decltype(x), string>)\n{\n\tfor (auto xi:x) s+=\", \"+to_debug(xi);\n\n\treturn \"[\"+s.substr(s.empty()?0:2)+\"]\";\n}\ntemplate <class T, size_t size>\nstring to_debug(T x, string s)\n\trequires(not ranges::range<T>)\n{\n\t[&] <size_t... I>(index_sequence<I...>) { ((s+=\", \"+to_debug(get<I>(x))), ...); }(make_index_sequence<size>());\n\treturn \"(\"+s.substr(s.empty()?0:2)+\")\";\n}\n#define dbg(...) cout << __LINE__ << \": (\" #__VA_ARGS__ \") = \" << to_debug(tuple(__VA_ARGS__)) << endl\ntemplate<typename T1, typename T2> istream &operator>>(istream &cin, pair<T1, T2> &a) { return cin>>a.first>>a.second; }\ntemplate<typename T1> istream &operator>>(istream &cin, vector<T1> &a) { for (auto &x:a) cin>>x; return cin; }\ntemplate<typename T1> istream &operator>>(istream &cin, valarray<T1> &a) { for (auto &x:a) cin>>x; return cin; }\ntemplate<typename T1, typename T2> ostream &operator<<(ostream &cout, const pair<T1, T2> &a) { return cout<<a.first<<' '<<a.second; }\ntemplate<typename T1, typename T2> ostream &operator<<(ostream &cout, const vector<pair<T1, T2>> &a) { for (auto &x:a) cout<<x<<'\\n'; return cout; }\ntemplate<typename T1> ostream &operator<<(ostream &cout, const vector<T1> &a) { int n=a.size(); if (!n) return cout; cout<<a[0]; for (int i=1; i<n; i++) cout<<' '<<a[i]; return cout; }\ntemplate<typename T1, typename T2> bool cmin(T1 &x, const T2 &y) { if (y<x) { x=y; return 1; } return 0; }\ntemplate<typename T1, typename T2> bool cmax(T1 &x, const T2 &y) { if (x<y) { x=y; return 1; } return 0; }\ntemplate<typename T1> vector<T1> range(T1 l, T1 r, T1 step=1) { assert(step>0); int n=(r-l+step-1)/step, i; vector<T1> res(n); for (i=0; i<n; i++) res[i]=l+step*i; return res; }\ntemplate<typename T1> basic_string<T1> operator*(const basic_string<T1> &s, int m) { auto r=s; m*=s.size(); r.resize(m); for (int i=s.size(); i<m; i++) r[i]=r[i-s.size()]; return r; }\ntypedef unsigned ui;\ntypedef long long ll;\n#define all(x) (x).begin(), (x).end()\nclass Solution\n{\npublic:\n\tint cal(vector<vector<int>> &a)\n\t{\n\t\t// dbg(a);\n\t\tint n=a.size(), m=a[0].size(), i, j, k, l;\n\t\tvector lu(n, vector<int>(m)), ru(n, vector<int>(m));\n\t\tvector<int> d(n);\n\t\tfor (i=0; i<n; i++) for (j=0; j<m; j++)\n\t\t{\n\t\t\tint xl=n, xr=0, yl=m, yr=0;\n\t\t\tfor (k=0; k<=i; k++) for (l=0; l<=j; l++) if (a[k][l])\n\t\t\t{\n\t\t\t\tcmin(xl, k);\n\t\t\t\tcmin(yl, l);\n\t\t\t\tcmax(xr, k);\n\t\t\t\tcmax(yr, l);\n\t\t\t}\n\t\t\tif (xl>xr) lu[i][j]=0;\n\t\t\telse lu[i][j]=(yr-yl+1)*(xr-xl+1);\n\t\t}\n\t\tfor (i=0; i<n; i++) for (j=0; j<m; j++)\n\t\t{\n\t\t\tint xl=n, xr=0, yl=m, yr=0;\n\t\t\tfor (k=0; k<=i; k++) for (l=j; l<m; l++) if (a[k][l])\n\t\t\t{\n\t\t\t\tcmin(xl, k);\n\t\t\t\tcmin(yl, l);\n\t\t\t\tcmax(xr, k);\n\t\t\t\tcmax(yr, l);\n\t\t\t}\n\t\t\tif (xl>xr) ru[i][j]=0;\n\t\t\telse ru[i][j]=(yr-yl+1)*(xr-xl+1);\n\t\t}\n\t\t{\n\t\t\tint xl=n, xr=0, yl=m, yr=0;\n\t\t\tfor (i=n-1; i>=0; i--)\n\t\t\t{\n\t\t\t\tfor (j=0; j<m; j++) if (a[i][j])\n\t\t\t\t{\n\t\t\t\t\tcmin(xl, i);\n\t\t\t\t\tcmin(yl, j);\n\t\t\t\t\tcmax(xr, i);\n\t\t\t\t\tcmax(yr, j);\n\t\t\t\t}\n\t\t\t\tif (xl>xr) d[i]=0;\n\t\t\t\telse d[i]=(yr-yl+1)*(xr-xl+1);\n\t\t\t}\n\t\t}\n\t\tint ans=n*m;\n\t\tfor (i=0; i<n; i++) for (j=-1; j<m; j++) cmin(ans, (j==-1?0:lu[i][j])+(j==m-1?0:ru[i][j+1])+(i==n-1?0:d[i+1]));\n\t\t// dbg(ans);\n\t\tvector<int> f(n, n*m), g(n, n*m), h(n, n*m);\n\t\tfor (i=0; i<n; i++)\n\t\t{\n\t\t\tint xl=n, xr=0, yl=m, yr=0;\n\t\t\tfor (j=i; j>=0; j--)\n\t\t\t{\n\t\t\t\tfor (k=0; k<m; k++) if (a[j][k])\n\t\t\t\t{\n\t\t\t\t\tcmin(xl, j);\n\t\t\t\t\tcmin(yl, k);\n\t\t\t\t\tcmax(xr, j);\n\t\t\t\t\tcmax(yr, k);\n\t\t\t\t}\n\t\t\t\tint S=xl>xr?0:(xr-xl+1)*(yr-yl+1);\n\t\t\t\t// dbg(i, j, S);\n\t\t\t\tif (j==0) cmin(f[i], S);\n\t\t\t\tif (j) cmin(g[i], f[j-1]+S);\n\t\t\t\tcmin(g[i], f[i]);\n\t\t\t\tif (j) cmin(h[i], g[j-1]+S);\n\t\t\t\tcmin(h[i], g[i]);\n\t\t\t}\n\t\t}\n\t\t// dbg(f, g, h);\n\t\tcmin(ans, h[n-1]);\n\t\treturn ans;\n\t}\n\tint minimumSum(vector<vector<int>> &a)\n\t{\n\t\tint n=a.size(), m=a[0].size(), i, j;\n\t\tint ans=n*m;\n\t\tcmin(ans, cal(a));\n\t\treverse(all(a));\n\t\tcmin(ans, cal(a));\n\t\tvector b(m, vector<int>(n));\n\t\tfor (i=0; i<m; i++) for (j=0; j<n; j++) b[i][j]=a[j][i];\n\t\tcmin(ans, cal(b));\n\t\treverse(all(b));\n\t\tcmin(ans, cal(b));\n\t\treturn ans;\n\t}\n};\n",
    "submit_ts": 1719111404.0
}