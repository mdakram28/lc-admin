{
    "username": "HaoCR123",
    "submission": "//1 1 1 2\nclass T{\n    public:\n    int n;\n    vector<long long> c;\n    T(int _n):n(_n), c(_n, 0){}\n    int lowbit(int x) {\n        return x & (-x);\n    }\n    void ch(int x, int val) {\n        for(; x < n; x += lowbit(x)) c[x] += val;\n    }\n    long long qu(int x) {\n        long long res = 0;\n        for(; x > 0; x -= lowbit(x)) res += c[x];\n        return res;\n    }\n};\ntypedef long long ll;\nclass Solution {\npublic:\n    long long minimumOperations(vector<int>& nums, vector<int>& target) {\n        int n = nums.size();\n        vector<int> t;\n        for(int i = 0; i < n; i++) t.push_back(nums[i] - target[i]);\n\n        vector<int> l(n, 0), r(n, n + 1);\n        stack<int> st;\n        for(int i = 0; i < n; i++) {\n            if(t[i] >= 0) {\n                while(!st.empty() && t[st.top()] >= t[i]) st.pop();\n                if(!st.empty()) l[i] = st.top() + 1;\n            }else {\n                while(!st.empty() && t[st.top()] <= t[i]) st.pop();\n                if(!st.empty()) l[i] = st.top() + 1;\n            }\n            st.push(i);\n        }\n        while(!st.empty()) st.pop();\n        for(int i = n - 1; i >= 0; i--) {\n            if(t[i] >= 0) {\n                while(!st.empty() && t[st.top()] >= t[i]) st.pop();\n                if(!st.empty()) r[i] = st.top() + 1;\n            }else {\n                while(!st.empty() && t[st.top()] <= t[i]) st.pop();\n                if(!st.empty()) r[i] = st.top() + 1;\n            }\n            st.push(i);\n        }\n        vector<int> rk(n);\n        iota(rk.begin(), rk.end(), 0);\n        sort(rk.begin(), rk.end(), [&](int a, int b){\n            return abs(t[a]) < abs(t[b]);\n        });\n        T t1(n + 10);\n        \n        long long ans = 0;\n        for(int i = 0; i < n; i++) {\n            int j = rk[i];\n            long long num = t1.qu(j + 1);\n            long long tt = abs(abs(t[j]) - num);\n            ans += tt;\n            t1.ch(l[j] + 1, tt);\n            t1.ch(r[j], -tt);\n           // cout << l[j] << \" \" << r[j] << \"\\n\";\n        }\n        return ans;\n        \n       \n    }\n};\n//-4 5 2",
    "submit_ts": "1721532861",
    "subm_id": "548394746"
}