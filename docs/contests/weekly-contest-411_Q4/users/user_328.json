{
    "username": "a_k",
    "submission": "class Solution:\n    def countKConstraintSubstrings(self, s: str, k: int, queries: List[List[int]]) -> List[int]:\n        n = len(s)\n        m = len(queries)\n        # for i in range(m):\n            # queries[i].append(i)\n            \n        arr = []\n        prefix = []\n        zero = one = 0\n        l = 0\n        for i in range(n):  \n            if s[i] == '1': one+=1\n            else: zero+=1\n            while l < i and min(zero, one) > k:\n                if s[l] == '0': zero-=1\n                else: one-=1\n                l+=1\n            arr.append((l,i))\n            prefix.append((i-l+1) + (prefix[-1] if prefix else 0))\n        \n        prefix2 = []\n        for l, i in arr:\n            prefix2.append(l + (prefix2[-1] if prefix2 else 0))\n        \n        # print(arr)\n        curr = 0\n        res = []  \n        idx = 0\n        for l, r in queries:\n            idx = -1\n            left, right = 0, n-1\n            while left <= right:\n                mid = (left+right)//2\n                if arr[mid][1] <= r and arr[mid][0] < l:\n                    idx = mid\n                    left = mid+1\n                else: right = mid-1\n            \n            v = prefix[r] - (prefix[l-1] if l-1 >= 0 else 0)\n            # if (l,r) == (7,12): print(v, idx, l*(idx-l+1) - prefix2[idx] - (prefix2[l-1] if l-1 >= 0 else 0))\n            if idx >= l:\n                x = (l*(idx-l+1)) - (prefix2[idx] - (prefix2[l-1] if l-1 >= 0 else 0))\n                v-=x        \n            res.append(v)\n            \n        return res\n    \"\"\"\n    \n    [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4), (0, 5), (2, 6), (2, 7), (2, 8), (3, 9), (3, 10), (4, 11), (8, 12)]\n\n    \n    \"0000111 110100\"\n    2\n    [7,12]\n    \n    \n\"0001111\"\n2\n[[0,6]]\n\"010101\"\n1\n[[0,5],[1,4],[2,3]]\n\"10001101011001\"\n5\n[[0,11],[0,12],[0,13],[1,13],[2,13]]\n\"000\"\n1\n[[0,0],[0,1],[0,2],[1,1],[1,2],[2,2]]\n    \n    \n    \"\"\"",
    "submit_ts": "1723952735",
    "subm_id": "1359803411"
}