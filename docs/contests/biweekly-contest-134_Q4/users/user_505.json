{
    "username": "weak-chicken",
    "submission": "class Solution:\n    def countSubarrays(self, nums: List[int], k: int) -> int:\n        q=[deque()for _ in range(31)]\n        n=len(nums)\n        r=[-1]*n\n        \n        for i,x in enumerate(nums):\n            if x&k==k:\n                r[i]=i\n            for j in range(31):\n                if not x>>j&1:\n                    q[j].append(i)\n        for i in range(n-1,-1,-1):\n            if i+1<n and r[i+1]>0 and r[i]>=0:\n                r[i]=r[i+1]\n        #print(r)\n        ans=0\n        for i,x in enumerate(nums):\n            if x&k==k:\n                ma=r[i]\n                mi=i\n                find=1\n                for j in range(31):\n                    while q[j] and q[j][0]<i:\n                        q[j].popleft()\n                    if not k>>j&1 and x>>j&1:\n                        #print(i,j,q[j])\n                        if q[j]:\n                            mi=max(mi,q[j][0])\n                        else:\n                            find=0\n                            break\n                if find:\n                    ans+=max(0,ma-mi+1)\n                #print(i,mi,ma)\n                \n        return ans\n                ",
    "submit_ts": "1720278832",
    "subm_id": "544564604"
}