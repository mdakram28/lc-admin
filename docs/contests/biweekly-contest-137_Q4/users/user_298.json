{
    "username": "Madhav Kadam",
    "submission": "#define lll __int128_t;\n// typedef is used to create an alias for a data type\n// #define int ll\ntypedef long long ll;\n// typedef long long int lli;\n// typedef unsigned long long int ull;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\n// typedef vector<lli> vlli;\ntypedef pair<int, int> pi;\n// typedef pair<ll, ll> pll;\ntypedef vector<pi> vpi;\n// typedef vector<pll> vpll;\ntypedef long double ld;\ntypedef tuple<int, int, int> tiii;\n\n// #define is used to define a constant value\n\n#define sz(x) (int)x.size()\n#define fastio ios_base::sync_with_stdio(false); cin.tie(NULL); cout.tie(NULL);\n#define lfastio static const auto speedup = []() { std::ios::sync_with_stdio(false); std::cin.tie(nullptr); return 0;}();\n#define pb(a) push_back(a)\n#define pbr(a, b) pb(make_pair(a, b))\n#define F first\n#define S second\n#define all(a) (a).begin(), (a).end()\n#define rall(a) (a).rbegin(), (a).rend()\n#define fr(i, a, b) for (int i = a; i <= b; i++)\n#define rfr(i, a, b) for (int i = a; i >= b; i--)   \n#define forn(i, n) for (int i = 0; i < int(n); i++)\n#define pri(anything) for(auto a:anything){cout<<a<<\" \";}\n#define what_is(x) cerr << #x << \" is \" << x << endl;\n#define priany(i, begin, end) for (__typeof(end) i = (begin) - ((begin) > (end)); i != (end) - ((begin) > (end)); i += 1 - 2 * ((begin) > (end)))\n#define gnl cout<<endl;\nclass Solution {\npublic:\n    ll maximumValueSum(vector<vector<int>>& board) {\n        int m = sz(board), n = sz(board[0]);\n        \n        vector<vector<int>> prefix(m, vi(n, INT_MIN));\n        vector<vector<int>> suffix(m, vi(n, INT_MIN));\n        \n        // Calculate prefix matrix\n        forn(i, m) {\n            int maxVal = INT_MIN;\n            forn(j, n) {\n                maxVal = max(maxVal, board[i][j]);\n                prefix[i][j] = maxVal;\n            }\n        }\n        \n        // Calculate suffix matrix\n        forn(i, m) {\n            int maxVal = INT_MIN;\n            rfr(j, n-1, 0) {\n                maxVal = max(maxVal, board[i][j]);\n                suffix[i][j] = maxVal;\n            }\n        }\n        \n        ll maxSum = LLONG_MIN;\n        \n        // Function to get top 3 values and their corresponding rows from a column\n        auto getTop3 = [&](const vector<int>& col) -> vector<pi> {\n            vector<pi> top3(3, {INT_MIN, -1});\n            forn(i, sz(col)) {\n                if(col[i] > top3[0].F) {\n                    top3[2] = top3[1];\n                    top3[1] = top3[0];\n                    top3[0] = {col[i], i};\n                } else if(col[i] > top3[1].F) {\n                    top3[2] = top3[1];\n                    top3[1] = {col[i], i};\n                } else if(col[i] > top3[2].F) {\n                    top3[2] = {col[i], i};\n                }\n            }\n            return top3;\n        };\n        \n        // Iterate through columns 1 to n-2\n        fr(j, 1, n-2) {\n            vi leftCol(m), midCol(m), rightCol(m);\n            forn(i, m) {\n                leftCol[i] = prefix[i][j-1];\n                midCol[i] = board[i][j];\n                rightCol[i] = suffix[i][j+1];\n            }\n            \n            vector<pi> leftTop3 = getTop3(leftCol);\n            vector<pi> midTop3 = getTop3(midCol);\n            vector<pi> rightTop3 = getTop3(rightCol);\n            \n            // Check all combinations of top 3 from each column\n            forn(l, 3) {\n                forn(m, 3) {\n                    forn(r, 3) {\n                        if(leftTop3[l].S != midTop3[m].S && \n                           midTop3[m].S != rightTop3[r].S && \n                           leftTop3[l].S != rightTop3[r].S) {\n                            ll sum = (ll)leftTop3[l].F + (ll)midTop3[m].F + (ll)rightTop3[r].F;\n                            maxSum = max(maxSum, sum);\n                        }\n                    }\n                }\n            }\n        }\n        \n        return maxSum;\n    }\n};",
    "submit_ts": "1723909951",
    "subm_id": "1359211797"
}