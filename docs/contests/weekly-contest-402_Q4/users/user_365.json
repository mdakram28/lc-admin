{
    "username": "kmjp",
    "submission": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef signed long long ll;\n\n#undef _P\n#define _P(...) (void)printf(__VA_ARGS__)\n#define FOR(x,to) for(x=0;x<(to);x++)\n#define FORR(x,arr) for(auto& x:arr)\n#define FORR2(x,y,arr) for(auto& [x,y]:arr)\n#define ALL(a) (a.begin()),(a.end())\n#define ZERO(a) memset(a,0,sizeof(a))\n#define MINUS(a) memset(a,0xff,sizeof(a))\ntemplate<class T> bool chmax(T &a, const T &b) { if(a<b){a=b;return 1;}return 0;}\ntemplate<class T> bool chmin(T &a, const T &b) { if(a>b){a=b;return 1;}return 0;}\n//-------------------------------------------------------\n\ntemplate<class V, int ME> class BIT {\npublic:\n\tV bit[1<<ME];\n\tV operator()(int e) {if(e<0) return 0;V s=0;e++;while(e) s+=bit[e-1],e-=e&-e; return s;}\n\tvoid add(int e,V v) { e++; while(e<=1<<ME) bit[e-1]+=v,e+=e&-e;}\n};\nBIT<int,20> bt;\n\nint N;\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        N=nums.size();\n        int i;\n        FOR(i,N+2) bt.add(i,-bt(i));\n        for(i=1;i<N-1;i++) if(nums[i]>nums[i-1]&&nums[i]>nums[i+1]) bt.add(i,1);\n        vector<int> ret;\n        FORR(q,queries) {\n\t\t\tif(q[0]==2) {\n\t\t\t\tfor(i=max(1,q[1]-1);i<=min(N-2,q[1]+1);i++) {\n\t\t\t\t\tif(nums[i]>nums[i-1]&&nums[i]>nums[i+1]) bt.add(i,-1);\n\t\t\t\t}\n\t\t\t\tnums[q[1]]=q[2];\n\t\t\t\tfor(i=max(1,q[1]-1);i<=min(N-2,q[1]+1);i++) {\n\t\t\t\t\tif(nums[i]>nums[i-1]&&nums[i]>nums[i+1]) bt.add(i,1);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(q[1]==q[2]) ret.push_back(0);\n\t\t\t\telse ret.push_back(bt(q[2]-1)-bt(q[1]));\n\t\t\t}\n\t\t}\n\t\treturn ret;\n    }\n};\n",
    "submit_ts": "1718506143",
    "subm_id": "1289608469"
}