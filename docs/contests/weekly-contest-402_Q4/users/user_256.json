{
    "username": "ctnya_8135",
    "submission": "class Solution {\npublic:\n    #define MAXX 100005\n    int bit[MAXX];\n    \n    int query(int x) {\n        int ans = 0;\n        for (; x >= 0; x = (x & x + 1) - 1) {\n            ans += bit[x];\n        }\n        return ans;\n    }\n    \n    void update(int x, int val) {\n        for (; x < MAXX; x = x | x + 1) {\n            bit[x] += val;\n        }\n    }\n    \n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        memset(bit, 0, MAXX * 4);\n        vector<int> ans;\n        for (int i = 1; i < n - 1; i++) {\n            if (nums[i] > nums[i - 1] && nums[i] > nums[i + 1]) {\n                update(i, 1);\n            }\n        }\n        for (auto &q: queries) {\n            if (q[0] == 1) {\n                ans.push_back(max(query(q[2] - 1) - query(q[1]), 0));\n            } else {\n                int idx = q[1];\n                if (idx - 1 > 0 && nums[idx - 1] > nums[idx - 2] && nums[idx - 1] > nums[idx])\n                    update(idx - 1, -1);\n                if (idx + 1 < n - 1 && nums[idx + 1] > nums[idx + 2] && nums[idx + 1] > nums[idx])\n                    update(idx + 1, -1);\n                if (idx > 0 && idx < n - 1 && nums[idx] > nums[idx - 1] && nums[idx] > nums[idx + 1])\n                    update(idx, -1);\n                nums[idx] = q[2];\n                if (idx - 1 > 0 && nums[idx - 1] > nums[idx - 2] && nums[idx - 1] > nums[idx])\n                    update(idx - 1, 1);\n                if (idx + 1 < n - 1 && nums[idx + 1] > nums[idx + 2] && nums[idx + 1] > nums[idx])\n                    update(idx + 1, 1);\n                if (idx > 0 && idx < n - 1 && nums[idx] > nums[idx - 1] && nums[idx] > nums[idx + 1])\n                    update(idx, 1);\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1718506654",
    "subm_id": "1289626431"
}