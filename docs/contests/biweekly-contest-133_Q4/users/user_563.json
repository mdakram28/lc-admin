{
    "username": "12115128_kishan",
    "submission": "class Solution {\npublic:\n    const int MOD = 1e9 + 7;\n\n    int numberOfPermutations(int n, vector<vector<int>>& requirements) {\n        int maxInv = n * (n - 1) / 2;\n        vector<vector<int>> memo(n + 1, vector<int>(maxInv + 1, 0));\n        memo[0][0] = 1;\n\n        for (int len = 1; len <= n; ++len) {\n            vector<int> prefixSum(maxInv + 1, 0);\n            for (int inv = 0; inv <= maxInv; ++inv) {\n                prefixSum[inv] = memo[len - 1][inv];\n                if (inv > 0) {\n                    prefixSum[inv] = (prefixSum[inv] + prefixSum[inv - 1]) % MOD;\n                }\n            }\n\n            for (int inv = 0; inv <= maxInv; ++inv) {\n                memo[len][inv] = prefixSum[inv];\n                if (inv >= len) {\n                    memo[len][inv] = (memo[len][inv] - prefixSum[inv - len] + MOD) % MOD;\n                }\n            }\n        }\n\n        vector<int> cnt(n, -1);\n        for (const auto& req : requirements) {\n            cnt[req[0]] = req[1];\n        }\n\n        vector<vector<int>> memo2(n + 1, vector<int>(maxInv + 1, 0));\n        memo2[0][0] = 1;\n\n        for (int len = 1; len <= n; ++len) {\n            vector<int> prefixSum(maxInv + 1, 0);\n            for (int inv = 0; inv <= maxInv; ++inv) {\n                prefixSum[inv] = memo2[len - 1][inv];\n                if (inv > 0) {\n                    prefixSum[inv] = (prefixSum[inv] + prefixSum[inv - 1]) % MOD;\n                }\n            }\n\n            for (int inv = 0; inv <= maxInv; ++inv) {\n                memo2[len][inv] = prefixSum[inv];\n                if (inv >= len) {\n                    memo2[len][inv] = (memo2[len][inv] - prefixSum[inv - len] + MOD) % MOD;\n                }\n            }\n\n            if (cnt[len - 1] != -1) {\n                for (int inv = 0; inv <= maxInv; ++inv) {\n                    if (inv != cnt[len - 1]) {\n                        memo2[len][inv] = 0;\n                    }\n                }\n            }\n        }\n\n        int ans = 0;\n        for (int inv = 0; inv <= maxInv; ++inv) {\n            ans = (ans + memo2[n][inv]) % MOD;\n        }\n\n        return ans;\n    }\n};\n",
    "submit_ts": 1719069771.0
}