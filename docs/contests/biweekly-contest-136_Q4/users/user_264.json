{
    "username": "virinci",
    "submission": "static const int _ = []() {\n\tstd::ios::sync_with_stdio(false);\n\tstd::cin.tie(nullptr);\n\treturn 0;\n}();\n\nclass Solution {\npublic:\n\tvector<int> timeTaken(vector<vector<int>>& edges) {\n\t\tint n = ssize(edges) + 1;\n\t\tvector<vector<int>> adj(n);\n\n\t\tfor (int i = 0; i < n - 1; ++i) {\n\t\t\tauto u = edges[i][0], v = edges[i][1];\n\t\t\tadj[u].emplace_back(v);\n\t\t\tadj[v].emplace_back(u);\n\t\t}\n\n\t\tvector<int> subtree_max(n, 0), total_max(n, 0);\n\t\tvector<array<pair<int, int>, 2>> max_two(\n\t\t\tn,\n\t\t\t{\n\t\t\t\tpair{0, -1},\n\t\t\t\tpair{0, -1}\n        });\n\n\t\tauto emplace = [&](int v, const pair<int, int>& r) {\n\t\t\tif (r >= max_two[v][0]) {\n\t\t\t\tswap(max_two[v][0], max_two[v][1]);\n\t\t\t\tmax_two[v][0] = r;\n\t\t\t} else if (r >= max_two[v][1]) {\n\t\t\t\tmax_two[v][1] = r;\n\t\t\t}\n\t\t};\n\n\t\tauto dfs1 = [&](auto&& self, int u, int v) -> void {\n\t\t\tfor (auto w : adj[v]) {\n\t\t\t\tif (w == u)\n\t\t\t\t\tcontinue;\n\t\t\t\tself(self, v, w);\n\t\t\t\tauto nw = subtree_max[w] + (2 - w % 2);\n\t\t\t\tsubtree_max[v] = max(subtree_max[v], nw);\n\t\t\t\templace(v, pair{nw, w});\n\t\t\t}\n\t\t};\n\n\t\tauto dfs2 = [&](auto&& self, int u, int v) -> void {\n\t\t\tfor (auto w : adj[v]) {\n\t\t\t\tif (w == u)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tint rf = (max_two[v][0].second == w) ? max_two[v][1].first : max_two[v][0].first;\n\t\t\t\trf += 2 - v % 2;\n\t\t\t\templace(w, pair{rf, v});\n\t\t\t\tself(self, v, w);\n\t\t\t}\n\t\t};\n\n\t\tdfs1(dfs1, -1, 0);\n\t\ttotal_max[0] = subtree_max[0];\n\t\tdfs2(dfs2, -1, 0);\n\n\t\tvector<int> ans(n);\n\t\tfor (int i = 0; i < n; ++i) {\n\t\t\tans[i] = max(0, max_two[i][0].first);\n\t\t}\n\n\t\treturn ans;\n\t}\n};",
    "submit_ts": "1722697881",
    "subm_id": "1343162281"
}