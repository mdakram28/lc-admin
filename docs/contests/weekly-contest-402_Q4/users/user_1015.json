{
    "username": "ykamo",
    "submission": "class BIT:\n    def __init__(self, N):\n        self.size = N\n        self.bit = [0]*(N+1)\n\n    def sum(self, i):\n        res = 0\n        while i > 0:\n            res += self.bit[i]\n            i -= -i & i\n        return res\n\n    def add(self, i, x):\n        while i <= self.size:\n            self.bit[i] += x\n            i += -i & i\nclass Solution:\n    def countOfPeaks(self, nums: List[int], queries: List[List[int]]) -> List[int]:\n        n = len(nums)\n        d = BIT(n)\n        for i in range(1, n-1):\n            if nums[i] > nums[i-1] and nums[i] > nums[i+1]:\n                d.add(i, 1)\n        ans = []\n        #print(nums)\n        for q in queries:\n            if q[0] == 1:\n                if q[2] - q[1] <= 1:\n                    ans.append(0)\n                else:\n                    #print(\"x\", q[2]-1, d.sum(q[2]-1))\n                    #print(\"y\", q[1], d.sum(q[1]))\n                    ans.append(d.sum(q[2]-1) - d.sum(q[1]))\n            else:\n                i, v = q[1], q[2]\n                if 0 < i - 1 < n - 1:\n                    if nums[i-1] > nums[i-2] and nums[i-1] > nums[i]:\n                        if nums[i-1] > nums[i-2] and nums[i-1] > v:\n                            pass\n                        else:\n                            d.add(i-1, -1)\n                    else:\n                        if nums[i-1] > nums[i-2] and nums[i-1] > v:\n                            d.add(i-1, 1)\n                if 0 < i < n - 1:\n                    if nums[i] > nums[i-1] and nums[i] > nums[i+1]:\n                        if v > nums[i-1] and v > nums[i+1]:\n                            pass\n                        else:\n                            d.add(i, -1)\n                    else:\n                        if v > nums[i-1] and v > nums[i+1]:\n                            d.add(i, 1)\n                if 0 < i + 1 < n - 1:\n                    if nums[i+1] > nums[i] and nums[i+1] > nums[i+2]:\n                        if nums[i+1] > v and nums[i+1] > nums[i+2]:\n                            pass\n                        else:\n                            d.add(i+1, -1)\n                    else:\n                        if nums[i+1] > v and nums[i+1] > nums[i+2]:\n                            d.add(i+1, 1)\n                nums[i] = v\n        return ans\n        ",
    "submit_ts": "1718508411",
    "subm_id": "1289680471"
}