{
    "username": "vibrant-mayerhct",
    "submission": "class Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& b) {\n        constexpr int ma=1000000000;\n        struct ppp{\n            int cnt=0;\n            int l1=ma,l2=ma,r1=ma,r2=ma;\n            ppp operator +(const ppp &o)const{\n                ppp res;\n                res.cnt=cnt+o.cnt;\n                res.l1=l1;\n                res.r1=o.r1;\n                if(r1>r2&&r1>o.l1)\n                    ++res.cnt;\n                if(o.l1>o.l2&&o.l1>r1)\n                    ++res.cnt;\n                if(l2==ma)\n                    res.l2=o.l1;\n                else\n                    res.l2=l2;\n                if(o.r2==ma)\n                    res.r2=r1;\n                else\n                    res.r2=o.r2;\n                return res;\n            }\n        };\n        int n=a.size();\n        vector<ppp> f(4*n+10);\n        function<void(int,int,int,int,int)> modify=[&](int cur,int l,int r,int x,int k){\n            if(l==r){\n                f[cur]={0,k,ma,k,ma};\n                return;\n            }\n            int t=cur<<1;\n            int mid=l+r>>1;\n            if(x<=mid)\n                modify(t,l,mid,x,k);\n            else\n                modify(t+1,mid+1,r,x,k);\n            f[cur]=f[t]+f[t+1];\n        };\n        function<ppp(int,int,int,int,int)> query=[&](int cur,int l,int r,int x,int y){\n            if(x==l&&y==r)\n                return f[cur];\n            int t=cur<<1;\n            int mid=l+r>>1;\n            if(y<=mid)\n                return query(t,l,mid,x,y);\n            if(x>mid)\n                return query(t+1,mid+1,r,x,y);\n            ppp retl=query(t,l,mid,x,mid);\n            ppp retr=query(t+1,mid+1,r,mid+1,y);\n            return retl+retr;\n        };\n        function<void(int,int,int)> build=[&](int cur,int l,int r){\n            if(l==r){\n                f[cur]={0,a[l-1],ma,a[l-1],ma};\n                return;\n            }\n            int t=cur<<1;\n            int mid=l+r>>1;\n            build(t,l,mid);\n            build(t+1,mid+1,r);\n            f[cur]=f[t]+f[t+1];\n        };\n        build(1,1,n);\n        vector<int> ans;\n        for(auto &v:b){\n            auto tp=v[0];\n            auto x=v[1];\n            auto y=v[2];\n            if(tp==1)\n                ans.push_back(query(1,1,n,x+1,y+1).cnt);\n            else\n                modify(1,1,n,x+1,y);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1718506547",
    "subm_id": "539775685"
}