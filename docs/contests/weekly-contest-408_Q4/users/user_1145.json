{
    "username": "salyu",
    "submission": "using ll = long long;\n\ninline ll sq(ll v) {\n    return v * v;\n}\n\nclass Solution {\npublic:\n    bool canReachCorner(int X, int Y, vector<vector<int>>& circles) {\n        ll w = X, h = Y;\n        int n = circles.size();\n        vector<int> dsu(n), inner(n, 1);\n        iota(dsu.begin(), dsu.end(), 0);\n        function<int(int)> parent = [&](int a) {\n            if (dsu[a] != dsu[dsu[a]]) {\n                dsu[a] = parent(dsu[a]);\n            };\n            return dsu[a];\n        };\n        auto join = [&](int a, int b) {\n            dsu[parent(a)] = parent(b);\n        };\n\n        for (int i = 0; i < n; ++i) {\n            auto & ci = circles[i];\n            if (ci[0] - ci[2] > w || ci[1] - ci[2] > h) {\n                inner[i] = 0;\n                continue;\n            }\n            if (ci[0] > w && ci[1] > h && sq(ci[0] - w) + sq(ci[1] - h) > sq(ci[2])) {\n                inner[i] = 0;\n                continue;\n            }\n            for (int j = i + 1; j < n; ++j) {\n                auto & cj = circles[j];\n                ll x = ci[0] - cj[0],\n                    y = ci[1] - cj[1],\n                    r = ci[2] + cj[2];\n                if (x * x + y * y <= r * r) {\n                    join(i, j);\n                }\n            }\n        }\n        constexpr int L = 1, T = 2, R = 4, B = 8;\n        unordered_map<int, int> m;\n        for (int i = 0; i < n; ++i) {\n            if (!inner[i]) {\n                continue;\n            }\n            auto & c = circles[i];\n            ll x = c[0], y = c[1], r = c[2];\n            int v = 0;\n            if (r >= x && (y * y >= r * r - x * x || y <= h || sq(y - h) <= r * r - x * x)) {\n                v |= L;\n            }\n            if (r >= y && (x * x >= r * r - y * y || x <= w || sq(x - w) <= r * r - y * y)) {\n                v |= B;\n            }\n            ll dx = abs(x - w);\n            if (r >= dx && (y * y >= r * r - dx * dx || y <= h || sq(y - h) <= r * r - dx * dx)) {\n                v |= R;\n            }\n            ll dy = abs(y - h);\n            if (r >= dy && (x * x >= r * r - dy * dy || x <= w || sq(x - w) <= r * r - dy * dy)) {\n                v |= T;\n            }\n            m[parent(i)] |= v;\n        }\n        for (auto [k, v] : m) {\n            if ((v & L) && (v & R)\n                || (v & L) && (v & B)\n                || (v & B) && (v & T)\n                || (v & T) && (v & R)) {\n                return false;\n            }\n        }\n        return true;\n    }\n};",
    "submit_ts": "1722139126",
    "subm_id": "1335808552"
}