{
    "username": "nicolasalba",
    "submission": "#define ACTIVE_DEBUG\n\n// ############ Ignore macros and debugger ########################\n#include \"bits/stdc++.h\"\nusing namespace std;\n\n#define pb push_back\n#define F first\n#define S second\n#define all(x) (x).begin(), (x).end()\n#define sortt(x) sort(all(x))\n\nusing ll = long long;\nusing ld = long double;\nusing pi = pair<int, int>;\nusing pl = pair<ll, ll>;\nusing ti = tuple<long long, long long, long long>;\nusing vi = vector<int>;\nusing vb = vector<bool>;\nusing vl = vector<ll>;\nusing vs = vector<string>;\nusing vvl = vector<vl>;\nusing vpl = vector<pl>;\n\ntemplate<class T> using pql = priority_queue<T,vector<T>,greater<T>>;\ntemplate<class T> using pqg = priority_queue<T>;\n\nvoid __print(int x) {cout << x;}\nvoid __print(long long x) {cout << x;}\nvoid __print(string x) {cout << x;}\nvoid __print(char x) {cout << '\\'' << x << '\\'';}\nvoid __print(bool x) {cout << (x ? \"T\" : \"F\");}\n\nvoid __print(map<ll,ll> mp) {\n    for (auto p : mp) {\n        cout << p.F << \":\" << p.S << \",\";\n    }\n}\n\ntemplate<typename T> // for data structures (vector, set, map, etc)\n\nvoid __print(const T &xs)\n{cout << \"[ \"; for (auto &x : xs) {__print(x);cout << ' ';}cout << ']';}\n\nvoid _print()\n{cout << \"]\" << endl;}\n\ntemplate <typename T, typename... V>\nvoid _print(T t, V... v)\n{__print(t); if (sizeof...(v)) cout << \", \"; _print(v...);}\n\n#ifdef ACTIVE_DEBUG\n    #define deb(x...) cout << \"[\" << #x << \"] = [\", _print(x)\n    #define LINE cout << \"-------------------\" << endl;\n#else\n    #define deb(x...) \"C\"\n    #define LINE \"C\"\n#endif\n// ############ Ignore macros and debugger ########################\nclass Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        ll n = s.size();\n        ll ans = 0;\n        \n        vl nxtZero(n+1,n);\n        for (int i =n-1;i>=0;i--) {\n            nxtZero[i] = nxtZero[i+1];\n            if (i+1<n && s[i+1] == '0') nxtZero[i]= i+1;\n        }\n\n        vl pf(n+1);\n        for (int i =0;i<n;i++) {\n            pf[i+1] = pf[i] + (s[i] == '1');\n        }\n\n        for (int i =0;i<n;i++) {\n            ll actual = i;\n            // LINE;\n            // deb(i);\n            while (actual < n) {\n                ll o = pf[actual+1]-pf[i];\n                ll z = actual-i+1 - o;\n                ll need = z*z-o;\n                // deb(o,z,need);\n                if (need <= 0) {\n                    ans += nxtZero[actual]-actual;\n                    // deb(actual,nxtZero[actual]);\n                    // deb(nxtZero[actual]-actual);\n                    actual = nxtZero[actual];\n                    // deb(actual);\n                } else {\n                    actual = actual + need;\n                    // deb(actual);\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1722135784",
    "subm_id": "1335713571"
}