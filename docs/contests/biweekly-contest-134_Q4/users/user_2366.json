{
    "username": "Kalki_2898",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n=nums.size();\n        vector<vector<int>>bit(n,vector<int>(30,0));\n        for(int i=0;i<n;i++){\n            int j=0;\n            while(nums[i]){\n                bit[i][j]+=nums[i]%2;\n                nums[i]/=2;\n                j++;\n            }\n        }\n        for(int i=1;i<n;i++){\n            for(int j=0;j<30;j++)bit[i][j]+=bit[i-1][j];\n        }\n        \n        long long final=0;\n        for(int i=0;i<n;i++){\n            \n            int mn=n+1;\n            int mx=-1;\n            \n            int st=i,end=n-1;\n            while(st<=end){\n                int mid=(st+end)/2;\n                int ans=0;\n                if(i==0){\n                    for(int j=0;j<30;j++){\n                       int curr=bit[mid][j];\n                       if(curr==mid+1)ans+=(1<<j);\n                    }\n                }\n                else{\n                    for(int j=0;j<30;j++){\n                        int curr=(bit[mid][j]-bit[i-1][j]);\n                        if(curr==mid-i+1)ans+=(1<<j);\n                    }\n                }\n                \n                if(ans==k){\n                    mx=max(mx,mid);\n                    mn=min(mn,mid);\n                    st=mid+1;\n                }\n                else if(ans>k){\n                    st=mid+1;\n                }\n                else{\n                   end=mid-1;\n                }\n            }\n            \n              st=i,end=n-1;\n            while(st<=end){\n                int mid=(st+end)/2;\n                int ans=0;\n                if(i==0){\n                    for(int j=0;j<30;j++){\n                       int curr=bit[mid][j];\n                       if(curr==mid+1)ans+=(1<<j);\n                    }\n                }\n                else{\n                    for(int j=0;j<30;j++){\n                        int curr=(bit[mid][j]-bit[i-1][j]);\n                        if(curr==mid-i+1)ans+=(1<<j);\n                    }\n                }\n                \n                if(ans==k){\n                    mx=max(mx,mid);\n                    mn=min(mn,mid);\n                    end=mid-1;\n                }\n                else if(ans>k){\n                    st=mid+1;\n                }\n                else{\n                   end=mid-1;\n                }\n            }\n            \n            if(mn!=-1 and mx!=-1)final+=(mx-mn+1);\n        }\n        return final;\n        \n        \n    }\n};",
    "submit_ts": "1720281430",
    "subm_id": "1311824891"
}