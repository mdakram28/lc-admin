{
    "username": "solumn",
    "submission": "class Solution:\n    def minimumSum(self, grid: List[List[int]]) -> int:\n        m, n = len(grid), len(grid[0])\n        \n        def shrink(a, b, c, d) -> int:  # \u4e0a\uff0c\u4e0b\uff0c\u5de6\uff0c\u53f3 \u56db\u754c\n            if a > b or c > d:\n                return 0\n            first_x, first_y = b, d\n            last_x, last_y = a, c\n            for i in range(a, b+1):\n                for j in range(c, d+1):\n                    if grid[i][j] == 1:\n                        first_x = min(first_x, i)\n                        first_y = min(first_y, j)\n                        last_x = max(last_x, i)\n                        last_y = max(last_y, j)\n            if last_y < first_y or last_x < first_x:\n                return 0\n            return (last_y - first_y + 1) * (last_x - first_x + 1)\n        \n        @cache\n        def dfs(a, b, c, d) -> int:\n            mn = inf\n            # \u6a2a\u5207\u4e24\u5200\n            for l in range(a, b):\n                for r in range(l+2, b+1):\n                    x, y, z = shrink(a, l, c, d), shrink(l+1, r-1, c, d), shrink(r, b, c, d)\n                    if x == 0 or y == 0 or z == 0:\n                        continue\n                    mn = min(mn, x+y+z)\n            # \u7ad6\u5207\u4e24\u5200\n            for l in range(c, d):\n                for r in range(l+2, d+1):\n                    x, y, z = shrink(a, b, c, l), shrink(a, b, l+1, r-1), shrink(a, b, r, d)\n                    if x == 0 or y == 0 or z == 0:\n                        continue\n                    mn = min(mn, x + y + z)\n            # \u6a2a 1\uff0c\u5728\u4e0a\u534a\u8fb9\u7ad6 1\n            for row in range(a, b+1):\n                for col in range(c, d+1):\n                    x, y, z = shrink(a, row, c, col) , shrink(a, row, col+1, d) , shrink(row+1, b, c, d)\n                    if x == 0 or y == 0 or z == 0:\n                        continue\n                    mn = min(mn, x + y + z)\n            # \u6a2a 1\uff0c\u5728\u4e0b\u534a\u8fb9\u7ad6 1\n            for row in range(a, b+1):\n                for col in range(c, d+1):\n                    x, y, z = shrink(a, row, c, d) , shrink(row+1, b, c, col) , shrink(row+1, b, col+1, d)\n                    if x == 0 or y == 0 or z == 0:\n                        continue\n                    mn = min(mn, x + y + z)\n            \n            # \u7ad6 1\uff0c\u5728\u5de6\u534a\u8fb9\u6a2a 1\n            for col in range(c, d+1):\n                for row in range(a, b + 1):\n                    x, y, z = shrink(a, row, c, col) , shrink(row+1, b, c, col) , shrink(a, b, col+1, d)\n                    if x == 0 or y == 0 or z == 0:\n                        continue\n                    mn = min(mn, x + y + z)\n            \n            # \u7ad6 1\uff0c\u5728\u53f3\u534a\u8fb9\u6a2a 1\n            for col in range(c, d+1):\n                for row in range(a, b + 1):\n                    x, y, z = shrink(a, b, c, col) , shrink(a, row, col+1, d) , shrink(row+1, b, col+1, d)\n                    if x == 0 or y == 0 or z == 0:\n                        continue\n                    mn = min(mn, x + y + z)\n            \n            return mn\n            \n                \n        return dfs(0, m-1, 0, n-1)",
    "submit_ts": 1719114525.0
}