{
    "username": "psb0623",
    "submission": "\n\n\nclass Solution {\n    map<int,int> m[55][5010];\npublic:\n    int maximumLength(vector<int>& numss, int k) {\n    \tint K = k;\n        vector<int> v(numss), nums(numss);\n        sort(v.begin(), v.end());\n        v.erase(unique(v.begin(), v.end()), v.end());\n        for(int& x:nums) x = lower_bound(v.begin(), v.end(), x) - v.begin();\n        int n = nums.size();\n\t\tint ans = 0;\n\n        for(int k=0;k<=50;k++) {\n            for(int j=0;j<v.size();j++) {\n                m[k][j][-1] = 0;\n            }\n        }\n\t\n\t\tfor(int k=0;k<=K;k++) {\n\t\t\tint mx = 0;\n\t\t\tfor(int i=0;i<n;i++) {\n\t\t\t\tint j = nums[i];\n\n\t\t\t\tauto it = m[k][j].rbegin();\n                // it--;\n                int back = (*it).second;\n                m[k][j][i] = 0;\n\t\t\t\t\n\t\t\t\tm[k][j][i] = max(m[k][j][i],back  + 1);\n\t\t\t\tif(k-1 >= 0) {\n\t\t\t\t\tm[k][j][i] = max(m[k][j][i], mx + 1);\n\t\t\t\t\tmx = max(mx, m[k-1][nums[i]][i]);\n\t\t\t\t}\n\t\t\t\tans = max(ans, m[k][j][i]);\n\t\t\t}\t\n\t\t}\n\t\t\n\t\t\n        /*for(int j=0;j<v.size();j++) {\n            d[0][j] = nums[0] == j ? 1 : 0;\n            ans = max(ans, d[0][j]);\n        }\n        \n        \n        \n        for(int i=1;i<n;i++) {\n            swap(d, p);\n            memset(d, 0, sizeof(d));\n            for(int k=0;k<=K;k++) {\n                for(int j=0;j<v.size();j++) {\n                    if(j == nums[i]) {\n                        d[k][nums[i]] = max(d[k][nums[i]], p[k][j] + 1);\n                    } else {\n                    \tint res = 0;\n                        if(k==0) res = max(res, 1);\n                        if(k-1>=0) res = max(res, p[k-1][j] + 1);\n                        d[k][nums[i]] = max(d[k][nums[i]], res);\n                    }\n                }\n\t\t\t\tans = max(ans, d[k][nums[i]]);\n                for(int j=0;j<v.size();j++) {\n                \tif(j == nums[i]) continue;\n                \td[k][j] = p[k][j];\n                \tans = max(ans, d[k][j]);\n\t\t\t\t}\n            }\n        }*/\n        return ans;\n    }\n};",
    "submit_ts": 1717861877.0
}