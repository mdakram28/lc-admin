{
    "username": "srihari100499",
    "submission": "class Solution {\npublic:\n    vector<int>timeTaken(vector<vector<int>>&ed)\n    {\n        int n=ed.size()+1;\n        vector<vector<int>>adj(n);\n        for(auto &e:ed)\n        {\n            adj[e[0]].push_back(e[1]);\n            adj[e[1]].push_back(e[0]);\n        }\n        \n        vector<int>ans(n),temp(n);\n        \n        auto dfs=[&](int x,auto &dfs,int p)\n        {\n            if(false)               return 0;\n            int ans=0;\n            for(auto nxt:adj[x])\n            {\n                if(nxt!=p)\n                {\n                    int curr=(nxt&1)?1:2;\n                    curr+=dfs(nxt,dfs,x);\n                    ans=max(ans,curr);\n                }\n            }\n            return temp[x]=ans;\n        };\n        \n        int curr_ans=dfs(0,dfs,-1);\n        \n        auto reroute=[&](int x,auto &reroute,int curr,int p)\n        {\n            if(false)                               return;\n            ans[x]=curr;\n            int mx=0,mx2=0;\n            \n            for(auto nxt:adj[x])\n            {\n                int tt=(nxt&1)?1:2;\n                if(mx<temp[nxt]+tt)            mx2=mx,mx=temp[nxt]+tt;\n                else if(mx2<temp[nxt]+tt)      mx2=temp[nxt]+tt;\n            }\n            \n            \n            for(auto nxt:adj[x])\n            {\n                if(nxt!=p)\n                {\n                    int tt=(nxt&1)?1:2;\n                    int new_curr=(temp[nxt]+tt==mx)?mx2:mx;\n                    new_curr+=(x&1)?1:2;\n                    \n                    new_curr=max(new_curr,temp[nxt]);\n                    \n                    int ta=temp[x],tn=temp[nxt];\n                    temp[x]=(temp[nxt]+tt==mx)?mx2:mx;\n                    temp[nxt]=new_curr;\n                    \n                    \n                    \n                    reroute(nxt,reroute,new_curr,x);\n                    \n                    \n                    temp[x]=ta,temp[nxt]=tn;\n                }\n            }\n        };\n        \n        // [4,3,4,3,4,4,4]\n        \n        reroute(0,reroute,curr_ans,-1);\n        \n        \n        return ans;\n    }\n};",
    "submit_ts": "1722699931",
    "subm_id": "1343226610"
}