{
    "username": "NDR0216",
    "submission": "void COUT(auto x) { // COUT: cout wrapper\n    cout << x;\n}\ntemplate <typename T1, typename T2> void COUT(pair<T1, T2> p) {\n    cout << '{';\n    COUT(p.first);\n    cout << \", \";\n    COUT(p.second);\n    cout << '}';\n}\ntemplate <typename T> void COUT(vector<T> v) {\n    cout << '[';\n    for (int i = 0; i < v.size(); i++) {\n        if (i != 0) {\n            cout << \", \";\n        }\n        COUT(v[i]);\n    }\n    cout << ']';\n}\nvoid PRINT(auto x) {\n    COUT(x);\n    cout << endl;\n}\nvoid PRINT(auto x, auto... args) { // python-like print\n    COUT(x);\n    cout << \", \";\n    PRINT(args...);\n}\nvoid PRINT_ARR(auto* arr, size_t n) { // python-like print for array\n    cout << '[';\n    for (int i = 0; i < n; i++) {\n        if (i != 0) {\n            cout << \", \";\n        }\n        COUT(arr[i]);\n    }\n    cout << ']' << endl;\n}\n\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        map<int, int> dict;\n\n        long long cnt = 0;\n        for (int i = 0; i < nums.size(); i++) {\n            map<int, int> new_dict;\n            for (auto it = dict.begin(); it != dict.end(); ++it) {\n                int key = it->first;\n                int value = it->second;\n\n                if (!new_dict.contains(key&nums[i])) {\n                    new_dict[key&nums[i]] = value;\n                }\n\n                // new_dict[key&nums[i]] = min(new_dict[key&nums[i]], value);\n            }\n\n            if (!new_dict.contains(nums[i])) {\n                new_dict[nums[i]] = i;\n            }\n\n            auto found = new_dict.find(k);\n            if (found != new_dict.end()) {\n                int v = found->second;\n                ++found;\n                if (found == new_dict.end()) {\n                    cnt += i+1 - v;\n                } else {\n                    cnt += found->second - v;\n                }\n            }\n\n            dict = new_dict;\n\n            // for (auto it = dict.begin(); it != dict.end(); ++it) {\n            //     int key = it->first;\n            //     int value = it->second;\n\n            //    PRINT(key, value);\n            // }\n        }\n\n        return cnt;\n    }\n};",
    "submit_ts": "1720279119",
    "subm_id": "1311738237"
}