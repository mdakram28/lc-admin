{
    "username": "krsumitsingh2004",
    "submission": "class Solution {\n    public long countSubarrays(int[] arr, int k) {\n        int n=arr.length;long ans=0;int[][]pre=new int[n][32];\n\t\t\tfor(int i=0;i<n;i++){\n\t\t\t\tfor (int j = 0; j <32 ; j++) {\n\t\t\t\t\tint d=1<<j;\n\t\t\t\t\tif((arr[i]&d)!=0){\n\t\t\t\t\t\tpre[i][j]=1;\n\t\t\t\t\t}\n\t\t\t\t\tif(i>0)pre[i][j]+=pre[i-1][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int i=0;i<n;i++){\n\t\t\t\t//min\n\t\t\t\tint l=i,r=n-1;int mn=-1,mx=-1;\n\t\t\t\twhile (l<=r){\n\t\t\t\t\tint mid=(l+r)/2;int fl=1;\n\t\t\t\t\tfor (int j = 0; j <32 ; j++) {\n\t\t\t\t\t\tint d=1<<j;\n\t\t\t\t\t\tif((k&d)!=0){\n\t\t\t\t\t\t\tint bit=pre[mid][j];\n\t\t\t\t\t\t\tif(i>0)bit-=pre[i-1][j];\n\t\t\t\t\t\t\tif(mid-i+1!=bit)fl=0;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tint bit=pre[mid][j];\n\t\t\t\t\t\t\tif(i>0)bit-=pre[i-1][j];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(mid-i+1==bit)fl=2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n                    if(fl==2){\n                        l=mid+1;\n                    }else\n\t\t\t\t\tif(fl==0){\n\t\t\t\t\t\tr=mid-1;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tl=mid+1;mx=mid;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(mx!=-1){\n\t\t\t\t\tl=i;r=mx;\n\t\t\t\t\twhile (l<=r){\n\t\t\t\t\t\tint mid=(l+r)/2;int fl=1;\n\t\t\t\t\t\tfor (int j = 0; j <32 ; j++) {\n\t\t\t\t\t\t\tint d=1<<j;\n\t\t\t\t\t\t\tif((k&d)!=0){\n\t\t\t\t\t\t\t\tint bit=pre[mid][j];\n\t\t\t\t\t\t\t\tif(i>0)bit-=pre[i-1][j];\n\t\t\t\t\t\t\t\tif(mid-i+1!=bit)fl=0;\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tint bit=pre[mid][j];\n\t\t\t\t\t\t\t\tif(i>0)bit-=pre[i-1][j];\n\t\t\t\t\t\t\t\tif(mid-i+1==bit)fl=0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(fl==0){\n\t\t\t\t\t\t\tl=mid+1;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tr=mid-1;mn=mid;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(mx==-1||mn==-1)continue;\n\t\t\t\tans+=(mx-mn+1);\n\t\t\t}\n\n\t\t\treturn ans;\n    }\n}",
    "submit_ts": "1720279910",
    "subm_id": "1311769893"
}