{
    "username": "coleworld223",
    "submission": "struct DSU {\n    std::vector<int> f, siz;\n    \n    DSU() {}\n    DSU(int n) {\n        init(n);\n    }\n    \n    void init(int n) {\n        f.resize(n);\n        std::iota(f.begin(), f.end(), 0);\n        siz.assign(n, 1);\n    }\n    \n    int find(int x) {\n        while (x != f[x]) {\n            x = f[x] = f[f[x]];\n        }\n        return x;\n    }\n    \n    bool same(int x, int y) {\n        return find(x) == find(y);\n    }\n    \n    bool merge(int x, int y) {\n        x = find(x);\n        y = find(y);\n        if (x == y) {\n            return false;\n        }\n        siz[x] += siz[y];\n        f[y] = x;\n        return true;\n    }\n    \n    int size(int x) {\n        return siz[find(x)];\n    }\n};\nclass Solution {\npublic:\n    long long minimumOperations(vector<int>& nums, vector<int>& target) {\n      using ll = long long;\n      \n      auto solve = [&] (vector <int> d, map <int, vector <int>> ind) -> ll {\n        int n = nums.size();\n        DSU dsu(n);\n        vector <bool> vis (n);\n        d.push_back(0);\n        sort(d.rbegin(), d.rend());\n        int cnt = 0;\n        ll res = 0;\n        for (int i = 0; i < (int) d.size() - 1; i++) {\n          for (int id : ind[d[i]]) {\n            vis[id] = 1;\n            cnt++;\n          }\n          for (int id : ind[d[i]]) {\n            if (id - 1 >= 0 && vis[id - 1]) {\n              cnt -= dsu.merge(id, id - 1);\n            }\n            if (id + 1 < n && vis[id + 1]) {\n              cnt -= dsu.merge(id, id + 1);\n            }\n          }\n          res += (1ll * cnt * (d[i] - d[i + 1]));\n        }\n        return res;\n      };\n      int n = nums.size();\n      set <int> d1, d2;\n      map <int, vector <int>> ind1, ind2;\n      for (int i = 0; i < n; i++) {\n        int d = (nums[i] - target[i]);\n        if (d < 0) {\n          d2.insert(abs(d));\n          ind2[abs(d)].push_back(i);\n        }\n        else {\n          d1.insert(d);\n          ind1[d].push_back(i);\n        }\n      }\n      vector <int> dif1, dif2;\n      for (int x : d1) {\n        dif1.push_back(x);\n      }\n      for (int x : d2) {\n        dif2.push_back(x);\n      }\n      ll ans = 0;\n      ans += solve(dif1, ind1);\n      ans += solve(dif2, ind2);\n      return ans;\n      \n    }\n};",
    "submit_ts": "1721531436",
    "subm_id": "1327960910"
}