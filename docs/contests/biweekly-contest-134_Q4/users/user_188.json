{
    "username": "Atma_",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        long long ans=0;\n        int n=nums.size();\n        vector<vector<int>> pref(n+1, vector<int>(31,0));\n        for(int i=0;i<n;++i){\n            for(int j=0;j<31;++j){\n                if((nums[i]>>j)&1){\n                    pref[i+1][j]=pref[i][j]+1;\n                }\n                else{\n                    pref[i+1][j]=pref[i][j];\n                }\n            }\n        }\n        for(int i=0;i<n;++i){\n            if(nums[i]<k) continue;\n            int low=i,mid,high=n-1,lower=n,higher=n;\n            while(low<=high){\n                mid=(low+high)/2;\n                int val=0;\n                for(int j=0;j<31;++j){\n                    int one=pref[mid+1][j]-pref[i][j];\n                    int zero=mid-i+1-one;\n                    if(one>0 && zero==0) val|=(1<<j);\n                }\n                if(val<=k){\n                    lower=mid;\n                    high=mid-1;\n                } \n                else low=mid+1;\n            }\n            low=i;high=n-1;\n            while(low<=high){\n                mid=(low+high)/2;\n                int val=0;\n                for(int j=0;j<31;++j){\n                    int one=pref[mid+1][j]-pref[i][j];\n                    int zero=mid-i+1-one;\n                    if(one>0 && zero==0) val|=(1<<j);\n                }\n                if(val>=k) low=mid+1;\n                else{\n                    higher=mid;\n                    high=mid-1;\n                }\n            }\n            //cout<<higher<<\" \"<<lower<<\" \";\n            ans+=higher-lower;\n            \n        }\n        //cout<<endl;\n        return ans;\n    }\n};",
    "submit_ts": "1720278576",
    "subm_id": "1311715190"
}