{
    "username": "pikapika123",
    "submission": "#include <vector>\n#include <algorithm>\n#include <climits>\n#include <cmath>\n\nclass Solution {\npublic:\n    int minimumDifference(std::vector<int>& a, int k) {\n        const int B = 31;\n        const int n = a.size();\n        std::vector<std::vector<int>> pre(B, std::vector<int>(n + 1, 0));\n\n        for (int i = 0; i < B; i++) {\n            int mask = 1 << i;\n            for (int j = 0; j < n; j++) {\n                pre[i][j + 1] = pre[i][j];\n                if (a[j] & mask) {\n                    pre[i][j + 1]++;\n                }\n            }\n        }\n\n        auto get_num = [&](int l, int r) {\n            int ans = 0;\n            for (int i = 0; i < B; i++) {\n                int c = pre[i][r] - pre[i][l - 1];\n                if (c == r - l + 1) {\n                    ans |= 1 << i;\n                }\n            }\n            return ans;\n        };\n\n        auto find_min_larger = [&](int idx) {\n            if (a[idx - 1] < k) {\n                return a[idx - 1];\n            }\n            int l = 1, r = idx;\n            while (l < r) {\n                int m = (l + r) / 2;\n                int v = get_num(m, idx);\n                if (v >= k) {\n                    r = m;\n                } else {\n                    l = m + 1;\n                }\n            }\n            return get_num(l, idx);\n        };\n\n        auto find_max_less = [&](int idx) {\n            int l = 1, r = idx;\n            while (l < r) {\n                int m = (l + r + 1) / 2;\n                int v = get_num(m, idx);\n                if (v < k) {\n                    l = m;\n                } else {\n                    r = m - 1;\n                }\n            }\n            return get_num(l, idx);\n        };\n\n        int res = std::abs(a[0] - k);\n        for (int i = 2; i <= n; i++) {\n            int large = find_min_larger(i);\n            int less = find_max_less(i);\n            res = std::min(res, std::abs(large - k));\n            res = std::min(res, std::abs(less - k));\n        }\n        return res;\n    }\n};\n\n",
    "submit_ts": 1717298452.0
}