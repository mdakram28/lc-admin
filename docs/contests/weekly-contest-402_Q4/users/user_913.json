{
    "username": "kynowoo",
    "submission": "class Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int m = 1e5 + 10;\n        vector<int> sn(m);\n\n        auto add = [&](int x, int v)\n        {\n            while (x < m)\n            {\n                sn[x] += v;\n                x += x & (-x);\n            }\n        };\n\n        auto chk = [&](int x) -> int\n        {\n            int ans = 0;\n            while (x > 0)\n            {\n                ans += sn[x];\n                x -= x & (-x);\n            }\n\n            return ans;\n        };\n\n        int n = nums.size();\n        auto is_peak = [&](int i) -> bool\n        {\n            if (0 <= i - 1 && i + 1 < n)\n            {\n                if (nums[i - 1] < nums[i] && nums[i] > nums[i + 1])\n                {\n                    return true;\n                }\n            }\n\n            return false;\n        };\n\n        for (int i = 0; i < n; ++i)\n        {\n            if (is_peak(i))\n            {\n                add(i, 1);\n            }\n        }\n        \n        vector<int> ans;\n        for (vector <int> &q : queries)\n        {\n            if (q[0] == 1)\n            {\n                if (q[2] - q[1] >= 2)\n                {\n                    ans.push_back(chk(q[2] - 1) - chk(q[1]));\n                }\n                else\n                {\n                    ans.push_back(0);\n                }\n            }\n            \n            if (q[0] == 2)\n            {\n                int i = q[1];\n                for (int k = -1; k <= 1; ++k)\n                {\n                    if (is_peak(i + k))\n                    {\n                        add(i + k, -1);\n                    }\n                }\n\n                nums[q[1]] = q[2];\n                \n                for (int k = -1; k <= 1; ++k)\n                {\n                    if (is_peak(i + k))\n                    {\n                        add(i + k, 1);\n                    }\n                }\n            }\n        }\n\n        return ans;\n    }\n};",
    "submit_ts": 1718508180.0
}