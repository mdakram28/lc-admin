{
    "username": "luojh",
    "submission": "class Solution {\n    public long countSubarrays(int[] nums, int k) {\n        int[] arr=new int[30];\n        for(int i=0;i<30;i++){\n            arr[i]=(i>>i)&1;\n        }\n        long res=0;\n        int n=nums.length;\n        int[][] sum=new int[n+1][30];\n        for(int i=0;i<n;i++){\n            sum[i+1]=(int[])sum[i].clone();\n            for(int j=0;j<30;j++){\n                sum[i+1][j]+=(nums[i]>>j)&1;\n            }    \n        }\n        \n        for(int j=0;j<n;j++){\n            if(nums[j]<k) continue;\n            int left=0,right=j;\n            int st=-1,ed=-1;\n            while(left<=right){\n                int mid=(left+right)/2;\n                int cur=0;\n                for(int i=0;i<30;i++){\n                    int v=sum[j+1][i]-sum[mid][i];\n                    if(v==j-mid+1){\n                        cur+=1<<i;\n                    }\n                }\n                \n                if(cur>=k){\n                    st=mid;\n                    right=mid-1;\n                }else{\n                    left=mid+1;\n                }\n            }\n\n            left=0;\n            right=j;\n            while(left<=right){\n                int mid=(left+right)/2;\n                int cur=0;\n                for(int i=0;i<30;i++){\n                    int v=sum[j+1][i]-sum[mid][i];\n                    if(v==j-mid+1){\n                        cur+=1<<i;\n                    }\n                }\n                if(cur<=k){\n                    ed=mid;\n                    left=mid+1;\n                }else{\n                    right=mid-1;\n                }\n            } \n\n            if(st!=-1&&ed!=-1){\n               res+=ed-st+1; \n            }\n        }\n\n        return res;\n    }\n}",
    "submit_ts": "1720279868",
    "subm_id": "544569378"
}