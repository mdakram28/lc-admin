{
    "username": "agrim07",
    "submission": "#define MOD 1000000007\n#define INF 1000000010\n#define endl \"\\n\"\n#define pb push_back\n#define ppb pop_back\n#define ff first\n#define ss second\n#define sz(x) ((int)(x).size())\n#define all(x) (x).begin(), (x).end()\n\nclass Solution {\npublic:\n    Solution() {\n        ios::sync_with_stdio(false); cin.tie(0);\n    }\n    \n    int maximumLength(vector<int>& v, int k) {\n        int n = sz(v);\n        vector<vector<int>> dp(n, vector<int>(k + 1, 1));\n\n        int ans = 1;\n        for(int j = 0; j <= k; j++) {\n            unordered_map<int, int> prev, curr;\n            int max1, max2;\n            max1 = max2 = 0;\n\n            curr[v[0]] = dp[0][j];\n            if(j) {\n                max1 = prev[v[0]] = dp[0][j - 1];\n            }\n            for(int i = 1; i < n; i++) {\n                dp[i][j] = max({dp[i][j], 1 + curr[v[i]]});\n\n                if(j) {\n                    int add = max1;\n                    if(prev.count(v[i]) and prev[v[i]] == max1) \n                        add = max2;\n                    dp[i][j] = max(dp[i][j], 1 + add);\n                }\n\n                curr[v[i]] = dp[i][j];\n                if(j) {\n                    prev[v[i]] = dp[i][j - 1];\n                    int x = prev[v[i]];\n\n                    if(x >= max1) {\n                        max2 = max1;\n                        max1 = x;\n                    } else if(x >= max2) {\n                        max2 = x;\n                    }\n                }\n\n                ans = max(ans, dp[i][j]);\n            }\n        }\n\n        return ans;\n    }\n};",
    "submit_ts": 1717862109.0
}