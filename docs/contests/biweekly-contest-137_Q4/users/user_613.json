{
    "username": "Niyazbekov Sultan",
    "submission": "class Solution {\npublic:\n    bool was[510][510];\n    int n,m;\n    vector<pair<int,int>> path;\n    long long ans;\n    vector<pair<int,int>> used;\n    map<pair<pair<int,int>,pair<int,int>>,bool> mp;\n\n    void update(){\n        for(int i=0;i<n;i++){\n            for(int j=0;j<m;j++){\n                was[i][j]=0;\n            }\n        }\n        for(int f=0;f<used.size();f++){\n            for(int i=0;i<n;i++){\n                for(int j=0;j<m;j++){\n                    if(used[f].first==i || used[f].second==j){\n                        was[i][j]=1;\n                    }\n                }\n            }\n        }\n    }\n    \n    void dp(vector<vector<int>>& x, int depth, long long sum){\n        if(depth==0){\n            ans=max(ans,sum);\n            return;\n        }\n        if(path.size()==2){\n            if(mp.count({path[1],path[0]}) || mp.count({path[0],path[1]})){\n                return;\n            }\n            mp[{path[0],path[1]}]=1;\n        }\n        vector<pair<long long,pair<int,int>>> v;\n        for(int i=0;i<n;i++){\n            for(int j=0;j<m;j++){\n                if(was[i][j])continue;\n                v.push_back({-x[i][j],{i,j}});\n            }\n        }\n        sort(v.begin(),v.end());\n        for(int i=0;i<min(4,(int)v.size());i++){\n            used.push_back({v[i].second.first,v[i].second.second});\n            update();\n            path.push_back({v[i].second.first,v[i].second.second});\n            dp(x,depth-1,sum-v[i].first);\n            path.pop_back();\n            used.pop_back();\n            update();\n        }\n    }\n\n    long long maximumValueSum(vector<vector<int>>& x) {\n        ans=-((long long)1e18);\n        n=x.size();\n        m=x[0].size();\n        dp(x,3,0);\n        return ans;\n    }\n};",
    "submit_ts": "1723909933",
    "subm_id": "1359211123"
}