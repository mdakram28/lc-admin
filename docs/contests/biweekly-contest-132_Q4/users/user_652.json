{
    "username": "hello_motto",
    "submission": "#define pii pair<int,int>\n#define INF 1000000007\nclass Solution {\npublic:\n    int f(multiset<pii>&ms,int val){\n        if(ms.size()==0) return  0;\n        auto it = ms.end();\n        it--;\n        if(it->second != val) {\n            return it->first;\n        }\n        if(ms.size()==1) return 0;\n        it--;\n        return it->first;\n    }\n    int maximumLength(vector<int>& v, int k) {\n        int n = v.size();\n        reverse(v.begin(),v.end());\n        v.push_back(0);\n        reverse(v.begin(),v.end());\n        \n        vector<vector<int>>dp(k+1,vector<int>(n+1,0));\n        int ans = 0;\n      \n        for(int i=0;i<=k;i++)dp[i][0] = 0;\n      \n        for(int j=0;j<=k;j++){\n              unordered_map<int,int>mp1;\n              unordered_map<int,int>mp;\n              multiset<pii>ms;\n            for(int i=1;i<=n;i++){\n                int op1 = mp1[v[i]]+1; // same in same row \n                int op2 = f(ms,v[i])+1;           //diff in prev row\n                dp[j][i] = max(op1,op2);\n                mp1[v[i]] = max(mp1[v[i]],dp[j][i]);\n                ans = max(ans,dp[j][i]);\n                if(j>=1){\n                    ms.erase({mp[v[i]],v[i]});\n                    mp[v[i]] = max(mp[v[i]],dp[j-1][i]);\n                    ms.insert({mp[v[i]],v[i]});\n                }\n                \n            }\n            \n        }\n        \n        // for(int i=0;i<=k;i++){\n        //     for(int j=0;j<=n;j++){\n        //         cout<<dp[i][j]<<\" \";\n        //     }\n        //     cout<<endl;\n        // }\n        \n        // int ans = 0;\n        for(int i=0;i<=k;i++){\n            ans = max(ans,dp[i][n]);\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1717861797.0
}