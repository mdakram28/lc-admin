{
    "username": "dpdpdp",
    "submission": "class Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& b) {\n        int n=a.size(),c=sqrt(n);\n        while(a.size()%c)a.push_back(0);\n        int d=a.size()/c;\n        vector<int>e(d+1,0);\n        //cout<<\"gg\"<<endl;\n        for(int i=0;i<n;++i){\n            if(i==0 || i==n-1)continue;\n            int f=i/c;\n            if(a[i]>a[i-1] && a[i]>a[i+1]){\n                e[f]++;\n                //cout<<\"i: \"<<i<<\" f: \"<<e[f]<<endl;\n            }\n        }\n        vector<int>ans;\n        for(auto &x:b){\n            int op=x[0],y=x[1],z=x[2],tmp=0;\n            if(op==1){\n                if(z-y<=3*c){\n                    for(int i=y+1;i<z;++i){\n                        if(i==0 || i==n-1)continue;\n                        if(a[i]>a[i-1] && a[i]>a[i+1])tmp++;\n                    }\n                    //cout<<\"tmp1:\"<<tmp<<endl;\n                }\n                else{\n                    int yr=y/c*c+c,zl=z/c*c;\n                    for(int i=y+1;i<yr;++i){\n                        if(i==0 || i==n-1)continue;\n                        if(a[i]>a[i-1] && a[i]>a[i+1])tmp++;\n                    }\n                    for(int i=yr;i<zl;i+=c){\n                        int f=i/c;\n                        tmp+=e[f];\n                    }\n                    for(int i=zl;i<z;++i){\n                        if(i==0 || i==n-1)continue;\n                        if(a[i]>a[i-1] && a[i]>a[i+1])tmp++;\n                    }\n                    //cout<<\"tmp2:\"<<tmp<<endl;\n                }\n                ans.push_back(tmp);\n            }\n            else{\n                for(int i=y-1;i<=y+1;++i){\n                    if(i<=0 || i>=n-1)continue;\n                    int f=i/c;\n                    if(a[i]>a[i-1] && a[i]>a[i+1])e[f]--;\n                }\n                a[y]=z;\n                for(int i=y-1;i<=y+1;++i){\n                    if(i<=0 || i>=n-1)continue;\n                    int f=i/c;\n                    if(a[i]>a[i-1] && a[i]>a[i+1])e[f]++;\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1718506558",
    "subm_id": "539775754"
}