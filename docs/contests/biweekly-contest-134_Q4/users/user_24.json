{
    "username": "Ma_Lin",
    "submission": "class Solution {\npublic:\n    int bz[100005][18], n, K;\n    vector<int> a;\n    \n    void calc_bz(){\n        int i, j, k;\n        for (i = 0; i < n; ++i) bz[i][0] = a[i];\n        for (j = 1; (1<<j) <= n; ++j)\n            for (i = 0; i < n; ++i){\n                bz[i][j] = bz[i][j - 1];\n                k = i + (1<<(j - 1));\n                if (k < n) bz[i][j] &= bz[k][j - 1];\n            }\n    }\n    \n    int suan(int x, int y){\n        int t = (int)(log(y - x + 1.0) / log(2.0));\n        while ((1<<(t + 1)) <= (y - x + 1)) ++t;\n        return bz[x][t] & bz[y - (1<<t) + 1][t];\n    }\n    \n    long long calc_yh(){\n        int i, j, t, st, ed, mid, l, r;\n        long long res = 0;\n        for (i = 0; i < n; ++i){\n            l = r = -1;\n            st = 0; ed = i;\n            while (st <= ed){\n                mid = (st + ed) / 2;\n                t = suan(mid, i);\n                if (t == K) r = mid;\n                if (t <= K) st = mid + 1;\n                else ed = mid - 1;\n            }\n            \n            if (r == -1) continue;\n\n            st = 0; ed = i;\n            while (st <= ed){\n                mid = (st + ed) / 2;\n                t = suan(mid, i);\n                if (t == K) l = mid;\n                if (t >= K) ed = mid - 1;\n                else st = mid + 1;\n            }\n            \n            res += r - l + 1;\n        }\n        \n        return res;\n    }\n    \n    long long countSubarrays(vector<int>& aa, int KK) {\n        a = aa;\n        K = KK;\n        n = a.size();\n        calc_bz();\n        return calc_yh();\n    }\n};",
    "submit_ts": "1720277334",
    "subm_id": "1311658824"
}