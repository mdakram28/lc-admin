{
    "username": "Ahmad Romy Zahran",
    "submission": "#define rep(i, a, b) for(int i = a; i < (b); ++i)\n#define per(i, a, b) for(int i = a; i > (b); --i)\n#define ar array\n#define sz(x) (int) (x).size()\n#define pii pair<int,int>\n#define fi first\n#define se second\ntypedef long long ll;\ntypedef pair<ll,ll> pll;\ntypedef pair<double,double> pdd;\ntypedef pair<double,int> pdi;\ntypedef vector<int> vi;\n#define all(x) (x).begin(), (x).end()\n\ntemplate<typename T>\nvoid min_self(T& A, T B) {\n    A = min(A,B);\n}\ntemplate<typename T>\nvoid max_self(T& A, T B) {\n    A = max(A,B);\n}\n\ntypedef pair<int,pii> ipii;\n\nclass Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>& board) {\n        int n = sz(board);\n        int m = sz(board[0]);\n        vector<ipii> v;\n        ll ans = -3e9;\n        rep(i,0,n) {\n            rep(j,0,m) {\n                v.push_back({board[i][j],{i,j}});\n            }\n        }\n        sort(v.begin(),v.end(),greater<ipii>());\n        ll tmp0 = 0;\n        set<int> sr,sc;\n        int yr = -1,xr=-1;\n        rep(i,0,sz(v)) {\n            auto [val, rc] = v[i];\n            auto [r,c] = rc;\n            if(!sr.count(r) && !sc.count(c)) {\n                tmp0 += val;\n                sr.insert(r); sc.insert(c);\n                if(sz(sr)==2) {\n                    xr = i;\n                }\n                if(sz(sr)==3) {\n                    yr = i;\n                    break;\n                }\n            }\n        }\n        max_self(ans, tmp0);\n        sr.clear(); sc.clear();\n        rep(i,0,yr-2) {\n            if(1ll*v[i].fi*3 <= ans) break;\n            int mulai = i+1;\n            if(i==0) {\n                mulai = xr+1;\n            }\n            sr.insert(v[i].se.fi);\n            sc.insert(v[i].se.se);\n            rep(j,mulai,yr-1) {\n                if(1ll*v[i].fi + 1ll*v[j].fi*2 <=ans) break;\n                auto [rj, cj] = v[j].se;\n                if(sr.count(rj) || sc.count(cj)) continue;\n                sr.insert(rj); sc.insert(cj);\n                rep(k, j+1,sz(v)) {\n                    if(1ll*v[i].fi + v[j].fi + v[k].fi <=ans) break;\n                    auto [rk, ck] = v[k].se;\n                    if(sr.count(rk) || sc.count(ck)) continue;\n                    max_self(ans, 1ll*v[i].fi + v[j].fi + v[k].fi);\n                }\n                sr.erase(rj); sc.erase(cj);\n            }\n            sr.erase(v[i].se.fi);\n            sc.erase(v[i].se.se);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1723907261",
    "subm_id": "1359098654"
}