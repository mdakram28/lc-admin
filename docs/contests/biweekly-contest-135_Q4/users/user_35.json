{
    "username": "priceless-visvesvarayaxhk",
    "submission": "#define inf 0x3f3f3f3f\n#define Inf 0x3FFFFFFFFFFFFFFFLL\n#define rep(i, n) for (int i = 0; i < (n); ++i)\n#define Rep(i, n) for (int i = 1; i <= (n); ++i)\n#define clr(x, a) memset(x, (a), sizeof x)\ntypedef long long ll;\nint const N = 110;\nll a[N][N];\nll f[N][N][2];\nll g[N];\nint n, m;\n\nclass Solution {\npublic:\n    ll cal(int x, int y) {\n        ll s = 0;\n        Rep(i, y) {\n            if (x > 1) s += a[i][x - 1];\n            if (x < n) s += a[i][x + 1];\n        }\n        return s;\n    }\n    long long maximumScore(vector<vector<int>>& grid) {\n        clr(f, 0); clr(g, 0);\n        n = grid.size(), m = grid[0].size();\n        rep(i, n) rep(j, m) a[i + 1][j + 1] = grid[i][j];\n\n        Rep(i, m) {\n            ll t = 0;\n            rep(j, n + 1) {\n                if (j > 0 && i > 1) t += a[j][i - 1];\n                if (j > 0 && i < n) t += a[j][i + 1];\n                rep(k, i) {\n                    if (k == 0 || k + 3 <= i) {\n                        f[i][j][0] = max(f[i][j][0], g[k] + t);\n                        f[i][j][1] = max(f[i][j][1], g[k] + t);\n                    } else {\n                        ll pt = t;\n                        rep(l, n + 1) {\n                            if (l > 0 && l <= j && i > 1) {\n                                pt -= a[l][i - 1];\n                                if (k + 1 == i) pt -= a[l][i];\n                            }\n                            //if(i==3&&j==1)printf(\"%d,%d,%lld+%lld\\n\",k,l,f[k][l][0],pt);\n                            if (k + 1 == i) {\n                                int w = l <= j ? 1 : 0;\n\n                                if (l <= j) {\n                                    f[i][j][1] = max(f[i][j][1], f[k][l][w] + pt);\n                                }\n                                f[i][j][0] = max(f[i][j][0], f[k][l][w] + pt);\n                            } else {\n                                f[i][j][0] = max(f[i][j][0], f[k][l][0] + pt);\n                                f[i][j][1] = max(f[i][j][1], f[k][l][0] + pt);\n                            }\n                            //printf(\"f[%d][%d][0]=%lld\\n\",i,j,f[i][j][0]);\n                        }\n                    }\n                }\n                //printf(\"f[%d][%d]=%lld\\n\",i,j,f[i][j]);\n                g[i] = max(g[i], max(f[i][j][0], f[i][j][1]));\n            }\n        }\n        cout<<f[3][1][0]<<endl;\n        ll ans = 0;\n        Rep(j, m) rep(i, n + 1) ans = max(ans, max(f[j][i][0], f[j][i][1]));\n        return ans;        \n    }\n};",
    "submit_ts": "1721489943",
    "subm_id": "548320889"
}