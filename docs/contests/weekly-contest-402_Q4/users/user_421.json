{
    "username": "tender-matsumotoemu",
    "submission": "class Fenwick:\n    __slots__ = 'tree'\n\n    def __init__(self, n: int):\n        self.tree = [0] * n\n\n    # \u628a\u4e0b\u6807\u4e3a i \u7684\u5143\u7d20\u589e\u52a0 1\n    def update(self, i: int, num) -> None:\n        while i < len(self.tree):\n            self.tree[i] += num\n            i += i & -i\n\n    # \u8fd4\u56de\u4e0b\u6807\u5728 [1,i] \u7684\u5143\u7d20\u4e4b\u548c\n    def pre(self, i: int) -> int:\n        res = 0\n        while i > 0:\n            res += self.tree[i]\n            i &= i - 1\n        return res\n\nclass Solution:\n    def countOfPeaks(self, nums: List[int], queries: List[List[int]]) -> List[int]:\n        n = len(nums)\n        t = Fenwick(n + 1)\n        # arr = [0] * (n + 1)\n        for i in range(n):\n            # arr[i+1] = arr[i]\n            if i > 0 and i < n-1 and nums[i] > nums[i-1] and nums[i] > nums[i+1]:\n                t.update(i+1, 1)\n                # arr[i+1] += 1\n        res = []\n        for ind, a, b in queries:\n            if ind == 2:\n                if a > 0 and a < n-1 and nums[a-1] < nums[a] and nums[a] > nums[a+1]:\n                    t.update(a + 1, -1)\n                if a > 0 and a < n-1 and nums[a-1] < b and b > nums[a+1]:\n                    t.update(a + 1, 1)\n                if a-1 > 0 and a-1 < n-1 and nums[a-2] < nums[a-1] and nums[a-1] > nums[a]:\n                    t.update(a, -1)\n                if a-1 > 0 and a-1 < n-1 and nums[a-2] < nums[a-1] and nums[a-1] > b:\n                    t.update(a, 1)\n                if a+1 > 0 and a+1 < n-1 and nums[a] < nums[a+1] and nums[a+1] > nums[a+2]:\n                    t.update(a+2, -1)\n                if a+1 > 0 and a+1 < n-1 and b < nums[a+1] and nums[a+1] > nums[a+2]:\n                    t.update(a+2, 1)\n                nums[a] = b\n            else:\n                if b - a <= 1:\n                    res.append(0)\n                else:\n                    res.append(t.pre(b) - t.pre(a+1))\n        return res\n                \n                ",
    "submit_ts": "1718507218",
    "subm_id": "539779986"
}