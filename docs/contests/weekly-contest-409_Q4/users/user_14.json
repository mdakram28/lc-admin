{
    "username": "gongshuisanye2",
    "submission": "from sortedcontainers import SortedList\nclass Solution:\n    def numberOfAlternatingGroups(self, a: List[int], queries: List[List[int]]) -> List[int]:\n        n = len(a)\n        sl = SortedList()\n        cnt = Counter()\n        i = 0\n        while i < n:\n            v0 = a[i]\n            i0 = i\n            while i < n and (a[i]^a[i0]) == (i-i0)&1:\n                i += 1\n            cnt[i-i0] += 1\n            sl.add((i0,i-1))\n        # print(sl)\n        ans = []\n        for q in queries:\n            if q[0] == 1:\n                res = 0 \n                d = q[1]\n                if a[0] == a[-1]:\n                    for k,v in cnt.items():\n                        if k >= d:\n                            res += (k-d+1)*v \n                            # print(k,d,v)\n                else:\n                    if len(sl) == 1:\n                        res = n \n                    else:\n                        for k,v in cnt.items():\n                            if k >= d:\n                                res += (k-d+1)*v \n                        # print(res)\n                        l0,r0 = sl[0]\n                        k = r0-l0+1\n                        if k >= d:\n                            res -= k-d+1\n                        l1,r1 = sl[-1]\n                        k = r1-l1+1\n                        if k >= d:\n                            res -= k-d+1\n                        k = r0-l0+1 + r1-l1+1\n                        \n                        if k >= d:\n                            res += k-d+1\n                        # res -= sl[0][1] - sl[0][0] + 1 - d + 1 + sl[-1][1] - sl[-1][0] + 1 - d + 1 \n                        # res += sl[0][1] - sl[0][0] + 1+ sl[-1][1] - sl[-1][0] + 1-d+1\n                        # res -= - d + 1 \n                ans.append(res)\n                # print(sl)\n                # print(cnt)\n                # print(ans)\n            else:\n                # print(sl)\n                idx,c = q[1:]\n                if a[idx] == c:\n                    continue \n                \n                a[idx] = c \n                p = sl.bisect_left((idx,inf)) -1\n                x,y = sl[p]\n                del sl[p]\n                # print(x,y)\n                cnt[y-x+1] -= 1\n                s = set()\n                if x <= idx-1:\n                    s.add((x,idx-1))\n                s.add((idx,idx))\n                if idx+1 <= y:\n                    s.add((idx+1,y))\n                s = sorted(s)\n                x,y = s[0]\n                if x != 0 and a[x] != a[x-1]:\n                    l,r = sl[p-1]\n                    s[0] = (l, y)\n                    del sl[p-1]\n                    cnt[r-l+1] -= 1\n                    p-=1\n                # print(idx,c , s,sl,a,p)\n                x,y = s[-1]\n                if y != n-1 and a[y] != a[y+1]:\n                    l,r = sl[p]\n                    s[-1] = (x,r)\n                    del sl[p]\n                    cnt[r-l+1] -= 1\n                for v in s:\n                    sl.add(v)\n                    x,y = v \n                    cnt[y-x+1] += 1\n        return ans",
    "submit_ts": "1722742300",
    "subm_id": "552343767"
}