{
    "username": "PlumsLC",
    "submission": "typedef long long ll;\n\nclass Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        ll n = s.size();\n        ll ans = 0;\n\n        vector<ll> jump(n);\n        ll last = n;\n        for (int i=n-1; i>=0; i--) {\n            jump[i] = last;\n            if (s[i] == '0') last = i;\n        }\n\n\n        for (ll l=0; l<n; l++) {\n            ll ones = 0;\n            ll zeroes = 1;\n            ll r = l;\n            ll subtotal = 0;\n            //cout << \"l: \" << l << endl;\n            /*while (r < n && s[r] == '1') {\n                ones++;\n                ans++;\n                subtotal++;\n                r++;\n            }*/\n            if (s[l] == '1') {\n                ones += (jump[l] - l);\n                ans += (jump[l] - l);\n                subtotal += (jump[l] - l);\n                r += (jump[l] - l);\n            }\n\n            while (r < n && zeroes * zeroes <= n) {\n                ll next = jump[r];\n                ll gap = next - r - 1;\n                //cout << \"r: \" << r << \" \" << next << \" \" << gap << endl;\n                if (ones >= zeroes * zeroes) {\n                    subtotal += (gap+1);\n                    ans += (gap+1);\n                    //cout << \"add: \" << (gap+1) << endl;\n                } else if (ones + gap < zeroes * zeroes) {\n                    //\n                } else {\n                    ll needed = zeroes*zeroes - ones;\n                    subtotal += (gap - needed + 1);\n                    ans += (gap - needed + 1);\n                    //cout << \"add: \" << (gap - needed + 1) << \" \" << ones << \" \" << zeroes << endl;\n                }\n                zeroes++;\n                ones += gap;\n                r = next;\n            }\n\n            //cout << l << \" \" << subtotal << endl;\n        }\n\n        return ans;\n    }\n};",
    "submit_ts": "1722136415",
    "subm_id": "1335733776"
}