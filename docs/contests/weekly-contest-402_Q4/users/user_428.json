{
    "username": "BowenYyy",
    "submission": "class Solution {\npublic:\n    int c[100005], n;\n    int query(int x) {\n        int sum = 0;\n        while (x > 0) {\n            sum += c[x];\n            x -= x & (-x);\n        }\n        return sum;\n    }\n    void update(int x, int val) {\n        while (x <= n) {\n            c[x] += val;\n            x += x & (-x);\n        } \n    }\n    vector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& q) {\n        n = a.size();\n        for (int i = 1; i + 1 < n; i++) {\n            if (a[i] > a[i - 1] && a[i] > a[i + 1]) {\n                update(i + 1, 1);\n            }\n        }\n        vector<int> ret;\n        for (int i = 0; i < q.size(); i++) {\n            if (q[i][0] == 1) {\n                if (q[i][2] - q[i][1] < 2) {\n                    ret.push_back(0);\n                    continue;\n                }\n                int l = q[i][1] + 1, r = q[i][2];\n                ret.push_back(query(r) - query(l));\n            } else {\n                int x = q[i][1], val = q[i][2];\n                if (x > 0 && x + 1 < n) {\n                    if (a[x] > a[x - 1] && a[x] > a[x + 1] && (val <= a[x - 1] || val <= a[x + 1])) {\n                        update(x + 1, -1);\n                    }\n                    if ((a[x] <= a[x - 1] || a[x] <= a[x + 1]) && val > a[x - 1] && val > a[x + 1]) {\n                        update(x + 1, 1);\n                    }\n                }\n                if (x - 1 > 0) {\n                    if (a[x - 1] > a[x - 2] && a[x - 1] > a[x] && a[x - 1] <= val) {\n                        update(x, -1);\n                    }\n                    if (a[x - 1] > a[x - 2] && a[x - 1] <= a[x] && a[x - 1] > val) {\n                        update(x, 1);\n                    }\n                }\n                if (x + 2 < n) {\n                    if (a[x + 1] > a[x + 2] && a[x + 1] > a[x] && a[x + 1] <= val) {\n                        update(x + 2, -1);\n                    }\n                    if (a[x + 1] > a[x + 2] && a[x + 1] <= a[x] && a[x + 1] > val) {\n                        update(x + 2, 1);\n                    }\n                }\n                a[x] = val;\n            }\n        }\n        return ret;\n    }\n};",
    "submit_ts": "1718507833",
    "subm_id": "1289663872"
}