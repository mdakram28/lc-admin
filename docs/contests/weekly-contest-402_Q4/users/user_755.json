{
    "username": "lucifer357",
    "submission": "typedef long long ll;\n#include <ext/pb_ds/assoc_container.hpp> \n#include <ext/pb_ds/tree_policy.hpp> \nusing namespace __gnu_pbds; \n \n#define ordered_set tree<ll, null_type,less<ll>, rb_tree_tag,tree_order_statistics_node_update> \n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& q) {\n        \n        ordered_set oset;\n        \n        for(ll i = 1 ; i < nums.size() - 1;  i++){\n            if(nums[i] > nums[i-1] && nums[i] > nums[i+1]){\n                oset.insert(i);\n            }\n        }\n        \n        vector<int> ans;\n        int n = nums.size();\n        for(ll i = 0 ; i < q.size() ; i++){\n            if(q[i][0] == 1){\n                if(oset.size() == 0 || q[i][1] == q[i][2]){\n                    ans.push_back(0);\n                }\n                else{\n                    int num = oset.order_of_key(q[i][2]) - oset.order_of_key(q[i][1] + 1);\n                    ans.push_back(num);\n                }\n            }\n            \n            else{\n                if(q[i][1] == 0){\n                    \n                        auto it = oset.find(q[i][1]+1);\n                        if(it != oset.end()){\n                            oset.erase(it);\n                        }\n                        \n                        nums[q[i][1]] = q[i][2];\n                    \n                        if(q[i][1]+2 < n)\n                        \n                        if(nums[q[i][1]+1] > nums[q[i][1]] && nums[q[i][1]+1] > nums[q[i][1]+2]){\n                            oset.insert(q[i][1]+1);\n                        }\n                    \n                }\n                else if(q[i][1] == n-1){\n                        auto it = oset.find(q[i][1]-1);\n                        if(it != oset.end()){\n                            oset.erase(it);\n                        }\n                        \n                        nums[q[i][1]] = q[i][2];\n                        \n                        if(q[i][1]-2 >= 0 )\n                        if(nums[q[i][1]-1] > nums[q[i][1]] && nums[q[i][1]-1] > nums[q[i][1]-2]){\n                            oset.insert(q[i][1]-1);\n                        }\n                }\n                else{\n                    \n                        auto it = oset.find(q[i][1]+1);\n                        if(it != oset.end()){\n                            oset.erase(it);\n                        }\n                        \n                        nums[q[i][1]] = q[i][2];\n                    \n                        if(q[i][1]+2 < n)\n                        \n                        if(nums[q[i][1]+1] > nums[q[i][1]] && nums[q[i][1]+1] > nums[q[i][1]+2]){\n                            oset.insert(q[i][1]+1);\n                        }\n                        \n                        \n                        auto it2 = oset.find(q[i][1]-1);\n                        if(it2 != oset.end()){\n                            oset.erase(it2);\n                        }\n                        \n                        nums[q[i][1]] = q[i][2];\n                        \n                        if(q[i][1]-2 >= 0 )\n                        if(nums[q[i][1]-1] > nums[q[i][1]] && nums[q[i][1]-1] > nums[q[i][1]-2]){\n                            oset.insert(q[i][1]-1);\n                        }\n                    \n                    \n                        \n                        auto it3 = oset.find(q[i][1]);\n                        if(it3 != oset.end()){\n                            oset.erase(it3);\n                        }\n                        \n                        nums[q[i][1]] = q[i][2];\n                        \n                        \n                        if(nums[q[i][1]] > nums[q[i][1]-1] && nums[q[i][1]] > nums[q[i][1]+1]){\n                            oset.insert(q[i][1]);\n                        }\n                }\n            }\n        }\n        return ans;\n        \n    }\n};",
    "submit_ts": 1718507786.0
}