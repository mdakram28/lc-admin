{
    "username": "Ostosis",
    "submission": "class Solution {\npublic:\n\nint update2(map<int, int>& map2, int u, int v) {\n    auto iter = map2.lower_bound(u);\n    int savedDistance = 0;\n\n    if (iter == map2.end()) {\n        if (map2.empty()) {\n            map2[u] = v;\n            savedDistance += v - u - 1;\n        }\n        else {\n            iter--;\n\n            if (iter->second <= u) {\n                map2[u] = v;\n                savedDistance += v - u - 1;\n            }\n            else {\n                // u, v are subsumed by previous member, so no-op\n            }\n        }\n\n    }\n    else if (iter->first >= u && iter->second <= v) {\n        vector<int> toErase;\n\n        while (iter != map2.end() && iter->second <= v) {\n            savedDistance -= iter->second - iter->first - 1;\n            toErase.push_back(iter->first);\n            iter++;\n        }\n\n        for (auto e : toErase) {\n            map2.erase(e);\n        }\n\n        map2[u] = v;\n        savedDistance += v - u - 1;\n    }\n    else {\n        if (iter != map2.begin()) {\n            iter--;\n            int end = iter->second;\n\n            if (end <= u) {\n                map2[u] = v;\n                savedDistance += v - u - 1;\n            }\n        }\n        else if(iter->first > u) {\n            map2[u] = v;\n            savedDistance += v - u - 1;\n        }\n    }\n    \n    return savedDistance;\n}\n\nvector<int> shortestDistanceAfterQueries(int n, vector<vector<int>>& queries) {\n    vector<int> ans;\n    //VVI nodeToNodes(n);\n    map<int, int> map2;\n    //vector<int> dp(n);\n    //dp[0] = n - 1;\n\n    //for (size_t i = 1; i < n; i++)\n    //{\n    //    dp[i] = n - 1 - i;\n    //    nodeToNodes[i].push_back(i - 1);\n    //}\n\n    int dist = n - 1;\n\n    for (auto& query : queries) {\n        int& u = query[0];\n        int& v = query[1];\n        //nodeToNodes[v].push_back(u);\n        int savedDistance = update2(map2, u, v);\n        dist -= savedDistance;\n        //update(nodeToNodes, dp, u, v);\n\n        ans.push_back(dist);\n    }\n\n    return ans;\n}\n};",
    "submit_ts": "1722743188",
    "subm_id": "1343786386"
}