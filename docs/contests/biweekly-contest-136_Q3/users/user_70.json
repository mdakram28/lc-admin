{
    "username": "amsraman",
    "submission": "class Solution {\npublic:\n    int minFlips(vector<vector<int>>& grid) {\n        int n = (int) grid.size(), m = (int) grid[0].size();\n        vector<vector<bool>> vis(n, vector<bool>(m, false)); int ans = 0, num_ones = 0;\n        bool od = false;\n        if(n & 1) {\n            for(int i = 0, j = m - 1; i < j; i++, j--) {\n                if(grid[n / 2][i] != grid[n / 2][j]) od = true;\n            }\n        }\n        if(m & 1) {\n            for(int i = 0, j = n - 1; i < j; i++, j--) {\n                if(grid[i][m / 2] != grid[j][m / 2]) od = true;\n            }\n        }\n        for(int i = 0; i < n; i++) {\n            for(int j = 0; j < m; j++) {\n                if(vis[i][j]) continue;\n                set<pair<int, int>> in;\n                in.insert({i, j});\n                in.insert({n - i - 1, j});\n                in.insert({i, m - j - 1});\n                in.insert({n - i - 1, m - j - 1});\n                int ones = 0;\n                for(auto [u, v]: in) {\n                    ones += grid[u][v];\n                    vis[u][v] = true;\n                }\n                for(auto [u, v]: in) {\n                    if(ones > (int) in.size() - ones) {\n                        grid[u][v] = 1;\n                    } else {\n                        grid[u][v] = 0;\n                    }\n                }\n                ones = min(ones, (int) in.size() - ones); ans += ones;\n            }\n        }\n        for(int i = 0; i < n; i++) {\n            for(int j = 0; j < m; j++) {\n                num_ones += grid[i][j];\n            }\n        }\n        // cout << ans << \" \" << num_ones << endl;\n        if(num_ones & 1) {\n            if(grid[n / 2][m / 2] == 0) {\n                ++num_ones;\n            } else {\n                --num_ones;\n            }\n            ++ans;\n        }\n        if(num_ones % 4 == 2) {\n            if(!od) ans += 2;\n        }\n        return ans;\n    }\n};\n/*\nin general:\nwe either add k or (even - k);\n\nk and even - k have the same parity. \n*/",
    "submit_ts": "1722697559",
    "subm_id": "1343150907"
}