{
    "username": "misrx",
    "submission": "#define pb push_back\n#define pii pair<int,int>\n#define vi vector<int>\nstruct Psa {\n    vi psa;\n    Psa(vi a) {\n        if (!a.empty()) psa.pb(a[0]);\n        for (int i = 1; i < a.size(); i++) {\n            psa.pb(psa[i-1]+a[i]);\n        }\n    }\n    int sum(int l, int r) {\n        if (l > r) return 0;\n        if (l <= 0) return psa[r];\n        return psa[r]-psa[l-1];\n    }\n};\n\nclass Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        int n = s.size();\n        vector<int> pos;\n        vector<int> ss;\n        ss.assign(n+1, 0);\n        pos.pb(-1);\n        for (int i = 0; i < n; i++) {\n            ss[i] = s[i] == '1';\n            if (!ss[i]) pos.pb(i);\n        }\n        pos.pb(n);\n        Psa psa(ss);\n        int ans = 0;\n        int x = 0;\n        for (int i = 0; i < n; i++) {\n            while (pos[x] < i) {\n                x++;\n                assert(x < pos.size());\n            }\n            \n            int a = 0;\n            int b = 0;\n            //cout << \"for: \" << i << \": \\n\";\n            for (int y = x; y < pos.size() && pow(y-x, 2) <= n; y++) {\n                int inc = psa.sum(max(i, pos[y-1]), pos[y]);\n                int k = a*a-b;\n                //cout << \"a,b:  \" << a << \" \" << b << \"\\n\";\n                //cout << \"k, inc: \" << k << \" \" << inc << \"\\n\";\n                if (inc >= k && pos[y] != i) {\n                    int res = inc-max(0, k)+1;\n                    if (ss[i] && y==x) res-=1;\n                    //cout << \"res: \" << res << \"\\n\";\n\n                    ans += res;\n                }\n                b+=inc;\n                a++;\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1722138371",
    "subm_id": "1335789073"
}