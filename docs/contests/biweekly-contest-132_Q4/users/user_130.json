{
    "username": "yogman_amitkr",
    "submission": "class Solution {\npublic:\n    int n;\n    int k;\n    vector<vector<int>> dp;\n    vector<int> arr;\n    int rec(int idx,int len){\n        // if(len>k)return -1e9;\n        // cout<<\"hi:\"<<idx<<endl;\n        if(idx==n){\n            return 0;\n        }\n        if(~dp[idx][len])return dp[idx][len];\n        int ans=0;\n        for(int i=idx+1;i<n;i++){\n            if(arr[i]==arr[idx]){\n                // cout<<\"ok:\"<<rec(i,len)<<endl;\n                    ans=max(ans,1+rec(i,len));\n            }else{\n                if(len<k){\n                    \n                // cout<<\"ok:\"<<rec(i,len+1)<<endl;\n                    ans=max(ans,1+rec(i,len+1));\n                }\n            }\n        }\n        // cout<<ans<<endl;\n        return dp[idx][len]=ans;\n    }\n    int maximumLength(vector<int>& nums, int k_) {\n         dp.clear();\n        n=nums.size();\n        k=k_;\n        dp.resize(n+1);\n        for(int i=0;i<=n;i++){\n            dp[i].resize(k+1,-1);\n        }\n        arr=nums;\n        \n        int ans=0;\n        map<int,int> mp;\n        int mx1=0,mx2=0,val1=-1,val2=-1;\n        \n        for(int i=n-1;i>=0;i--){\n            dp[i][0]=1+mp[arr[i]];\n            mp[arr[i]]=dp[i][0];\n            ans=max(ans,dp[i][0]);\n        }\n        for(int k=1;k<=k_;k++){\n            mp.clear();\n            mx1=0,mx2=0,val1=-1,val2=-1;\n            for(int i=n-1;i>=0;i--){\n                \n                dp[i][k]=1+mp[arr[i]];\n                \n                if(val1==arr[i]){\n                    dp[i][k]=max(dp[i][k],mx2+1);\n                }else{\n                    dp[i][k]=max(dp[i][k],mx1+1);\n                }\n                \n                if(dp[i][k-1]>mx1){\n                    mx2=mx1;val2=val1;\n                    mx1=dp[i][k-1];\n                    val1=arr[i];\n                }else if(dp[i][k-1]>mx2){\n                    mx2=dp[i][k-1];\n                    val2=arr[i];\n                }\n                // cout<<val1<<\" : \"<<val2<<endl;\n                \n                mp[arr[i]]=dp[i][k];\n            }\n            // cout<<k<<endl;\n            for(int i=0;i<n;i++){\n                // cout<<dp[i][k]<<\" \";\n                ans=max(ans,dp[i][k]);\n            }   \n            // cout<<endl;\n        }\n        \n        return ans;\n    }\n};",
    "submit_ts": 1717860284.0
}