{
    "username": "gcasd001-e",
    "submission": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define ll long long\n#define ull unsigned long long int\n#define db double\n#define ldb long double\n#define int128 __int128_t\n#define fr(x) freopen(x,\"r\",stdin);\n#define fw(x) freopen(x,\"w\",stdout);\n#define mst(x,a) memset(x,a,sizeof(x));\n#define all(x) (x).begin(),(x).end()\n#define rall(x) (x).rbegin(),(x).rend()\n#define fi first\n#define se second\n#define IOS ios::sync_with_stdio(false);cin.tie(0);cout.tie(0);\n#define yes std::cout << \"Yes\\n\"\n#define no std::cout << \"No\\n\"\n#ifdef LOCAL\n#include \"leetcode.h\"\n#endif // LOCAL\ntemplate <typename T> int si(const T &x) { return x.size(); }\ntemplate <typename T, typename S> inline bool chmax(T &a, const S &b) { if (a < b) { a = b; return true; } return false; }\ntemplate <typename T, typename S> inline bool chmin(T &a, const S &b) { if (b < a) { a = b; return true; } return false; }\nconst int mod = 1000000007;\nconst int inf = 0x3f3f3f3f;\nconst int M = 100005;\n\ntemplate <typename T>\nstruct BIT {\n  int N;\n  std::vector<T> data;\n\n  BIT(int size = 0) {\n    init(size);\n  }\n\n  void init(int size) {\n    N = size + 2;\n    data.assign(N + 1, T{});\n  }\n\n  T sum(int k) const {\n    if (k < 0) return T{};  // return 0 if k < 0\n    T ret{};\n    for (int i = k + 1; i > 0; i -= i & -i) ret += data[i];\n    return ret;\n  }\n\n  T sum(int l, int r) const { return sum(r) - sum(l - 1); }\n\n  T operator[](int k) const { return sum(k) - sum(k - 1); }\n\n  void add(int k, T x) {\n    for (int i = k + 1; i < N; i += i & -i) data[i] += x;\n  }\n\n  void imos(int l, int r, T x) {\n    add(l, x);\n    add(r + 1, -x);\n  }\n\n  int kth(T k) {\n    int x = 0;\n    for (int i = 1 << __lg(N); i > 0; i >>= 1) {\n      if (x + i < N && data[x + i] < k) {\n        x += i;\n        k -= data[x];\n      }\n    }\n    return x;\n  }\n};\n\nclass Solution {\npublic:\n    int minChanges(vector<int>& nums, int k) {\n      int n = si(nums);\n      vector<int> d;\n      for (int i = 0; i < n / 2; i++) {\n        d.push_back(abs(nums[i] - nums[n-1-i]));\n      }\n      vector<int> mx(n / 2);\n\n      for (int i = 0; i < n / 2; i++) {\n        int l, r;\n        tie(l, r) = minmax(nums[i], nums[n-1-i]);\n        chmax(mx[i], max(r, k - l));\n      }\n        n /= 2;\n      vector<pair<int, int>> a(n);\n      for (int i = 0; i < n; i++) {\n        a[i] = {d[i], mx[i]};\n      }\n      BIT<int> bit(M);\n      for (int i = 0; i < n; i++) {\n        bit.add(a[i].second, 1);\n      }\n      int t = n;\n        \n      sort(rall(a));\n      int j = 0;\n      int ans = inf;\n      for (int i = M - 1; i >= 0; i--) {\n        int cur = 0;\n          int same = 0;\n        while (j < n && a[j].first >= i) {\n          t--;\n            if (a[j].first == i) same++;\n          bit.add(a[j].second, -1);\n          j++;\n        }\n          cur += n - t - same;\n        int dual = bit.sum(i-1);\n        cur += dual * 2 + t - dual;\n        chmin(ans, cur);\n      }\n      return ans;\n    }\n};\n",
    "submit_ts": "1721488087",
    "subm_id": "548312837"
}