{
    "username": "zhou2003",
    "submission": "//\u3053\u306e\u6e07\u304d\u3001\u596a\u3063\u3066\u304f\u308c\u308b\u304b\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef long double db;\ntypedef vector<int> vi;\ntypedef pair<int, int> pii;\nconst int N = 200000 + 100;\nconst db pi = acos(-1.0);\n#define lowbit(x) ((x) & (-x))\n#define sqr(x) (x) * (x)\n#define rep(i,a,b) for (int i = a; i <= b;i++)\n#define per(i,a,b) for (int i = a; i >= b;i--)\n#define go(x,a) for (auto &x: a)\n#define trav(u,i,sq) for (register int i = head[u], v = sq[i].to; i; i = sq[i].nxt, v=sq[i].to)\n#define fir first\n#define sec second\n#define mkp make_pair\n#define pb push_back\n#define maxd 998244353\n#define eps 1e-8\n\nclass Solution {\nprivate:\n\tvi sq[N], ans;\n\tint n, tim, dfn[N], siz[N], f[N], seg[N<<2], tag[N<<2],now[N],mp[N],all;\n\n\tvoid dfs1(int u, int fu) {\n\t\tdfn[u]=++tim; siz[u]=1; mp[tim]=u;\n\t\tgo(v, sq[u]) {\n            if (v==fu) continue;\n\t\t\tif (v&1) f[v]=f[u]+2;\n\t\t\telse f[v]=f[u]+1;\n\t\t\tdfs1(v,u);\n\t\t\tsiz[u]+=siz[v];\n\t\t}\n\t}\n\n\tvoid build(int id,int l,int r) {\n\t\tif (l==r) {\n\t\t\tseg[id]=f[mp[l]];\n\t\t\ttag[id]=0;\n\t\t\treturn;\n\t\t}\n\t\tint mid=(l+r)>>1;\n\t\tbuild(id<<1,l,mid);\n\t\tbuild(id<<1|1,mid+1,r);\n\t\tseg[id]=max(seg[id<<1],seg[id<<1|1]);\n\t}\n\n\tvoid pushdown(int id) {\n\t\tif (tag[id]) {\n\t\t\tseg[id<<1]+=tag[id];\n\t\t\tseg[id<<1|1]+=tag[id];\n\t\t\ttag[id<<1]+=tag[id];\n\t\t\ttag[id<<1|1]+=tag[id];\n\t\t\ttag[id]=0;\n\t\t}\n\t}\n\n\tvoid update(int id,int l,int r,int L,int R,int val) {\n\t\tif (l>=L && r<=R) {\n\t\t\tseg[id]+=val;\n\t\t\ttag[id]+=val;\n\t\t\treturn;\n\t\t}\n\t\tpushdown(id);\n\t\tint mid=(l+r)>>1;\n\t\tif (mid>=L) update(id<<1,l,mid,L,R,val);\n\t\tif (mid<R) update(id<<1|1,mid+1,r,L,R,val);\n\t\tseg[id]=max(seg[id<<1],seg[id<<1|1]);\n\t}\n\n    void output(int id,int l,int r) {\n        if (l==r) {\n            now[l]=seg[id];\n            return;\n        }\n        pushdown(id);\n        int mid=(l+r)>>1;\n        output(id<<1,l,mid);\n        output(id<<1|1,mid+1,r);\n    }\n\n\tvoid dfs2(int u, int fu) {\n        //output(1,1,n);\n        //rep(i,1,n) cout<<now[dfn[i]]<<\" \";cout<<endl;\n\t\tans[u-1]=seg[1]+all;\n\t\tgo(v,sq[u]) {\n            if (v==fu) continue;\n\t\t\tint wu=1,wv=1;\n\t\t\tif (u&1) wu=2;\n\t\t\tif (v&1) wv=2;\n            //cout<<v<<\" \"<<wu<<\" \"<<wv<<endl;\n\t\t\tall+=wu;\n\t\t\tupdate(1,1,n,dfn[v],dfn[v]+siz[v]-1,-wv-wu);\n\t\t\tdfs2(v,u);\n\t\t\tall-=wu;\n\t\t\tupdate(1,1,n,dfn[v],dfn[v]+siz[v]-1,wv+wu);\n\t\t}\n\t}\npublic:\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n\t\ttim=0;\n\t\tn = edges.size()+1;\n\t\tfor (auto &x: edges) {\n\t\t\tsq[x[0]+1].pb(x[1]+1);\n            sq[x[1]+1].pb(x[0]+1);\n\t\t}\n\t\trep(i,1,n) siz[i]=0;\n\t\tf[1]=0; dfs1(1,0);\n        //rep(i,1,n) cout<<dfn[i]<<\" \";cout<<endl;\n\t\tans.resize(n);\n\t\tbuild(1,1,n);\n\t\tdfs2(1,0);\n\t\treturn ans;\n    }\n};",
    "submit_ts": "1722696925",
    "subm_id": "552263549"
}