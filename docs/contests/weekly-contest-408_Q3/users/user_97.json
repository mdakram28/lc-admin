{
    "username": "jszqlew",
    "submission": "class Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        const int n = s.size();\n        int tot = 0;\n        vector<int> suf(n);\n        vector<int> pref(n);\n        for (int i=0; i<n; ++i) {\n            pref[i] = s[i] - '0';\n            if (i && s[i] == '1') {\n                pref[i] += pref[i - 1];\n            }\n            tot += pref[i];\n        } \n        for (int i=n-1; ~i; --i) {\n            suf[i] = s[i] - '0';\n            if (i < n - 1 && s[i] == '1')\n                suf[i] += suf[i + 1];\n        }\n        for (int numzeros=1; numzeros*numzeros<=n; ++numzeros) {\n            int j = 0, need = numzeros * numzeros;\n            int j2 = 0, k2 = 0;\n            int k = 0;\n            int prefones = 0;\n            int sufones = 0;\n            // cout << tot << endl;\n            int lastzero = 0;\n            for (int i=0; i<n; ++i) {\n                while (j2 < n && k2 < need) {\n                    if (s[j2] == '1') ++k2;\n                    ++j2;\n                }\n                while (j < n && (k < numzeros || (k == numzeros && s[j] == '1'))) {\n                    if (s[j] == '0') ++k, lastzero = j;\n                    ++j;\n                }\n                if (k == numzeros && k2 == need) {\n                    tot += max(0, j - max(j2 - 1, lastzero));\n                }\n                if (s[i] == '0') --k;\n                else --k2;\n                // cout << numzeros << ' '<< i << ' ' << tot << endl;\n                // cout << j << ' ' << j2 << endl;\n            }\n\n        }\n\n        // prefix is good iff\n        return tot;\n    }\n};",
    "submit_ts": "1722136327",
    "subm_id": "1335730970"
}