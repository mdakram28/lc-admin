{
    "username": "jackieckc",
    "submission": "class Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        // n1 >= n0 * n0\n        int n = s.size();\n        int res = 0;\n        vector<int> ones(n), ze;\n        int c = 0;\n        for (int i = 0; i < n; i++) {\n            int j = i;\n            int n0 = 0, n1 = 0;\n            if (s[i] == '1') {\n                c += 1;\n            }\n            // cout << \"i = \" << i << endl;\n            while (j >= 0) {\n                // ok case:\n                //   - jump to last 0\n                //   - ans += conse 1\n                //\n                // not ok:\n                //   - jump to j - k\n                n1 = c - (j - 1 >= 0 ? ones[j - 1] : 0);\n                n0 = i - j + 1 - n1;\n                // cout << \"j = \" << j << endl;\n                // cout << n0 << \" \" << n1 << endl;\n                if (n1 >= n0 * n0) {\n                    auto itr = lower_bound(ze.begin(), ze.end(), j);\n                    if (itr == ze.begin()) {\n                        res += j + 1;\n                        // cout << \"no more += \" << (j + 1) << endl;\n                        break;\n                    }\n                    int nj = *prev(itr);\n                    res += j - nj;\n                    // cout << \"ok to \" << nj << endl;\n                    // cout << \"+= \" << (j - nj) << endl;\n                    j = nj;\n                } else {\n                    int d = n0 * n0 - n1;\n                    j -= d;\n                    // cout << \"not ok to \" << j << endl;\n                }\n            }\n            if (s[i] == '0') {\n                ze.push_back(i);\n            }\n            ones[i] = c;\n            // cout << endl;\n        }\n        return res;\n    }\n};",
    "submit_ts": "1722137417",
    "subm_id": "1335763171"
}