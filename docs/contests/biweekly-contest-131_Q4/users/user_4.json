{
    "username": "yf_1994",
    "submission": "struct T{\n    int l, r, v;\n} t[150005];\n\n#define ls t[p].l\n#define rs t[p].r\n\nint S = 5e4;\n\nclass Solution {\npublic:\n    set<int> s;\n    int rt, idx;\n    void chg(int &p, int l, int r, int x, int y) {\n        if (!p) p = ++idx;\n        if (l == r) {\n            t[p].v = y;\n            return;\n        }\n        int mid = (l + r) >> 1;\n        if (x <= mid) chg(ls, l, mid, x, y);\n        else chg(rs, mid + 1, r, x, y);\n        t[p].v = max(t[ls].v, t[rs].v);\n    }\n\n    int ask(int p, int l, int r, int x, int y) {\n        if (!p) return 0;\n        if (x <= l && r <= y) return t[p].v;\n        int mid = (l + r) >> 1, ret = 0;\n        if (x <= mid)ret = max(ret, ask(ls, l, mid, x, y));\n        if (mid < y)ret = max(ret, ask(rs, mid + 1, r, x, y));\n        return ret;\n    }   \n\n    void add(int x) {\n        auto it = s.lower_bound(x);\n        int R = -1, L = -1;\n        if (it != s.end()) {\n            R = *it;\n        } \n        if (it != s.begin()) {\n            --it;\n            L = *it;\n        } \n        chg(rt, 0, S, x, x - L);\n        if (R != -1) chg(rt, 0, S, R, R - x);\n        s.insert(x);\n    }\n\n    bool qry(int x, int sz) {\n        auto it = s.upper_bound(x);\n        --it;\n        int mx = x - *it;\n        int u = *it;\n        mx = max(mx, ask(rt, 0, S, 0, u));\n        if (mx >= sz) return 1;\n        return 0;\n    }\n    vector<bool> getResults(vector<vector<int>>& q) {\n        s.insert(0);\n        vector<bool> res;\n        for (auto u: q) {\n            int op = u[0];\n            if (op == 1) {\n                int x = u[1];\n                add(x);\n            } else {\n                int x = u[1], sz = u[2];\n                res.push_back(qry(x, sz));\n            }\n        }\n        for (int i = 0; i <= idx; i++) t[i].l = t[i].r = t[i].v = 0;\n        return res;\n    }\n};",
    "submit_ts": 1716648368.0
}