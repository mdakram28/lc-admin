{
    "username": "Vladislav-sys",
    "submission": "class Solution {\n    public long countSubarrays(int[] nums, int k) {\n        \n        int n = nums.length;\n        \n        long ans = 0;\n        \n        int [][] prep = new int[n][31];       \n        \n        \n        for (int i = 0; i < n; i++) {\n            \n            if (i == 0) {\n                for (int j = 0; j < 31; j++) {\n                    prep[i][j] = -1;\n                }\n            } else {\n               for (int j = 0; j < 31; j++) {\n                    prep[i][j] = prep[i - 1][j];\n                } \n                \n                for (int b = 0;  b < 31; b++) {\n                    if (((1 << b) & nums[i - 1]) == 0) {\n                        prep[i][b] = i - 1;\n                    }\n                }\n                \n            }\n            \n        }\n        \n        for (int i = 0 ; i < nums.length; i++) {\n            \n            List<int[]> arr = new ArrayList<>();\n            \n            for (int j = 0; j < 31; j++) {\n                if (((1 << j) & nums[i]) != 0 && prep[i][j] != -1) {\n                    arr.add(new int[]{prep[i][j], j});\n                }\n            }\n                \n            Collections.sort(arr, (a, b) -> b[0] - a[0]);\n            \n            int val = nums[i];\n            int prev = i;\n            \n            \n           \n            if (val == k) {\n               if (arr.size() == 0) {\n                    ans += i + 1;\n                } else {\n                    ans += i - arr.get(0)[0];\n                } \n                    \n             \n                continue;\n            }\n            \n            for (int j = 0; j < arr.size(); j++) {\n                val = val ^ (1 << arr.get(j)[1]); \n                \n                if (j < arr.size() - 1 && arr.get(j + 1)[0] == arr.get(j)[0]) continue;\n                if (val != k) continue;\n                \n                if (j == arr.size() - 1) {\n                    ans += arr.get(j)[0] + 1;\n                } else {\n                    ans += arr.get(j)[0] - arr.get(j + 1)[0];\n                }\n                \n                break;\n            }            \n            \n        }\n        \n        return ans; \n    }\n}",
    "submit_ts": "1720279214",
    "subm_id": "1311742235"
}