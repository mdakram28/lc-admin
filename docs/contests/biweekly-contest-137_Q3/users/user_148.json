{
    "username": "lilPeep",
    "submission": "class Solution {\n    vector<vector<long long>> compute(vector<long long>&arr)\n    {\n        int n=arr.size();\n        vector<vector<long long>> ret(n+2,vector<long long>(2,-1e18));\n        for(int i=1;i<=n;i++)\n            ret[i][0]=std::max(ret[i-1][0],arr[i-1]);\n        for(int i=n;i>=1;i--)\n            ret[i][1]=std::max(ret[i+1][1],arr[i-1]);\n        return ret;\n    }\npublic:\n    long long maximumValueSum(vector<vector<int>>& board) {\n        int n=board.size();\n        int m=board[0].size();\n                \n        vector<vector<long long>> suffixBoard(n,vector<long long>(m,-1e18));\n        \n        for(int i=n-1;i>=0;i--)\n        {\n            for(int j=0;j<m;j++)\n            {\n                suffixBoard[i][j]=board[i][j];\n                if(i!=n-1)\n                    suffixBoard[i][j]=std::max(suffixBoard[i+1][j],suffixBoard[i][j]);\n            }\n        }\n            \n        long long ans=-1e18;\n        vector<long long> prefixBoard(m+1,-1e18);\n        for(int i=0;i<n-1;i++)\n        {\n            vector<long long> tmp(m);\n            for(int j=0;j<m;j++)\n                tmp[j]=board[i][j];\n\n            auto up=compute(prefixBoard);\n            auto line=compute(tmp);\n            auto below=compute(suffixBoard[i+1]);\n\n            for(int j=1;j<=m;j++)\n            {\n                ans=std::max(ans, prefixBoard[j-1]+line[j-1][0]+below[j+1][1]);\n                ans=std::max(ans, prefixBoard[j-1]+line[j+1][1]+below[j-1][0]);\n                \n\n                ans=std::max(ans, tmp[j-1]+up[j-1][0]+below[j+1][1]);\n                ans=std::max(ans, tmp[j-1]+up[j+1][1]+below[j-1][0]);\n\n                ans=std::max(ans, suffixBoard[i+1][j-1]+up[j-1][0]+line[j+1][1]);\n                ans=std::max(ans, suffixBoard[i+1][j-1]+up[j+1][1]+line[j-1][0]);\n            }\n\n            for(int j=0;j<m;j++)\n                prefixBoard[j]=std::max(prefixBoard[j],tmp[j]);\n        }\n\n        return ans;\n    }\n};",
    "submit_ts": "1723908181",
    "subm_id": "1359141616"
}