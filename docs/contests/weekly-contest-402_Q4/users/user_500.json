{
    "username": "md2030",
    "submission": "from sortedcontainers import SortedList\nclass Solution:\n    def countOfPeaks(self, nums: List[int], Q: List[List[int]]) -> List[int]:\n        arr = SortedList()\n        visited = set()\n        for i in range(1,len(nums)-1):\n            if nums[i-1]<nums[i]>nums[i+1]:\n                arr.add(i)\n                visited.add(i)\n        res = []\n        for q,l,r in Q:\n            if q == 1:\n                if l<r:\n                    left = arr.bisect_right(l)\n                    right = arr.bisect_left(r)\n                    # print(arr,left,right,l,r)\n                    res.append(right-left)\n                else:\n                    res.append(0)\n            else:\n                old = nums[l]\n                nums[l] = r\n                if 0<l-1<len(nums)-1:\n                    if l-1 not in visited:\n                        if nums[l-2]<nums[l-1]>nums[l]:\n                            visited.add(l-1)\n                            arr.add(l-1)\n                    else:\n                        if not nums[l-2]<nums[l-1]>nums[l]:\n                            visited.remove(l-1)\n                            arr.remove(l-1)\n                if 0<l<len(nums)-1:\n                    if l not in visited:\n                        if nums[l-1]<nums[l]>nums[l+1]:\n                            visited.add(l)\n                            arr.add(l)\n                    else:\n                        if not nums[l-1]<nums[l]>nums[l+1]:\n                            visited.remove(l)\n                            arr.remove(l)\n                        \n                if 0<l+1<len(nums)-1:\n                    if l+1 not in visited:\n                        if nums[l]<nums[l+1]>nums[l+2]:\n                            visited.add(l+1)\n                            arr.add(l+1)\n                    else:\n                        if not nums[l]<nums[l+1]>nums[l+2]:\n                            visited.remove(l+1)\n                            arr.remove(l+1)\n        return res\n                    ",
    "submit_ts": "1718507416",
    "subm_id": "1289650944"
}