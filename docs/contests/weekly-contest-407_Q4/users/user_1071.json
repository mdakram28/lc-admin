{
    "username": "cradles-w",
    "submission": "class Solution {\npublic:\n    long long minimumOperations(vector<int>& nums, vector<int>& target) {\n        vector<int> dif(nums.size());\n\n        for(int i=0; i<nums.size(); ++i) {\n            dif[i] =target[i] - nums[i];\n        }\n\n        long long res = 0;\n\n        function<void(int, int, bool, int)> ops = [&](int left, int right, bool pos, int tb) {\n            // cout << l << \" \" << r << endl;\n            res += tb;\n            int ntb = -1;\n            // int p = l;\n            int cl=-1;\n            int cr=-1;\n\n            for(int i=left; i<=right; ++i) {\n                if(pos) {\n                    dif[i] -= tb;\n                } else {\n                    dif[i] += tb;\n                }\n\n                if(dif[i] != 0) {\n                    if(cl == -1) {\n                        cl = i;\n                        cr = i;\n                        ntb = abs(dif[i]);\n                    } else {\n                        cr = i;\n                        ntb = min(ntb, abs(dif[i]));\n                    }\n                } else {\n                    if(cl == -1) continue;\n                    else {\n                        ops(cl, cr, pos, ntb);\n                        cl = -1;\n                        cr = -1;\n                        ntb = -1;\n                    }\n                }\n            }\n\n            if(cl != -1) {\n                ops(cl, cr, pos, ntb);\n            }\n        };\n\n        int l=-1;\n        int r=-1;\n        bool flag = false;\n        int temp = -1;\n\n        for(int m=0; m<dif.size(); ++m) {\n            // cout << dif[m] << endl;\n            if(dif[m] != 0){\n                // init\n                if(l == -1) {\n                    l = m;\n                    r = m;\n                    if(dif[m] > 0) {\n                        flag = true;\n                    } else {\n                        flag = false;\n                    }\n                    temp = abs(dif[m]);\n                } else {\n                    if(dif[m] > 0 && !flag) {\n                        ops(l, r, flag, temp);\n                        l = m;\n                        r = m;\n                        flag = true;\n                        temp = abs(dif[m]);\n                    } \n                    else if(dif[m] < 0 && flag) {\n                        ops(l, r, flag, temp);\n                        l = m;\n                        r = m;\n                        flag = false;\n                        temp = abs(dif[m]);\n                    } else {\n                        r = m;\n                        temp = min(temp, abs(dif[m]));\n                    }\n                }\n            } else {\n                if(l == -1) continue;\n                else {\n                    ops(l, r, flag, temp);\n                    l = -1;\n                    r = -1;\n                    temp = -1;\n                }\n            }\n        }\n        if(l != -1) {\n            ops(l, r, flag, temp);\n        }\n        return res;\n    }\n};",
    "submit_ts": "1721532645",
    "subm_id": "548393523"
}