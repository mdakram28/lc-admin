{
    "username": "gggggfffff395",
    "submission": "class Solution {\npublic:\n\n    void dfs(int u, vector<vector<int>>&a, vector<int>&dp, int p = -1)\n    {\n\n        for(int i:a[u])\n        {\n            if(p!=i)\n            {\n                dfs(i, a, dp, u);\n                if(i%2==0)\n                    dp[u] = max(dp[i] + 2, dp[u]);\n                else\n                dp[u] = max(dp[i] + 1, dp[u]);\n            }\n        }\n    }\n\n    void count_ans(int u, vector<vector<int>>&a, vector<int>&dp, vector<int>&up, vector<int>&ans, int p = -1)\n    {\n        ans[u] = max(up[u], dp[u]);\n        vector<int>dps;\n        for(int v:a[u])\n        {\n            if(v!=p)\n            {\n                up[v] = up[u] + 1 + (u+1)%2;\n                dps.push_back(dp[v] + (v + 1)%2 + (u + 1)%2 + 2);\n            }\n        }\n        dps.push_back(0);\n        auto dp_s = dps;\n        for(int i = dps.size() - 2;i>=0;i--)\n        {\n            dp_s[i] = max(dp_s[i], dp_s[i+1]);\n        }\n        int i = 0, pr = 0;\n        for(int v:a[u])\n        {\n            if(v!=p)\n            {\n                up[v] = max({up[v], pr, dp_s[i + 1]});\n                pr = max(pr, dps[i]);\n                i++;\n                count_ans(v, a,dp,up,ans,u);\n            }\n        }\n    }\n\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n = edges.size() + 1;\n        vector<vector<int>>a(n);\n        for(auto s:edges)\n        {\n            int x = s[0];\n            int y = s[1];\n            a[x].push_back(y);\n            a[y].push_back(x);\n        }\n        vector<int>dp(n);\n        dfs(0, a, dp);\n        vector<int>up(n);\n        vector<int>ans(n);\n        count_ans(0, a, dp, up, ans);\n\n        return ans;\n    }\n};",
    "submit_ts": "1722698023",
    "subm_id": "1343167113"
}