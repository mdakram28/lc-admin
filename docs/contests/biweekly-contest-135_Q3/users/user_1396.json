{
    "username": "fan-fan-fan-a9",
    "submission": "const int N = 100005;\n\ntemplate <typename T> bool chmin(T &x, T y) { if (y < x) { x = y; return true; } return false; }\n\nclass Solution {\npublic:\n    int minChanges(vector<int>& a, int k) {\n        int n = a.size();\n        vector<int> f(N), g(N);\n        \n        auto add = [&](int l, int r, int v) {\n            if (v >= 0) {\n                g[l] ++;\n                g[r + 1] --;\n            } else {\n                g[l] --;\n                g[r + 1] ++;\n            }\n            f[l] += v;\n            f[r + 1] -= v;\n        };\n        \n        for (int l = 0, r = n - 1; l < r; l ++, r --) {\n            int x = a[l];\n            int y = a[r];\n            int d = abs(x - y);\n            add(d, d, 0);\n            int l1, r1, l2, r2;\n            if (x <= k) {\n                l1 = 0;\n                r1 = max(x, k - x);\n            } else {\n                l1 = x - k;\n                r1 = x;\n            }\n            if (y <= k) {\n                l2 = 0;\n                r2 = max(y, k - y);\n            } else {\n                l2 = y - k;\n                r2 = y;\n            }\n            if (l1 > l2) {\n                swap(l1, l2);\n                swap(r1, r2);\n            }\n            if (l2 <= r1) {\n                l2 = r1 + 1;\n            }\n            add(l1, r1, 1);\n            if (l2 <= r2) {\n                add(l2, r2, 1);\n            }\n            if (l1 <= d && d <= r1 || l2 <= d && d <= r2) {\n                add(d, d, -1);\n            }\n        }\n        \n        int ans = n;\n        for (int i = 0; i <= k; i ++) {\n            f[i + 1] += f[i];\n            g[i + 1] += g[i];\n            int res = f[i] + (n / 2 - g[i]) * 2;\n            chmin(ans, res);\n        }\n        for (int i = k + 1; i + 2 < N; i ++) {\n            f[i] += f[i - 1];\n            g[i] += g[i - 1];\n            if (g[i] != n / 2) {\n                continue;\n            }\n            chmin(ans, f[i]);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1721489445",
    "subm_id": "548318797"
}