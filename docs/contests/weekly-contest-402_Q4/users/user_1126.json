{
    "username": "cxxfish",
    "submission": "class Solution {\npublic:\n    int trie[100002];\n\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        memset(trie,0,100002*sizeof(int));\n        auto add = [&](int k,int v){\n            k++;\n            while(k<=100001){\n                trie[k]+=v;\n                k+=(k&(-k));\n            }\n        };\n        auto query = [&](int k){\n            k++;\n            int ans=0;\n            while(k>0){\n                ans+=trie[k];\n                k-=(k&(-k));\n            }\n            return ans;\n        };\n        int n = nums.size();\n        for(int i=1;i<n-1;++i){\n            if(nums[i]>nums[i-1] && nums[i]>nums[i+1]) add(i,1);\n        }\n        vector<int> ans;\n        for(auto q:queries){\n            if(q[0]==2){\n                int i = q[1],v=q[2];\n                if(i>=2 && v>=nums[i-1] && nums[i-1]>nums[i]\n                 && nums[i-1]>nums[i-2]){\n                    add(i-1,-1);\n                }\n                if(i>=2 && v<nums[i-1] && nums[i-1]<=nums[i]\n                && nums[i-1]>nums[i-2]){\n                    add(i-1,1);\n                }\n                if(i<=n-3 && v>=nums[i+1] && nums[i+1]>nums[i]\n                 && nums[i+1]>nums[i+2]){\n                    add(i+1,-1);\n                }\n                if(i<=n-3 && v<nums[i+1] && nums[i+1]<=nums[i]\n                 && nums[i+1]>nums[i+2]){\n                    add(i+1,1);\n                }\n                if(i>=1 && i<=n-2 && nums[i]>nums[i+1]&&nums[i]>nums[i-1]){\n                    add(i,-1);\n                }\n                nums[i]=v;\n                if(i>=1 && i<=n-2 && nums[i]>nums[i+1]&&nums[i]>nums[i-1]){\n                    add(i,1);\n                }\n            }else{\n                int l = q[1],r=q[2];\n                if(r-l+1<3) ans.push_back(0);\n                else{\n                    ans.push_back(query(r-1)-query(l));\n                }\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1718507809",
    "subm_id": "539783595"
}