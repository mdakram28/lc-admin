{
    "username": "daulatojha17",
    "submission": "class Solution {\npublic:\n    const int M = 1e9 + 7;\n\n    int numberOfPermutations(int n, vector<vector<int>>& requirements) {\n        map<int, int> mp;\n        for (auto x : requirements) {\n            mp[x[0]] = x[1];\n        }\n\n        vector<vector<int>> dp(n + 1, vector<int>(n * (n - 1) / 2 + 1, 0));\n        dp[0][0] = 1;\n\n        for (int i = 0; i < n; ++i) {\n            vector<int> prefix_sum(n * (n - 1) / 2 + 1, 0);\n            for (int sum = 0; sum <= n * (n - 1) / 2; ++sum) {\n                prefix_sum[sum] = dp[i][sum];\n                if (sum > 0) {\n                    prefix_sum[sum] = (prefix_sum[sum] + prefix_sum[sum - 1]) % M;\n                }\n            }\n\n            for (int sum = 0; sum <= n * (n - 1) / 2; ++sum) {\n                if (dp[i][sum] == 0) continue;\n\n                int min_j = 0;\n                int max_j = i;\n                if (mp.find(i) != mp.end()) {\n                    int target_sum = mp[i] - sum;\n                    if (target_sum < 0 || target_sum > i) continue;\n                    min_j = max_j = target_sum;\n                }\n\n                int new_sum = sum + min_j;\n                int end_sum = sum + max_j;\n                if (new_sum <= n * (n - 1) / 2) {\n                    dp[i + 1][new_sum] = (dp[i + 1][new_sum] + dp[i][sum]) % M;\n                }\n                if (end_sum + 1 <= n * (n - 1) / 2) {\n                    dp[i + 1][end_sum + 1] = (dp[i + 1][end_sum + 1] - dp[i][sum] + M) % M;\n                }\n            }\n\n            for (int sum = 1; sum <= n * (n - 1) / 2; ++sum) {\n                dp[i + 1][sum] = (dp[i + 1][sum] + dp[i + 1][sum - 1]) % M;\n            }\n        }\n\n        int result = 0;\n        for (int sum = 0; sum <= n * (n - 1) / 2; ++sum) {\n            if (mp.find(n - 1) == mp.end() || mp[n - 1] == sum) {\n                result = (result + dp[n][sum]) % M;\n            }\n        }\n\n        return result;\n    }\n};",
    "submit_ts": "1719070268",
    "subm_id": "1296818779"
}