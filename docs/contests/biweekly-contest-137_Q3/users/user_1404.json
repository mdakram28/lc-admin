{
    "username": "\u571f\u4e3fI\u4e28\u6728\u6728\u5f61",
    "submission": "#define rep(i, a, b) for (int i = a; i <= (b); i++)\n#define drep(i, a, b) for (int i = a; i >= (b); i--)\nusing ll = long long;\n\nconst int maxn = 205, maxm = 20410; // maxn\u4e3a\u56fe\u4e2d\u603b\u5171\u7684\u70b9\u6570\uff0cmaxm\u4e3a\u603b\u5171\u8fb9\u6570*2\u3002\nconst ll inf = 1e18;\nstruct edge {\n\tint v, nxt, flow, cost;\n};\nstruct node {\n\tint u;\n\tll dis;\n\tbool operator<(const node &a) const {\n\t\treturn dis > a.dis;\n\t}\n};\nstruct FYL {\n\tedge g[maxm];\n\tpair<int, int> p[maxn];\n\tint head[maxn], vis[maxn], tot, n, S, T;\n\tll dis[maxn], h[maxn];\n\tvoid init(int cnt_node, int s, int t) { // \u8bb0\u5f97\u8c03\u7528\uff01\uff01\n\t\tn = cnt_node, S = s, T = t, tot = 0;\n\t\trep(i, 1, n) head[i] = -1;\n\t}\n\tvoid add(int u, int v, int flow, int cost) {\n\t\tg[tot] = {v, head[u], flow, cost};\n\t\thead[u] = tot++;\n\t\t// \u4e94\u5904\u533a\u522b\n\t\tg[tot] = {u, head[v], 0, -cost};\n\t\thead[v] = tot++;\n\t}\n\tvoid spfa() {\n\t\tqueue<int> q;\n\t\trep(i, 1, n) h[i] = inf;\n\t\th[S] = 0;\n\t\tq.push(S);\n\t\tvis[S] = 1;\n\t\twhile (q.size()) {\n\t\t\tint u = q.front();\n\t\t\tq.pop();\n\t\t\tvis[u] = 0;\n\t\t\tfor (int i = head[u]; ~i; i = g[i].nxt) {\n\t\t\t\tauto [v, _, flow, cost] = g[i];\n\t\t\t\tif (flow && h[v] > h[u] + cost) {\n\t\t\t\t\th[v] = h[u] + cost;\n\t\t\t\t\tif (!vis[v]) {\n\t\t\t\t\t\tq.push(v);\n\t\t\t\t\t\tvis[v] = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tbool dij() {\n\t\trep(i, 1, n) {\n\t\t\tdis[i] = inf;\n\t\t\tvis[i] = 0;\n\t\t}\n\t\tpriority_queue<node> q;\n\t\tq.push({S, dis[S] = 0});\n\t\twhile (q.size()) {\n\t\t\tint u = q.top().u;\n\t\t\tq.pop();\n\t\t\tif (vis[u])\n\t\t\t\tcontinue;\n\t\t\tvis[u] = 1;\n\t\t\tfor (int i = head[u]; ~i; i = g[i].nxt) {\n\t\t\t\tauto [v, _, flow, cost] = g[i];\n\t\t\t\tll nc = cost + h[u] - h[v];\n\t\t\t\tif (flow && dis[v] > dis[u] + nc) {\n\t\t\t\t\tp[v] = {u, i};\n\t\t\t\t\tq.push({v, dis[v] = dis[u] + nc});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn dis[T] < inf;\n\t}\n\tpair<ll, ll> work() {\n\t\tspfa();\n\t\tll mxf = 0, mnc = 0;\n\t\twhile (dij()) {\n\t\t\tint mnf = 0x3f3f3f3f;\n\t\t\trep(i, 1, n) h[i] += dis[i];\n\t\t\tfor (int i = T; i != S; i = p[i].first)\n\t\t\t\tmnf = min(mnf, g[p[i].second].flow);\n\t\t\tfor (int i = T; i != S; i = p[i].first) {\n\t\t\t\tg[p[i].second].flow -= mnf;\n\t\t\t\tg[p[i].second ^ 1].flow += mnf;\n\t\t\t}\n\t\t\tmxf += mnf;\n\t\t\tmnc += 1ll * mnf * h[T];\n\t\t}\n\t\treturn {mxf, mnc};\n\t}\n} fyl;\n// // main\u51fd\u6570\u4e2d\uff1a\n// int n, m, s, t;\n// cin >> n >> m >> s >> t;\n// fyl.init(n, s, t);\n// rep(i, 1, m) {\n// \tint u, v, w, c;\n// \tcin >> u >> v >> w >> c;\n// \tfyl.add(u, v, w, c);\n// }\n// auto ret = fyl.work();\n// cout << ret.first << \" \" << ret.second;\n\nclass Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>& a) {\n        int n=a.size(),m=a[0].size(),tot=n+m+3,ss=n+m+1,t=ss+1,s=t+1;\n        fyl.init(tot,s,t);\n        fyl.add(s,ss,3,0);\n        rep(i,0,n-1){\n            fyl.add(ss,i+1,1,0);\n        }\n        rep(i,0,m-1){\n            fyl.add(n+i+1,t,1,0);\n        }\n        rep(i,0,n-1){\n            rep(j,0,m-1){\n                fyl.add(i+1,n+j+1,1,-a[i][j]);\n            }\n        }\n        auto [x,y]=fyl.work();\n        return -y;\n    }\n};",
    "submit_ts": "1723910122",
    "subm_id": "556339647"
}