{
    "username": "dhruv23899",
    "submission": "class Solution {\npublic:\n    vector<int> nums;\n    int dps[5002][51];\n    int k;\n    \n    int dp(int curr_index, int k){\n        if(curr_index>=nums.size() || k<0)\n            return 0;\n        \n        if(curr_index==nums.size()-1)\n            return 1;\n        \n        if(dps[curr_index][k]!=-1)\n            return dps[curr_index][k];\n        \n        int ans=0;\n        for(int i=curr_index+1;i<nums.size();i++){\n            if(nums[curr_index]==nums[i]){\n                ans=max(ans, 1 + dp(i, k));\n            }\n            else{\n                ans=max(ans, 1 + dp(i, k-1));\n            }\n        }\n        dps[curr_index][k]=ans;\n        return ans;\n    }\n    \n    int maximumLength(vector<int>& nums1, int k1) {\n        nums=nums1;\n        k=k1;\n        memset(dps, -1, sizeof(dps));\n        \n        map<int, int>next;\n        map<int, int>m;\n        for(int i=nums.size()-1;i>=0;i--){\n            if(m.find(nums[i])==m.end()){\n                m[nums[i]]=i;\n                next[i]=-1;\n            }\n            else{\n                next[i]=m[nums[i]];\n                m[nums[i]]=i;\n            }\n        }\n        \n        \n        \n        vector<int>prev_v(nums.size(), 0);\n        for(int i=0;i<=k;i++){\n            vector<int>v;\n            int max_till_now=0;\n            \n            for(int j=nums.size()-1;j>=0;j--){\n                dps[j][i]=1;\n                if(j+1<nums.size())  \n                    dps[j][i]=max(dps[j][i], 1+prev_v[j+1]);\n                if(next[j]!=-1)\n                    dps[j][i] = max(dps[j][i], 1+dps[next[j]][i]);\n                    \n                max_till_now = max(max_till_now, dps[j][i]);\n                v.push_back(max_till_now);\n            }\n            reverse(v.begin(), v.end());\n            prev_v=v;\n        }\n        \n        int ans=0;\n        for(int i=0;i<nums.size();i++){\n            ans=max(ans, dp(i, k));\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1717862142.0
}