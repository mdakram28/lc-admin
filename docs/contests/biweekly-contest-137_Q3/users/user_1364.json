{
    "username": "Artur",
    "submission": "class Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>& a) {\n        int m = a.size();\n        int n = a[0].size();\n        vector<vector<pair<int,int>>> row_max(m); // value and col index\n        vector<vector<pair<int,int>>> col_max(n); // value and row index\n        priority_queue<pair<int,int>, vector<pair<int,int>>, greater<pair<int,int>>> pq;\n        for(int r = 0; r<m; ++r) {\n            for(int c = 0; c<n; ++c) {\n                pq.push({a[r][c],c});\n                if(pq.size()>3) pq.pop();\n            }\n            while(!pq.empty()) {\n                row_max[r].push_back(pq.top());\n                pq.pop();\n            }\n            reverse(row_max[r].begin(),row_max[r].end());\n        }\n        for(int c = 0; c<n; ++c) {\n            for(int r = 0; r<m; ++r) {\n                pq.push({a[r][c],r});\n                if(pq.size()>3) pq.pop();\n            }\n            while(!pq.empty()) {\n                col_max[c].push_back(pq.top());\n                pq.pop();\n            }\n            reverse(col_max[c].begin(),col_max[c].end());\n        }\n        // unordered_set<int> used_rows;\n        // unordered_set<int> used_cols;\n        long long ma = LLONG_MIN;\n        vector<pair<int,int>> comb;\n        for(int r1 = 0; r1<m; ++r1) {\n            for(auto [x1,c1] : row_max[r1]) {\n                for(int r2 = r1+1; r2<m; ++r2) {\n                    for(auto [x2,c2] : row_max[r2]) {\n                        if(c2 != c1) {\n                            for(int r3 = r2+1; r3<m; ++r3) {\n                                int x3, c3;\n                                for(auto [x3,c3] : row_max[r3]) {\n                                    if(c3 != c1 && c3 != c2) {\n                                        long long s = (long long)x1+x2+x3;\n                                        //WR(\"%d %d, %d %d, %d %d\\n\",r1,c1,r2,c2,r3,c3);\n                                        if(s > ma) {\n                                            ma = s;\n                                            // comb.clear();\n                                            // comb.emplace_back(r1,c1);\n                                            // comb.emplace_back(r2,c2);\n                                            // comb.emplace_back(r3,c3);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        for(int c1 = 0; c1<n; ++c1) {\n            for(auto [x1,r1] : col_max[c1]) {\n                for(int c2 = c1+1; c2<n; ++c2) {\n                    for(auto [x2,r2] : col_max[c2]) {\n                        if(r2 != r1) {\n                            for(int c3 = c2+1; c3<n; ++c3) {\n                                int x3, r3;\n                                for(auto [x3,r3] : col_max[c3]) {\n                                    if(r3 != r1 && r3 != r2) {\n                                        long long s = (long long)x1+x2+x3;\n                                        //WR(\"%d %d, %d %d, %d %d\\n\",r1,c1,r2,c2,r3,c3);\n                                        if(s > ma) {\n                                            ma = s;\n                                            // comb.clear();\n                                            // comb.emplace_back(r1,c1);\n                                            // comb.emplace_back(r2,c2);\n                                            // comb.emplace_back(r3,c3);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        // for(auto[r,c] : comb) {\n        //     WR(\"%d %d, \",r,c);\n        // }\n        // BR;\n        return ma;\n    }\n};",
    "submit_ts": "1723910129",
    "subm_id": "1359218461"
}