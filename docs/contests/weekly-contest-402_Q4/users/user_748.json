{
    "username": "liu-nian-8v",
    "submission": "\n//\n#define ar array<int, 2>\n#define arr array<int, 3>\nconst int inf = 0x3f3f3f3f;\nconst int mod = 1e9 + 7;\nconst int N = 2e5 + 5;\n\n\n#define ll long long\nclass Solution {\n  public:\n\tint tr[N], n;\n\tvoid add(int x, int v) {\n\t\twhile (x <= n) {//\u8fd9\u4e2an\u662f\u8303\u56f4\u3002\u3002\u8fd9\u4e2a\u6a21\u7248\u4f3c\u4e4e\u5fc5\u987b\u203c\ufe0f\u8981\u4ece1 \u5f00\u59cb \u5916\u9762\u5957\u4e2anode\u5c31\u53ef\u4ee5\u591a\u5f00\u4e86\u3002\n\t\t\ttr[x] += v, x += x & (-x);\n\t\t}\n\t}\n\tint query(int x) {\n\t\tint s = 0;\n\t\tif (x == 0)return 0;\n\t\twhile (x) {\n\t\t\ts += tr[x], x -= x & (-x);\n\t\t}\n\t\treturn s;\n\t}\n\tvector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& b) {\n// \u8fd9\u4e2a\u5c31\u662f\u3002\u3002\u3002\u989d\u3002\u3002\u3002\n\t\t// \u4ed6\u53ea\u4f1a\u5f71\u54cd\u5230\u76f8\u90bb\u7684\u5427\u3002\u3002\n\t\t//\u53ef\u4ee5\u7ef4\u62a4\u4e0b\u3002\u3002\u7136\u540e \u7528\u6811\u72b6\u6570\u7ec4 \u67e5\u8be2\u5c31\u884c\u884c\u4e86\u3002\n\t\tint n = a.size();\n\t\tthis->n = n + 1;\n\t\tfor (int i = 1; i < n - 1; ++i) {\n\t\t\tif (a[i] > a[i - 1] && a[i] > a[i + 1])\n\t\t\t\tadd(i, 1);\n\t\t}\n\t\tvector<int>ans;\n\t\tfor (auto&b : b) {\n\t\t\tint o = b[0], x = b[1], y = b[2];\n\t\t\tif (o == 1) {\n\t\t\t\tx++, y--;\n\t\t\t\tif (x > y)\n\t\t\t\t\tans.push_back(0);\n\t\t\t\telse\n\t\t\t\t\tans.push_back(query(y) - query(x - 1));\n\t\t\t} else {\n\t\t\t\tif (x < n - 2) {\n// \u53f3\u8fb9\u4f1a\u6709\u5f71\u54cd\u3002\n\t\t\t\t\t//\u4e5f\u6709\u53ef\u80fd\u53d8\u591a\u4e86\u3002\n\t\t\t\t\tif (y >= a[x + 1] && a[x] < a[x + 1] && a[x + 1] > a[x + 2]) {\n\t\t\t\t\t\tadd(x + 1, -1);\n\t\t\t\t\t}\n\t\t\t\t\tif (y < a[x + 1] && a[x] >= a[x + 1] && a[x + 1] > a[x + 2]) {\n\t\t\t\t\t\tadd(x + 1, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (x > 1) {\n\t\t\t\t\tif (y >= a[x - 1] && a[x] < a[x - 1] && a[x - 1] > a[x - 2])\n\t\t\t\t\t\tadd(x - 1, -1);\n\t\t\t\t\tif (y < a[x - 1] && a[x] >= a[x - 1] && a[x - 1] > a[x - 2])\n\t\t\t\t\t\tadd(x - 1, 1);\n\t\t\t\t}\n\t\t\t\t// \u53ef\u80fd\u7684\u5f71\u54cd\u3002\u3002\n\t\t\t\t// \u7136\u540e\u8003\u8651\u81ea\u5df1\n\t\t\t\tif (x > 0 && x < n - 1 && y > a[x - 1] && y > a[x + 1] && !(a[x] > a[x - 1] && a[x] > a[x + 1]))\n\t\t\t\t\tadd(x, 1);\n\t\t\telse\tif (x > 0 && x < n - 1 && (y<= a[x - 1] || y <= a[x + 1]) && query(x) - query(x - 1) == 1 )\n\t\t\t\t\tadd(x, -1);\n\t\t\t\ta[x] = y;\n\t\t\t}\n\t\t};\n\t\treturn ans;\n\t} ;\n};\n//\n//",
    "submit_ts": 1718507777.0
}