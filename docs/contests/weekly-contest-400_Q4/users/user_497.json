{
    "username": "eyfmharb",
    "submission": "#include<bit>\n\nclass Solution {\npublic:\n    int log2_floor(unsigned long i) {\n        return std::bit_width(i) - 1;\n    }\n    int f(vector<vector<int>>& st, int l, int r){\n        int i = log2_floor(r-l+1);\n        return st[i][l] & st[i][r - (1 << i) + 1];\n    }\n\n    int minimumDifference(vector<int>& nums, int k) {\n        int K = 20;\n        int N = nums.size();\n        \n        vector<vector<int>> st(K+1, vector<int>(N+1, 0));\n        copy(nums.begin(), nums.end(), st[0].begin());\n\n        for (int i = 1; i <= K; i++)\n            for (int j = 0; j + (1 << i) <= N; j++)\n                st[i][j] = st[i - 1][j] & st[i - 1][j + (1 << (i - 1))];\n        \n        int ans = INT_MAX;\n        for(int i=0; i<N; ++i){\n            if (nums[i]<=k)ans = min(ans, k-nums[i]);\n            else if (f(st, i, N-1)>=k)ans = min(ans,f(st, i, N-1)-k );\n            else{\n                int l = i;\n                int r = N-1;\n                while (r-l>1){\n                    int mid = (l+r)/2;\n                    ans = min(ans, abs(k - f(st, i, mid)));\n                    if ( f(st, i, mid)>= k )l=mid;\n                    else r = mid-1;\n                }\n                ans = min(ans, abs(k - f(st, i, l)));\n                ans = min(ans, abs(k - f(st, i, r)));\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1717298650.0
}