{
    "username": "sunsq",
    "submission": "class Solution:\n    def numberOfSubstrings(self, s: str) -> int:\n        zero_cnt = 0\n        for c in s:\n            if c == '0':\n                zero_cnt += 1\n                \n        def helper0() -> int:\n            cnt = 0\n            res = 0\n            for i, c in enumerate(s):\n                if c == '1':\n                    cnt += 1\n                    res += cnt\n                else:\n                    cnt = 0\n            return res\n        \n        def helper(cnt: int) -> int:\n            # substring: zero_cnt == cnt, one_cnt >= cnt * cnt\n            j1 = 0\n            j2 = 0\n            zero_cnt1 = 0\n            zero_cnt2 = 0\n            one_cnt = 0\n            res = 0\n            for i, c in enumerate(s):\n                if c == '0':\n                    zero_cnt1 += 1\n                    zero_cnt2 += 1\n                else:\n                    one_cnt += 1\n                while zero_cnt1 > cnt:\n                    if s[j1] == '0':\n                        zero_cnt1 -= 1\n                    else:\n                        one_cnt -= 1\n                    j1 += 1\n                while zero_cnt2 >= cnt:\n                    if s[j2] == '0':\n                        zero_cnt2 -= 1\n                    j2 += 1\n                if one_cnt >= cnt * cnt:\n                    # print(i, j1, j2, one_cnt, zero_cnt)\n                    if one_cnt - (j2 - j1) >= cnt * cnt:\n                        res += j2 - j1\n                        # print(\"c1\", j2 - j1)\n                    else:\n                        res += one_cnt - (cnt * cnt) + 1\n                        # print(\"c2\", one_cnt - (cnt * cnt))\n                    \n            return res\n        \n        res = helper0()\n        for cnt in range(1, min(zero_cnt + 1, 200)):\n            x = helper(cnt)\n            # print(cnt, x)\n            res += x\n        return res",
    "submit_ts": "1722136625",
    "subm_id": "1335740205"
}