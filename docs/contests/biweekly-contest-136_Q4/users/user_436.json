{
    "username": "ppwani",
    "submission": "class Solution {\n    int in[];\n    int tm[];\n    int secin[];\n    int out[];\n    int mxchild[];\n    int ans[];\n    public int[] timeTaken(int[][] ev) {\n        int n = ev.length+1;\n        ArrayList<Integer>arr[] = new ArrayList[n];\n        for(int i=0;i<n;i++)arr[i]=new ArrayList<>();\n        for(int e[]:ev){\n            arr[e[0]].add(e[1]);\n            arr[e[1]].add(e[0]);\n        }\n        in = new int[n];\n        tm = new int[n];\n        secin = new int[n];\n        out = new int[n];\n        mxchild = new int[n];\n        dfs(0,arr,-1,0);\n        out[0]=0;\n        ans = new int[n];\n        dfs2(0,arr,-1,0);\n        return ans;\n    }\n    void dfs2(int at, ArrayList<Integer>arr[], int par,int time){\n        ans[at]=in[at]-tm[at];\n        if(par!=-1){\n            int diff = par%2==0?2:1;\n            int nans=0;\n            if(arr[par].size()>1){\n                if(mxchild[par]==at){\n                    nans=secin[par]-tm[par]+diff;\n                }\n                else {\n                    nans=in[par]-tm[par]+diff;\n                }\n            }\n            out[at]=nans;\n            out[at]=Math.max(out[at],out[par]+diff);\n            ans[at]=Math.max(ans[at],out[at]);\n        }\n        for(int to:arr[at]){\n            if(to==par)continue;\n            dfs2(to,arr,at,time+(to%2==0?2:1));\n        }\n    }\n    \n    void dfs(int at, ArrayList<Integer>arr[], int par,int time){\n        tm[at]=time;\n        in[at]=time;\n        for(int to:arr[at]){\n            if(to==par)continue;\n            dfs(to,arr,at,time+(to%2==0?2:1));\n        }\n        int mxind=-1,mx=0;\n        for(int to:arr[at]){\n            if(to==par)continue;\n            if(mx<in[to]){\n                mxind=to;\n                mx=in[to];\n            }\n            in[at]=Math.max(in[to],in[at]);\n        }\n        mxchild[at]=mxind;\n        int secmx=0;\n        int secmxind=-1;\n        for(int to:arr[at]){\n            if(to==par)continue;\n            if(to!=mxind){\n                if(secmx<in[to]){\n                    secmxind=to;\n                    secmx=in[to];\n                }\n            }\n        }\n        secin[at]=secmx;\n    }\n}",
    "submit_ts": "1722699042",
    "subm_id": "1343199745"
}