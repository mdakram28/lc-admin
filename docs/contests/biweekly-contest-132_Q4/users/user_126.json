{
    "username": "grundy_number",
    "submission": "class Solution {\npublic:\n    int maximumLength(vector<int>& s, int k) {\n        int n = s.size();\n        vector<vector<int>> d(n, vector<int> (k + 1, INT_MIN));\n        vector<pair<int, int>> a(k + 1, {-1, -1}), b(k + 1, {-1, -1});\n        map<int, vector<int>> m;\n        for (int i = 0; i < n; ++i) {\n            if (m.find(s[i]) == m.end()) {\n                m[s[i]] = vector<int> (k + 1, INT_MIN);\n            }\n        }\n        \n        for (int i = 0; i < n; ++i) {\n            d[i][0] = max(d[i][0], 1);\n            \n            for (int l = 0; l <= k; ++l) {\n                if (a[l].first == s[i]) {\n                    int j = a[l].second;\n                    d[i][l] = max(d[i][l], d[j][l] + 1);\n                }\n                \n                if (l < k && a[l].first != s[i] && a[l].second != -1) {\n                    int j = a[l].second;\n                    d[i][l+1] = max(d[i][l+1], d[j][l] + 1);\n                }\n                \n                if (b[l].first == s[i]) {\n                    int j = b[l].second;\n                    d[i][l] = max(d[i][l], d[j][l] + 1);\n                }\n                \n                if (l < k && b[l].first != s[i] && b[l].second != -1) {\n                    int j = b[l].second;\n                    d[i][l+1] = max(d[i][l+1], d[j][l] + 1);\n                }\n            }\n            \n            for (int l = 0; l <= k; ++l) {\n                if (m[s[i]][l] != INT_MIN) {\n                    d[i][l] = max(d[i][l], m[s[i]][l] + 1);\n                }\n                m[s[i]][l] = d[i][l];\n            }\n            \n            for (int l = 0; l <= k; ++l) {\n                int j1 = a[l].second;\n                int j2 = b[l].second;\n                if (j1 == -1 || d[i][l] >= d[j1][l]) {\n                    if (a[l].first != s[i]) {\n                        b[l] = a[l];\n                    }\n                    a[l] = {s[i], i};\n                    continue;\n                } \n                \n                if (j2 == -1 || (d[i][l] > d[j2][l] && s[i] != a[l].first)) {\n                    b[l] = {s[i], i};\n                }\n            } \n        }\n        int ans = INT_MIN;\n        for (int i = 0; i < n; ++i) {\n            for (int l = 0; l <= k; ++l) {\n                ans = max(ans, d[i][l]);\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1717860561.0
}