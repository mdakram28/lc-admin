{
    "username": "meumarkhan",
    "submission": "class Solution {\npublic:\n    long long check(vector<vector<int>>&pref, int i, int j){\n        int res = 0;\n        \n        for(int x = 0;x<31;x++){\n            if((pref[j+1][x]-pref[i][x])==(j-i+1))res+=(1<<x);\n        }\n       // cout<<\"i : \"<<i<<\" j : \"<<j<<\" res : \"<<res<<\"\\n\";\n        return res;\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n = nums.size();\n        \n        vector<vector<int>>pref(n+1,vector<int>(31,0));\n        for(int i = 0;i<n;i++){\n            for(int j =0;j<31;j++){\n                if(nums[i]&(1<<j))pref[i+1][j]=1;\n            }\n        }\n        for(int i = 1;i<=n;i++){\n            for(int j = 0;j<31;j++){\n                pref[i][j]+=pref[i-1][j];\n            }\n        }\n        \n        \n        long long ans = 0;\n        for(int i = 0;i<n;i++){\n            //first and k\n            int lo = i;\n            int hi = n-1;\n            \n            \n            if((check(pref,i,n-1)>k) || ((nums[i])<k))continue;\n            int ind1 = i;\n            \n            while(lo<=hi){\n                int mid = lo + ((hi-lo)/2);\n                if(check(pref,i,mid)<=k){\n                    ind1 = mid;\n                    hi = mid-1;\n                }\n                else{\n                    lo = mid+1;\n                }\n            }\n            \n            \n            lo = i;\n            hi = n-1;\n            int ind2 =n;\n            \n            while(lo<=hi){\n                int mid = lo + ((hi-lo)/2);\n                if(check(pref,i,mid)>=k){\n                    lo = mid+1;\n                }\n                else{\n                    ind2 = mid;\n                    hi = mid-1;\n                }\n            }\n            \n           // cout<<\"i : \"<<i<<\" \"<<ind1<<\" \"<<ind2<<\"\\n\";\n            \n            ans+=(ind2-ind1);\n            \n            \n            \n            \n            //first and less than k\n        }\n        \n        \n        return ans;\n\n        \n//         long long ans = 0;\n        \n        \n//         int lo = 1;\n//         int current =(1<<31)-1;\n//         vector<int>cur(31,0);\n//         for(int hi = 1;hi<=n;hi++){\n//             for(int i = 0;i<31;i++){\n//                 cur[i]+=(nums[hi][i]);\n//             }\n//             int curr = 0;\n//             for(int i = 0;i<31;i++){\n//                 if(nums[hi]&(1<<i))current[i]++;\n//             }\n//             while(currnum[current]<k && (lo<=hi)){\n                \n//             }\n//         }\n        \n    }\n};",
    "submit_ts": "1720279600",
    "subm_id": "1311757730"
}