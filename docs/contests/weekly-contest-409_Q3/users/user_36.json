{
    "username": "coolli",
    "submission": "#include <bits/stdc++.h>\n#define fi first\n#define se second\n#define mk make_pair\n#define pii pair<int, int>\n#define pll pair<ll, ll>\n#define V vector\n#define pb push_back\n#define SZ(a) ((int)a.size())\n#define all(a) a.begin(), a.end()\n#define TP template <class o>\n#define TPP template <class t1, class t2>\n#define rep(i, a, b) for (int i = a, i##ed_ = b; i <= i##ed_; i++)\n#define REP(i, a, b) for (int i = b, i##st_ = a; i >= i##st_; i--)\n#define FOR(i, n) rep(i, 1, n)\n#define debug(x) cerr << #x << ' ' << '=' << ' ' << x << endl\nusing namespace std;\ntypedef double db;\ntypedef unsigned ui;\ntypedef long long ll;\ntypedef unsigned long long ull;\n\nTP bool cmax(o& x, o y) { return (x < y ? x = y, 1 : 0); }\nTP bool cmin(o& x, o y) { return (x > y ? x = y, 1 : 0); }\nTP void order(V<o> &a) { sort(all(a)); a.resize(unique(all(a)) - a.begin());}\nTP int get_id(V<o> &a, const o& val) {return lower_bound(all(a), val) - a.begin();}\nll power(ll a, ll b, ll mod) {ll c=1;for(;b;b/=2,a=a*a%mod)if(b&1)c=c*a%mod;return c;}\n\nconst int N = 1e5 + 10;\nclass Solution {\npublic:\n    int f[N]; // max\n    vector<int> shortestDistanceAfterQueries(int n, vector<vector<int>>& a) {\n        V<int> ans;\n        set<pii> e;\n        rep(i, 0, n - 2) e.insert(mk(i, i + 1)), f[i] = i + 1;\n        for(auto i: a) {\n            int x = i[0], y = i[1];\n            if(cmax(f[x], y)) {\n                auto now = mk(x, y);\n                while(1) {\n                    auto it = e.lower_bound(mk(x, 0));\n                    if(it != e.end() && it->fi < y) {\n                        e.erase(it);\n                    }\n                    else break;\n                }\n                auto it = e.lower_bound(now);\n                if(it != e.begin()) {\n                    --it;\n                    auto v = *it;\n                    // cerr << v.fi << ' ' << v.se << endl;\n                    if(it->se <= x) \n                        e.insert(now);\n                }\n                else e.insert(now);\n            }\n            ans.pb(SZ(e));\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1722739973",
    "subm_id": "552328377"
}