{
    "username": "Lakshit Joshi",
    "submission": "class Solution {\npublic:\n    #define pii pair<int, int>\n    using ll = long long int;\n    long long maximumValueSum(vector<vector<int>>& b) {\n        int n = b.size(), m  = b[0].size();\n        // size 3 \n        map<int, vector<pii>> rmax, cmax;\n        for(int i = 0; i < n; i++) {\n            set<pii> s;\n            for(int j = 0; j < m; j++) {\n                s.insert({b[i][j], j});\n                if(s.size() > 3) s.erase(s.begin());\n            }\n            for(auto& it: s) rmax[i].push_back(it);\n        }\n        \n        for(int j = 0; j < m; j++) {\n            set<pii> s;\n            for(int i = 0; i < n; i++) {\n                s.insert({b[i][j], i});\n                if(s.size() > 3) s.erase(s.begin());\n            }\n            for(auto& it: s) cmax[j].push_back(it);\n        }\n        \n        ll ans = -1e18;\n        set<int> bc, br;\n        for(int i = 0; i < n; i++) {\n            for(int num = 0; num < 3; num++) {\n                ll sum = rmax[i][num].first;\n                bc.insert(rmax[i][num].second);\n                br.insert(i);\n                for(int j = rmax[i][num].second + 1; j < m; j++) {\n                    if(bc.find(j) != bc.end()) continue;\n                    for(int num2 = 0; num2 < 3; num2++) {\n                        auto d = cmax[j][num2];\n                        if(br.find(d.second) != br.end()) continue;\n                        br.insert(d.second);\n                        sum += d.first;\n                        bc.insert(j);\n                        for(int k = j + 1; k < m; k++) {\n                            if(bc.find(k) != bc.end()) continue;\n                            for(int num3 = 0; num3 < 3; num3++) {\n                                auto d2 = cmax[k][num3];\n                                if(br.find(d2.second) != br.end()) continue;\n                                ans = max(ans, sum + d2.first);\n                            }\n                        }\n                        bc.erase(j);\n                        br.erase(d.second);\n                        sum -= d.first;\n                    }\n                }\n                bc.erase(rmax[i][num].second);\n                br.erase(i);\n            }\n        }\n        return ans;\n        \n    }\n};",
    "submit_ts": "1723910387",
    "subm_id": "1359228778"
}