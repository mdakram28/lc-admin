{
    "username": "huah-f",
    "submission": "class Solution\n{\npublic:\n    int minChanges(vector<int> &nums, int k)\n    {\n        vector<int> ok(100005);\n        auto add = [&](int l, int r, int val)\n        {\n            ok[l] += val;\n            ok[r + 1] -= val;\n        };\n        auto add2 = [&](int l, int r, int p, int val)\n        {\n            if (l > r)\n                return;\n            add(l, r, val);\n            if (p >= l && p <= r)\n                add(p, p, -val);\n        };\n        auto addone = [&](int l1, int r1, int l2, int r2, int p)\n        {\n            if (l1 > l2)\n                swap(l1, l2), swap(r1, r2);\n            if (l2 <= r1)\n            {\n                add2(l1, max(r1, r2), p, 1);\n            }\n            else\n            {\n                add2(l1, r1, p, 1);\n                add2(l2, r2, p, 1);\n            }\n        };\n        auto addtwo = [&](int l1, int r1, int l2, int r2, int p)\n        {\n            if (l1 > l2)\n                swap(l1, l2), swap(r1, r2);\n            if (l2 <= r1)\n            {\n                add2(0, l1 - 1, p, 2);\n                add2(max(r1, r2) + 1, k, p, 2);\n            }\n            else\n            {\n                add2(0, l1 - 1, p, 2);\n                add2(r1 + 1, l2 - 1, p, 2);\n                add2(r2 + 1, k, p, 2);\n            }\n        };\n\n        map<int, int> mp;\n        int n = nums.size();\n        for (int i = 0; i < n / 2; ++i)\n        {\n            int x = nums[i];\n            int y = nums[n - 1 - i];\n            int p = abs(x - y);\n            int l1, l2, r1, r2;\n            if (k <= x)\n            {\n                l1 = x - k;\n                r1 = x;\n            }\n            else\n            {\n                l1 = 0;\n                r1 = max(x, k - x);\n            }\n            if (k <= y)\n            {\n                l2 = y - k;\n                r2 = y;\n            }\n            else\n            {\n                l2 = 0;\n                r2 = max(y, k - y);\n            }\n            addone(l1, r1, l2, r2, p);\n            ++mp[p];\n            add(p, p, 1);\n        }\n        for (int i = 1; i < ok.size(); ++i)\n            ok[i] += ok[i - 1];\n        int ans = n;\n        for (int i = 0; i < ok.size(); ++i)\n            if (ok[i] == n / 2)\n            {\n                ans = min(ans, n / 2 - mp[i]);\n            }\n        for (int i = 0; i < ok.size(); ++i)\n            ok[i] = 0;\n        int ret = 0;\n        for (int i = 0; i < n / 2; ++i)\n        {\n            int x = nums[i];\n            int y = nums[n - 1 - i];\n            int l1, l2, r1, r2;\n            int p = abs(x - y);\n            if (k <= x)\n            {\n                l1 = x - k;\n                r1 = x;\n            }\n            else\n            {\n                l1 = 0;\n                r1 = max(x, k - x);\n            }\n            if (k <= y)\n            {\n                l2 = y - k;\n                r2 = y;\n            }\n            else\n            {\n                l2 = 0;\n                r2 = max(y, k - y);\n            }\n\n            addone(l1, r1, l2, r2, p);\n            addtwo(l1, r1, l2, r2, p);\n        }\n\n        for (int i = 1; i <= k; ++i)\n            ok[i] += ok[i - 1];\n        for (int i = 0; i <= k; ++i)\n        {\n            ans = min(ans, ok[i]);\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1721489966",
    "subm_id": "548320985"
}