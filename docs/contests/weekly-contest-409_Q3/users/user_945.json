{
    "username": "svveet-swansonarc",
    "submission": "//\u6811\u72b6\u6570\u7ec4(Fenwick Tree). \u6c42\u524d\u7f00\u548c\uff0c\u4e0b\u6807\u4ece 1 \u5f00\u59cb\nclass Fenwich{\npublic:\n    vector<int> tree;\n    Fenwich(int n): tree(n){}\n\n    int lowBit(int x){\n        return x & -x;\n    }\n    void add(int idx, int val){\n        while(idx < tree.size()){\n            tree[idx] += val;\n            idx += lowBit(idx);\n        }\n    }\n    // get sum of element[1]...element[idx]\n    int pre(int idx){\n        int res = 0;\n        while(idx > 0){\n            res += tree[idx];\n            idx &= idx - 1;\n        }\n        return res;\n    }\n};\nclass Solution {\npublic:\n    vector<int> shortestDistanceAfterQueries(int n, vector<vector<int>>& queries) {\n        vector<int> pre(n+1);\n        for(int i = 2; i<=n; ++i){\n            pre[i] = i-1;\n        }\n        Fenwich ft(n+1);\n        for(int i = 1; i<=n; ++i){\n            ft.add(i, 1);\n        }\n        int dis = n-1;\n        vector<int> ans;\n        for(int i = 0; i<queries.size(); ++i){\n            int u = queries[i][0] + 1, v = queries[i][1] + 1;\n            // \u5224\u65ad\u662f\u5426\u5728\u67d0\u4e2a\u8986\u76d6\u4e0b\uff0c\u8df3\u8fc7\n            int cnt = ft.pre(v) - ft.pre(u);\n            if(cnt <= 1){\n                ans.push_back(dis);\n                continue;\n            }\n            int mid = 0, cur = pre[v];\n            while(cur != u){\n                mid++;\n                ft.add(cur, -1);\n                cur = pre[cur];\n            }\n            if(mid != 0) dis -= mid;\n            ans.push_back(dis);\n            pre[v] = u;\n        };\n        return ans;\n    }\n};",
    "submit_ts": "1722742448",
    "subm_id": "552344697"
}