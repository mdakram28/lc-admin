{
    "username": "g129512",
    "submission": "\nimport java.util.*;\n\nclass DPSubTrees {\n        int[] dp;\n        List<List<Integer>> g;\n        int[] ans;\n\n        public void diameter(int minIndex, int maxIndex, int[][] edges) {\n            g = new ArrayList<>();\n            for (int i = 0; i <= maxIndex; i++) {\n                g.add(new ArrayList<>());\n            }\n            for (int[] edge : edges) {\n                g.get(edge[0]).add(edge[1]);\n                g.get(edge[1]).add(edge[0]);\n            }\n            dp = new int[maxIndex + 1];\n            ans = new int[maxIndex];\n            down(minIndex, -1);\n            dp(minIndex, -1, 0);\n        }\n\n        private void down(int i, int p) {\n            for (int edge : g.get(i)) {\n                if (edge == p) {\n                    continue;\n                }\n                down(edge, i);\n                dp[i] = Math.max(dp[i], dp[edge] + (edge%2==1 ? 1 : 2));\n            }\n        }\n        private void upMax(int[] a, int v) {\n            if (v >= a[0]) {\n                a[1] = a[0];\n                a[0] = v;\n            } else if (v >= a[1]) {\n                a[1] = v;\n            }\n        }\n        private void dp(int i, int p, int pmx) {\n            ans[i] = pmx;\n            int[] mx = new int[2];\n            upMax(mx, pmx);\n            for (int ch : g.get(i)) {\n                if (ch == p) continue;\n                ans[i] = Math.max(ans[i], dp[ch] + (ch%2==1 ? 1 : 2));\n                upMax(mx, dp[ch] + (ch%2==1 ? 1 : 2));\n            }\n            for (int ch : g.get(i)) {\n                if (ch == p) continue;\n                int v = dp[ch] + (ch%2==1 ? 1 : 2);\n                int nmx = v == mx[0] ? mx[1] : mx[0];\n                dp(ch, i, nmx + (i%2==1 ? 1 : 2));\n            }\n        }\n    }\n\nclass Solution {\n    public int[] timeTaken(int[][] edges) {\n        DPSubTrees dp = new DPSubTrees();\n        int n = edges.length + 1;\n        dp.diameter(0, n, edges);\n        return dp.ans;\n    }\n}",
    "submit_ts": "1722698110",
    "subm_id": "1343169984"
}