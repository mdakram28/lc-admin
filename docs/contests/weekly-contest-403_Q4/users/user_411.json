{
    "username": "xlx2",
    "submission": "class Solution:\n    def minimumSum(self, grid: List[List[int]]) -> int:\n        def calc(grid):\n            m, n = len(grid), len(grid[0])\n            @cache\n            def f(a, b, c, d):\n                if a > c or b > d:\n                    return 0, 0\n                cnt = 0\n                x1 = y1 = math.inf\n                x2 = y2 = -1\n                for i in range(a, c+1):\n                    for j in range(b, d+1):\n                        if grid[i][j] == 1:\n                            cnt += 1\n                            if i < x1: x1 = i\n                            if j < y1: y1 = j\n                            if i > x2: x2 = i\n                            if j > y2: y2 = j\n                if cnt == 0:\n                    return 0, 0\n                return (x2-x1+1) * (y2-y1+1), cnt\n\n            total = sum(sum(row) for row in grid)\n            ans = math.inf\n            for x in range(m-1, -1, -1):\n                for y in range(n-2, -1, -1):\n                    a1, c1 = f(0, 0, x, y)\n                    if c1 == 0: break\n                    for p in range(x+1):\n                        a2, c2 = f(0, y+1, p, n-1)\n                        if c2 == 0: continue\n                        a3, c3 = f(p+1, y+1, m-1, n-1)\n                        if c1 + c2 + c3 == total:\n                            ans = min(ans, a1 + a2 + a3)\n                        a3, c3 = f(x+1, 0, m-1, n-1)\n                        if c1 + c2 + c3 == total:\n                            ans = min(ans, a1 + a2 + a3)\n                    for p in range(x+1, m):\n                        a2, c2 = f(0, y+1, p, n-1)\n                        if c2 == 0: continue\n                        a3, c3 = f(x+1, 0, m-1, y)\n                        if c1 + c2 + c3 == total:\n                            ans = min(ans, a1 + a2 + a3)\n                        a3, c3 = f(p+1, 0, m-1, n-1)\n                        if c1 + c2 + c3 == total:\n                            ans = min(ans, a1 + a2 + a3)\n            for s in range(n-1):\n                a1, c1 = f(0, 0, m-1, s)\n                for t in range(s+1, n):\n                    a2, c2 = f(0, s+1, m-1, t)\n                    a3, c3 = f(0, t+1, m-1, n-1)\n                    if c1 + c2 + c3 == total:\n                        ans = min(ans, a1 + a2 + a3)\n            f.cache_clear()\n            return ans\n\n        ans1 = calc(grid)\n        ans2 = calc(list(zip(*grid)))\n        return min(ans1, ans2)",
    "submit_ts": 1719114361.0
}