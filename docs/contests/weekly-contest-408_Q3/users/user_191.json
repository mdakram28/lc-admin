{
    "username": "kirya2604",
    "submission": "class Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        int n = s.length();\n        s = '#' + s + '#';\n        vector<int> nextZero(n + 5, 0);\n        vector<int> ones(n + 5, 0);\n\n        for (int i = 1; i <= n; i ++) ones[i] = ones[i - 1] + (s[i] == '1');\n        nextZero[n + 1] = n + 1;\n        for (int i = n ; i>= 1; i --)\n        {\n            if (s[i] == '0')\n                nextZero[i] = i;\n            else\n                nextZero[i] = nextZero[i + 1];\n        }\n\n        long long answer = 0;\n\n        for (int i = 1; i <= n; i ++)\n        {/*\n            int cur = i;\n            if (nextZero[i] > i)\n            {\n                answer += min(n, nextZero[i]) - i;\n                cout << i << \" \" << 0 << \" \" << min(n, nextZero[i]) - i << endl;\n            }\n            cur = nextZero[i];\n\n            for (int z = 1; z * 1ll * z <= n; z ++)\n            {\n                if (cur > n) break;\n                int minPos = cur;\n                if (ones[cur] - ones[i - 1] < z * z)\n                    minPos += z * z - ones[cur] + ones[i - 1];\n                cout << i << \" \" << z << \" \" << minPos << \" \" ;\n                if (minPos > n) { break; cout << endl; }\n                \n                int nextCur = nextZero[cur + 1];\n                if (nextCur > minPos && min(n, nextCur) > minPos)\n                    answer += min(n, nextCur) - minPos;\n                cout << nextCur << \" \" << min(n, nextCur) - minPos << endl;\n                cur = nextCur;\n            }*/\n\n            for (int j = i; j <= n; j ++)\n            {\n                int _one = ones[j] - ones[i - 1];\n                int _zeros = j - i + 1 - _one;\n                if (_zeros * 1ll * _zeros > n) break;\n                if (_one >= _zeros * 1ll * _zeros)\n                {\n                    int nZ = nextZero[j + 1] - 1;\n                    \n                    //cout << i << \" \" << j << \" \" << _one << \" \" << _zeros << \" \" << nZ << endl;\n                    //cout << \"Add \" << nZ - j + 1 << endl;\n                    answer += nZ - j + 1;\n                    j = nZ;\n                }\n            }\n        }\n\n        return answer;\n    }\n};",
    "submit_ts": "1722136723",
    "subm_id": "1335743086"
}