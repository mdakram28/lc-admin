{
    "username": "Sergey Dimitrov",
    "submission": "class Solution {\npublic:\n\n    const long long INF = 1LL << 40;\n\n    long long dp[500][500];\n\n    vector<pair<long long, int>> best[500];\n\n    int n;\n    int m;\n\n    void updateDp(int i) {\n        for (int j = 0; j < m; j++) {\n            for (int k = j + 1; k < m; k++) {\n                if (best[i][2].second != j && best[i][2].second != k) dp[j][k] = max(dp[j][k], best[i][2].first);\n                else if (best[i][1].second != j && best[i][1].second != k) dp[j][k] = max(dp[j][k], best[i][1].first);\n                else dp[j][k] = max(dp[j][k], best[i][0].first);\n            }\n        }\n    }\n\n    long long maximumValueSum(vector<vector<int>>& board) {\n        n = board.size();\n        m = board[0].size();\n\n        for (int i = 0; i < n; i++) {\n            best[i].push_back({ -INF, -1 });\n            best[i].push_back({ -INF, -1 });\n            best[i].push_back({ -INF, -1 });\n            for (int j = 0; j < m; j++) {\n                pair<long long, int> e = { board[i][j], j };\n                if (best[i][0] < e) swap(best[i][0], e);\n                if (best[i][1] < best[i][0]) swap(best[i][1], best[i][0]);\n                if (best[i][2] < best[i][1]) swap(best[i][2], best[i][1]);\n            }\n        }\n\n        long long ans = -INF;\n        for (int i = 0; i < n; i++) {\n            for (int j = i + 1; j < n; j++) {\n                dp[i][j] = -INF;\n            }\n        }\n\n        for (int j = 1; j < n; j++) {\n            updateDp(j - 1);\n\n            for (int k = j + 1; k < n; k++) {\n                for (int jj = 0; jj < 3; jj++) {\n                    for (int kk = 0; kk < 3; kk++) {\n                        if (best[j][jj].second == best[k][kk].second) continue;\n                        int mx = max(best[j][jj].second, best[k][kk].second);\n                        int mn = min(best[j][jj].second, best[k][kk].second);\n                        ans = max(ans, dp[mn][mx] + best[j][jj].first + best[k][kk].first);\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n};\n",
    "submit_ts": "1723906712",
    "subm_id": "1359068227"
}