{
    "username": "harttle",
    "submission": "/**\n * @param {number[]} nums\n * @return {number}\n */\nvar countOfPairs = function(nums) {\n    const N = nums.length\n    const M = 1e3\n    const MOD = 1e9 + 7\n    const dp = Array(N + 1).fill(0).map(x => new BIT(M + 1))\n    for (let m = 0; m <= nums[0]; m++) dp[1].update(m + 1, 1)\n    for (let n = 2; n <= N; n++) {\n        // console.log(`n=${n}`)\n        for (let m = 0; m <= nums[n - 1]; m++) {\n            const m1 = nums[n - 1] - m\n            const m2 = nums[n - 2] - m1\n            const pre = Math.min(m, m2)\n            dp[n].update(m + 1, (m2 < 0 ? 0 : dp[n - 1].sum(pre + 1)) % MOD)\n            // console.log(`m=${m} pre=min(${m}, ${m2}), presum=${dp[n - 1].sum(pre + 1)}`)\n        }\n    }\n    return dp[N].sum(nums[N - 1] + 1) % MOD\n};\n\n/*\n * Template from contest.js\n * Github: https://github.com/harttle/contest.js\n * Website: https://harttle.land/contest.js/\n */\n// src/bit.ts\nvar BIT = class {\n  constructor(N) {\n    this.N = N;\n    this.sums = Array(N + 1).fill(0);\n    this.nums = Array(N + 1).fill(0);\n  }\n  increment(n, diff) {\n    this.nums[n] += diff;\n    while (n <= this.N) {\n      this.sums[n] += diff;\n      n += n & -n;\n    }\n  }\n  update(n, val) {\n    this.increment(n, val - this.nums[n]);\n  }\n  sum(n) {\n    let sum = 0;\n    while (n > 0) {\n      sum += this.sums[n];\n      n -= n & -n;\n    }\n    return sum;\n  }\n};",
    "submit_ts": "1723346336",
    "subm_id": "1351575345"
}