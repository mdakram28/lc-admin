{
    "username": "yin-he-xi-xi-chang",
    "submission": "class Solution {\npublic:\n    typedef long long ll;\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n=nums.size();\n        vector<int> p(33,0);\n        for(int i=0;i<31;i++)\n            if((k>>i)&1)\n                p[i]++;\n        ll res=0;\n        vector<pair<int,int>> a;\n        function<bool(int)> check=[&](int x){\n            for(int i=0;i<31;i++){\n                if(p[i]){\n                    if(x>>i&1) continue;\n                    else return false;\n                }\n            }\n            return true;\n        };\n        for(int i=0;i<n;i++){\n            int k=i;\n            while(k<n&&check(nums[k])) k++;\n            if(k>i) a.push_back({i,k-1});\n            i=k;\n        }\n        for(int i=0;i<a.size();i++){\n            int l=a[i].first,r=a[i].second;\n            map<int,int> p1;\n            // cout<<l<<\" \"<<r<<endl;\n            for(int j=r;j>=l;j--){\n                for(int k=0;k<=31;k++){\n                    if(!(nums[j]>>k&1)){\n                        p1[k]=j;\n                    }\n                }\n                bool flag=true;\n                int s=j;\n                for(int k=0;k<=31;k++){\n                    if(!p[k]&&nums[j]>>k&1){\n                        if(!p1[k]){\n                            flag=false;\n                            break;\n                        }\n\n                        s=max(s,p1[k]);\n                    }\n                }\n                if(flag)\n                res=(ll)(res+r-s+1);\n            }\n        }\n        return res;\n    }\n};",
    "submit_ts": "1720281343",
    "subm_id": "544575412"
}