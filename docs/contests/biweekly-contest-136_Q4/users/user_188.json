{
    "username": "zhi-cr",
    "submission": "const int N=1e5+10;\nint head[N];\nstruct edge\n{\n    int v;\n    int ne;\n};\nedge E[2*N];\nint idx=0;\nvoid add(int a,int b)\n{\n    E[idx].v=b;\n    E[idx].ne=head[a];\n    head[a]=idx++;\n}\nclass Solution {\npublic:\n    int maxx1[N];\n    int maxx2[N];\n    int up[N];\n    vector<int> ans;\n    void dfs(int t,int fa)\n    {\n        for(int i=head[t];i!=-1;i=E[i].ne)\n        {\n            int tmp=E[i].v;\n            if(tmp!=fa)\n            {\n                int base=(tmp%2? 1:2);\n                dfs(tmp,t);\n                int val=maxx1[tmp]+base;\n                if(val>maxx1[t])\n                {\n                    maxx2[t]=maxx1[t];\n                    maxx1[t]=val;\n                }\n                else if(val>maxx2[t])\n                {\n                    maxx2[t]=val;\n                }\n            }\n        }\n    }\n    void dfs2(int t,int fa)\n    {\n        // cout<<t<<\" \"<<fa<<\"\\n\";\n        int base=(t%2? 1:2);\n        for(int i=head[t];i!=-1;i=E[i].ne)\n        {\n            int tmp=E[i].v;\n            if(tmp!=fa)\n            {\n                int bb=(tmp%2? 1:2);\n                ans[tmp]=maxx1[tmp];\n                int val;\n                if(maxx1[t]-bb==maxx1[tmp])\n                {\n                    val=maxx2[t]+base;\n                    // cout<<\"*\"<<\" \"<<val<<\"\\n\";\n                }\n                \n                else val=maxx1[t]+base;\n                up[tmp]=max(up[t]+base,val);\n                ans[tmp]=max(ans[tmp],up[tmp]);\n                dfs2(tmp,t);\n            }\n        }\n    }\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n=edges.size()+1;\n        ans.resize(n);\n        memset(head,-1,sizeof(head));\n        idx=0;\n        for(auto p:edges)\n        {\n            add(p[0],p[1]);\n            add(p[1],p[0]);\n        }\n        dfs(0,-1);\n        up[0]=0;\n        ans[0]=maxx1[0];\n        // cout<<maxx1[0]<<\" \"<<maxx2[0]<<\"\\n\";\n        dfs2(0,-1);\n        return ans;\n\n    }\n};",
    "submit_ts": "1722699619",
    "subm_id": "552276425"
}