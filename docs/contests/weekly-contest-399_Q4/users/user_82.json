{
    "username": "sksusha8853",
    "submission": "class Solution {\npublic:\n    int mod=1e9+7;\nvector<long long> query(long long *ALL, long long *notFirst, long long *notLast, long long *notFirstL,int index,int s,int e,int qs,int qe)\n{\n\n\tif(qs>e || s>qe)\n\t\treturn {0, 0, 0, 0};\n\tif(s>=qs && e<=qe)\n\t\treturn {ALL[index], notFirst[index], notLast[index], notFirstL[index]};\n\tint m = (s+e)/2;\n\tvector<long long> a1 = query(ALL, notFirst, notLast, notFirstL,2*index,s,m,qs,qe);\n\tvector<long long> a2 = query(ALL, notFirst, notLast, notFirstL,2*index+1,m+1,e,qs,qe);\n\tvector<long long> ans = {max(a1[0]+a2[1],a1[2]+a2[0]) ,max(a1[1]+a2[1],a1[3]+a2[0]),max(a1[0]+a2[3],a1[2]+a2[2]),max(a1[1]+a2[3],a1[3]+a2[2])};\n    \n    return ans;\n}\n\n\nvoid updateNode(long long *ALL, long long *notFirst, long long *notLast, long long *notFirstL,int index,int s,int e,int pos,int val)\n{\n\tif(pos<s || pos>e)\n\t\treturn ;\n\tif(s==e)\n\t{\n\t\tALL[index]=max(0, val);\n        notLast[index]=0;\n        notFirst[index]=0;\n        notFirstL[index]=0;\n\t\treturn ;\n\t}\n\tint m = (s+e)/2;\n\n\tupdateNode(ALL, notFirst, notLast, notFirstL,2*index+1,m+1,e,pos,val);\n\t\tupdateNode(ALL, notFirst, notLast, notFirstL,2*index,s,m,pos,val);\n    notFirst[index]=max(notFirst[2*index]+notFirst[2*index+1], notFirstL[2*index]+ALL[2*index+1]);\n    notLast[index]=max(ALL[2*index]+notFirstL[2*index+1], notLast[2*index]+notLast[2*index+1]);\n       ALL[index]= max(ALL[2*index]+notFirst[2*index+1], notLast[2*index]+ALL[2*index+1]);\n    notFirstL[index]=max(notFirst[2*index]+notFirstL[2*index+1], notFirstL[2*index]+notLast[2*index+1]);\n    \n    notFirstL[index]%=mod;\n    notFirst[index]%=mod;\n    ALL[index]%=mod;\n    notLast[index]%=mod;\n    \n\treturn;\n}\n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        long long n=nums.size();\n        long long ans =0;\n        \n        long long *notFirst= new long long[4*n+9]; \n        long long *notLast= new long long[4*n+9]; \n        long long *ALL= new long long[4*n+9]; \n        long long *notFirstL= new long long[4*n+9]; \n        vector<long long>take;\n        for(int i=0;i<nums.size();i++){\n            updateNode(ALL, notFirst, notLast, notFirstL, 1, 0, n-1, i, nums[i]);\n        }\n        \n        \n      \n        for(auto &j:queries){\n            updateNode(ALL, notFirst, notLast, notFirstL, 1, 0, n-1, j[0], j[1]);\n            take=query(ALL,  notFirst, notLast, notFirstL, 1, 0 , n-1, 0, n-1);\n            ans=(ans+take[0])%mod;\n\n        }\n        return (int)ans;\n\n        \n    }\n};",
    "submit_ts": "1716694335",
    "subm_id": "1268112828"
}