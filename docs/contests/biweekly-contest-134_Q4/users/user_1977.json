{
    "username": "hiteshmaurya",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& a, int l) {\n        int i, j, k, n = a.size(), c = 0, d, e, m = 30;\n        long long ans = 0;\n\n        // if (l == 0) {\n        //     for (i = 0; i < n; i++) {\n        //         d = a[i];\n        //         for (j = i; j < n; j++) {\n        //             d &= a[j];\n        //             if (!d)\n        //                 break;\n        //         }\n        //         ans += n - j;\n        //     }\n        //     return ans;\n        // }\n\n        vector<int> v(n);\n        for (j = 0; j <= m; j++) {\n            k = 1 << j;\n            if (k & l) {\n                c++;\n                for (i = 0; i < n; i++)\n                    v[i] += (k & a[i]) > 0;\n            }\n        }\n\n        // for (int d : v)\n        //     cout << d << ' ';\n        // cout << endl;\n\n        vector<vector<int>> b;\n        for (i = j = 0; i < n; i++)\n            if (v[i] != c) {\n                if (j < i)\n                    b.push_back({j, i - 1});\n                j = i + 1;\n            }\n        if (j < n)\n            b.push_back({j, n - 1});\n        vector<set<int>> vs;\n\n        vector<int> bb(n);\n        for (i = 0; i < n; i++)\n            bb[i] = i;\n\n        for (j = 0; j <= m; j++) {\n            k = 1 << j;\n            d = -1;\n            if (!(k & l)) {\n                for (i = 0; i < n; i++)\n                    if (!(k & a[i])) {\n                        if (d < i) {\n                            for (int jj = i; jj > d; jj--)\n                                bb[jj] = max(bb[jj], i);\n                        }\n                        d = i;\n                    }\n                    if(d==n+1)for(i=0;i<n;i++)bb[i]=n;\n                for (int jj = d + 1; jj < n; jj++)\n                    bb[jj] = n;\n            }\n        }\n        d = -1;\n        for (vector<int>& temp : b) {\n            for (i = temp[0]; i <= temp[1]; i++) {\n                d = bb[i];\n                // for (set<int>& s : vs)\n                //     d = max(d, *s.lower_bound(i));\n\n                // cout << i << ' ' << d << endl;\n                if (d > temp[1])\n                    continue;\n                ans += temp[1] - d + 1;\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720280668",
    "subm_id": "1311797831"
}