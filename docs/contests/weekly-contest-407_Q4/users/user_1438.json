{
    "username": "singh_deopa",
    "submission": "class Solution {\npublic:\n    long long minimumOperations(vector<int>& nums, vector<int>& target) {\n        int n = (int) nums.size();\n        long long res = 0;\n        vector<int> diff(n);\n        vector<pair<int, int>> ranges;\n        int pre = 0;\n        \n        for (int i = 0; i < n; i++) {\n            diff[i] = target[i] - nums[i];\n            \n            if (i > 0 && (diff[i] < 0) != (diff[i - 1] < 0)) {\n                ranges.push_back({pre, i - 1});\n                pre = i;\n            }\n        }\n        \n        ranges.push_back({pre, n - 1});\n        \n        for (auto& range: ranges) {\n            int& l = range.first;\n            int& r = range.second;\n            \n            if (l == r) {\n                res += 1LL * abs(diff[l]);\n                continue;\n            }\n            \n            vector<int> pos;\n            \n            for (int i = l; i <= r; i++) {\n                pos.push_back(i);\n            }\n            \n            sort(pos.begin(), pos.end(), [&] (int& i, int& j) {\n                return abs(diff[i]) < abs(diff[j]);\n            });\n            \n            set<int> st;\n            unordered_map<int, int> mp;\n            \n            for (int& i: pos) {\n                auto it = st.lower_bound(i);\n                // assert(it != st.end());\n                // assert(it != st.begin());\n                int cr = r + 1;\n                int cl = l - 1;\n                \n                if (it != st.end()) {\n                    cr = (*it);\n                }\n                \n                if (it != st.begin()) {\n                    it--;\n                    cl = (*it);\n                }\n\n                int v = abs(diff[i]);\n                res += 1LL * abs(v - max(mp[cl], mp[cr]));\n                mp[i] = v;\n                st.insert(i);\n                \n                // cout << i << \" \" << cl << \" \" << cr << \" \" << v << \" \" << res << \"\\n\";\n            }\n        }\n        \n        return res;\n    }\n};",
    "submit_ts": "1721532575",
    "subm_id": "1327989089"
}