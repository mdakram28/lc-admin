{
    "username": "OuterRidgeSavage",
    "submission": "class Solution {\npublic:\n    using ll = long long;\n\n    // [l..r] is >0.\n    void Solve1(vector<int>& a, int l, int r, ll& ans) {\n        int p = l;\n        for (int i = l; i <= r; ++i) {\n            if (a[i] < a[p]) {\n                p = i;\n            }\n        }\n        int mark = a[p];\n        ans += mark;\n        for (int i = l; i <= r; ++i) {\n            a[i] -= mark;\n        }\n        for (int i = l; i <= r;) {\n            for (; i <= r && a[i] == 0; ++i);\n            if (i > r) break;\n            int j = i;\n            for (; j + 1 <= r && a[j + 1] > 0; ++j);\n            // [i..j]\n            Solve1(a, i, j, ans);\n            i = j + 1;\n        }\n    }\n\n    // [l..r] is <0.\n    void Solve2(vector<int>& a, int l, int r, ll& ans) {\n        int p = l;\n        for (int i = l; i <= r; ++i) {\n            if (a[i] > a[p]) {\n                p = i;\n            }\n        }\n        int mark = a[p];\n        ans += -mark;\n        for (int i = l; i <= r; ++i) {\n            a[i] -= mark;\n        }\n        for (int i = l; i <= r;) {\n            for (; i <= r && a[i] == 0; ++i);\n            if (i > r) break;\n            int j = i;\n            for (; j + 1 <= r && a[j + 1] < 0; ++j);\n            // [i..j]\n            Solve2(a, i, j, ans);\n            i = j + 1;\n        }\n    }\n\n    ll minimumOperations(vector<int>& a, vector<int>& b) {\n        int n = a.size();\n        for (int i = 0; i < n; ++i) {\n            a[i] = b[i] - a[i];\n            // cout << \"a[\" << i << \"] = \" << a[i] << endl;\n        }\n        ll ans = 0;\n        // Positive.\n        for (int i = 0; i < n;) {\n            for (; i < n && a[i] <= 0; ++i);\n            if (i == n) break;\n            int j = i;\n            for (; j + 1 < n && a[j + 1] > 0; ++j);\n            // [i..j].\n            // cout << \"[\" << i << \", \" << j << \"]\" << endl;\n            Solve1(a, i, j, ans);\n            i = j + 1;\n        }\n        // Negative.\n        for (int i = 0; i < n;) {\n            for (; i < n && a[i] >= 0; ++i);\n            if (i == n) break;\n            int j = i;\n            for (; j + 1 < n && a[j + 1] < 0; ++j);\n            // [i..j].\n            Solve2(a, i, j, ans);\n            i = j + 1;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1721532570",
    "subm_id": "1327988990"
}