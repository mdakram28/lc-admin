{
    "username": "cchao",
    "submission": "const int p = 31;\n\nuint64_t f(const string& s) {\n    uint64_t ret = 0;\n    for (char c : s) {\n        ret = ret * p + (c - 'a' + 1);\n    }\n    return ret;\n}\n\nclass Solution {\npublic:\n    int minimumCost(string target, vector<string>& words, vector<int>& costs) {\n        map<int, map<string, int> > m;\n        map<int, unordered_map<uint64_t, int>> h;\n        for (int i = 0; i < words.size(); ++i) {\n            const string& s = words[i];\n            const int c = costs[i];\n            // auto& mm = m[s.size()];\n            // auto it = mm.find(s);\n            const auto hh = f(s);\n            if (!h[s.size()].count(hh)) {\n                // mm[s] = c;\n                h[s.size()][hh] = c;\n            } else {\n                // it->second = min(it->second, c);\n                h[s.size()][hh] = min(h[s.size()][hh], c);\n            }\n        }\n        vector<uint64_t> ht(target.size() + 1), ps(target.size() + 10);\n        uint64_t tmp = 0;\n        for (int i = 0; i < target.size(); ++i) {\n            tmp = tmp * p + (target[i] - 'a' + 1);\n            ht[i + 1] = tmp;\n        }\n        ps[0] = 1;\n        for (int i = 1; i < ps.size(); ++i) ps[i] = ps[i-1] * 31;\n        \n        vector<int> d(target.size() + 1, -1);\n        d[0] = 0;\n        for (int i = 0; i < target.size(); ++i) {\n            if (d[i] == -1) continue;\n            for (auto &it : h) {\n                int len = it.first;\n                auto& g = it.second;\n                \n                if (i + len >= d.size()) break;\n                const uint64_t hh = ht[i + len] - ht[i] * ps[len];\n                // cout << target.substr(i, len) << ' ' << hh << endl;\n                if (!g.count(hh)) continue;\n                // const string s = target.substr(i, len);\n                // auto it2 = it.second.find(s);\n                // if (it2 == it.second.end()) continue;\n                auto it2 = g.find(hh);\n                if (d[i+len] == -1) d[i+len] = d[i] + it2->second;\n                else d[i+len] = min(d[i+len], d[i] + it2->second);\n            }\n        }\n        return d.back();\n    }\n};",
    "submit_ts": "1720322999",
    "subm_id": "1312364738"
}