{
    "username": "enzoar",
    "submission": "\n\nclass Solution {\n    typedef long long ll; \npublic:\n    long long minimumOperations(vector<int>& nums, vector<int>& target) {\n        int n = nums.size(); \n        vector<int> dif(n); \n        for (int i = 0; i < n; i++) dif[i] = target[i] - nums[i]; \n\n\n        ll ans = 0; \n        { \n            map<int, vector<int>> mapa; \n            \n            vector<int> neg(n); \n            int sz = 1;\n            for (int i = 0; i < n; i++) {\n                if (dif[i] >= 0) {\n                    if (i == n-1 && i > 0 && neg[i-1] == 1) sz--; \n                    else if (i > 0 && i < n-1 && neg[i-1] == 0) sz++; \n                    neg[i] = 1; \n                }\n                else mapa[-dif[i]].emplace_back(i); \n            } \n            \n            int last = 0; \n            for (auto [val, V] : mapa) {\n                ans += 1ll * (val - last) * sz; \n                \n                for (int i : V) {\n                    int cnt = 0; \n                    if (i == 0 || neg[i-1]) cnt++; \n                    if (i == n-1 || neg[i+1]) cnt++; \n                    \n                    if (cnt == 2) sz--; \n                    else if (cnt == 1); \n                    else sz++; \n                    \n                    neg[i] = 1; \n                }\n                \n                last = val; \n            }\n        } \n        \n        { \n            map<int, vector<int>> mapa; \n            \n            vector<int> pos(n); \n            int sz = 1;\n            for (int i = 0; i < n; i++) {\n                if (dif[i] <= 0) {\n                    if (i == n-1 && i > 0 && pos[i-1] == 1) sz--; \n                    else if (i > 0 && i < n-1 && pos[i-1] == 0) sz++; \n                    pos[i] = 1; \n                }\n                else mapa[dif[i]].emplace_back(i); \n            } \n            \n            int last = 0; \n            for (auto [val, V] : mapa) {\n                ans += 1ll * (val - last) * sz; \n\n                for (int i : V) {\n                    int cnt = 0; \n                    if (i == 0 || pos[i-1]) cnt++; \n                    if (i == n-1 || pos[i+1]) cnt++; \n                    \n                    if (cnt == 2) sz--; \n                    else if (cnt == 1); \n                    else sz++; \n                    \n                    pos[i] = 1; \n                }\n                \n                last = val; \n            }\n        } \n        \n        return ans; \n    }\n};",
    "submit_ts": "1721531815",
    "subm_id": "1327970512"
}