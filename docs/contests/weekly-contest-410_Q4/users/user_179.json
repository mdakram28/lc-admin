{
    "username": "chinesedfan",
    "submission": "/* eslint-disable no-var, func-style */\nconst MOD = 1e9 + 7\nconst MOD_CUT = ((1 << 20) * (1 << 20)) % MOD\nfunction add(a, b) {\n    return (a + b) % MOD\n}\nfunction minus(a, b) {\n    return add(add(a, -b), MOD)\n}\nfunction mul(a, b) {\n    let r = (a >> 20) * (b >> 20) * MOD_CUT\n        + (a & 0xfff00000) * (b & 0xfffff)\n        + (a & 0xfffff) * b\n    return r % MOD\n}\nfunction pow(a, b) {\n    let r = 1\n    let base = a\n    while (b) {\n        if (b & 1) {\n            r = mul(r, base)\n        }\n        b >>= 1 // change to divide if b > 1e9 !!\n        base = mul(base, base)\n    }\n    return r\n}\n/**\n * @param {number[]} nums\n * @return {number}\n */\nvar countOfPairs = function(nums) {\n    const n = nums.length\n    const N = 1e3\n    //\n    const dp = Array(n)\n        .fill(0)\n        .map(() => Array(N + 1).fill(0))\n    for (let last = 0; last <= nums[0]; last++) {\n        dp[0][last] = 1\n    }\n    //\n    const prefix = Array(N + 1).fill(0)\n    prefix[-1] = 0\n    for (let last = 0; last <= N; last++) {\n        prefix[last] = add(prefix[last - 1], dp[0][last])\n    }\n    //\n    for (let i = 1; i < n; i++) {\n        for (let last = 0; last <= nums[i]; last++) {\n            let temp = 0\n            // prev <= last\n            // prev <= nums[i - 1] - (nums[i] - last)\n            const limit = Math.min(\n                nums[i - 1],\n                last,\n                nums[i - 1] - (nums[i] - last)\n            )\n            if (limit >= 0) {\n                temp = prefix[limit]\n            }\n\n            // for (let prev = 0; prev <= nums[i - 1]; prev++) {\n            //     if (last >= prev\n            //             && nums[i] - last <= nums[i - 1] - prev) {\n            //         temp = add(temp, dp[i - 1][prev])\n            //     }\n            // }\n            dp[i][last] = temp\n        }\n        for (let last = 0; last <= N; last++) {\n            prefix[last] = add(prefix[last - 1], dp[i][last])\n        }\n    }\n    // console.log(dp)\n    let ans = 0\n    for (let last = 0; last <= N; last++) {\n        ans = add(ans, dp[n - 1][last])\n    }\n    return ans\n};\n",
    "submit_ts": "1723345094",
    "subm_id": "1351548457"
}