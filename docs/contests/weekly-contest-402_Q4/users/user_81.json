{
    "username": "Sarthak3204",
    "submission": "#define all(x)      x.begin(), x.end()\nclass Solution {\npublic:\n    class SegTree {\n    public:\n        vector<int> tree;\n        int s = 1;\n\n        SegTree(int n) {\n            while (s < n) s <<= 1;\n            tree.resize(s << 1);\n        }\n\n        int query(int lo, int hi) {\n            int ans = 0;\n            for (lo += s, hi += s; lo <= hi; lo >>= 1, hi >>= 1) {\n                if (lo & 1) ans += tree[lo++];\n                if (!(hi & 1)) ans += tree[hi--];\n            }\n            return ans;\n        }\n\n        void update(int i, int val) {\n            tree[s + i] = val;\n            for (int j = (s + i) >> 1; j >= 1; j >>= 1) {\n                tree[j] = tree[j << 1] + tree[j << 1 | 1];\n            }\n        }\n    };\n    vector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& query) {\n        vector<int> ans;\n        int n = size(a);\n        SegTree st(n);\n        for (int i = 1; i < n - 1; i++)\n            if (a[i] > a[i - 1] and a[i] > a[i + 1]) st.update(i, 1);\n\n        for (auto &x : query) {\n            int op = x[0];\n            if (op == 1) {\n                int l = x[1], r = x[2];\n                ans.push_back(st.query(l + 1, r - 1));\n            }\n            else {\n                int i = x[1], val = x[2];\n                a[i] = val;\n                auto check = [&](int ind) -> void {\n                    if (ind > 0 and ind < n - 1) st.update(ind, a[ind] > a[ind - 1] and a[ind] > a[ind + 1]);\n                };\n                check(i - 1);\n                check(i);\n                check(i + 1);\n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1718506515",
    "subm_id": "1289621677"
}