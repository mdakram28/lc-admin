{
    "username": "xymabinogi",
    "submission": "class Solution {\npublic:\n    int numberOfSubstrings(string s) {\n        vector<int> a;\n        for (auto ch : s){\n            //cout << ch << \"----\\n\";\n            if (a.empty()){\n                if (ch == '0') a.push_back(0);\n                else a.push_back(1);\n            }\n            else {\n                if (ch == '0') a.push_back(0);\n                else {\n                    if (a.back()!= 0) a.back() += 1;\n                    else a.push_back(1);\n                }\n            }\n        }\n        int sz = a.size(), n = s.length();\n        int res = 0;\n        \n        // for (auto v : a){\n        //     cout << v <<\" \";\n        // }\n        \n        for (int i = 0; i < sz; i++){\n            int ones = 0, zeros = 0;\n            if (a[i]){\n                res += (a[i] * (a[i] + 1)) / 2;\n                ones += a[i];\n            }\n            else zeros++;\n            \n            for (int j = i + 1; j < sz; j++){\n                if (a[j] == 0){\n                    zeros++;\n                    if (zeros * zeros > n) break;\n                    if (zeros * zeros <= ones){\n                        if (a[i]) res += min(a[i], ones - zeros * zeros + 1);\n                        else res++;\n                    }\n                   // cout << i <<\" \"<< j <<\" \"<< res << \"----\\n\";\n                }\n                else {\n                    if (a[i] == 0){\n                        if (ones + a[j] >= zeros * zeros){\n                            if (ones >= zeros * zeros) res += a[j];\n                            else {\n                                res += ones + a[j] - zeros * zeros + 1;\n                            }\n                        }\n                    }\n                    else {\n                        for (int k = 1; k <= a[i]; k++){\n                            int x = ones - a[i] + k;\n                            // if (i == 0 && j == 4){\n                            //     cout << x <<\" \"<< zeros * zeros << \"----\\n\";\n                            // }\n                            if (x >= zeros * zeros) res += a[j];\n                            else if (zeros * zeros - x <= a[j]) res += a[j] - zeros * zeros + x + 1;\n                        }\n                        \n                    }\n                    ones += a[j];\n                }\n                //cout << i <<\" \"<< j <<\" \"<< res << \"\\n\";\n            }\n            \n        }\n        return res;\n        \n        \n    }\n};",
    "submit_ts": "1722137424",
    "subm_id": "1335763396"
}