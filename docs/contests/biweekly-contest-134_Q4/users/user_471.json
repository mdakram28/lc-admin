{
    "username": "MeetBrahmbhatt",
    "submission": "template<typename T>\nclass SparseTable {\n    using F = function<T(const T&, const T&)>;\npublic :\n    int n;\n    F func;\n    vector<vector<int>> v;\n\n    SparseTable(const vector<int> &a, F function) : func(function) {\n        n = static_cast<int>(a.size());\n        int LOG = 32 - __builtin_clz(n);\n        v.resize(LOG);\n        v[0] = a;\n        for (int i = 1; i < LOG; i++) {\n            v[i].resize(n - (1 << i) + 1);\n            for (int j = 0; j <= (n - (1 << i)); j++) {\n                v[i][j] = func(v[i - 1][j], v[i - 1][j + (1 << (i - 1))]);\n            }\n        }\n    }\n\n    T get(int l, int r) {\n        int L = (r - l + 1);\n        int lg = 31 - __builtin_clz(L);\n        return func(v[lg][l], v[lg][r - (1 << lg) + 1]);\n    }\n};\n\n\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& v, int k) {\n        int n = (int) v.size();\n        \n        SparseTable<int> st(v, [&] (int x, int y) { return (x & y); });\n        \n        auto getL = [&] (int id) {\n            int lo = id, hi = n - 1, ans = id - 1;\n            while (lo <= hi) {\n                int mid = (hi + lo) / 2;\n                if ((st.get(id, mid) & k) == k and st.get(id, mid) > k) {\n                    ans = mid;\n                    lo = mid + 1;\n                } else {\n                    hi = mid - 1;\n                }\n            }\n            return ans;\n        };\n        \n        auto getR = [&] (int id) {\n            int lo = id, hi = n - 1, ans = id;\n            while (lo <= hi) {\n                int mid = (hi + lo) / 2;\n                if ((st.get(id, mid) & k) == k) {\n                    ans = mid;\n                    lo = mid + 1;\n                } else {\n                    hi = mid - 1;\n                }\n            }\n            return ans;\n        };\n        \n        long long ans = 0;\n        for (int i = 0; i < n; i++) {\n            if ((v[i] & k) != k) {\n                continue;\n            }\n            int L = getL(i);\n            int R = getR(i);\n            ans += (R - L);\n        }\n        return ans;\n        \n    }\n};",
    "submit_ts": "1720278920",
    "subm_id": "1311729865"
}