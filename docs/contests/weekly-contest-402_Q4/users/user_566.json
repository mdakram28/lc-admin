{
    "username": "Maillew",
    "submission": "typedef long long ll;\nstruct SegTree{//point addition, range sum query\n    vector<ll> seg;\n    int n;\n    void init(int _n){\n        n =_n;\n        seg.resize(4*(n+10));\n    }\n    void updd(int l, int r, int pos, ll v, int ind){\n        if(l == r && pos == r){\n            seg[ind]=v;\n            return;\n        }\n        int mid = (l+r)/2;\n        if(pos<=mid) updd(l,mid,pos,v,2*ind);\n        else updd(mid+1,r,pos,v,2*ind+1);\n        seg[ind] = seg[2*ind]+seg[2*ind+1];\n    }\n    ll queryy(int l, int r, int li, int ri, int ind){\n        if(ri<l || r<li) return 0;\n        if(li<=l && r<=ri){\n            return seg[ind];\n        }\n        int mid = (l+r)/2;\n        return queryy(l,mid,li,ri,2*ind)+queryy(mid+1,r,li,ri,2*ind+1);\n    }\n    void upd(int pos,ll v){\n        updd(1,n,pos,v,1);\n    }\n    ll query(int l, int r){\n        return queryy(1,n,l,r,1);\n    }\n};\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& arr, vector<vector<int>>& queries) {\n        vector<int> pr;\n        int n = arr.size();\n        SegTree seg;\n        seg.init(n);\n        for(int i =1; i+1<n; i++){\n            if(arr[i] > arr[i+1] && arr[i] > arr[i-1]){\n                seg.upd(i+1,1);\n            }\n        }\n        for(vector<int> q: queries){\n            if(q[0] == 1){\n                int ret = seg.query(q[1]+1,q[2]+1);\n                if(seg.query(q[1]+1,q[1]+1) == 1) ret--;\n                if(seg.query(q[2]+1,q[2]+1) == 1 && q[1]!=q[2]) ret--;\n                pr.push_back(ret);\n            }\n            else{\n                int v = q[2];\n                int ind = q[1];\n                arr[ind] = v;\n                if(ind>0 && ind+1<n){\n                    if(arr[ind-1] < arr[ind] && arr[ind] > arr[ind+1]){\n                        seg.upd(ind+1,1);\n                    }\n                    else seg.upd(ind+1,0);\n                }\n                if(ind>1){\n                    if(arr[ind-1] > arr[ind-2] && arr[ind-1] > arr[ind]){\n                        seg.upd(ind,1);\n                    }\n                    else seg.upd(ind,0);\n                }\n                if(ind+2<n){\n                    if(arr[ind+1] > arr[ind+2] && arr[ind+1] > arr[ind]){\n                        seg.upd(ind+2,1);\n                    }\n                    else seg.upd(ind+2,0);\n                }\n            }\n        }\n        return pr;\n        \n    }\n};",
    "submit_ts": "1718506426",
    "subm_id": "1289618623"
}