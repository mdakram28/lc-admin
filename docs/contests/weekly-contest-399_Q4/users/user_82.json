{
    "username": "clarencechew",
    "submission": "typedef long long ll;\nll sl[131072]; // 1 - 131071\nll sr[131072]; // 1 - 131071\nll sb[131072]; // 1 - 131071\nll sn[131072]; // 1 - 131071\nclass Solution {\npublic:\n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        for (int i=0;i<n;i++) {\n            sl[65536+i] = 0;\n            sr[65536+i] = 0;\n            sb[65536+i] = max(nums[i], 0);\n            sn[65536+i] = 0;\n        }\n        for (int i=n;i<65536;i++) {\n            sl[65536+i] = 0;\n            sr[65536+i] = 0;\n            sb[65536+i] = 0;\n            sn[65536+i] = 0;\n        }\n        for (int j=15;j>=0;j--) {\n            int ie = 1<<(j+1);\n            for (int i=(1<<j);i<ie;i++) {\n                // i*2; i*2+1;\n                int il = i*2;\n                int ir = i*2+1;\n                sl[i] = max(sl[il]+sl[ir], sb[il]+sn[ir]);\n                sr[i] = max(sr[il]+sr[ir], sn[il]+sb[ir]);\n                sb[i] = max(sb[il]+sr[ir], sl[il]+sb[ir]);\n                sn[i] = max(sn[il]+sl[ir], sr[il]+sn[ir]);\n            }\n        }\n        int Q = queries.size();\n        ll sumQ = 0;\n        for (int i=0;i<Q;i++) {\n            int pos = 65536+queries[i][0];\n            sb[pos] = max(queries[i][1], 0);\n            for (int j=15;j>=0;j--) {\n                pos /= 2;\n                int il = pos*2;\n                int ir = pos*2+1;\n                sl[pos] = max(sl[il]+sl[ir], sb[il]+sn[ir]);\n                sr[pos] = max(sr[il]+sr[ir], sn[il]+sb[ir]);\n                sb[pos] = max(sb[il]+sr[ir], sl[il]+sb[ir]);\n                sn[pos] = max(sn[il]+sl[ir], sr[il]+sn[ir]);\n            }\n            sumQ += sb[1];\n            sumQ %= 1000000007;\n        }\n        return sumQ;\n    }\n};",
    "submit_ts": 1716694084.0
}