{
    "username": "an1ket_62",
    "submission": "#include <ext/pb_ds/assoc_container.hpp> \n#include <ext/pb_ds/tree_policy.hpp> \nusing namespace __gnu_pbds; \n  \n#define ordered_set tree<int, null_type,less<int>, rb_tree_tag,tree_order_statistics_node_update> \n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& q) {\n        int n=a.size();\n        ordered_set st; \n        for (int i=1;i<n-1;i++){\n            if (a[i]>a[i-1] && a[i]>a[i+1]){\n                st.insert(i);\n            }\n        }\n        // for (auto c:st){\n        //     cout << c << \" \";\n        // }\n        // cout << endl;\n        vector<int>ans;\n        for (int i=0;i<q.size();i++){\n            if (q[i][0]==1){\n                int l=q[i][1];\n                int r=q[i][2];\n                if (r-l+1<=2){\n                    ans.push_back(0);\n                    continue;\n                }\n                int curr=st.order_of_key(r) - st.order_of_key(l+1);\n                ans.push_back(curr);\n            }\n            else{\n                int idx=q[i][1];\n                int val=q[i][2];\n                \n                for (int j=idx-1;j<=idx+1;j++){\n                    if (j>=1 && j<=n-2){\n                        // cout << j << endl;\n                        if (a[j]>a[j-1] && a[j]>a[j+1]){\n                            // cout << j << endl;\n                            st.erase(st.find(j));\n                        }\n\n                    }\n                }\n                a[idx]=val;\n                for (int j=idx-1;j<=idx+1;j++){\n                    if (j>=1 && j<=n-2){\n                        // cout << j << endl;\n                        if (a[j]>a[j-1] && a[j]>a[j+1]){\n                            // cout << j << endl;\n                            st.insert(j);\n                        }\n\n                    }\n                }\n                    \n                    \n                    \n                \n                \n            }\n        }\n        return ans;\n    }\n};",
    "submit_ts": 1718507164.0
}