{
    "username": "Tran Xuan Bach",
    "submission": "using ll = long long;\nusing ld = long double;\n\nclass Solution {\n\tstatic const int inf = 1e9 + 7;\npublic:\n    ll maximumValueSum(vector<vector<int>>& a) {\n      \tauto n = ssize(a), m = ssize(a.front());\n\n      \tauto argmax = [&](int x, int y){\n      \t\tint z = -1, t = -1;\n      \t\tfor (auto i = 0; i < n; i++){\n      \t\t\tfor (auto j = 0; j < m; j++){\n      \t\t\t\tif (i == x or j == y){\n      \t\t\t\t\tcontinue;\n      \t\t\t\t}\n      \t\t\t\tif (z == -1 or a[z][t] < a[i][j]){\n      \t\t\t\t\tz = i; t = j;\n      \t\t\t\t}\n      \t\t\t}\n      \t\t}\n      \t\treturn pair{z, t};\n      \t};\n\n      \tauto solve_2 = [&](int x, int y){\n      \t\tauto [z, t] = argmax(x, y);\n      \t\tint mx1 = -inf;\n      \t\tfor (auto i = 0; i < n; i++){\n      \t\t\tfor (auto j = 0; j < m; j++){\n      \t\t\t\tif (i == x or j == y or i == z or j == t){\n      \t\t\t\t\tcontinue;\n      \t\t\t\t}\n      \t\t\t\tmx1 = max(mx1, a[i][j]);\n      \t\t\t}\n      \t\t}\n      \t\tll ans = a[z][t] + mx1;\n      \t\tint mx2 = -inf, mx3 = -inf;\n      \t\tfor (auto i = 0; i < n; i++){\n      \t\t\tif (i == x or i == z){\n      \t\t\t\tcontinue;\n      \t\t\t}\n      \t\t\tmx2 = max(mx2, a[i][t]);\n      \t\t}\n      \t\tfor (auto j = 0; j < m; j++){\n      \t\t\tif (j == y or j == t){\n      \t\t\t\tcontinue;\n      \t\t\t}\n      \t\t\tmx3 = max(mx3, a[z][j]);\n      \t\t}\n      \t\tans = max(ans, ll(mx2) + mx3);\n      \t\treturn ans;\n      \t};\n\n      \tvector<array<int, 3>> b;\n      \tfor (auto i = 0; i < n; i++){\n      \t\tfor (auto j = 0; j < m; j++){\n      \t\t\tb.push_back({a[i][j], i, j});\n      \t\t}\n      \t}\n      \tsort(begin(b), end(b), greater<>());\n\n      \tauto x = b.front()[1], y = b.front()[2];\n      \tauto [z, t] = argmax(x, y);\n      \tll ans = a[x][y] + solve_2(x, y);\n      \tfor (auto i = 0; i < n; i++){\n      \t\tfor (auto j = 0; j < m; j++){\n      \t\t\tif (i == x or j == y){\n      \t\t\t\tcontinue;\n      \t\t\t}\n      \t\t\tll tans = a[i][y] + a[x][j];\n      \t\t\tif (i != z and j != t){\n      \t\t\t\tans = max(ans, tans + a[z][t]);\n      \t\t\t\tcontinue;\n      \t\t\t}\n      \t\t\tint mx = -inf;\n      \t\t\tfor (auto i2 = 0; i2 < n; i2++){\n      \t\t\t\tfor (auto j2 = 0; j2 < m; j2++){\n      \t\t\t\t\tif (i2 == x or i2 == i or j2 == y or j2 == j){\n      \t\t\t\t\t\tcontinue;\n      \t\t\t\t\t}\n      \t\t\t\t\tmx = max(mx, a[i2][j2]);\n      \t\t\t\t}\n      \t\t\t}\n      \t\t\tans = max(ans, tans + mx);\n      \t\t}\n      \t}\n\n      \treturn ans;\n    }\n};",
    "submit_ts": "1723906323",
    "subm_id": "1359047101"
}