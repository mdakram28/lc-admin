{
    "username": "Barkaaat",
    "submission": "#define ll\tlong long\nint n;\nstruct SEG {\n        ll x = -1;\n        SEG() {\n                x = -1;\n        }\n};\n\nSEG operator+(const SEG &seg1, const SEG &seg2) {\n        SEG ret;\n        ret.x = (seg1.x & seg2.x);\n        return ret;\n}\n\nclass Solution {\npublic:\n    vector<ll> v;\n    \n    vector<SEG> seg;\n\n    SEG query(int qs, int qe, int si = 0, int ss = 0, int se = n - 1) {\n            if (ss > qe || se < qs || qe < qs)\n                    return SEG();\n            if (ss >= qs && se <= qe)\n                    return seg[si];\n            int md = ss + (se - ss) / 2, rt = 2 * si + 1, lf = rt++;\n            return query(qs, qe, lf, ss, md) + query(qs, qe, rt, md + 1, se);\n    }\n    void setNODE(int si = 0, int ss = 0, int se = n - 1){\n            seg[si].x = v[ss];\n    }\n    void build(int si = 0, int ss = 0, int se = n - 1) {\n            if (ss == se) {\n                    setNODE(si, ss, se);\n                    return;\n            }\n            int md = ss + (se - ss) / 2, lf = 2 * si + 1, rt = 2 * si + 2;\n            build(lf, ss, md);\n            build( rt, md + 1, se);\n            seg[si] = seg[lf] + seg[rt];\n    }\n    \n    long long countSubarrays(vector<int>& a, int k) {\n        n=a.size();\n        for (auto it:a) v.push_back(it);\n        \n        ll ans=0;\n        seg.assign(4 * n + 2, SEG());\n        build();\n        \n        for (int i=0; i<n; i++) {\n            if (a[i] < k) continue;\n            \n            ll l=i, r=n, mid, L=i, R=i, q;\n            while (l<r) {\n                mid=l+r>>1;\n                q=query(i, mid).x;\n                if (q < k) r=mid;\n                else {\n                    if (q == k) R=mid;\n                    l=mid+1;\n                }\n            }\n            \n            l=i, r=n;\n            while (l<r) {\n                mid=l+r>>1;\n                q=query(i, mid).x;\n                if (q > k) l=mid+1;\n                else {\n                    if (q == k) L=mid;\n                    r=mid;\n                }\n            }\n            \n            if (query(i, L).x == k) ans+=R+1-L;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279898",
    "subm_id": "1311769436"
}