{
    "username": "xymabinogi",
    "submission": "#include <ext/pb_ds/assoc_container.hpp> \n#include <ext/pb_ds/tree_policy.hpp> \nusing namespace __gnu_pbds;\n\ntypedef tree<int, null_type, less<int>, rb_tree_tag, tree_order_statistics_node_update> orderedSet;\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& queries) {\n        int n = a.size();\n       \n        orderedSet rbtree;\n\n        for (int i = 1; i < n - 1; i++){\n            if (a[i] > a[i - 1] && a[i] > a[i + 1]){\n                rbtree.insert(i);\n            }\n        }\n        vector<int> res;\n        for (auto &q : queries){\n            if (q[0] == 1){\n                //[l + 1, r - 1]\n                if (q[2] - 1 < q[1] + 1) res.push_back(0);\n                else {\n                    int v = rbtree.order_of_key(q[2]) - rbtree.order_of_key(q[1] + 1);\n                    res.push_back(v);\n                }\n                \n                \n            }\n            else {\n                a[q[1]] = q[2];\n                for (int i = max(0, q[1] - 1); i <= min(n - 1, q[1] + 1); i++){\n                    rbtree.erase(i);\n                }\n                for (int i = max(1, q[1] - 1); i <= min(n - 2, q[1] + 1); i++){\n                    if (a[i] > a[i - 1] && a[i] > a[i + 1]){\n                        rbtree.insert(i);\n                    }\n                }\n                \n            }\n        }\n        return res;\n        \n        \n    }\n};",
    "submit_ts": 1718506245.0
}