{
    "username": "GabPua",
    "submission": "class Solution {\npublic:\n    void dfs(vector<vector<pair<int,int>>> &a, vector<bool> &vis, int root, vector<int> &d) {\n        vis[root] = true;\n        d[root] = 0;\n\n        for (auto [v, w]: a[root]) {\n            if (vis[v]) continue;\n            dfs(a, vis, v, d);\n            d[root] = max(d[root], d[v] + w);\n        }\n    }\n\n    void dfs2(vector<vector<pair<int,int>>> &a, vector<bool> &vis, int root, vector<int> &d, vector<int> &ans) {\n        vis[root] = true;\n        ans[root] = d[root];\n\n        vector<pair<int,int>> children;\n        children.push_back({0, -1});\n        for (auto [v, w]: a[root]) {\n            children.push_back({d[v] + w, v});\n        }\n        sort(children.begin(), children.end());\n        int c = children.size();\n\n        for (auto [v, w]: a[root]) {\n            if (vis[v]) continue;\n\n            if (v == children[c - 1].second) {\n                int old1 = d[root];\n                d[root] = children[c - 2].first;\n                int old2 = d[v];\n                int other_w = 2 - (root & 1);\n                d[v] = max(d[v], d[root] + other_w);\n                dfs2(a, vis, v, d, ans);\n                d[v] = old2;\n                d[root] = old1;\n            } else {\n                int old = d[v];\n                int other_w = 2 - (root & 1);\n                d[v] = max(d[v], d[root] + other_w);\n                dfs2(a, vis, v, d, ans);\n                d[v] = old;\n            }\n        }\n    }\n\n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n = edges.size() + 1;\n        vector<vector<pair<int,int>>> a(n);\n        for (auto edge: edges) {\n            int u = edge[0], v = edge[1];\n            if (v & 1) a[u].push_back({v, 1});\n            else a[u].push_back({v, 2});\n            if (u & 1) a[v].push_back({u, 1});\n            else a[v].push_back({u, 2});\n        }\n\n        vector<bool> vis(n, false);\n        vector<int> d(n);\n        dfs(a, vis, 0, d);\n\n        vis.assign(n, false);\n        vector<int> ans(n);\n        dfs2(a, vis, 0, d, ans);\n        return ans;\n    }\n};",
    "submit_ts": "1722698698",
    "subm_id": "1343188921"
}