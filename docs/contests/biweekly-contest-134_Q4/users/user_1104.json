{
    "username": "hrishikeshchoudhary901",
    "submission": "class Solution {\npublic:\n    int binsg(int i,vector<int>&nums,int k,vector<vector<int>>&bits){\n        int n = nums.size();\n        int lo = i-1,hi=n-1;\n        while(hi-lo>1){\n            int mid = lo+((hi-lo)>>1);\n            // find AND between i and mid\n            int sm{};\n            for(int j=0;j<32;++j){\n                if(bits[mid+1][j]-bits[i][j]==mid-i+1)sm+=(1LL<<j);\n            }\n            if(sm>k)lo = mid;\n            else hi=mid;\n        }\n        int sm{};\n        for(int j=0;j<32;++j){\n            if(bits[hi+1][j]-bits[i][j]==hi-i+1)sm+=(1LL<<j);\n        }\n        if(sm>k)lo=hi;\n        return lo;\n    }\n\n    int binsl(int i,vector<int>&nums,int k,vector<vector<int>>&bits){\n        int n = nums.size();\n        int lo = i,hi=n;\n        while(hi-lo>1){\n            int mid = lo+((hi-lo)>>1);\n            // find AND between i and mid\n            int sm{};\n            for(int j=0;j<32;++j){\n                if(bits[mid+1][j]-bits[i][j]==mid-i+1)sm+=(1LL<<j);\n            }\n            if(sm<k)hi = mid;\n            else lo=mid;\n        }\n        int sm{};\n        for(int j=0;j<32;++j){\n            if(bits[lo+1][j]-bits[i][j]==lo-i+1)sm+=(1LL<<j);\n        }\n        if(sm<k)hi=lo;\n        return hi;\n    }\n\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n = nums.size();\n        vector<vector<int>>bits(n+1,vector<int>(32,0));\n        for(int i=0;i<n;++i){\n            for(int j=0;j<32;++j){\n                bits[i+1][j]=bits[i][j];\n                if((nums[i]>>j)&1)bits[i+1][j]++;\n            }\n        }   \n        //binsg -> last index where AND is greater\n        //binsl -> first index where AND is less\n\n        long long ans{};\n\n        for(int i=0;i<n;++i){\n            int first_less = binsl(i,nums,k,bits);\n            int last_greater = binsg(i,nums,k,bits);\n\n            // cout << first_less << \",\" << last_greater << \" \";\n            ans+=max(0,first_less-last_greater-1);\n        }\n\n        return ans;\n    }\n};",
    "submit_ts": "1720280163",
    "subm_id": "1311779157"
}