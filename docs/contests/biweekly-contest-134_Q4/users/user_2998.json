{
    "username": "aditya_kunwar",
    "submission": "class segment_tree{\npublic:\n      \n    vector<int> tree;\n    segment_tree(int n)\n    {\n        tree.resize(4 * n +1);\n    }\n\n    void build(vector<int>& arr, int node, int start,int end)\n    {\n        if (start == end) {\n            tree[node] = arr[start];\n            return;\n        }\n            int mid = (start + end) / 2;\n            build(arr, 2 * node + 1, start, mid);\n            build(arr, 2 * node + 2, mid + 1, end);\n            tree[node]= (tree[2 * node + 1] & tree[2 * node + 2]);\n        \n    }\n \n    int query(int node, int start, int end, int l, int r)\n    {\n        if (r < start || end < l) {\n            return 0;            // this return must be updated\n        }\n        if (l <= start && end <= r) {\n            return tree[node];\n        }\n        int mid = (start + end) / 2;\n        int p1 = query(2 * node + 1, start, mid, l, r);\n        int p2 = query(2 * node + 2, mid + 1, end, l, r);\n\n        return (p1&p2);\n    }\n    void update_tree(int node, int start, int end, int i, int val) {\n\tif(start > i || end < i) return;\n\tif(start == i && i == end) {\n\t\ttree[node] = val;\n\t\treturn;\n\t}\n\tint c1 = 2 * node + 1, c2 = c1 + 1, m = (start+end)/2;\n\n   \n\tupdate_tree(c1, start, m, i, val);\n\n\tupdate_tree(c2, m+1, end, i, val);\n \n\ttree[node] = tree[c1] & tree[c2] ;\n}\n};\nclass Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n = nums.size();\n         segment_tree sg1(nums.size());\n\n     sg1.build(nums,0,0,n-1);\n  \n   \n        long long ans = 0;\n        map<long long, long long> prev;\n        for (int i = 0; i < n; ++i) {\n       map<long long, long long> curr; \n            if (nums[i] == k) {\n                ++ans;\n            }\n            curr[nums[i]] = 1;\n            for (auto& it: prev) {\n                long long res = it.first & nums[i];\n                if (res == k) {\n                    ans += it.second;\n                }\n                curr[res] += it.second;\n            }\n            \n            prev = curr;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720280315",
    "subm_id": "1311784762"
}