{
    "username": "jingnian",
    "submission": "/*        \u4f60\u5c06\u4e0d\u518d\u662f\u9053\u5177\uff0c\u800c\u662f\u6210\u4e3a\u4eba\u5982\u5176\u540d\u7684\u4eba --\u300aViolet Evergarden\u300b        */\nclass Solution {\npublic:\n#define fi first\n#define endl '\\n'\n#define se second\n#define gcd __gcd\n#define sg signed\n#define il inline\n#define Eps (1e-6)\n#define ri register\n#define M 998244353\n#define pb push_back\n#define ll long long\n#define spc << ' ' <<\n#define func function\n#define i128 __int128\n#define inf 0x3f3f3f3f\n#define ssort stable_sort\n#define pii pair<int, int>\n#define double long double\n#define prebin0 __builtin_clz\n#define sufbin0 __builtin_ctz\n#define lnf 0x3f3f3f3f3f3f3f3f\n#define ull unsigned long long\n#define maxn (signed)(2e6 + 10)\n#define sz(x) ((int)((x).size()))\n#define countbin1 __builtin_popcount\n#define all(x) (x).begin(), (x).end()\n#define mem(x, val) memset((x), (val), sizeof (x))\n#define yon(x) cout << ((x) ? \"Yes\" : \"No\") << endl;\n#define mxelem(x) (*max_element((x).begin(), (x).end()))\n#define mnelem(x) (*min_element((x).begin(), (x).end()))\n#define pre_sum(x, y) partial_sum((x).begin(), (x).end(), (y).begin())\n#define readin(i, n, v) for(int o = (i); o < (int)(n) + (i); o ++ ) cin >> (v)[o];\n#define wtline(i, n, v) for(int o = (i); o < (int)(n) + (i); o ++ ) cout << (v)[o] << \" \\n\"[o == (int)(n) + (i) - 1];\n#define int long long\nconstexpr static int   CMXN = 500010;\nconstexpr static double PI = 3.1415926536;\nint _A[CMXN + 10] = { 0 };\nint _RA[CMXN + 10] = { 0 };\nbool use_fac() { return 0; }\nil int lowbit(int x) { return x & (-x); }\nil int ABS(int x) { return x < 0 ? -x : x; }\nil int inv(int x) { return fpowm(x, M - 2ll); }\nil int ceil(int x, int y) { return (x + y - 1) / y; }\nil int mul(int l, int r) { return ((l % M) * (r % M)) % M; }\nil int lowzeros(int x) { return x == 0 ? -1 : log2(lowbit(x)); }\nvoid coutbin(signed x) { std::bitset<32> b(x); cout << b << endl; }\ntemplate<typename T, typename U>\nil bool chmax(T& mx, U v) { return v > mx ? mx = v, true : false; }\ntemplate<typename T, typename U>\nil bool chmin(T& mn, U v) { return v < mn ? mn = v, true : false; }\nil int C(int n, int m) { if (n < m || m < 0) return 0; return mul(_A[n], mul(_RA[m], _RA[n - m])); }\nil int fpow(int a, int b) { int t = 1; for (; b; ) { if (b & 1) t *= a; b >>= 1; a *= a; } return t; }\nil int fpowm(int a, int b) { int t = 1; for (; b; ) { if (b & 1) t = t * a % M; b >>= 1; a = a * a % M; } return t; }\nvoid initfac() { _A[0] = 1; for (int i = 1; i <= CMXN; i ++ ) _A[i] = mul(_A[i - 1], i); _RA[CMXN] = inv(_A[CMXN]); for (int i = CMXN; i >= 1; i -- ) _RA[i - 1] = mul(_RA[i], i); }\n#undef int\n\n/*\n\n\n\n*/\n\n    // Solution : \n    vector<int> shortestDistanceAfterQueries(int n,\n        vector<vector<int>>& q) {\n        int dis = n - 1;\n        set<pair<pii, int>> se;\n        vector<int> ans;\n        for(int i = 0; i < q.size(); i ++ ) {\n            int u = q[i][0], v = q[i][1];\n            auto t = se.upper_bound({{v - 1, v}, 1});\n            if(se.size() == 0) {\n                se.insert({{u, v}, v - u});\n                dis -= (v - u);\n                dis += 1;\n                ans.pb(dis);\n                continue;\n            }else {\n                auto ne = se.upper_bound({{v - 1, v}, 0});\n                if(ne == se.begin()) {\n                    se.insert({{u, v}, v - u});\n                    dis -= (v - u);\n                    dis += 1;\n                    ans.pb(dis);\n                }else {\n                    ne --;\n                    auto t = *ne;\n                    if(t.fi.se <= u) {\n                        se.insert({{u, v}, v - u});\n                        dis -= (v - u);\n                        dis += 1;\n                        ans.pb(dis);\n                    }else {\n                        if(t.fi.fi <= u && t.fi.se >= v) {\n                            ans.pb(dis);\n                        }else {\n                            while(1) {\n                                auto cur = *ne;\n                                if(cur.fi.fi >= u\n                                && cur.fi.se <= v) {\n                                    dis -= 1;\n                                    dis += cur.se;\n                                }else break;\n                                if(ne == se.begin()) {\n                                    se.erase(ne);\n                                    break;\n                                }else {\n                                    auto t = ne;\n                                    ne --;\n                                    se.erase(t);\n                                }\n                            }\n                            se.insert({{u, v}, v - u});\n                            dis -= (v - u);\n                            dis += 1;\n                            ans.pb(dis);\n                        }\n                    }\n                }\n            }\n            \n            \n        }\n        return ans;\n    }\n\n    \n};",
    "submit_ts": "1722742799",
    "subm_id": "552346938"
}