{
    "username": "katkarohitr",
    "submission": "class Solution {\n    const int MOD = 1e9 + 7;\npublic:\n    int numberOfPermutations(int n, vector<vector<int>>& requirements) {\n     int max_inversions = n * (n - 1) / 2;\n    vector<vector<int>> dp(n + 1, vector<int>(max_inversions + 1, 0));\n    dp[0][0] = 1;\n\n    for (int k = 1; k <= n; ++k) {\n        vector<int> prefix_sum(max_inversions + 1, 0);\n        for (int inv = 0; inv <= max_inversions; ++inv) {\n            prefix_sum[inv] = dp[k-1][inv];\n            if (inv > 0) {\n                prefix_sum[inv] = (prefix_sum[inv] + prefix_sum[inv - 1]) % MOD;\n            }\n        }\n        \n        for (int inv = 0; inv <= max_inversions; ++inv) {\n            if (inv < k) {\n                dp[k][inv] = prefix_sum[inv];\n            } else {\n                dp[k][inv] = (prefix_sum[inv] - prefix_sum[inv - k] + MOD) % MOD;\n            }\n        }\n    }\n\n    vector<int> valid(n + 1, -1);\n    for (auto& req : requirements) {\n        valid[req[0] + 1] = req[1];\n    }\n\n    vector<vector<int>> dp2(n + 1, vector<int>(max_inversions + 1, 0));\n    dp2[0][0] = 1;\n\n    for (int k = 1; k <= n; ++k) {\n        vector<int> prefix_sum(max_inversions + 1, 0);\n        for (int inv = 0; inv <= max_inversions; ++inv) {\n            prefix_sum[inv] = dp2[k-1][inv];\n            if (inv > 0) {\n                prefix_sum[inv] = (prefix_sum[inv] + prefix_sum[inv - 1]) % MOD;\n            }\n        }\n        \n        for (int inv = 0; inv <= max_inversions; ++inv) {\n            if (inv < k) {\n                dp2[k][inv] = prefix_sum[inv];\n            } else {\n                dp2[k][inv] = (prefix_sum[inv] - prefix_sum[inv - k] + MOD) % MOD;\n            }\n        }\n        \n        if (valid[k] != -1) {\n            for (int inv = 0; inv <= max_inversions; ++inv) {\n                if (inv != valid[k]) {\n                    dp2[k][inv] = 0;\n                }\n            }\n        }\n    }\n    \n    return dp2[n][valid[n]];\n    }\n};",
    "submit_ts": 1719069345.0
}