{
    "username": "mintujupally",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        long long ans=0;\n        int n=nums.size();\n        vector<vector<int>> dp(31, vector<int> (n+1, 0));\n        for(int i=0; i<n; i++)\n        {\n            for(int j=0; j<31; j++)\n            {\n                dp[j][i+1]=dp[j][i]+((nums[i]>>j)&1);\n            }\n        }\n\n        int l=0;\n        int r=0;\n        while(l<n)\n        {\n            // cout<<l<<\" \"<<r<<\" = \"<<ans<<endl;\n           \n            int s=-1;\n            while(r<n && (nums[r]&k)>=k) \n            {\n                // cout<<\"  r - \"<<r<<endl;\n                if(s==-1)\n                {\n                    int andval=0;\n                    for(int j=0; j<31; j++)\n                    {\n                        if(dp[j][r+1]-dp[j][l]==r+1-l) andval^=(1<<j);\n                    }\n                    if(andval==k) s=r;\n                }\n\n                ++r;\n            }\n            if(s!=-1) ans+=r-s;\n            else\n            {\n                l=r=l+1;\n                continue;\n            }\n            // cout<<\"  \"<<l<<\" - \"<<s<<\" - \"<<r<<endl;\n            ++l;\n\n            while(l<r)\n            {\n                s=max(s, l);\n                while(s<r)\n                {\n                    int andval=0;\n                    for(int j=0; j<31; j++)\n                    {\n                        // cout<<\"    j = \"<<j<<\" - \"<<dp[j][s+1]<<\", \"<<dp[j][l]<<endl;\n                        if(dp[j][s+1]-dp[j][l]==s+1-l) andval|=(1<<j);\n                    }\n                    // cout<<\"    \"<<andval<<endl;\n                    if(andval==k) break;\n                    ++s;\n                }\n                // cout<<\"  \"<<l<<\" - \"<<s<<\" - \"<<r<<endl;\n                if(s==r)\n                {\n                    l=r;\n                    break;\n                }\n                ans+=r-s;\n                ++l;\n            }\n        }\n\n        return ans;\n    }\n};",
    "submit_ts": "1720280511",
    "subm_id": "1311792120"
}