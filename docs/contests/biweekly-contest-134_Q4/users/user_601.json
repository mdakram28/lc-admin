{
    "username": "singh_ujjain07",
    "submission": "class Solution {\npublic:\n    int check(vector<int> &sbit,int l,int r){\n        int z=sbit[r];\n        if(l) z-=sbit[l-1];\n        return z;\n    }\n    bool check1(vector<vector<int>>&v,int l,int r,int k){\n        for(int i=0;i<32;i++){\n            if((k&(1<<i))==0){\n                int x=v[i][r];\n                if(l) x-=v[i][l-1];\n                if(!x) return false;\n            }\n        }\n        return true;\n    }\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n=nums.size();\n        vector<int> sbit(n,0);\n        for(int i=0;i<n;i++){\n            if((nums[i]&k) ==k) sbit[i]=1;\n            if(i) sbit[i]+=sbit[i-1];\n        }\n        vector<vector<int>> v(32,vector<int>(n,0));\n        for(int i=0;i<32;i++){\n            if((k&(1<<i))==0){\n                for(int j=0;j<n;j++){\n                    if((nums[j]&(1<<i))==0) v[i][j]=1;\n                    if(j) v[i][j]+=v[i][j-1];\n                }\n            }\n        }\n        long long ans=0;\n        for(int i=0;i<n;i++){\n            if(!sbit[i]) continue;\n            if(i && sbit[i]-sbit[i-1]==0) continue;\n            int l=i,r=n-1;\n            while(r-l>1){\n                int mid=(l+r)>>1;\n                if(check(sbit,i,mid)==mid-i+1) l=mid;\n                else r=mid-1;\n            }\n            int rr=0;\n            if(check(sbit,i,r)==r-i+1) rr=r;\n            else if(check(sbit,i,l)==l-i+1) rr=l;\n            else continue;\n            l=i,r=rr;\n            while(r-l>1){\n                int mid=(l+r)>>1;\n                if(!check1(v,i,mid,k)) l=mid+1;\n                else r=mid;\n            }\n            if(check1(v,i,l,k)) ans+=rr-l+1;\n            else if(check1(v,i,r,k)) ans+=rr-r+1;\n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720279885",
    "subm_id": "1311768972"
}