{
    "username": "WJ Sun",
    "submission": "class Solution {\npublic:\n    using ll = long long;\n    \n    vector<ll> countKConstraintSubstrings(string s, int k, vector<vector<int>>& queries) {\n        vector<ll> res;\n        \n        int n = s.size();\n        vector<int> preS0(n+1);\n        vector<int> preS1(n+1);\n        \n        for (int i = 0; i < n; ++i) {\n            preS0[i+1] = preS0[i] + (s[i] == '0');\n            preS1[i+1] = preS1[i] + (s[i] == '1');\n        }\n\n        auto isValid = [&](int i, int j) {\n            int zero = preS0[j+1] - preS0[i];\n            int one = preS1[j+1] - preS1[i];\n            // cout << i << \" \" << j << \" \" << zero << \" \" << one << \"\\n\";\n            return zero <= k || one <= k;\n        };\n        \n        vector<int> v(n), v2(n, -1);\n        for (int i = 0, j = 0; i < n; ++i) {\n            while (j+1 < n && isValid(i, j+1)) {\n                if (v2[j] == -1) v2[j] = i;\n                j++;\n            }\n            if (v2[j] == -1) v2[j] = i;\n            v[i] = j - i + 1;\n        }\n        \n        vector<ll> preSv(n+1);\n        for (int i = 0; i < n; ++i) {\n            preSv[i+1] = preSv[i] + v[i];\n        }\n        \n//         cout << \"\\n\";\n//         for (auto j : v) cout << j << \" \";\n//         cout << \"\\n\";\n        \n        \n//         for (auto j : v2) cout << j << \" \";\n//         cout << \"\\n\";\n        \n//         for (auto j : preSv) cout << j << \" \";\n//         cout << \"\\n\";\n        \n        // xxx_yyyyy\n        for (auto q : queries) {\n            int x = q[0], y = q[1];\n            ll a = 0, b = 0;\n            \n            int p = v2[y];\n            if (p <= x) {\n                b = (2ll + y - x) * (1ll + y - x) / 2;\n            } else {\n                a = preSv[p] - preSv[x]; // [x, p-1]\n                b = (2ll + y - p) * (1ll + y - p) / 2;\n            }\n            // cout << p << \" \" << a << \" \" << b << \"\\n\";\n            res.push_back(a + b);\n        }\n        \n        return res;\n    }\n};",
    "submit_ts": "1723952084",
    "subm_id": "556409502"
}