{
    "username": "cleave_purple",
    "submission": "#define ll long long\nclass Solution {\npublic:\n    long long maximumValueSum(vector<vector<int>>& board) {\n        \n        int n = board.size(),m = board[0].size();\n        \n        \n        int i,j,k;\n        vector<vector<pair<ll,ll>>> cols(n);\n        \n        for(i=0;i<n;i++) {\n            for(j=0;j<m;j++) {\n                cols[i].push_back({board[i][j],j});\n            }\n            \n            sort(cols[i].begin(),cols[i].end(),greater<pair<ll,ll>>());\n        }\n        \n        priority_queue<vector<ll>,vector<vector<ll>>> pq;\n        \n        \n        ll best[m+1][m+1];\n        \n        for(i=0;i<=m;i++) {\n            for(j=0;j<=m;j++) {\n                best[i][j] = -1e16;\n            }\n        }\n        \n        auto put = [&](ll c1,ll c2,ll val) {\n            if(c1> c2) {\n                swap(c1,c2);\n            }\n            \n            if(best[c1][c2] < val) {\n                best[c1][c2] = val;\n                pq.push({val,c1,c2});\n            }\n        };\n        \n        for(i=0;i<3;i++){\n            for(j=0;j<3;j++) {\n                \n                if(cols[0][i].second != cols[1][j].second) {\n                    put(cols[0][i].second,cols[1][j].second,cols[0][i].first + cols[1][j].first);                    \n                }\n                \n            }\n        }\n        \n        int x,y;\n\n        ll res = -1e14;\n        for(i=2;i<n;i++) {\n            \n            vector<vector<ll>> aux;\n            map<vector<ll>,int> mp;\n            while(!pq.empty() && aux.size() < 3*n) {\n                \n                auto top = pq.top();pq.pop();\n                \n                if(mp.find({top[1],top[2]}) != mp.end()) {\n                    continue;\n                }\n                \n                aux.push_back(top);\n                mp[{top[1],top[2]}] = 1;\n                \n            }\n            \n            for(j=0;j<3;j++) {\n                \n                for(auto &a : aux) {\n                    // cout<<a[1]<<\" \"<<a[2]<<\" \"<<cols[i][j].second<<\" \"<<a[0]<<\" \"<<cols[i][j].first<<\" \"<<a[0]+cols[i][j].first<<endl;\n                    if(cols[i][j].second != a[1] && cols[i][j].second != a[2]){\n                        res = max(res,cols[i][j].first + a[0]);\n                    }\n                }\n            }\n            \n            for(auto &a : aux) {\n                pq.push(a);\n            }\n            \n            \n            for(j=i-1;j>=0;j--) {\n                \n                for(x=0;x<3;x++) {\n                    for(y=0;y<3;y++) {\n                        if(cols[i][x].second != cols[j][y].second) {\n                            put(cols[i][x].second,cols[j][y].second,cols[i][x].first + cols[j][y].first);\n                        }\n                    }\n                }\n                \n            }\n            \n            \n        }\n        \n        \n        return res;\n        \n    }\n};",
    "submit_ts": "1723909874",
    "subm_id": "1359208964"
}