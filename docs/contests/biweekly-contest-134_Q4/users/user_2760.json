{
    "username": "saral11",
    "submission": "class Solution {\npublic:\n    bool check(int mid, vector<int> &a, int k, int i, vector<vector<int>> &ind){\n        int cur = 0;\n        \n        for(int j = 0; j < 31; ++j){\n            if(ind[j][mid+1] - ind[j][i] == mid-i+1) cur += (1 << j);\n        }\n        \n        if(cur < k) return 0;\n        return 1;\n    }   \n    bool check1(int mid, vector<int> &a, int k, int i, vector<vector<int>> &ind){\n        int cur = 0;\n        \n         for(int j = 0; j < 31; ++j){\n            if(ind[j][mid+1] - ind[j][i] == mid-i+1) cur += (1 << j);\n        }\n        \n        if(cur <= k) return 0;\n        return 1;\n    }  \n    \n    long long countSubarrays(vector<int>& a, int k) {\n        int n = a.size();\n        long long ans = 0;\n        \n        vector<vector<int>> ind(31, vector<int>(n+1));\n        \n        for(int i = 0; i < n; ++i){\n            for(int j = 0; j < 31; ++j){\n                if((a[i] & (1 << j)) ) ind[j][i+1] = 1;\n            }\n        }\n        \n        for(int i = 0; i < 31; ++i){\n            for(int j = 0; j < n; ++j){\n                ind[i][j+1] += ind[i][j];\n            }\n        }\n        \n        for(int i = 0; i < n; ++i){\n            if(a[i] < k) continue;\n            \n            int l = i-1, r = n;\n            \n            while(r - l > 1){\n                int mid = (l+r)/2;\n                if(check(mid,a,k,i,ind)) l = mid;\n                else r = mid;\n            }\n            // cout << i << \" \" << l << endl;\n            \n            if(a[i] == k){\n                ans += l-i+1;\n                continue;\n            }\n            \n            int l2 = i-1; r = n;\n            while(r - l2 > 1){\n                int mid = (l2+r)/2;\n                // if(i == 2) cout << mid << endl;\n                if(check1(mid,a,k,i,ind)) {\n                    // cout << mid << endl;\n                    l2 = mid;\n                }\n                else r = mid;\n            }\n            // cout << i << \" \" << l2 << endl;\n            \n            int sz = abs(l-l2);\n            ans += sz;\n        }\n        return  ans;\n    }\n};",
    "submit_ts": "1720281481",
    "subm_id": "1311826760"
}