{
    "username": "yzy",
    "submission": "class Solution {\npublic:\n    typedef long long ll;\n    ll pos[100005];\n    ll sum0[100005],sum1[100005];\n    char a[100005];\n    ll sum[100005];\n    vector<long long> countKConstraintSubstrings(string s, int k, vector<vector<int>>& queries) {\n        \n        int n=s.length();\n        for(int i=1;i<=n;i++)a[i]=s[i-1];\n        if(a[1]=='1')sum1[1]=1;\n        else sum0[1]=1;\n        for(int i=2;i<=n;i++){\n            sum1[i]=sum1[i-1];\n            sum0[i]=sum0[i-1];\n            if(a[i]=='1')sum1[i]++;\n            else sum0[i]++;\n        }\n        for(int i=1;i<=n;i++){\n            ll l=i,r=n,ans=-1;\n            while(l<=r){\n                ll mid=(l+r)/2;\n                if(sum1[mid]-sum1[i-1]<=k||sum0[mid]-sum0[i-1]<=k){\n                    ans=mid;\n                    l=mid+1;\n                }\n                else{\n                    r=mid-1;\n                }\n            }\n            pos[i]=ans;\n            sum[i]=sum[i-1]+pos[i];\n          \n        }\n\n        vector<ll>res;\n        for(auto &c:queries){\n            c[0]++,c[1]++;\n            ll l=c[0],r=c[1],ans=-1;\n     \n            while(l<=r){\n                ll mid=(l+r)/2;\n                if(pos[mid]<c[1]){\n                    l=mid+1;\n                    ans=mid;\n                }\n                else{\n                    r=mid-1;\n                }\n            }\n            \n            ll x=(c[1]-c[0]+1);\n            if(ans==-1)res.push_back(x*(x+1)/2);\n            else res.push_back(x*(x+1)/2-(ans-c[0]+1)*c[1]+(sum[ans]-sum[c[0]-1]));\n        }\n        return res;\n    }\n};",
    "submit_ts": "1723951909",
    "subm_id": "556408414"
}