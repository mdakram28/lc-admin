{
    "username": "pensive-grothendieckgii",
    "submission": "class Solution {\n    \n    \n    struct Fenwick{\n        int n;\n        vector<int> tr;\n        inline int lowbit(int x) {return x & (-x);}\n        Fenwick(int n) : n(n), tr(n + 1) {}\n        void modify(int x, int v) {\n            while (x <= n) {\n                tr[x] += v;\n                x += lowbit(x);\n            }\n        }\n        int query(int x) {\n            int res = 0;\n            while (x) {\n                res += tr[x];\n                x -= lowbit(x);\n            }\n            return res;\n        }\n        int query(int l, int r) {\n            if (l > r) return 0;\n            if (l > 0) return query(r) - query(l - 1);\n            return query(r);\n        }\n        void modify(int l, int r, int v) {\n            modify(l, v);\n            if (r + 1 <= n) modify(r + 1, -v);\n        }\n    };\npublic:\n    vector<int> countOfPeaks(vector<int>& nums, vector<vector<int>>& queries) {\n        int n = nums.size();\n        vector<int> cnt(n);\n        Fenwick tr(n);\n        for (int i = 1; i < n - 1; i ++) {\n            if (nums[i] > nums[i - 1] && nums[i] > nums[i + 1]) {\n                tr.modify(i, 1);\n            }\n        }\n        auto check = [&](int x) {\n            if (x <= 0 || x >= n - 1) return 0;\n            if (nums[x] > nums[x - 1] && nums[x] > nums[x + 1]) return 1;\n            return 0;\n        };\n        vector<int> ans;\n        for (auto v : queries) {\n            if (v[0] == 1) {\n                ans.push_back(tr.query(v[1] + 1, v[2] - 1));\n            } else {\n                int id = v[1], val = v[2];\n                if (check(id)) tr.modify(id, -1);\n                if (check(id - 1)) tr.modify(id - 1, -1);\n                if (check(id + 1)) tr.modify(id + 1, -1);\n                nums[id] = val;\n                if (check(id)) tr.modify(id, 1);\n                if (check(id - 1)) tr.modify(id - 1, 1);\n                if (check(id + 1)) tr.modify(id + 1, 1);\n            }\n        }\n        return ans;\n    } \n};",
    "submit_ts": 1718506141.0
}