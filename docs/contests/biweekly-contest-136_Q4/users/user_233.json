{
    "username": "grundy_number",
    "submission": "class Solution {\npublic:\n    void dfs1(vector<vector<int>> &g, int u, int p, vector<int> &t, vector<vector<pair<int,int>>> &c) {\n        vector<pair<int, int>> b;\n        for (auto v: g[u]) {\n            if (v != p) {\n                dfs1(g, v, u, t, c);\n                if (v % 2 == 1) {\n                    t[u] = max(t[u], t[v] + 1);\n                    b.push_back({t[v] + 1, v});\n                } else {\n                    t[u] = max(t[u], t[v] + 2);\n                    b.push_back({t[v] + 2, v});\n                }\n            }\n        }\n        sort(b.rbegin(), b.rend());\n        for (int i = 0; i < 2 && i < b.size(); ++i) {\n            c[u].push_back(b[i]);\n        }\n        while (c[u].size() < 2) {\n            c[u].push_back({0, -1});\n        }\n    }\n    \n    void dfs2(vector<vector<int>> &g, int u, int p, vector<int> &ans, \n              vector<int> &t, vector<vector<pair<int,int>>> &c, int fp) {\n        \n        int eu = 0;\n        if (u % 2 == 0) {\n            eu += 2;\n        } else {\n            ++eu;\n        }\n        if (p == -1) {\n            ans[u] = t[u];\n        } else {\n            ans[u] = max(t[u], fp);    \n        }\n        \n        for (auto v: g[u]) {\n            if (v != p) {\n                int d = c[u][0].first;\n                if (c[u][0].second == v) {\n                    d = c[u][1].first;\n                }\n                int fu = max(fp, d) + eu;\n                dfs2(g, v, u, ans, t, c, fu);\n            }\n        }\n        \n    }\n    \n    \n    vector<int> timeTaken(vector<vector<int>>& edges) {\n        int n = edges.size() + 1;\n        vector<vector<int>> g(n);\n        for (auto &e: edges) {\n            g[e[0]].push_back(e[1]);\n            g[e[1]].push_back(e[0]);\n        }\n        vector<int> ans(n), t(n);\n        vector<vector<pair<int, int>>> c(n);\n        \n        dfs1(g, 0, -1, t, c);\n        dfs2(g, 0, -1, ans, t, c, 0);\n        \n        return ans;\n    }\n};",
    "submit_ts": "1722699405",
    "subm_id": "1343210605"
}