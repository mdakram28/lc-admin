{
    "username": "azesx",
    "submission": "using ll = long long;\n#define _rep_sel(a1,a2,a3,a4,exp,...) exp\n#define rep_n(n) for(ll i=0;i<(ll)(n);++i)\n#define rep_in(i,n) for(ll i=0;i<(ll)(n);++i)\n#define rep_isn(i,s,n) for(ll i=(ll)(s);i<(ll)(n);++i)\n#define rep_isninc(i,s,n,inc) for(ll i=(ll)(s);i<(ll)(n);i+=(ll)(inc))\n#define rep(...) _rep_sel(__VA_ARGS__,rep_isninc,rep_isn,rep_in,rep_n)(__VA_ARGS__)\n#define rrep(i,j,n,m) for(ll i=0;i<(ll)(n);++i) for(ll j=0;j<(ll)(m);++j)\n#define per(i,n) for(ll i=(ll)(n);i>=(ll)0;--i)\n#define each(it, a) for (const auto& it: a)\nconstexpr ll inf64 = 1e18+1;\nconstexpr int inf32 = 1e9+1;\ntemplate<class T, class TVal> inline bool chmax(T &a, const TVal &b) { return (a < b ? a = b, 1 : 0); }\ntemplate<class T, class TVal> inline bool chmin(T &a, const TVal &b) { return (a > b ? a = b, 1 : 0); }\ntemplate<typename T1, typename T2 = T1> struct v2 { T1 x; T2 y; friend strong_ordering operator<=>(const v2&, const v2&) = default; };\ntemplate<typename T1, typename T2 = T1, typename T3 = T1> struct v3 { T1 x; T2 y; T3 z; friend strong_ordering operator<=>(const v3&, const v3&) = default; };\ntemplate<typename T> using vec = vector<T>;\ntemplate<typename T> using vvec = vector<vector<T>>;\nusing veci = vec<ll>; using vveci = vvec<ll>;\nusing vecb = vec<bool>; using vvecb = vvec<bool>;\nusing v2i = v2<ll>; using v3i = v3<ll>;\ntemplate<typename T> using pq_dec = priority_queue<T>;\ntemplate<typename T> using pq_inc = priority_queue<T, vector<T>, greater<T>>;\n\n\nclass Solution {\npublic:\n    int minFlips(vector<vector<int>>& G) {\n        int total = 0;\n        int n = G.size();\n        int m = G[0].size();\n        rrep(i, j, G.size(), G[i].size()) total+= G[i][j];\n        set<int> changed;\n        int ch4 = 0;\n        rep(i, G.size() >> 1)\n        {\n            rep(j, G[i].size() >> 1)\n            {\n                int a1 = G[i][j];\n                int a2 = G[i][G[i].size() - j - 1];\n                int a3 = G[G.size() - i - 1][j];\n                int a4 = G[G.size() - i - 1][G[i].size() - j - 1];\n                int t = a1 + a2 + a3 + a4;\n                if(t == 2)\n                {\n                    changed.insert(min(t, 4 - t));\n                    total += 2;\n                    ch4 += 2;\n                }\n                else if(t == 1)\n                {\n                    total -= 1;\n                    ch4 += 1;\n                }\n                else if(t == 3)\n                {\n                    total += 1;\n                    ch4 += 1;\n                }\n            }\n        }\n\n        int ch2 = 0;\n        int totalInner = 0;\n        if(G.size() % 2)\n        {\n            int i = G.size() >> 1;\n            rep(j, G[0].size() >> 1)\n            {\n                totalInner += G[i][j];\n                totalInner += G[i][G[i].size() - j - 1];\n                if(G[i][j] != G[i][G[i].size() - j - 1])\n                {\n                    ch2++;\n                    total++;\n                }\n            }\n        }\n\n        if(m % 2)\n        {\n            int j = m >> 1;\n            rep(i, G.size() >> 1)\n            {\n                totalInner += G[i][j];\n                totalInner += G[n - i - 1][j];\n                if(G[i][j] != G[n - i - 1][j])\n                {\n                    ch2++;\n                    total++;\n                }\n            }\n        }\n\n        int cc = ch2 + ch4;\n        int left = total % 4;\n        if(left == 3)\n        {\n            if(G[n / 2][m / 2] == 1)\n            {\n                left = 2;\n                cc++;\n            }\n            else\n            {\n                left = 0;\n                cc++;\n            }\n        }\n\n        if(left == 1)\n        {\n            if(G[n / 2][m / 2] == 1)\n            {\n                left = 0;\n                cc++;\n            }\n            else\n            {\n                left = 2;\n                cc++;\n            }\n        }\n\n        if(left != 0)\n        {\n            if(ch2 == 0 && !changed.contains(2))\n            {\n                cc+=2;\n            }\n            else if(ch2 == 0 && totalInner % 4)\n            {\n                cc += 2;\n            }\n        }\n\n        return cc;\n    }\n};",
    "submit_ts": "1722697963",
    "subm_id": "1343165081"
}