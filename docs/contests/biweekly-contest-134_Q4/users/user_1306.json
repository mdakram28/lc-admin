{
    "username": "InTiMiDaToR",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& a, int k) {\n        int n=a.size();\n        long long ans=0;\n        int MAXN =n;\n        int K=29;\n        \n        int lg[MAXN+1];\n        lg[1] = 0;\n        for (int i = 2; i <= MAXN; i++)\n            lg[i] = lg[i/2] + 1;\n        \n        int st[K + 1][MAXN];\n\n        std::copy(a.begin(), a.end(), st[0]);\n\n        for (int i = 1; i <= K; i++)\n            for (int j = 0; j + (1 << i) <= n; j++)\n                st[i][j] = st[i - 1][j] & st[i - 1][j + (1 << (i - 1))];\n        \n        \n        \n        \n        for(int i=0;i<n;i++)\n        {\n            int lo=i;\n            int hi=n-1;\n            int sta=1e9;\n            int en=-1;\n            while(lo<=hi)\n            {\n                int mid=(lo+hi)/2;\n                int R= mid;\n                int L=i;\n                int ij = lg[R - L + 1];\n                int nowk = (st[ij][L] & st[ij][R - (1 << ij) + 1]);\n                \n                if(nowk>k)\n                {\n                    lo=mid+1;\n                }\n                else if(nowk<k)\n                    hi=mid-1;\n                else{\n                    hi=mid-1;\n                     sta=min(sta,mid);\n                }\n                   \n                    \n            }\n            \n            lo=i;\n            hi=n-1;\n            \n            while(lo<=hi)\n            {\n                int mid=(lo+hi)/2;\n                \n                 int R= mid;\n                int L=i;\n                int ij = lg[R - L + 1];\n                int nowk = (st[ij][L] & st[ij][R - (1 << ij) + 1]);\n                \n                if(nowk>k)\n                {\n                    lo=mid+1;\n                }\n                else if(nowk<k)\n                    hi=mid-1;\n                else{\n                    lo=mid+1;\n                    en=max(en,mid);\n                     \n                }\n                   \n                    \n            }\n            \n            //cout<<st<<\" \"<<en<<endl;\n            \n            ans+=max((long long)0,(long long)en-sta+1);\n        }\n        \n        return ans;\n    }\n};",
    "submit_ts": "1720280347",
    "subm_id": "1311785949"
}