{
    "username": "Yogeeky",
    "submission": "class Solution {\npublic:\n    long long countSubarrays(vector<int>& nums, int k) {\n        int n=nums.size();\n        vector<vector<int>>pref(n,vector<int>(32,0));\n        for(int i=0;i<n;i++)\n        {\n            for(int j=0;j<32;j++)\n            {\n                if((1<<j)&nums[i])\n                   pref[i][j]++;\n            }\n            if(i)\n            {\n                 for(int j=0;j<32;j++)\n                {\n                    pref[i][j]+=pref[i-1][j];\n                }\n            }\n        }\n       \n\n        // 0 1 to 3\n        // 1 1 to 4\n        // 2 1 to\n        long long ans=0; \n\n        auto pos=[&](int bit,int l,int r,int st)\n        {\n           int ans=-1;\n           r=n-1;\n           while(l<=r)\n           {\n              int mid=(l+(r-l)/2);\n              int val=pref[mid][bit];\n              if(st-1>=0)\n               val-=pref[st-1][bit];\n            //    cout<<val<<\" \"<<mid<<\"kdadbjcew\\n\";\n              if(val==mid-st+1)\n              {\n                ans=mid;\n                l=mid+1;\n              }\n              else\n              {\n                r=mid-1;\n              }\n           }\n           return ans;\n        };\n        \n        for(int i=0;i<n;i++)\n        {\n            int xx=-1;\n            int l=i;\n            int r=n-1;\n            while(l<=r)\n            {\n                int mid=(l+(r-l)/2);\n                int vv=0; \n                for(int j=0;j<32;j++)\n                {\n                   int x=pref[mid][j];\n                   if(i-1>=0)\n                   {\n                    x-=pref[i-1][j];\n                   }\n                   if(x==mid-i+1)\n                   {\n                    if(vv==0)\n                    {\n                        vv=(1<<j);\n                    }\n                    else\n                    {\n                        vv|=(1<<j);\n                    }\n                   }\n                }\n               \n                if(vv<k)\n                {\n                    r=mid-1;\n                }\n                else if(vv>k)\n                {\n                    l=mid+1;\n                }\n                else\n                {\n                    xx=mid;\n                    l=mid+1;\n                }\n            }\n            \n           int yy=-1;\n\n            l=i;\n            r=n-1;\n            while(l<=r)\n            {\n                int mid=(l+(r-l)/2);\n                int vv=0; \n                for(int j=0;j<32;j++)\n                {\n                   int x=pref[mid][j];\n                   if(i-1>=0)\n                   {\n                    x-=pref[i-1][j];\n                   }\n                   if(x==mid-i+1)\n                   {\n                    if(vv==0)\n                    {\n                        vv=(1<<j);\n                    }\n                    else\n                    {\n                        vv|=(1<<j);\n                    }\n                   }\n                }\n                // cout<<mid<<\" \"<<vv<<\"\\n\";\n              \n               \n                if(vv<k)\n                {\n                    r=mid-1;\n                }\n                else if(vv>k)\n                {\n                    l=mid+1;\n                }\n                else\n                {\n                    yy=mid;\n                    r=mid-1;\n                }\n            }\n            // cout<<xx<<\" \"<<yy<<\"\\n\";\n            if(xx!=-1&&yy!=-1)\n            {\n               \n                ans=ans+(xx-yy+1);\n                // cout<<ans<<\"ans\\n\";\n            }\n            \n        }\n        return ans;\n    }\n};",
    "submit_ts": "1720280893",
    "subm_id": "1311805803"
}