{
    "username": "AntonRaichuk",
    "submission": "typedef long double ld;\n \ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef pair<int,pii> p3;\ntypedef pair<ll,ll> pl;\ntypedef pair<int,pl> p3l;\ntypedef pair<double,double> pdd;\ntypedef vector<int> vi;\ntypedef vector<ld> vd;\n \n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define REP(i,n) FOR(i,0,n)\n#define SORT(v) sort((v).begin(),(v).end())\n#define UN(v) SORT(v),(v).erase(unique((v).begin(),(v).end()),(v).end())\n#define CL(a,b) memset(a,b,sizeof a)\n#define pb push_back\n\n// to_string, stoi, stoll, gcd, __builtin_popcount - already exist\n//\n// unordered_map<int, int> depth;\n// for (auto& [k, v] : depth)\n\nint s[1<<18];\n\nvoid add(int p,int v=1){\n    p+=(1<<17);\n    while(p){\n        s[p]+=v;\n        p>>=1;\n    }\n}\n\nint sum(int p1,int p2){\n    p1+=(1<<17);\n    p2+=(1<<17);\n    int r=0;\n    while(p1<=p2){\n        if(p1&1)r+=s[p1];\n        if(!(p2&1))r+=s[p2];\n        p1=(p1+1)>>1;\n        p2=(p2-1)>>1;\n    }\n    return r;\n}\n\nclass Solution {\npublic:\n    vector<int> countOfPeaks(vector<int>& a, vector<vector<int>>& q) {\n        CL(s,0);\n        REP(i,a.size())if(i && i+1<a.size())if(a[i]>a[i-1] && a[i]>a[i+1])add(i);\n        vi r;\n        REP(i,q.size()){\n            if(q[i][0]==1){\n                r.pb(sum(q[i][1]+1,q[i][2]-1));\n            }else{\n                FOR(j,-1,2)if(q[i][1]+j>=1 && q[i][1]+j+1<a.size()){\n                    int p = q[i][1]+j;\n                    if(a[p]>a[p-1] && a[p]>a[p+1])add(p,-1);                    \n                }\n                a[q[i][1]]=q[i][2];\n                FOR(j,-1,2)if(q[i][1]+j>=1 && q[i][1]+j+1<a.size()){\n                    int p = q[i][1]+j;\n                    if(a[p]>a[p-1] && a[p]>a[p+1])add(p);                    \n                }\n            }\n        }\n        return r;\n    }\n};",
    "submit_ts": "1718506014",
    "subm_id": "1289603708"
}