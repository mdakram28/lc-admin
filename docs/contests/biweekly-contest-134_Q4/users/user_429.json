{
    "username": "soundboard",
    "submission": "class Solution {\npublic:\n    \n    using ll = long long;\n    \n    \nstruct ST{\n    vector<ll>T;vector<int>arr;\n    ST(int n, vector<int>&v)\n    {\n        T.clear();T.resize(4*n);arr=v;\n    }\n\n\n    void build(ll node,ll l,ll r)\n    {\n        if(l==r)\n        {\n            T[node]=arr[l];\n            return;\n        }\n\n        ll mid = (l+r)/2;\n        build(2*node,l,mid);\n        build(2*node+1,mid+1,r);\n\n        T[node] = (T[2*node]&T[2*node+1]);\n    }\n\n    ll query(ll node,ll l,ll r,ll lq,ll rq)\n    {\n        if(l>=lq && r<=rq) return T[node];\n        else if(l>rq || r<lq) return ((1ll<<40)-1);\n\n        ll mid = (l+r)/2;\n        return ((query(2*node,l,mid,lq,rq)&query(2*node+1,mid+1,r,lq,rq)));\n    }\n};\n    \n    long long countSubarrays(vector<int>& arr, int k) {\n        ll ans = 0, n = arr.size();\n        \n        ST a(n,arr);\n        a.build(1,0,n-1);\n        \n        for(int i=0;i<n;i++)\n        {\n            ll l=i, r=n-1, imn=n-1,imx=i;\n            while(l<=r)\n            {\n                ll mid = (l+r)/2;\n                ll val = a.query(1,0,n-1,i,mid);\n                if(val>=k)\n                {\n                    if(val==k)\n                    {\n                        imx = mid;\n                    }\n                    l = mid+1;\n                }\n                else\n                {\n                    r = mid-1;\n                }\n            }\n            \n            l=i, r=n-1, imn=n-1;\n            while(l<=r)\n            {\n                ll mid = (l+r)/2;\n                ll val = a.query(1,0,n-1,i,mid);\n                if(val<=k)\n                {\n                    if(val==k)\n                    {\n                        imn = mid;\n                    }\n                    r = mid-1;\n                    \n                }\n                else\n                {\n                   l = mid+1;\n                }\n            }\n            \n            // cout<<i<<\" \"<<imn<<\" \"<<imx<<endl;\n            \n            if(a.query(1,0,n-1,i,imx)==k && a.query(1,0,n-1,i,imn)==k)\n            {\n                ans+=(imx-imn+1);\n            }\n        }\n        \n        return ans;\n    }\n};",
    "submit_ts": "1720278922",
    "subm_id": "1311729984"
}